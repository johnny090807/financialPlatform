"use strict";(self.webpackChunkfinancialPlatform=self.webpackChunkfinancialPlatform||[]).push([[179],{2744:(et,we,B)=>{var l=B(5e3);let X=null;function F(){return X}const ne=new l.OlP("DocumentToken");let te=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Q(){return(0,l.LFG)($)}()},providedIn:"platform"}),n})();const L=new l.OlP("Location Initialized");let $=(()=>{class n extends te{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){H()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){H()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function se(){return new $((0,l.LFG)(ne))}()},providedIn:"platform"}),n})();function H(){return!!window.history.pushState}function fe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function _e(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function me(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function ve(n){const e=(0,l.LFG)(ne).location;return new it((0,l.LFG)(te),e&&e.origin||"")}()},providedIn:"root"}),n})();const He=new l.OlP("appBaseHref");let it=(()=>{class n extends ye{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return fe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+me(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const c=this.prepareExternalUrl(i+me(s));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,s){const c=this.prepareExternalUrl(i+me(s));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(te),l.LFG(He,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),kt=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=fe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let c=this.prepareExternalUrl(i+me(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,s){let c=this.prepareExternalUrl(i+me(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(te),l.LFG(He,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),hn=(()=>{class n{constructor(t,r){this._subject=new l.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=_e(St(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+me(r))}normalize(t){return n.stripTrailingSlash(function wr(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,St(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+me(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+me(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=me,n.joinWithSlash=fe,n.stripTrailingSlash=_e,n.\u0275fac=function(t){return new(t||n)(l.LFG(ye),l.LFG(te))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Ot(){return new hn((0,l.LFG)(ye),(0,l.LFG)(te))}()},providedIn:"root"}),n})();function St(n){return n.replace(/\/index.html$/,"")}const Vn={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var ht=(()=>((ht=ht||{})[ht.Decimal=0]="Decimal",ht[ht.Percent=1]="Percent",ht[ht.Currency=2]="Currency",ht[ht.Scientific=3]="Scientific",ht))(),Ze=(()=>((Ze=Ze||{})[Ze.Decimal=0]="Decimal",Ze[Ze.Group=1]="Group",Ze[Ze.List=2]="List",Ze[Ze.PercentSign=3]="PercentSign",Ze[Ze.PlusSign=4]="PlusSign",Ze[Ze.MinusSign=5]="MinusSign",Ze[Ze.Exponential=6]="Exponential",Ze[Ze.SuperscriptingExponent=7]="SuperscriptingExponent",Ze[Ze.PerMille=8]="PerMille",Ze[Ze.Infinity=9]="Infinity",Ze[Ze.NaN=10]="NaN",Ze[Ze.TimeSeparator=11]="TimeSeparator",Ze[Ze.CurrencyDecimal=12]="CurrencyDecimal",Ze[Ze.CurrencyGroup=13]="CurrencyGroup",Ze))();function rr(n,e){const t=(0,l.cg1)(n),r=t[l.wAp.NumberSymbols][e];if(void 0===r){if(e===Ze.CurrencyDecimal)return t[l.wAp.NumberSymbols][Ze.Decimal];if(e===Ze.CurrencyGroup)return t[l.wAp.NumberSymbols][Ze.Group]}return r}function Cr(n,e){return(0,l.cg1)(n)[l.wAp.NumberFormats][e]}const wn=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function yc(n,e,t,r,i,s,c=!1){let h="",g=!1;if(isFinite(n)){let y=function oi(n){let r,i,s,c,h,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;"0"===e.charAt(s);s++);if(s===(h=e.length))r=[0],i=1;else{for(h--;"0"===e.charAt(h);)h--;for(i-=s,r=[],c=0;s<=h;s++,c++)r[c]=Number(e.charAt(s))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);c&&(y=function Un(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(y));let E=e.minInt,T=e.minFrac,x=e.maxFrac;if(s){const Me=s.match(wn);if(null===Me)throw new Error(`${s} is not a valid digit info`);const Be=Me[1],ke=Me[3],mt=Me[5];null!=Be&&(E=zr(Be)),null!=ke&&(T=zr(ke)),null!=mt?x=zr(mt):null!=ke&&T>x&&(x=T)}!function Sr(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const s=Math.min(Math.max(e,i),t);let c=s+n.integerLen,h=r[c];if(c>0){r.splice(Math.max(n.integerLen,c));for(let T=c;T<r.length;T++)r[T]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,c=s+1),r[0]=0;for(let T=1;T<c;T++)r[T]=0}if(h>=5)if(c-1<0){for(let T=0;T>c;T--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[c-1]++;for(;i<Math.max(0,s);i++)r.push(0);let g=0!==s;const y=e+n.integerLen,E=r.reduceRight(function(T,x,N,U){return U[N]=(x+=T)<10?x:x-10,g&&(0===U[N]&&N>=y?U.pop():g=!1),x>=10?1:0},0);E&&(r.unshift(E),n.integerLen++)}(y,T,x);let N=y.digits,U=y.integerLen;const K=y.exponent;let le=[];for(g=N.every(Me=>!Me);U<E;U++)N.unshift(0);for(;U<0;U++)N.unshift(0);U>0?le=N.splice(U,N.length):(le=N,N=[0]);const Pe=[];for(N.length>=e.lgSize&&Pe.unshift(N.splice(-e.lgSize,N.length).join(""));N.length>e.gSize;)Pe.unshift(N.splice(-e.gSize,N.length).join(""));N.length&&Pe.unshift(N.join("")),h=Pe.join(rr(t,r)),le.length&&(h+=rr(t,i)+le.join("")),K&&(h+=rr(t,Ze.Exponential)+"+"+K)}else h=rr(t,Ze.Infinity);return h=n<0&&!g?e.negPre+h+e.negSuf:e.posPre+h+e.posSuf,h}function nn(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],s=r[1],c=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],h=c[0],g=c[1]||"";t.posPre=h.substr(0,h.indexOf("#"));for(let E=0;E<g.length;E++){const T=g.charAt(E);"0"===T?t.minFrac=t.maxFrac=E+1:"#"===T?t.maxFrac=E+1:t.posSuf+=T}const y=h.split(",");if(t.gSize=y[1]?y[1].length:0,t.lgSize=y[2]||y[1]?(y[2]||y[1]).length:0,s){const E=i.length-t.posPre.length-t.posSuf.length,T=s.indexOf("#");t.negPre=s.substr(0,T).replace(/'/g,""),t.negSuf=s.substr(T+E).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function zr(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}let ji=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,l.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,l.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.ZZ4),l.Y36(l.aQg),l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Gi{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let qr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Gi(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===s?void 0:s);else if(null!==s){const h=r.get(s);r.move(h,c),Oo(h,i)}});for(let i=0,s=r.length;i<s;i++){const h=r.get(i).context;h.index=i,h.count=s,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Oo(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Oo(n,e){n.context.$implicit=e.item}let sr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new gn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){bc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){bc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class gn{constructor(){this.$implicit=null,this.ngIf=null}}function bc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(e)}'.`)}class Vu{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Wr=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),Yr=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new Vu(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(Wr,9))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})();function rs(n,e){return new l.vHH(2100,"")}const io=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let kp=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw rs();return t.replace(io,r=>r[0].toUpperCase()+r.substr(1).toLowerCase())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=l.Yjl({name:"titlecase",type:n,pure:!0}),n})(),Rs=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!va(t))return null;i=i||this._locale;try{return function Ue(n,e,t){return yc(n,nn(Cr(e,ht.Percent),rr(e,Ze.MinusSign)),e,Ze.Group,Ze.Decimal,t,!0).replace(new RegExp("%","g"),rr(e,Ze.PercentSign))}(ba(t),i,r)}catch(s){throw rs()}}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.soG,16))},n.\u0275pipe=l.Yjl({name:"percent",type:n,pure:!0}),n})(),Cc=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",s,c){if(!va(t))return null;c=c||this._locale,"boolean"==typeof i&&(i=i?"symbol":"code");let h=r||this._defaultCurrencyCode;"code"!==i&&(h="symbol"===i||"symbol-narrow"===i?function Bi(n,e,t="en"){const r=function Ci(n){return(0,l.cg1)(n)[l.wAp.Currencies]}(t)[n]||Vn[n]||[],i=r[1];return"narrow"===e&&"string"==typeof i?i:r[0]||n}(h,"symbol"===i?"wide":"narrow",c):i);try{return function Hi(n,e,t,r,i){const c=nn(Cr(e,ht.Currency),rr(e,Ze.MinusSign));return c.minFrac=function kn(n){let e;const t=Vn[n];return t&&(e=t[2]),"number"==typeof e?e:2}(r),c.maxFrac=c.minFrac,yc(n,c,e,Ze.CurrencyGroup,Ze.CurrencyDecimal,i).replace("\xa4",t).replace("\xa4","").trim()}(ba(t),c,h,r,s)}catch(g){throw rs()}}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.soG,16),l.Y36(l.EJc,16))},n.\u0275pipe=l.Yjl({name:"currency",type:n,pure:!0}),n})();function va(n){return!(null==n||""===n||n!=n)}function ba(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}let oo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const ao="browser";function No(n){return"server"===n}let Np=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new dl((0,l.LFG)(ne),window)}),n})();class dl{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function hl(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const c=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ai(this.window.history)||ai(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ai(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Po extends class $u extends class Z{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){X||(X=n)}(new Po)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ca(){return Gt=Gt||document.querySelector("base"),Gt?Gt.getAttribute("href"):null}();return null==t?null:function Fo(n){ps=ps||document.createElement("a"),ps.setAttribute("href",n);const e=ps.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Gt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function _a(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let ps,Gt=null;const li=new l.OlP("TRANSITION_ID"),zu=[{provide:l.ip1,useFactory:function gr(n,e,t){return()=>{t.get(l.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[li,ne,l.zs3],multi:!0}];class Kr{static init(){(0,l.VLi)(new Kr)}addToWindow(e){l.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},l.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(r=>{const i=l.dqk.getAllAngularTestabilities();let s=i.length,c=!1;const h=function(g){c=c||g,s--,0==s&&r(c)};i.forEach(function(g){g.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Si=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const gs=new l.OlP("EventManagerPlugins");let lo=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const c=i[s];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(gs),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class fl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Di=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),or=(()=>{class n extends Di{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Lo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Lo))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Lo(n){F().remove(n)}const ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ec=/%COMP%/g;function be(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?be(n,i,t):(i=i.replace(Ec,n),t.push(i))}return t}function xt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let En=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ea(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case l.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Sa(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case l.ifc.ShadowDom:return new _l(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=be(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(lo),l.LFG(or),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Ea{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ft[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=ft[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ft[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(l.JOm.DashCase|l.JOm.Important)?e.style.setProperty(t,r,i&l.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&l.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,xt(r)):this.eventManager.addEventListener(e,t,xt(r))}}class Sa extends Ea{constructor(e,t,r,i){super(e),this.component=r;const s=be(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Wu(n){return"_ngcontent-%COMP%".replace(Ec,n)}(i+"-"+r.id),this.hostAttr=function ml(n){return"_nghost-%COMP%".replace(Ec,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class _l extends Ea{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=be(i.id,i.styles,[]);for(let c=0;c<s.length;c++){const h=document.createElement("style");h.textContent=s[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Fp=(()=>{class n extends fl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const yl=["alt","control","meta","shift"],co={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Fr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},qi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Dc=(()=>{class n extends fl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,s.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let c="";if(yl.forEach(g=>{const y=r.indexOf(g);y>-1&&(r.splice(y,1),c+=g+".")}),c+=s,0!=r.length||0===s.length)return null;const h={};return h.domEventName=i,h.fullKey=c,h}static getEventFullKey(t){let r="",i=function uo(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Fr.hasOwnProperty(e)&&(e=Fr[e]))}return co[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),yl.forEach(s=>{s!=i&&qi[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const bl=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:ao},{provide:l.g9A,useValue:function ci(){Po.makeCurrent(),Kr.init()},multi:!0},{provide:ne,useFactory:function Bo(){return(0,l.RDi)(document),document},deps:[]}]),Zu=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function Ku(){return new l.qLn},deps:[]},{provide:gs,useClass:Fp,multi:!0,deps:[ne,l.R0b,l.Lbi]},{provide:gs,useClass:Dc,multi:!0,deps:[ne]},{provide:En,useClass:En,deps:[lo,or,l.AFp]},{provide:l.FYo,useExisting:En},{provide:Di,useExisting:or},{provide:or,useClass:or,deps:[ne]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b]},{provide:lo,useClass:lo,deps:[gs,l.R0b]},{provide:class fn{},useClass:Si,deps:[]}];let ho=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:l.AFp,useValue:t.appId},{provide:li,useExisting:l.AFp},zu]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(n,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:Zu,imports:[oo,l.hGG]}),n})();"undefined"!=typeof window&&window;let Qr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):l.LFG(Fh),r},providedIn:"root"}),n})(),Fh=(()=>{class n extends Qr{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case l.q3G.NONE:return r;case l.q3G.HTML:return(0,l.qzn)(r,"HTML")?(0,l.z3N)(r):(0,l.EiD)(this._doc,String(r)).toString();case l.q3G.STYLE:return(0,l.qzn)(r,"Style")?(0,l.z3N)(r):r;case l.q3G.SCRIPT:if((0,l.qzn)(r,"Script"))return(0,l.z3N)(r);throw new Error("unsafe value used in a script context");case l.q3G.URL:return(0,l.yhl)(r),(0,l.qzn)(r,"URL")?(0,l.z3N)(r):(0,l.mCW)(String(r));case l.q3G.RESOURCE_URL:if((0,l.qzn)(r,"ResourceURL"))return(0,l.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,l.JVY)(t)}bypassSecurityTrustStyle(t){return(0,l.L6k)(t)}bypassSecurityTrustScript(t){return(0,l.eBb)(t)}bypassSecurityTrustUrl(t){return(0,l.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,l.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne))},n.\u0275prov=l.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Rc(n){return new Fh(n.get(ne))}(l.LFG(l.zs3)),r},providedIn:"root"}),n})();var Sn=B(5254),Le=B(1086),ot=B(8929),Lh=B(5279);class ui extends ot.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Lh.N;return this._value}next(e){super.next(this._value=e)}}var jo=B(2866),kc=B(6688),Jr=B(3489);class fo extends Jr.L{notifyNext(e,t,r,i,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class a_ extends Jr.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var _s=B(9249),mn=B(2916);function ks(n,e,t,r,i=new a_(n,t,r)){if(!i.closed)return e instanceof mn.y?e.subscribe(i):(0,_s.s)(e)(i)}var l_=B(3009);const td={};function nd(...n){let e,t;return(0,jo.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,kc.k)(n[0])&&(n=n[0]),(0,l_.n)(n,t).lift(new Up(e))}class Up{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Tl(e,this.resultSelector))}}class Tl extends fo{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(td),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(ks(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const i=this.values,c=this.toRespond?i[r]===td?--this.toRespond:this.toRespond:0;i[r]=t,0===c&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}var ss=B(1737);const Os=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var Lr=B(9146);function Al(...n){return function Il(){return(0,Lr.J)(1)}()((0,Le.of)(...n))}var Ii=B(8896);function Nc(n){return new mn.y(e=>{let t;try{t=n()}catch(i){return void e.error(i)}return(t?(0,Sn.D)(t):(0,Ii.c)()).subscribe(e)})}var Ta=B(1762),ze=B(4850),$n=B(1177);function zn(n,e){return"function"==typeof e?t=>t.pipe(zn((r,i)=>(0,Sn.D)(n(r,i)).pipe((0,ze.U)((s,c)=>e(r,s,i,c))))):t=>t.lift(new Pc(n))}class Pc{constructor(e){this.project=e}call(e,t){return t.subscribe(new Ns(e,this.project))}}class Ns extends $n.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(i){return void this.destination.error(i)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new $n.IY(this),i=this.destination;i.add(r),this.innerSubscription=(0,$n.ft)(e,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const Pn=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function di(n){return e=>0===n?(0,Ii.c)():e.lift(new ys(n))}class ys{constructor(e){if(this.total=e,this.total<0)throw new Pn}call(e,t){return t.subscribe(new Vh(e,this.total))}}class Vh extends Jr.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function lr(...n){const e=n[n.length-1];return(0,jo.K)(e)?(n.pop(),t=>Al(n,t,e)):t=>Al(n,t)}function Ps(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(i){return i.lift(new po(n,e,t))}}class po{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new Go(e,this.accumulator,this.seed,this.hasSeed))}}class Go extends Jr.L{constructor(e,t,r,i){super(e),this.accumulator=t,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function qn(n,e){return function(r){return r.lift(new Fc(n,e))}}class Fc{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Lc(e,this.predicate,this.thisArg))}}class Lc extends Jr.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function Dr(n){return function(t){const r=new Ml(n),i=t.lift(r);return r.caught=i}}class Ml{constructor(e){this.selector=e}call(e,t){return t.subscribe(new u_(e,this.selector,this.caught))}}class u_ extends $n.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const r=new $n.IY(this);this.add(r);const i=(0,$n.ft)(t,r);i!==r&&this.add(i)}}}var Bt=B(1709);function Ia(n,e){return(0,Bt.zg)(n,e,1)}function rd(n){return function(t){return 0===n?(0,Ii.c)():t.lift(new d_(n))}}class d_{constructor(e){if(this.total=e,this.total<0)throw new Pn}call(e,t){return t.subscribe(new id(e,this.total))}}class id extends Jr.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,i=this.count++;t.length<r?t.push(e):t[i%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let s=0;s<r;s++){const c=t++%r;e.next(i[c])}}e.complete()}}function sd(n=Vc){return e=>e.lift(new h_(n))}class h_{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new f_(e,this.errorFactory))}}class f_ extends Jr.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Vc(){return new Os}function Aa(n=null){return e=>e.lift(new Jn(n))}class Jn{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new od(e,this.defaultValue))}}class od extends Jr.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Ma=B(5379);function Fs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?qn((i,s)=>n(i,s,r)):Ma.y,di(1),t?Aa(e):sd(()=>new Os))}var tn=B(2868),Ai=B(4327),hi=B(2654);function $o(n){return e=>e.lift(new vs(n))}class vs{constructor(e){this.callback=e}call(e,t){return t.subscribe(new Hp(e,this.callback))}}class Hp extends Jr.L{constructor(e,t){super(e),this.add(new hi.w(t))}}class go{constructor(e,t){this.id=e,this.url=t}}class Bh extends go{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xa extends go{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class jp extends go{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class zo extends go{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class fi extends go{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ad extends go{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ra extends go{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qo extends go{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uh extends go{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mo{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Hh{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class jh{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gh{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ld{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $h{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const S="primary";class A{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function O(n){return new A(n)}const j="ngNavigationCancelingError";function J(n){const e=Error("NavigationCancelingError: "+n);return e[j]=!0,e}function Ie(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const c=r[s],h=n[s];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function tt(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!yt(n[i],e[i]))return!1;return!0}function yt(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Ft(n){return Array.prototype.concat.apply([],n)}function bt(n){return n.length>0?n[n.length-1]:null}function at(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function pi(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,Sn.D)(Promise.resolve(n)):(0,Le.of)(n)}const Ls={exact:function qh(n,e,t){if(!Oa(n.segments,e.segments)||!ka(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!qh(n.children[r],e.children[r],t))return!1;return!0},subset:jc},Wi={exact:function zh(n,e){return tt(n,e)},subset:function Hc(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>yt(n[t],e[t]))},ignored:()=>!0};function Vs(n,e,t){return Ls[t.paths](n.root,e.root,t.matrixParams)&&Wi[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function jc(n,e,t){return Gc(n,e,e.segments,t)}function Gc(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Oa(i,t)||e.hasChildren()||!ka(i,t,r))}if(n.segments.length===t.length){if(!Oa(n.segments,t)||!ka(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!jc(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Oa(n.segments,i)&&ka(n.segments,i,r)&&n.children[S])&&Gc(n.children[S],e,s,r)}}function ka(n,e,t){return e.every((r,i)=>Wi[t](n[i].parameters,r.parameters))}class Rl{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=O(this.queryParams)),this._queryParamMap}toString(){return cd.serialize(this)}}class Lt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,at(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zc(this)}}class Wo{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=O(this.parameters)),this._parameterMap}toString(){return Ol(this)}}function Oa(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Gp{}class kl{parse(e){const t=new __(e);return new Rl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Wh(e.root,!0)}`,r=function Na(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${qc(t)}=${qc(i)}`).join("&"):`${qc(t)}=${qc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function D0(n){return encodeURI(n)}(e.fragment)}`:""}`}}const cd=new kl;function zc(n){return n.segments.map(e=>Ol(e)).join("/")}function Wh(n,e){if(!n.hasChildren())return zc(n);if(e){const t=n.children[S]?Wh(n.children[S],!1):"",r=[];return at(n.children,(i,s)=>{s!==S&&r.push(`${s}:${Wh(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function p_(n,e){let t=[];return at(n.children,(r,i)=>{i===S&&(t=t.concat(e(r,i)))}),at(n.children,(r,i)=>{i!==S&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===S?[Wh(n.children[S],!1)]:[`${i}:${Wh(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[S]?`${zc(n)}/${t[0]}`:`${zc(n)}/(${t.join("//")})`}}function $p(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qc(n){return $p(n).replace(/%3B/gi,";")}function zp(n){return $p(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wc(n){return decodeURIComponent(n)}function g_(n){return Wc(n.replace(/\+/g,"%20"))}function Ol(n){return`${zp(n.path)}${function Yc(n){return Object.keys(n).map(e=>`;${zp(e)}=${zp(n[e])}`).join("")}(n.parameters)}`}const m_=/^[^\/()?;=#]+/;function Kc(n){const e=n.match(m_);return e?e[0]:""}const T0=/^[^=?&#]+/,Yh=/^[^&#]+/;class __{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Lt([],{}):new Lt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[S]=new Lt(e,t)),r}parseSegment(){const e=Kc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Wo(Wc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Kc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Kc(this.remaining);i&&(r=i,this.capture(r))}e[Wc(t)]=Wc(r)}parseQueryParam(e){const t=function ud(n){const e=n.match(T0);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function qp(n){const e=n.match(Yh);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=g_(t),s=g_(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Kc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=S);const c=this.parseChildren();t[s]=1===Object.keys(c).length?c[S]:new Lt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Kh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Bs(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Bs(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Wp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Wp(e,this._root).map(t=>t.value)}}function Bs(n,e){if(n===e.value)return e;for(const t of e.children){const r=Bs(n,t);if(r)return r}return null}function Wp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Wp(n,t);if(r.length)return r.unshift(e),r}return[]}class Yo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Zc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Zh extends Kh{constructor(e,t){super(e),this.snapshot=t,Kp(this,e)}toString(){return this.snapshot.toString()}}function y_(n,e){const t=function Ko(n,e){const c=new Jh([],{},{},"",{},S,e,null,n.root,-1,{});return new v_("",new Yo(c,[]))}(n,e),r=new ui([new Wo("",{})]),i=new ui({}),s=new ui({}),c=new ui({}),h=new ui(""),g=new bs(r,i,c,h,s,S,e,t.root);return g.snapshot=t.root,new Zh(new Yo(g,[]),t)}class bs{constructor(e,t,r,i,s,c,h,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=c,this.component=h,this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ze.U)(e=>O(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ze.U)(e=>O(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Yp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function Qh(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Jh{constructor(e,t,r,i,s,c,h,g,y,E,T){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=c,this.component=h,this.routeConfig=g,this._urlSegment=y,this._lastPathIndex=E,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=O(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=O(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class v_ extends Kh{constructor(e,t){super(t),this.url=e,Kp(this,t)}toString(){return b_(this._root)}}function Kp(n,e){e.value._routerState=n,e.children.forEach(t=>Kp(n,t))}function b_(n){const e=n.children.length>0?` { ${n.children.map(b_).join(", ")} } `:"";return`${n.value}${e}`}function Xh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,tt(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),tt(e.params,t.params)||n.params.next(t.params),function je(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!tt(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),tt(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Zp(n,e){const t=tt(n.params,e.params)&&function $c(n,e){return Oa(n,e)&&n.every((t,r)=>tt(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Zp(n.parent,e.parent))}function dd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Qp(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return dd(n,r,i);return dd(n,r)})}(n,e,t);return new Yo(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>dd(n,h)),c}}const r=function I0(n){return new bs(new ui(n.url),new ui(n.params),new ui(n.queryParams),new ui(n.fragment),new ui(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>dd(n,s));return new Yo(r,i)}}function Pa(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Qc(n){return"object"==typeof n&&null!=n&&n.outlets}function ws(n,e,t,r,i){let s={};if(r&&at(r,(h,g)=>{s[g]=Array.isArray(h)?h.map(y=>`${y}`):`${h}`}),n===e)return new Rl(t,s,i);const c=Nl(n,e,t);return new Rl(c,s,i)}function Nl(n,e,t){const r={};return at(n.children,(i,s)=>{r[s]=i===e?t:Nl(i,e,t)}),new Lt(n.segments,r)}class Jp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Pa(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Qc);if(i&&i!==bt(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ef{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Jc(n,e,t){if(n||(n=new Lt([],{})),0===n.segments.length&&n.hasChildren())return Xc(n,e,t);const r=function tf(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const c=n.segments[i],h=t[r];if(Qc(h))break;const g=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&y&&"object"==typeof y&&void 0===y.outlets){if(!eg(g,y,c))return s;r+=2}else{if(!eg(g,{},c))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Lt(n.segments.slice(0,r.pathIndex),{});return s.children[S]=new Lt(n.segments.slice(r.pathIndex),n.children),Xc(s,0,i)}return r.match&&0===i.length?new Lt(n.segments,{}):r.match&&!n.hasChildren()?E_(n,e,t):r.match?Xc(n,0,i):E_(n,e,t)}function Xc(n,e,t){if(0===t.length)return new Lt(n.segments,{});{const r=function M0(n){return Qc(n[0])?n[0].outlets:{[S]:n}}(t),i={};return at(r,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[c]=Jc(n.children[c],e,s))}),at(n.children,(s,c)=>{void 0===r[c]&&(i[c]=s)}),new Lt(n.segments,i)}}function E_(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Qc(s)){const g=S_(s.outlets);return new Lt(r,g)}if(0===i&&Pa(t[0])){r.push(new Wo(n.segments[e].path,Xp(t[0]))),i++;continue}const c=Qc(s)?s.outlets[S]:`${s}`,h=i<t.length-1?t[i+1]:null;c&&h&&Pa(h)?(r.push(new Wo(c,Xp(h))),i+=2):(r.push(new Wo(c,{})),i++)}return new Lt(r,{})}function S_(n){const e={};return at(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=E_(new Lt([],{}),0,t))}),e}function Xp(n){const e={};return at(n,(t,r)=>e[r]=`${t}`),e}function eg(n,e,t){return n==t.path&&tt(e,t.parameters)}class mb{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Xh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Zc(t);e.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,i[c],r),delete i[c]}),at(i,(s,c)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Zc(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Zc(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Zc(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new $h(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Gh(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Xh(i),i===s)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),Xh(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=function _b(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),g=h?h.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=g,c.outlet&&c.outlet.activateWith(i,g),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class nf{constructor(e,t){this.routes=e,this.module=t}}function _o(n){return"function"==typeof n}function Zo(n){return n instanceof Rl}const Pl=Symbol("INITIAL_VALUE");function eu(){return zn(n=>nd(n.map(e=>e.pipe(di(1),lr(Pl)))).pipe(Ps((e,t)=>{let r=!1;return t.reduce((i,s,c)=>i!==Pl?i:(s===Pl&&(r=!0),r||!1!==s&&c!==t.length-1&&!Zo(s)?i:s),e)},Pl),qn(e=>e!==Pl),(0,ze.U)(e=>Zo(e)?e:!0===e),di(1)))}class ng{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new hd,this.attachRef=null}}class hd{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new ng,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let rg=(()=>{class n{constructor(t,r,i,s,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=s||S,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,g=new ig(t,h,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,g),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(hd),l.Y36(l.s_b),l.Y36(l._Vd),l.$8M("name"),l.Y36(l.sBO))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class ig{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===bs?this.route:e===hd?this.childContexts:this.parent.get(e,t)}}let T_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},directives:[rg],encapsulation:2}),n})();function bb(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];x0(r,fd(e,r))}}function x0(n,e){n.children&&bb(n.children,e)}function fd(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Xr(n){const e=n.children&&n.children.map(Xr),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==S&&(t.component=T_),t}function xi(n){return n.outlet||S}function pd(n,e){const t=n.filter(r=>xi(r)===e);return t.push(...n.filter(r=>xi(r)!==e)),t}const sg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Tr(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},sg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Ie)(t,n,e);if(!s)return Object.assign({},sg);const c={};at(s.posParams,(g,y)=>{c[y]=g.path});const h=s.consumed.length>0?Object.assign(Object.assign({},c),s.consumed[s.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:h,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function yo(n,e,t,r,i="corrected"){if(t.length>0&&function Cb(n,e,t){return t.some(r=>rf(n,e,r)&&xi(r)!==S)}(n,t,r)){const c=new Lt(e,function wb(n,e,t,r){const i={};i[S]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&xi(s)!==S){const c=new Lt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[xi(s)]=c}return i}(n,e,r,new Lt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function md(n,e,t){return t.some(r=>rf(n,e,r))}(n,t,r)){const c=new Lt(n.segments,function gd(n,e,t,r,i,s){const c={};for(const h of r)if(rf(n,t,h)&&!i[xi(h)]){const g=new Lt([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===s?n.segments.length:e.length,c[xi(h)]=g}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const s=new Lt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function rf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function og(n,e,t,r){return!!(xi(n)===r||r!==S&&rf(e,t,n))&&("**"===n.path||Tr(e,n,t).matched)}function I_(n,e,t){return 0===e.length&&!n.children[t]}class tu{constructor(e){this.segmentGroup=e||null}}class A_{constructor(e){this.urlTree=e}}function _d(n){return(0,ss._)(new tu(n))}function sf(n){return(0,ss._)(new A_(n))}class M_{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(l.h0i)}apply(){const e=yo(this.urlTree.root,[],[],this.config).segmentGroup,t=new Lt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,S).pipe((0,ze.U)(s=>this.createUrlTree(nu(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Dr(s=>{if(s instanceof A_)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof tu?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,S).pipe((0,ze.U)(i=>this.createUrlTree(nu(i),e.queryParams,e.fragment))).pipe(Dr(i=>{throw i instanceof tu?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Lt([],{[S]:e}):e;return new Rl(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ze.U)(s=>new Lt([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,Sn.D)(i).pipe(Ia(s=>{const c=r.children[s],h=pd(t,s);return this.expandSegmentGroup(e,h,c,s).pipe((0,ze.U)(g=>({segment:g,outlet:s})))}),Ps((s,c)=>(s[c.outlet]=c.segment,s),{}),function Bc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?qn((i,s)=>n(i,s,r)):Ma.y,rd(1),t?Aa(e):sd(()=>new Os))}())}expandSegment(e,t,r,i,s,c){return(0,Sn.D)(r).pipe(Ia(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,s,c).pipe(Dr(y=>{if(y instanceof tu)return(0,Le.of)(null);throw y}))),Fs(h=>!!h),Dr((h,g)=>{if(h instanceof Os||"EmptyError"===h.name)return I_(t,i,s)?(0,Le.of)(new Lt([],{})):_d(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,s,c,h){return og(i,t,s,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c):_d(t):_d(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?sf(s):this.lineralizeSegments(r,s).pipe((0,Bt.zg)(c=>{const h=new Lt(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c){const{matched:h,consumedSegments:g,remainingSegments:y,positionalParamSegments:E}=Tr(t,i,s);if(!h)return _d(t);const T=this.applyRedirectCommands(g,i.redirectTo,E);return i.redirectTo.startsWith("/")?sf(T):this.lineralizeSegments(i,T).pipe((0,Bt.zg)(x=>this.expandSegment(e,t,r,x.concat(y),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,Le.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,ze.U)(T=>(r._loadedConfig=T,new Lt(i,{})))):(0,Le.of)(new Lt(i,{}));const{matched:c,consumedSegments:h,remainingSegments:g}=Tr(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,Bt.zg)(E=>{const T=E.module,x=E.routes,{segmentGroup:N,slicedSegments:U}=yo(t,h,g,x),K=new Lt(N.segments,N.children);if(0===U.length&&K.hasChildren())return this.expandChildren(T,x,K).pipe((0,ze.U)(Be=>new Lt(h,Be)));if(0===x.length&&0===U.length)return(0,Le.of)(new Lt(h,{}));const le=xi(r)===s;return this.expandSegment(T,K,x,U,le?S:s,!0).pipe((0,ze.U)(Me=>new Lt(h.concat(Me.segments),Me.children)))})):_d(t)}getChildConfig(e,t,r){return t.children?(0,Le.of)(new nf(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,Le.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Bt.zg)(i=>i?this.configLoader.load(e.injector,t).pipe((0,ze.U)(s=>(t._loadedConfig=s,s))):function af(n){return(0,ss._)(J(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):(0,Le.of)(new nf([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return(0,Le.of)(!0);const s=i.map(c=>{const h=e.get(c);let g;if(function yb(n){return n&&_o(n.canLoad)}(h))g=h.canLoad(t,r);else{if(!_o(h))throw new Error("Invalid CanLoad guard");g=h(t,r)}return pi(g)});return(0,Le.of)(s).pipe(eu(),(0,tn.b)(c=>{if(!Zo(c))return;const h=J(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw h.url=c,h}),(0,ze.U)(c=>!0===c))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,Le.of)(r);if(i.numberOfChildren>1||!i.children[S])return(0,ss._)(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[S]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Rl(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return at(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[s]=t[h]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let c={};return at(t.children,(h,g)=>{c[g]=this.createSegmentGroup(e,h,r,i)}),new Lt(s,c)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function nu(n){const e={};for(const r of Object.keys(n.children)){const s=nu(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Sb(n){if(1===n.numberOfChildren&&n.children[S]){const e=n.children[S];return new Lt(n.segments.concat(e.segments),e.children)}return n}(new Lt(n.segments,e))}class x_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class yd{constructor(e,t){this.component=e,this.route=t}}function lg(n,e,t){const r=n._root;return Fl(r,e?e._root:null,t,[r.value])}function ru(n,e,t){const r=function Tb(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Fl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Zc(e);return n.children.forEach(c=>{(function Ib(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const g=function os(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Oa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Oa(n.url,e.url)||!tt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zp(n,e)||!tt(n.queryParams,e.queryParams);default:return!Zp(n,e)}}(c,s,s.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new x_(r)):(s.data=c.data,s._resolvedData=c._resolvedData),Fl(n,e,s.component?h?h.children:null:t,r,i),g&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new yd(h.outlet.component,c))}else c&&Qo(e,h,i),i.canActivateChecks.push(new x_(r)),Fl(n,null,s.component?h?h.children:null:t,r,i)})(c,s[c.value.outlet],t,r.concat([c.value]),i),delete s[c.value.outlet]}),at(s,(c,h)=>Qo(c,t.getContext(h),i)),i}function Qo(n,e,t){const r=Zc(n),i=n.value;at(r,(s,c)=>{Qo(s,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new yd(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class xb{}function Us(n){return new mn.y(e=>e.error(n))}class hg{constructor(e,t,r,i,s,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=c}recognize(){const e=yo(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,S);if(null===t)return null;const r=new Jh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},S,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Yo(r,t),s=new v_(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=Yp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const c=t.children[s],h=pd(e,s),g=this.processSegmentGroup(h,c,s);if(null===g)return null;r.push(...g)}const i=vd(r);return function k_(n){n.sort((e,t)=>e.value.outlet===S?-1:t.value.outlet===S?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const s of e){const c=this.processSegmentAgainstRoute(s,t,r,i);if(null!==c)return c}return I_(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!og(e,t,r,i))return null;let s,c=[],h=[];if("**"===e.path){const N=r.length>0?bt(r).parameters:{};s=new Jh(r,N,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,lf(e),xi(e),e.component,e,Cs(t),Va(t)+r.length,O_(e))}else{const N=Tr(t,e,r);if(!N.matched)return null;c=N.consumedSegments,h=N.remainingSegments,s=new Jh(c,N.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,lf(e),xi(e),e.component,e,Cs(t),Va(t)+c.length,O_(e))}const g=function Ri(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:y,slicedSegments:E}=yo(t,c,h,g.filter(N=>void 0===N.redirectTo),this.relativeLinkResolution);if(0===E.length&&y.hasChildren()){const N=this.processChildren(g,y);return null===N?null:[new Yo(s,N)]}if(0===g.length&&0===E.length)return[new Yo(s,[])];const T=xi(e)===i,x=this.processSegment(g,y,E,T?S:i);return null===x?null:[new Yo(s,x)]}}function Ll(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function vd(n){const e=[],t=new Set;for(const r of n){if(!Ll(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=vd(r.children);e.push(new Yo(r.value,i))}return e.filter(r=>!t.has(r))}function Cs(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Va(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function lf(n){return n.data||{}}function O_(n){return n.resolve||{}}function cf(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function v(n){return zn(e=>{const t=n(e);return t?(0,Sn.D)(t).pipe((0,ze.U)(()=>e)):(0,Le.of)(e)})}class w extends class m{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const I=new l.OlP("ROUTES");class R{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,ze.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=s.create(e);return new nf(Ft(c.injector.get(I,void 0,l.XFs.Self|l.XFs.Optional)).map(Xr),c)}),Dr(s=>{throw t._loader$=void 0,s}));return t._loader$=new Ta.c(i,()=>new ot.xQ).pipe((0,Ai.x)()),t._loader$}loadModuleFactory(e){return pi(e()).pipe((0,Bt.zg)(t=>t instanceof l.YKP?(0,Le.of)(t):(0,Sn.D)(this.compiler.compileModuleAsync(t))))}}class oe{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function xe(n){throw n}function Ae(n,e,t){return e.parse("/")}function qe(n,e){return(0,Le.of)(null)}const Qe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ht={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ut=(()=>{class n{constructor(t,r,i,s,c,h,g){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ot.xQ,this.errorHandler=xe,this.malformedUriErrorHandler=Ae,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:qe,afterPreactivation:qe},this.urlHandlingStrategy=new oe,this.routeReuseStrategy=new w,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(l.h0i),this.console=c.get(l.c2e);const T=c.get(l.R0b);this.isNgZoneEnabled=T instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function Uc(){return new Rl(new Lt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new R(c,h,x=>this.triggerEvent(new mo(x)),x=>this.triggerEvent(new Hh(x))),this.routerState=y_(this.currentUrlTree,this.rootComponentType),this.transitions=new ui({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(qn(i=>0!==i.id),(0,ze.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),zn(i=>{let s=!1,c=!1;return(0,Le.of)(i).pipe((0,tn.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),zn(h=>{const g=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return su(h.source)&&(this.browserUrlTree=h.extractedUrl),(0,Le.of)(h).pipe(zn(T=>{const x=this.transitions.getValue();return r.next(new Bh(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),x!==this.transitions.getValue()?Ii.E:Promise.resolve(T)}),function Db(n,e,t,r){return zn(i=>function ag(n,e,t,r,i){return new M_(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ze.U)(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,tn.b)(T=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:T.urlAfterRedirects})}),function iu(n,e,t,r,i){return(0,Bt.zg)(s=>function dg(n,e,t,r,i="emptyOnly",s="legacy"){try{const c=new hg(n,e,t,r,i,s).recognize();return null===c?Us(new xb):(0,Le.of)(c)}catch(c){return Us(c)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe((0,ze.U)(c=>Object.assign(Object.assign({},s),{targetSnapshot:c}))))}(this.rootComponentType,this.config,T=>this.serializeUrl(T),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,tn.b)(T=>{if("eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const N=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(N,T)}this.browserUrlTree=T.urlAfterRedirects}const x=new fi(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);r.next(x)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:N,source:U,restoredState:K,extras:le}=h,Pe=new Bh(x,this.serializeUrl(N),U,K);r.next(Pe);const Me=y_(N,this.rootComponentType).snapshot;return(0,Le.of)(Object.assign(Object.assign({},h),{targetSnapshot:Me,urlAfterRedirects:N,extras:Object.assign(Object.assign({},le),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),Ii.E}),v(h=>{const{targetSnapshot:g,id:y,extractedUrl:E,rawUrl:T,extras:{skipLocationChange:x,replaceUrl:N}}=h;return this.hooks.beforePreactivation(g,{navigationId:y,appliedUrlTree:E,rawUrlTree:T,skipLocationChange:!!x,replaceUrl:!!N})}),(0,tn.b)(h=>{const g=new ad(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(g)}),(0,ze.U)(h=>Object.assign(Object.assign({},h),{guards:lg(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function R_(n,e){return(0,Bt.zg)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:c}}=t;return 0===c.length&&0===s.length?(0,Le.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function Ab(n,e,t,r){return(0,Sn.D)(n).pipe((0,Bt.zg)(i=>function Jo(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,Le.of)(!0);const c=s.map(h=>{const g=ru(h,e,i);let y;if(function tg(n){return n&&_o(n.canDeactivate)}(g))y=pi(g.canDeactivate(n,e,t,r));else{if(!_o(g))throw new Error("Invalid CanDeactivate guard");y=pi(g(n,e,t,r))}return y.pipe(Fs())});return(0,Le.of)(c).pipe(eu())}(i.component,i.route,t,e,r)),Fs(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Bt.zg)(h=>h&&function Fa(n){return"boolean"==typeof n}(h)?function ug(n,e,t,r){return(0,Sn.D)(e).pipe(Ia(i=>Al(function vo(n,e){return null!==n&&e&&e(new jh(n)),(0,Le.of)(!0)}(i.route.parent,r),function La(n,e){return null!==n&&e&&e(new ld(n)),(0,Le.of)(!0)}(i.route,r),function R0(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(c=>function cg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Nc(()=>{const h=c.guards.map(g=>{const y=ru(g,c.node,t);let E;if(function vb(n){return n&&_o(n.canActivateChild)}(y))E=pi(y.canActivateChild(r,n));else{if(!_o(y))throw new Error("Invalid CanActivateChild guard");E=pi(y(r,n))}return E.pipe(Fs())});return(0,Le.of)(h).pipe(eu())}));return(0,Le.of)(s).pipe(eu())}(n,i.path,t),function Mb(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Le.of)(!0);const i=r.map(s=>Nc(()=>{const c=ru(s,e,t);let h;if(function Wn(n){return n&&_o(n.canActivate)}(c))h=pi(c.canActivate(e,n));else{if(!_o(c))throw new Error("Invalid CanActivate guard");h=pi(c(e,n))}return h.pipe(Fs())}));return(0,Le.of)(i).pipe(eu())}(n,i.route,t))),Fs(i=>!0!==i,!0))}(r,s,n,e):(0,Le.of)(h)),(0,ze.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,tn.b)(h=>{if(Zo(h.guardsResult)){const y=J(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw y.url=h.guardsResult,y}const g=new Ra(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(g)}),qn(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),v(h=>{if(h.guards.canActivateChecks.length)return(0,Le.of)(h).pipe((0,tn.b)(g=>{const y=new qo(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}),zn(g=>{let y=!1;return(0,Le.of)(g).pipe(function bd(n,e){return(0,Bt.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,Le.of)(t);let s=0;return(0,Sn.D)(i).pipe(Ia(c=>function N_(n,e,t,r){return function kb(n,e,t,r){const i=cf(n);if(0===i.length)return(0,Le.of)({});const s={};return(0,Sn.D)(i).pipe((0,Bt.zg)(c=>function Ob(n,e,t,r){const i=ru(n,e,r);return pi(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,tn.b)(h=>{s[c]=h}))),rd(1),(0,Bt.zg)(()=>cf(s).length===i.length?(0,Le.of)(s):Ii.E))}(n._resolve,n,e,r).pipe((0,ze.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),Yp(n,t).resolve),null)))}(c.route,r,n,e)),(0,tn.b)(()=>s++),rd(1),(0,Bt.zg)(c=>s===i.length?(0,Le.of)(t):Ii.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,tn.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(g),this.cancelNavigationTransition(g,"At least one route resolver didn't emit any value."))}}))}),(0,tn.b)(g=>{const y=new Uh(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}))}),v(h=>{const{targetSnapshot:g,id:y,extractedUrl:E,rawUrl:T,extras:{skipLocationChange:x,replaceUrl:N}}=h;return this.hooks.afterPreactivation(g,{navigationId:y,appliedUrlTree:E,rawUrlTree:T,skipLocationChange:!!x,replaceUrl:!!N})}),(0,ze.U)(h=>{const g=function pb(n,e,t){const r=dd(n,e._root,t?t._root:void 0);return new Zh(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:g})}),(0,tn.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,ze.U)(r=>(new mb(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,tn.b)({next(){s=!0},complete(){s=!0}}),$o(()=>{var h;s||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),Dr(h=>{if(c=!0,function ce(n){return n&&n[j]}(h)){const g=Zo(h.url);g||(this.navigated=!0,this.restoreHistory(i,!0));const y=new jp(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(y),g?setTimeout(()=>{const E=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),T={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||su(i.source)};this.scheduleNavigation(E,"imperative",null,T,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new zo(i.id,this.serializeUrl(i.extractedUrl),h);r.next(g);try{i.resolve(this.errorHandler(h))}catch(y){i.reject(y)}}return Ii.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const s={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const g=Object.assign({},c);delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(s.state=g)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,c,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){bb(t),this.config=t.map(Xr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:c,queryParamsHandling:h,preserveFragment:g}=r,y=i||this.routerState.root,E=g?this.currentUrlTree.fragment:c;let T=null;switch(h){case"merge":T=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=s||null}return null!==T&&(T=this.removeEmptyProps(T)),function gb(n,e,t,r,i){if(0===t.length)return ws(e.root,e.root,e.root,r,i);const s=function w_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Jp(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return at(s.outlets,(g,y)=>{h[y]="string"==typeof g?g.split("/"):g}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===c?(s.split("/").forEach((h,g)=>{0==g&&"."===h||(0==g&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,s]},[]);return new Jp(t,e,r)}(t);if(s.toRoot())return ws(e.root,e.root,new Lt([],{}),r,i);const c=function A0(n,e,t){if(n.isAbsolute)return new ef(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new ef(s,s===e.root,0)}const r=Pa(n.commands[0])?0:1;return function C_(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new ef(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),h=c.processChildren?Xc(c.segmentGroup,c.index,s.commands):Jc(c.segmentGroup,c.index,s.commands);return ws(e.root,c.segmentGroup,h,r,i)}(y,this.currentUrlTree,t,T,null!=E?E:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Zo(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Xo(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},Qe):!1===r?Object.assign({},Ht):r,Zo(t))return Vs(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Vs(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new xa(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,c){var h,g;if(this.disposed)return Promise.resolve(!1);let y,E,T;c?(y=c.resolve,E=c.reject,T=c.promise):T=new Promise((U,K)=>{y=U,E=K});const x=++this.navigationId;let N;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),N=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(g=this.browserPageId)&&void 0!==g?g:0)+1):N=0,this.setTransition({id:x,targetPageId:N,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:y,reject:E,promise:T,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),T.catch(U=>Promise.reject(U))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new jp(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function su(n){return"imperative"!==n}let Ba=(()=>{class n{constructor(t,r,i,s,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=c,this.commands=null,this.onChanges=new ot.xQ,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Vl(this.skipLocationChange),replaceUrl:Vl(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Vl(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ut),l.Y36(bs),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&l.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[l.TTD]}),n})(),ea=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new ot.xQ,this.subscription=t.events.subscribe(s=>{s instanceof xa&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,c){if(0!==t||r||i||s||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:Vl(this.skipLocationChange),replaceUrl:Vl(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Vl(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ut),l.Y36(bs),l.Y36(ye))},n.\u0275dir=l.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&l.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&l.uIk("target",r.target)("href",r.href,l.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[l.TTD]}),n})();function Vl(n){return""===n||!!n}class df{}class hf{preload(e,t){return(0,Le.of)(null)}}let Cd=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new R(i,r,g=>t.triggerEvent(new mo(g)),g=>t.triggerEvent(new Hh(g)))}setUpPreloading(){this.subscription=this.router.events.pipe(qn(t=>t instanceof xa),Ia(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(l.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const c=s._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return(0,Sn.D)(i).pipe((0,Lr.J)(),(0,ze.U)(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,Le.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Bt.zg)(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ut),l.LFG(l.Sil),l.LFG(l.zs3),l.LFG(df))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Ua=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Bh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xa&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new xl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Bl=new l.OlP("ROUTER_CONFIGURATION"),Pb=new l.OlP("ROUTER_FORROOT_GUARD"),Fb=[hn,{provide:Gp,useClass:kl},{provide:Ut,useFactory:function Vb(n,e,t,r,i,s,c={},h,g){const y=new Ut(null,n,e,t,r,i,Ft(s));return h&&(y.urlHandlingStrategy=h),g&&(y.routeReuseStrategy=g),function N0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,y),c.enableTracing&&y.events.subscribe(E=>{var T,x;null===(T=console.group)||void 0===T||T.call(console,`Router Event: ${E.constructor.name}`),console.log(E.toString()),console.log(E),null===(x=console.groupEnd)||void 0===x||x.call(console)}),y},deps:[Gp,hd,hn,l.zs3,l.Sil,I,Bl,[class z{},new l.FiY],[class p{},new l.FiY]]},hd,{provide:bs,useFactory:function PP(n){return n.routerState.root},deps:[Ut]},Cd,hf,class wd{preload(e,t){return t().pipe(Dr(()=>(0,Le.of)(null)))}},{provide:Bl,useValue:{enableTracing:!1}}];function pg(){return new l.PXZ("Router",Ut)}let k0=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Fb,Lb(t),{provide:Pb,useFactory:OA,deps:[[Ut,new l.FiY,new l.tp0]]},{provide:Bl,useValue:r||{}},{provide:ye,useFactory:kA,deps:[te,[new l.tBr(He),new l.FiY],Bl]},{provide:Ua,useFactory:O0,deps:[Ut,Np,Bl]},{provide:df,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:hf},{provide:l.PXZ,multi:!0,useFactory:pg},[P_,{provide:l.ip1,multi:!0,useFactory:NA,deps:[P_]},{provide:F0,useFactory:P0,deps:[P_]},{provide:l.tb,multi:!0,useExisting:F0}]]}}static forChild(t){return{ngModule:n,providers:[Lb(t)]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Pb,8),l.LFG(Ut,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function O0(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ua(n,e,t)}function kA(n,e,t={}){return t.useHash?new kt(n,e):new it(n,e)}function OA(n){return"guarded"}function Lb(n){return[{provide:l.deG,multi:!0,useValue:n},{provide:I,multi:!0,useValue:n}]}let P_=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ot.xQ}appInitializer(){return this.injector.get(L,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),s=this.injector.get(Ut),c=this.injector.get(Bl);return"disabled"===c.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?(0,Le.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Bl),i=this.injector.get(Cd),s=this.injector.get(Ua),c=this.injector.get(Ut),h=this.injector.get(l.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),s.init(),c.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function NA(n){return n.appInitializer.bind(n)}function P0(n){return n.bootstrapListener.bind(n)}const F0=new l.OlP("Router Initializer");let FA=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-home"]],decls:7,vars:0,consts:[[1,"hero","is-link","is-fullheight-with-navbar",2,"background-image","url('../../assets/home_pic.jpg')"],[1,"hero-body"],[1,"container"],[1,"columns","is-vcentered"],[1,"column"],[1,"title","is-size-3"]],template:function(t,r){1&t&&(l.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),l._uU(6," Welcome to the Financial Platform! "),l.qZA()()()()()())},styles:[""]}),n})();var L0=B(7830);function V0(...n){if(1===n.length){const e=n[0];if((0,kc.k)(e))return F_(e,null);if((0,L0.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return F_(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return F_(n=1===n.length&&(0,kc.k)(n[0])?n[0]:n,null).pipe((0,ze.U)(t=>e(...t)))}return F_(n,null)}function F_(n,e){return new mn.y(t=>{const r=n.length;if(0===r)return void t.complete();const i=new Array(r);let s=0,c=0;for(let h=0;h<r;h++){const g=(0,Sn.D)(n[h]);let y=!1;t.add(g.subscribe({next:E=>{y||(y=!0,c++),i[h]=E},error:E=>t.error(E),complete:()=>{s++,(s===r||!y)&&(c===r&&t.next(e?e.reduce((E,T,x)=>(E[T]=i[x],E),{}):i),t.complete())}}))}})}let B0=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),Ed=(()=>{class n extends B0{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const ta=new l.OlP("NgValueAccessor"),VA={provide:ta,useExisting:(0,l.Gpc)(()=>ou),multi:!0},H0=new l.OlP("CompositionEventMode");let ou=(()=>{class n extends B0{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Rt(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(H0,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&l.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[l._Bn([VA]),l.qOj]}),n})();function Ul(n){return null==n||0===n.length}function gg(n){return null!=n&&"number"==typeof n.length}const jn=new l.OlP("NgValidators"),Hl=new l.OlP("NgAsyncValidators"),BA=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class bo{static min(e){return function ja(n){return e=>{if(Ul(e.value)||Ul(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function L_(n){return e=>{if(Ul(e.value)||Ul(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return Bb(e)}static requiredTrue(e){return function V_(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function UA(n){return Ul(n.value)||BA.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Ub(n){return e=>Ul(e.value)||!gg(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function HA(n){return e=>gg(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function mg(n){if(!n)return Sd;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Ul(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return G0(e)}static composeAsync(e){return jb(e)}}function Bb(n){return Ul(n.value)?{required:!0}:null}function Sd(n){return null}function B_(n){return null!=n}function U_(n){const e=(0,l.QGY)(n)?(0,Sn.D)(n):n;return(0,l.CqO)(e),e}function H_(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function jA(n,e){return e.map(t=>t(n))}function j0(n){return n.map(e=>function GA(n){return!n.validate}(e)?e:t=>e.validate(t))}function G0(n){if(!n)return null;const e=n.filter(B_);return 0==e.length?null:function(t){return H_(jA(t,e))}}function Hb(n){return null!=n?G0(j0(n)):null}function jb(n){if(!n)return null;const e=n.filter(B_);return 0==e.length?null:function(t){return V0(jA(t,e).map(U_)).pipe((0,ze.U)(H_))}}function $0(n){return null!=n?jb(j0(n)):null}function z0(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function $A(n){return n._rawValidators}function Gb(n){return n._rawAsyncValidators}function j_(n){return n?Array.isArray(n)?n:[n]:[]}function G_(n,e){return Array.isArray(n)?n.includes(e):n===e}function $_(n,e){const t=j_(e);return j_(n).forEach(i=>{G_(t,i)||t.push(i)}),t}function zA(n,e){return j_(e).filter(t=>!G_(n,t))}class qA{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Hb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=$0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class jl extends qA{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Es extends qA{get formDirective(){return null}get path(){return null}}class WA{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let z_=(()=>{class n extends WA{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(jl,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[l.qOj]}),n})(),q_=(()=>{class n extends WA{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Es,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[l.qOj]}),n})();function Gl(n,e){Td(n,e),e.valueAccessor.writeValue(n.value),function XA(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&qb(n,e)})}(n,e),function Wb(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Q0(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&qb(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function pf(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function $l(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),zl(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ff(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Td(n,e){const t=$A(n);null!==e.validator?n.setValidators(z0(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Gb(n);null!==e.asyncValidator?n.setAsyncValidators(z0(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();ff(e._rawValidators,i),ff(e._rawAsyncValidators,i)}function zl(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=$A(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(c=>c!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=Gb(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(c=>c!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return ff(e._rawValidators,r),ff(e._rawAsyncValidators,r),t}function qb(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function K_(n,e){Td(n,e)}function eS(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Zb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const _g="VALID",J_="INVALID",yg="PENDING",X_="DISABLED";function nS(n){return(ey(n)?n.validators:n)||null}function rS(n){return Array.isArray(n)?Hb(n):n||null}function vg(n,e){return(ey(e)?e.asyncValidators:n)||null}function Qb(n){return Array.isArray(n)?$0(n):n||null}function ey(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Jb=n=>n instanceof wo,ty=n=>n instanceof ql,Xb=n=>n instanceof oS;function iS(n){return Jb(n)?n.value:n.getRawValue()}function ew(n,e){const t=ty(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new l.vHH(1e3,"");if(!r[e])throw new l.vHH(1001,"")}function sS(n,e){ty(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new l.vHH(1002,"")})}class tw{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=rS(this._rawValidators),this._composedAsyncValidatorFn=Qb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===_g}get invalid(){return this.status===J_}get pending(){return this.status==yg}get disabled(){return this.status===X_}get enabled(){return this.status!==X_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=rS(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Qb(e)}addValidators(e){this.setValidators($_(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($_(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(zA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(zA(e,this._rawAsyncValidators))}hasValidator(e){return G_(this._rawValidators,e)}hasAsyncValidator(e){return G_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=yg,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=X_,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=_g,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_g||this.status===yg)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?X_:_g}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=yg,this._hasOwnPendingAsyncValidator=!0;const t=U_(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function tS(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=ty(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:Xb(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?X_:this.errors?J_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yg)?yg:this._anyControlsHaveStatus(J_)?J_:_g}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ey(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class wo extends tw{constructor(e=null,t,r){super(nS(t),vg(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ey(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Zb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Zb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class ql extends tw{constructor(e,t,r){super(nS(t),vg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){sS(this,e),Object.keys(e).forEach(r=>{ew(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=iS(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class oS extends tw{constructor(e,t,r){super(nS(t),vg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){sS(this,e),e.forEach((r,i)=>{ew(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>iS(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Ga={provide:Es,useExisting:(0,l.Gpc)(()=>bg)},Id=(()=>Promise.resolve(null))();let bg=(()=>{class n extends Es{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new l.vpe,this.form=new ql({},Hb(t),$0(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Id.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Gl(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Id.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Id.then(()=>{const r=this._findContainer(t.path),i=new ql({});K_(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Id.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Id.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,eS(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(jn,10),l.Y36(Hl,10))},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&l.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([Ga]),l.qOj]}),n})(),Ad=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const iM={provide:ta,useExisting:(0,l.Gpc)(()=>Cg),multi:!0};let Cg=(()=>{class n extends Ed{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&l.NdJ("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[l._Bn([iM]),l.qOj]}),n})(),cS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const iy=new l.OlP("NgModelWithFormControlWarning"),hS={provide:Es,useExisting:(0,l.Gpc)(()=>$a)};let $a=(()=>{class n extends Es{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(zl(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Gl(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){$l(t.control||null,t,!1),Zb(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,eS(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&($l(r||null,t),Jb(i)&&(Gl(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);K_(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function J0(n,e){return zl(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Td(this.form,this),this._oldForm&&zl(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(jn,10),l.Y36(Hl,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&l.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([hS]),l.qOj,l.TTD]}),n})();const sy={provide:jl,useExisting:(0,l.Gpc)(()=>Md)};let Md=(()=>{class n extends jl{constructor(t,r,i,s,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new l.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Q_(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===ou?t=s:function X0(n){return Object.getPrototypeOf(n.constructor)===Ed}(s)?r=s:i=s}),i||r||t||null}(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Z_(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Y_(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(l.Y36(Es,13),l.Y36(jn,10),l.Y36(Hl,10),l.Y36(ta,10),l.Y36(iy,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[l._Bn([sy]),l.qOj,l.TTD]}),n})(),xd=(()=>{class n{constructor(){this._validator=Sd}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Sd,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,features:[l.TTD]}),n})();const pM={provide:jn,useExisting:(0,l.Gpc)(()=>ki),multi:!0};let ki=(()=>{class n extends xd{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function _f(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>Bb}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&l.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[l._Bn([pM]),l.qOj]}),n})(),wS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[cS]]}),n})(),bM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[wS]}),n})(),wM=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:iy,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[wS]}),n})(),hw=(()=>{class n{group(t,r=null){const i=this._reduceControls(t);let h,s=null,c=null;return null!=r&&(function HP(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(s=null!=r.validators?r.validators:null,c=null!=r.asyncValidators?r.asyncValidators:null,h=null!=r.updateOn?r.updateOn:void 0):(s=null!=r.validator?r.validator:null,c=null!=r.asyncValidator?r.asyncValidator:null)),new ql(i,{asyncValidators:c,updateOn:h,validators:s})}control(t,r,i){return new wo(t,r,i)}array(t,r,i){const s=t.map(c=>this._createControl(c));return new oS(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return Jb(t)||ty(t)||Xb(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:wM}),n})();var yf=B(353),un=B(6351);function fw(){return n=>n.lift(new ra)}class ra{call(e,t){return t.subscribe(new GP(e))}}class GP extends Jr.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}function ay(n,e){return t=>t.lift(new CS(n,e))}class CS{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new ES(e,this.compare,this.keySelector))}}class ES extends Jr.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:i}=this;t=i?i(e):e}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}var Ye,Vr=B(2011),SS=(B(1254),B(3942)),pe=B(5861),Oi=B(9681),ia=B(4859),Hs=B(1877),P=B(2090),CM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Yl={},pw=pw||{},At=CM||self;function kd(){}function au(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Sg(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var gw="closure_uid_"+(1e9*Math.random()>>>0),EM=0;function mw(n,e,t){return n.call.apply(n.bind,arguments)}function za(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ir(n,e,t){return(Ir=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?mw:za).apply(null,arguments)}function ei(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function cr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,s){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function sa(){this.s=this.s,this.o=this.o}var _w={};sa.prototype.s=!1,sa.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Dg(n){return Object.prototype.hasOwnProperty.call(n,gw)&&n[gw]||(n[gw]=++EM)}(this);delete _w[n]}},sa.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Od=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Nd=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let s=0;s<r;s++)s in i&&e.call(t,i[s],s,n)};function Pd(n){return Array.prototype.concat.apply([],arguments)}function lu(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Kl(n){return/^[\s\xa0]*$/.test(n)}var Yi,Fd=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Br(n,e){return-1!=n.indexOf(e)}function cu(n,e){return n<e?-1:n>e?1:0}e:{var yw=At.navigator;if(yw){var vw=yw.userAgent;if(vw){Yi=vw;break e}}Yi=""}function ly(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function bw(n){const e={};for(const t in n)e[t]=n[t];return e}var ww="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cw(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<ww.length;s++)t=ww[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function cy(n){return cy[" "](n),n}cy[" "]=kd;var Tg,n,SM=Br(Yi,"Opera"),Ld=Br(Yi,"Trident")||Br(Yi,"MSIE"),TS=Br(Yi,"Edge"),uy=TS||Ld,Ew=Br(Yi,"Gecko")&&!(Br(Yi.toLowerCase(),"webkit")&&!Br(Yi,"Edge"))&&!(Br(Yi,"Trident")||Br(Yi,"MSIE"))&&!Br(Yi,"Edge"),DM=Br(Yi.toLowerCase(),"webkit")&&!Br(Yi,"Edge");function IS(){var n=At.document;return n?n.documentMode:void 0}e:{var Sw="",dy=(n=Yi,Ew?/rv:([^\);]+)(\)|;)/.exec(n):TS?/Edge\/([\d\.]+)/.exec(n):Ld?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):DM?/WebKit\/(\S+)/.exec(n):SM?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(dy&&(Sw=dy?dy[1]:""),Ld){var Dw=IS();if(null!=Dw&&Dw>parseFloat(Sw)){Tg=String(Dw);break e}}Tg=Sw}var TM={};var Iw=At.document&&Ld&&(IS()||parseInt(Tg,10))||void 0,IM=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{At.addEventListener("test",kd,e),At.removeEventListener("test",kd,e)}catch(t){}return n}();function ls(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function fy(n,e){if(ls.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Ew){e:{try{cy(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:qP[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&fy.Z.h.call(this)}}ls.prototype.h=function(){this.defaultPrevented=!0},cr(fy,ls);var qP={2:"touch",3:"pen",4:"mouse"};fy.prototype.h=function(){fy.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ig="closure_listenable_"+(1e6*Math.random()|0),AS=0;function WP(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++AS,this.ca=this.fa=!1}function py(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Zl(n){this.src=n,this.g={},this.h=0}function Aw(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=Od(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(py(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function gy(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==r)return i}return-1}Zl.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=gy(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new WP(e,this.src,s,!!r,i)).fa=t,n.push(e)),e};var Mw="closure_lm_"+(1e6*Math.random()|0),my={};function Ag(n,e,t,r,i){if(r&&r.once)return RS(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Ag(n,e[s],t,r,i);return null}return t=yy(t),n&&n[Ig]?n.N(e,t,Sg(r)?!!r.capture:!!r,i):MS(n,e,t,!1,r,i)}function MS(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var c=Sg(i)?!!i.capture:!!i,h=_y(n);if(h||(n[Mw]=h=new Zl(n)),(t=h.add(e,t,r,c,s)).proxy)return t;if(r=function xS(){var e=AM;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)IM||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(OS(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function RS(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)RS(n,e[s],t,r,i);return null}return t=yy(t),n&&n[Ig]?n.O(e,t,Sg(r)?!!r.capture:!!r,i):MS(n,e,t,!0,r,i)}function kS(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)kS(n,e[s],t,r,i);else r=Sg(r)?!!r.capture:!!r,t=yy(t),n&&n[Ig]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=gy(s=n.g[e],t,r,i))&&(py(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=_y(n))&&(e=n.g[e.toString()],n=-1,e&&(n=gy(e,t,r,i)),(t=-1<n?e[n]:null)&&xw(t))}function xw(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ig])Aw(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(OS(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=_y(e))?(Aw(t,n),0==t.h&&(t.src=null,e[Mw]=null)):py(n)}}}function OS(n){return n in my?my[n]:my[n]="on"+n}function AM(n,e){if(n.ca)n=!0;else{e=new fy(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&xw(n),n=t.call(r,e)}return n}function _y(n){return(n=n[Mw])instanceof Zl?n:null}var Rw="__closure_events_fn_"+(1e9*Math.random()>>>0);function yy(n){return"function"==typeof n?n:(n[Rw]||(n[Rw]=function(e){return n.handleEvent(e)}),n[Rw])}function ti(){sa.call(this),this.i=new Zl(this),this.P=this,this.I=null}function ni(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ls(e,n);else if(e instanceof ls)e.target=e.target||n;else{var i=e;Cw(e=new ls(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var c=e.g=t[s];i=kw(c,r,!0,e)&&i}if(i=kw(c=e.g=n,r,!0,e)&&i,i=kw(c,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=kw(c=e.g=t[s],r,!1,e)&&i}function kw(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var c=e[s];if(c&&!c.ca&&c.capture==t){var h=c.listener,g=c.ia||c.src;c.fa&&Aw(n.i,c),i=!1!==h.call(g,r)&&i}}return i&&!r.defaultPrevented}cr(ti,sa),ti.prototype[Ig]=!0,ti.prototype.removeEventListener=function(n,e,t,r){kS(this,n,e,t,r)},ti.prototype.M=function(){if(ti.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)py(t[r]);delete n.g[e],n.h--}}this.I=null},ti.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ti.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Mg=At.JSON.stringify;function MM(){var n=by;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Nw,bf=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new NS,n=>n.reset());class NS{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ow(n){At.setTimeout(()=>{throw n},0)}function xg(n,e){Nw||function vy(){var n=At.Promise.resolve(void 0);Nw=function(){n.then(KP)}}(),wf||(Nw(),wf=!0),by.add(n,e)}var wf=!1,by=new class YP{constructor(){this.h=this.g=null}add(e,t){const r=bf.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function KP(){for(var n;n=MM();){try{n.h.call(n.g)}catch(t){Ow(t)}var e=bf;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}wf=!1}function wy(n,e){ti.call(this),this.h=n||1,this.g=e||At,this.j=Ir(this.kb,this),this.l=Date.now()}function Cf(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Ef(n,e,t){if("function"==typeof n)t&&(n=Ir(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ir(n.handleEvent,n)}return 2147483647<Number(e)?-1:At.setTimeout(n,e||0)}function Cy(n){n.g=Ef(()=>{n.g=null,n.i&&(n.i=!1,Cy(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}cr(wy,ti),(Ye=wy.prototype).da=!1,Ye.S=null,Ye.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ni(this,"tick"),this.da&&(Cf(this),this.start()))}},Ye.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ye.M=function(){wy.Z.M.call(this),Cf(this),delete this.g};class PS extends sa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Cy(this)}M(){super.M(),this.g&&(At.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vd(n){sa.call(this),this.h=n,this.g={}}cr(Vd,sa);var Pw=[];function Fw(n,e,t,r){Array.isArray(t)||(t&&(Pw[0]=t.toString()),t=Pw);for(var i=0;i<t.length;i++){var s=Ag(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function Ey(n){ly(n.g,function(e,t){this.g.hasOwnProperty(t)&&xw(e)},n),n.g={}}function Sf(){this.g=!0}function Bd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function LS(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<i.length;c++)i[c]=""}}}return Mg(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}Vd.prototype.M=function(){Vd.Z.M.call(this),Ey(this)},Vd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Sf.prototype.Aa=function(){this.g=!1},Sf.prototype.info=function(){};var Ud={},Vw=null;function Rg(){return Vw=Vw||new ti}function Bw(n){ls.call(this,Ud.Ma,n)}function Hd(n){const e=Rg();ni(e,new Bw(e,n))}function Uw(n,e){ls.call(this,Ud.STAT_EVENT,n),this.stat=e}function Ki(n){const e=Rg();ni(e,new Uw(e,n))}function Hw(n,e){ls.call(this,Ud.Na,n),this.size=e}function Df(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return At.setTimeout(function(){n()},e)}Ud.Ma="serverreachability",cr(Bw,ls),Ud.STAT_EVENT="statevent",cr(Uw,ls),Ud.Na="timingevent",cr(Hw,ls);var kg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},jw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Sy(){}function RM(){}Sy.prototype.h=null;var zw,Og={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function $w(){ls.call(this,"d")}function Dy(){ls.call(this,"c")}function mr(){}function Tf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Vd(this),this.P=kM,this.W=new wy(n=uy?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new VS}function VS(){this.i=null,this.g="",this.h=!1}cr($w,ls),cr(Dy,ls),cr(mr,Sy),mr.prototype.g=function(){return new XMLHttpRequest},mr.prototype.i=function(){return{}},zw=new mr;var kM=45e3,Ty={},Iy={};function Ay(n,e,t){n.K=1,n.v=Ny(Jl(e)),n.s=t,n.U=!0,qw(n,null)}function qw(n,e){n.F=Date.now(),If(n),n.A=Jl(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Qw(t.h,"t",r),n.C=0,t=n.l.H,n.h=new VS,n.g=aD(n.l,t?e:null,!n.s),0<n.O&&(n.L=new PS(Ir(n.Ia,n,n.g),n.O)),Fw(n.V,n.g,"readystatechange",n.gb),e=n.H?bw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Hd(1),function xM(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var c="",h=s.split("&"),g=0;g<h.length;g++){var y=h[g].split("=");if(1<y.length){var E=y[0];y=y[1];var T=E.split("_");c=2<=T.length&&"type"==T[1]?c+(E+"=")+y+"&":c+(E+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function jd(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function BS(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=OM(n,t),i==Iy){4==e&&(n.o=4,Ki(14),r=!1),Bd(n.j,n.m,null,"[Incomplete Response]");break}if(i==Ty){n.o=4,Ki(15),Bd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Bd(n.j,n.m,i,null),Pg(n,i)}jd(n)&&i!=Iy&&i!=Ty&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ki(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),sD(e),e.L=!0,Ki(11))):(Bd(n.j,n.m,t,"[Invalid Chunked Response]"),Ql(n),My(n))}function OM(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Iy:(t=Number(e.substring(t,r)),isNaN(t)?Ty:(r+=1)+t>e.length?Iy:(e=e.substr(r,t),n.C=r+t,e))}function If(n){n.Y=Date.now()+n.P,US(n,n.P)}function US(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Df(Ir(n.eb,n),e)}function Ng(n){n.B&&(At.clearTimeout(n.B),n.B=null)}function My(n){0==n.l.G||n.I||oD(n.l,n)}function Ql(n){Ng(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Cf(n.W),Ey(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Pg(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Xw(t.i,n)))if(t.I=n.N,!n.J&&Xw(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Df(Ir(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;$y(t),oC(t)}Xn(t),Ki(18)}if(1>=KS(t.i)&&t.ka){try{t.ka()}catch(y){}t.ka=void 0}}else du(t,11)}else if((n.J||t.g==n)&&$y(t),!Kl(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const E=y[3];null!=E&&(t.ma=E,t.h.info("VER="+t.ma));const T=y[4];null!=T&&(t.za=T,t.h.info("SVER="+t.za));const x=y[5];null!=x&&"number"==typeof x&&0<x&&(t.K=r=1.5*x,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const N=n.g;if(N){const U=N.g?N.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var s=r.i;!s.g&&(Br(U,"spdy")||Br(U,"quic")||Br(U,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(eC(s,s.h),s.h=null))}if(r.D){const K=N.g?N.g.getResponseHeader("X-HTTP-Session-Id"):null;K&&(r.sa=K,Mn(r.F,r.D,K))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=dC(r,r.H?r.la:null,r.W),c.J){ZS(r.i,c);var h=c,g=r.K;g&&h.setTimeout(g),h.B&&(Ng(h),If(h)),r.g=c}else jg(r);0<t.l.length&&Gy(t)}else"stop"!=y[0]&&"close"!=y[0]||du(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?du(t,7):jy(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}Hd(4)}catch(y){}}function Ww(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(au(n)||"string"==typeof n)Nd(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(au(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function qa(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(au(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}}function Af(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Af)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Eo(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Ni(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Ni(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Ni(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ye=Tf.prototype).setTimeout=function(n){this.P=n},Ye.gb=function(n){n=n.target;const e=this.L;e&&3==ec(n)?e.l():this.Ia(n)},Ye.Ia=function(n){try{if(n==this.g)e:{const E=ec(this.g);var e=this.g.Da();const T=this.g.ba();if(!(3>E)&&(3!=E||uy||this.g&&(this.h.h||this.g.ga()||$d(this.g)))){this.I||4!=E||7==e||Hd(8==e||0>=T?3:2),Ng(this);var t=this.g.ba();this.N=t;t:if(jd(this)){var r=$d(this.g);n="";var i=r.length,s=4==ec(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ql(this),My(this);var c="";break t}this.h.i=new At.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function FS(n,e,t,r,i,s,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.X,E,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,g=this.g;if((h=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kl(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Ki(12),Ql(this),My(this);break e}Bd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Pg(this,t)}this.U?(BS(this,E,c),uy&&this.i&&3==E&&(Fw(this.V,this.W,"tick",this.fb),this.W.start())):(Bd(this.j,this.m,c,null),Pg(this,c)),4==E&&Ql(this),this.i&&!this.I&&(4==E?oD(this.l,this):(this.i=!1,If(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Ki(12)):(this.o=0,Ki(13)),Ql(this),My(this)}}}catch(E){}},Ye.fb=function(){if(this.g){var n=ec(this.g),e=this.g.ga();this.C<e.length&&(Ng(this),BS(this,n,e),this.i&&4!=n&&If(this))}},Ye.cancel=function(){this.I=!0,Ql(this)},Ye.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Lw(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Hd(3),Ki(17)),Ql(this),this.o=2,My(this)):US(this,this.Y-n)},(Ye=Af.prototype).R=function(){Eo(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ye.T=function(){return Eo(this),this.g.concat()},Ye.get=function(n,e){return Ni(this.h,n)?this.h[n]:e},Ye.set=function(n,e){Ni(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ye.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],s=this.get(i);n.call(e,s,i,this)}};var So=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function uu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof uu){this.g=void 0!==e?e:n.g,xy(this,n.j),this.s=n.s,Ry(this,n.i),ky(this,n.m),this.l=n.l,e=n.h;var t=new Rf;t.i=e.i,e.g&&(t.g=new Af(e.g),t.h=e.h),Oy(this,t),this.o=n.o}else n&&(t=String(n).match(So))?(this.g=!!e,xy(this,t[1]||"",!0),this.s=Mf(t[2]||""),Ry(this,t[3]||"",!0),ky(this,t[4]),this.l=Mf(t[5]||"",!0),Oy(this,t[6]||"",!0),this.o=Mf(t[7]||"")):(this.g=!!e,this.h=new Rf(null,this.g))}function Jl(n){return new uu(n)}function xy(n,e,t){n.j=t?Mf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ry(n,e,t){n.i=t?Mf(e,!0):e}function ky(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Oy(n,e,t){e instanceof Rf?(n.h=e,function qS(n,e){e&&!n.j&&(Xl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Kw(this,r),Qw(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=xf(e,Yw)),n.h=new Rf(e,n.g))}function Mn(n,e,t){n.h.set(e,t)}function Ny(n){return Mn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Mf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function xf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Py),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Py(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}uu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(xf(e,GS,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(xf(e,GS,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(xf(t,"/"==t.charAt(0)?zS:$S,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",xf(t,Fy)),n.join("")};var GS=/[#\/\?@]/g,$S=/[#\?:]/g,zS=/[#\?]/g,Yw=/[#\?@]/g,Fy=/#/g;function Rf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Xl(n){n.g||(n.g=new Af,n.h=0,n.i&&function HS(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Kw(n,e){Xl(n),e=Gd(n,e),Ni(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Ni((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Eo(n)))}function Zw(n,e){return Xl(n),e=Gd(n,e),Ni(n.g.h,e)}function Qw(n,e,t){Kw(n,e),0<t.length&&(n.i=null,n.g.set(Gd(n,e),lu(t)),n.h+=t.length)}function Gd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Jw(n){this.l=n||PM,n=At.PerformanceNavigationTiming?0<(n=At.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(At.g&&At.g.Ea&&At.g.Ea()&&At.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ye=Rf.prototype).add=function(n,e){Xl(this),this.i=null,n=Gd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ye.forEach=function(n,e){Xl(this),this.g.forEach(function(t,r){Nd(t,function(i){n.call(e,i,r,this)},this)},this)},Ye.T=function(){Xl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],s=0;s<i.length;s++)t.push(e[r]);return t},Ye.R=function(n){Xl(this);var e=[];if("string"==typeof n)Zw(this,n)&&(e=Pd(e,this.g.get(Gd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Pd(e,n[t])}return e},Ye.set=function(n,e){return Xl(this),this.i=null,Zw(this,n=Gd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ye.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ye.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var c=i;""!==r[s]&&(c+="="+encodeURIComponent(String(r[s]))),n.push(c)}}return this.i=n.join("&")};var PM=10;function YS(n){return!!n.h||!!n.g&&n.g.size>=n.j}function KS(n){return n.h?1:n.g?n.g.size:0}function Xw(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function eC(n,e){n.g?n.g.add(e):n.h=e}function ZS(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function QS(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return lu(n.i)}function tC(){}function FM(){this.g=new tC}function LM(n,e,t){const r=t||"";try{Ww(n,function(i,s){let c=i;Sg(i)&&(c=Mg(i)),e.push(r+s+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ly(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function Fg(n){this.l=n.$b||null,this.j=n.ib||!1}function Vy(n,e){ti.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=nC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Jw.prototype.cancel=function(){if(this.i=QS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},tC.prototype.stringify=function(n){return At.JSON.stringify(n,void 0)},tC.prototype.parse=function(n){return At.JSON.parse(n,void 0)},cr(Fg,Sy),Fg.prototype.g=function(){return new Vy(this.l,this.j)},Fg.prototype.i=function(n){return function(){return n}}({}),cr(Vy,ti);var nC=0;function JS(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Lg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,kf(n)}function kf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ye=Vy.prototype).open=function(n,e){if(this.readyState!=nC)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,kf(this)},Ye.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||At).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ye.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lg(this)),this.readyState=nC},Ye.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,kf(this)),this.g&&(this.readyState=3,kf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==At.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;JS(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ye.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Lg(this):kf(this),3==this.readyState&&JS(this)}},Ye.Ua=function(n){this.g&&(this.response=this.responseText=n,Lg(this))},Ye.Ta=function(n){this.g&&(this.response=n,Lg(this))},Ye.ha=function(){this.g&&Lg(this)},Ye.setRequestHeader=function(n,e){this.v.append(n,e)},Ye.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ye.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Vy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var XS=At.JSON.parse;function Ar(n){ti.call(this),this.headers=new Af,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=rC,this.K=this.L=!1}cr(Ar,ti);var rC="",eD=/^https?$/i,tD=["POST","PUT"];function rD(n){return"content-type"==n.toLowerCase()}function iC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,By(n),Wa(n)}function By(n){n.D||(n.D=!0,ni(n,"complete"),ni(n,"error"))}function Uy(n){if(n.h&&void 0!==pw&&(!n.C[1]||4!=ec(n)||2!=n.ba()))if(n.v&&4==ec(n))Ef(n.Fa,0,n);else if(ni(n,"readystatechange"),4==ec(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(So)[1]||null;if(!i&&At.self&&At.self.location){var s=At.self.location.protocol;i=s.substr(0,s.length-1)}r=!eD.test(i?i.toLowerCase():"")}t=r}if(t)ni(n,"complete"),ni(n,"success");else{n.m=6;try{var c=2<ec(n)?n.g.statusText:""}catch(g){c=""}n.j=c+" ["+n.ba()+"]",By(n)}}finally{Wa(n)}}}function Wa(n,e){if(n.g){iD(n);const t=n.g,r=n.C[0]?kd:null;n.g=null,n.C=null,e||ni(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function iD(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(At.clearTimeout(n.A),n.A=null)}function ec(n){return n.g?n.g.readyState:0}function $d(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case rC:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Vg(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function ZP(n){let e="";return ly(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Mn(n,e,t))}function Hy(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function sC(n){this.za=0,this.l=[],this.h=new Sf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Hy("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Hy("baseRetryDelayMs",5e3,n),this.$a=Hy("retryDelaySeedMs",1e4,n),this.Ya=Hy("forwardChannelMaxRetries",2,n),this.ra=Hy("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Jw(n&&n.concurrentRequestLimit),this.Ca=new FM,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function jy(n){if(pt(n),3==n.G){var e=n.V++,t=Jl(n.F);Mn(t,"SID",n.J),Mn(t,"RID",e),Mn(t,"TYPE","terminate"),Ug(n,t),(e=new Tf(n,n.h,e,void 0)).K=2,e.v=Ny(Jl(t)),t=!1,At.navigator&&At.navigator.sendBeacon&&(t=At.navigator.sendBeacon(e.v.toString(),"")),!t&&At.Image&&((new Image).src=e.v,t=!0),t||(e.g=aD(e.l,null),e.g.ea(e.v)),e.F=Date.now(),If(e)}uC(n)}function oC(n){n.g&&(sD(n),n.g.cancel(),n.g=null)}function pt(n){oC(n),n.u&&(At.clearTimeout(n.u),n.u=null),$y(n),n.i.cancel(),n.m&&("number"==typeof n.m&&At.clearTimeout(n.m),n.m=null)}function aC(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Gy(n)}function Gy(n){YS(n.i)||n.m||(n.m=!0,xg(n.Ha,n),n.C=0)}function Bg(n,e){var t;t=e?e.m:n.V++;const r=Jl(n.F);Mn(r,"SID",n.J),Mn(r,"RID",t),Mn(r,"AID",n.U),Ug(n,r),n.o&&n.s&&Vg(r,n.o,n.s),t=new Tf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Hg(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),eC(n.i,t),Ay(t,r,e)}function Ug(n,e){n.j&&Ww({},function(t,r){Mn(e,r,t)})}function Hg(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Ir(n.j.Oa,n.j,n):null;e:{var i=n.l;let s=-1;for(;;){const c=["count="+t];-1==s?0<t?(s=i[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let h=!0;for(let g=0;g<t;g++){let y=i[g].h;const E=i[g].g;if(y-=s,0>y)s=Math.max(0,i[g].h-100),h=!1;else try{LM(E,c,"req"+y+"_")}catch(T){r&&r(E)}}if(h){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function jg(n){n.g||n.u||(n.Y=1,xg(n.Ga,n),n.A=0)}function Xn(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Df(Ir(n.Ga,n),cC(n,n.A)),n.A++,0))}function sD(n){null!=n.B&&(At.clearTimeout(n.B),n.B=null)}function lC(n){n.g=new Tf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Jl(n.oa);Mn(e,"RID","rpc"),Mn(e,"SID",n.J),Mn(e,"CI",n.N?"0":"1"),Mn(e,"AID",n.U),Ug(n,e),Mn(e,"TYPE","xmlhttp"),n.o&&n.s&&Vg(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Ny(Jl(e)),t.s=null,t.U=!0,qw(t,n)}function $y(n){null!=n.v&&(At.clearTimeout(n.v),n.v=null)}function oD(n,e){var t=null;if(n.g==e){$y(n),sD(n),n.g=null;var r=2}else{if(!Xw(n.i,e))return;t=e.D,ZS(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ni(r=Rg(),new Hw(r,t,e,i)),Gy(n)}else jg(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function BM(n,e){return!(KS(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Df(Ir(n.Ha,n,e),cC(n,n.C)),n.C++,0)))}(n,e)||2==r&&Xn(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:du(n,5);break;case 4:du(n,10);break;case 3:du(n,6);break;default:du(n,2)}}function cC(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function du(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Ir(n.jb,n);t||(t=new uu("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||xy(t,"https"),Ny(t)),function VM(n,e){const t=new Sf;if(At.Image){const r=new Image;r.onload=ei(Ly,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ei(Ly,t,r,"TestLoadImage: error",!1,e),r.onabort=ei(Ly,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ei(Ly,t,r,"TestLoadImage: timeout",!1,e),At.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ki(2);n.G=0,n.j&&n.j.va(e),uC(n),pt(n)}function uC(n){n.G=0,n.I=-1,n.j&&((0!=QS(n.i).length||0!=n.l.length)&&(n.i.i.length=0,lu(n.l),n.l.length=0),n.j.ua())}function dC(n,e,t){let r=function jS(n){return n instanceof uu?Jl(n):new uu(n,void 0)}(t);if(""!=r.i)e&&Ry(r,e+"."+r.i),ky(r,r.m);else{const i=At.location;r=function NM(n,e,t,r){var i=new uu(null,void 0);return n&&xy(i,n),e&&Ry(i,e),t&&ky(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&ly(n.aa,function(i,s){Mn(r,s,i)}),t=n.sa,(e=n.D)&&t&&Mn(r,e,t),Mn(r,"VER",n.ma),Ug(n,r),r}function aD(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ar(t&&n.Ba&&!n.qa?new Fg({ib:!0}):n.qa)).L=n.H,e}function lD(){}function zy(){if(Ld&&!(10<=Number(Iw)))throw Error("Environmental error: no available transport.")}function Pi(n,e){ti.call(this),this.g=new sC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Kl(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Kl(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Of(this)}function cD(n){$w.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function uD(){Dy.call(this),this.status=1}function Of(n){this.g=n}(Ye=Ar.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():zw.g(),this.C=function Gw(n){return n.h||(n.h=n.i())}(this.u?this.u:zw),this.g.onreadystatechange=Ir(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void iC(this,s)}n=t||"";const i=new Af(this.headers);r&&Ww(r,function(s,c){i.set(c,s)}),r=function vf(n){e:{var e=rD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=At.FormData&&n instanceof At.FormData,!(0<=Od(tD,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,c){this.g.setRequestHeader(c,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{iD(this),0<this.B&&((this.K=function nD(n){return Ld&&function zP(){return function DS(n){var e=TM;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Fd(String(Tg)).split("."),t=Fd("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",s=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=cu(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||cu(0==i[2].length,0==s[2].length)||cu(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ir(this.pa,this)):this.A=Ef(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){iC(this,s)}},Ye.pa=function(){void 0!==pw&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ni(this,"timeout"),this.abort(8))},Ye.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ni(this,"complete"),ni(this,"abort"),Wa(this))},Ye.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Wa(this,!0)),Ar.Z.M.call(this)},Ye.Fa=function(){this.s||(this.F||this.v||this.l?Uy(this):this.cb())},Ye.cb=function(){Uy(this)},Ye.ba=function(){try{return 2<ec(this)?this.g.status:-1}catch(n){return-1}},Ye.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ye.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),XS(e)}},Ye.Da=function(){return this.m},Ye.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ye=sC.prototype).ma=8,Ye.G=1,Ye.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ye.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Tf(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=bw(s),Cw(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Hg(this,i,e),Mn(t=Jl(this.F),"RID",n),Mn(t,"CVER",22),this.D&&Mn(t,"X-HTTP-Session-Id",this.D),Ug(this,t),this.o&&s&&Vg(t,this.o,s),eC(this.i,i),this.Ra&&Mn(t,"TYPE","init"),this.ja?(Mn(t,"$req",e),Mn(t,"SID","null"),i.$=!0,Ay(i,t,null)):Ay(i,t,e),this.G=2}}else 3==this.G&&(n?Bg(this,n):0==this.l.length||YS(this.i)||Bg(this))},Ye.Ga=function(){if(this.u=null,lC(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Df(Ir(this.bb,this),n)}},Ye.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ki(10),oC(this),lC(this))},Ye.ab=function(){null!=this.v&&(this.v=null,oC(this),Xn(this),Ki(19))},Ye.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ki(2)):(this.h.info("Failed to ping google.com"),Ki(1))},(Ye=lD.prototype).xa=function(){},Ye.wa=function(){},Ye.va=function(){},Ye.ua=function(){},Ye.Oa=function(){},zy.prototype.g=function(n,e){return new Pi(n,e)},cr(Pi,ti),Pi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),xg(Ir(n.hb,n,e))),Ki(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=dC(n,null,n.W),Gy(n)},Pi.prototype.close=function(){jy(this.g)},Pi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,aC(this.g,e)}else this.v?((e={}).__data__=Mg(n),aC(this.g,e)):aC(this.g,n)},Pi.prototype.M=function(){this.g.j=null,delete this.j,jy(this.g),delete this.g,Pi.Z.M.call(this)},cr(cD,$w),cr(uD,Dy),cr(Of,lD),Of.prototype.xa=function(){ni(this.g,"a")},Of.prototype.wa=function(n){ni(this.g,new cD(n))},Of.prototype.va=function(n){ni(this.g,new uD(n))},Of.prototype.ua=function(){ni(this.g,"b")},zy.prototype.createWebChannel=zy.prototype.g,Pi.prototype.send=Pi.prototype.u,Pi.prototype.open=Pi.prototype.m,Pi.prototype.close=Pi.prototype.close,kg.NO_ERROR=0,kg.TIMEOUT=8,kg.HTTP_ERROR=6,jw.COMPLETE="complete",RM.EventType=Og,Og.OPEN="a",Og.CLOSE="b",Og.ERROR="c",Og.MESSAGE="d",ti.prototype.listen=ti.prototype.N,Ar.prototype.listenOnce=Ar.prototype.O,Ar.prototype.getLastError=Ar.prototype.La,Ar.prototype.getLastErrorCode=Ar.prototype.Da,Ar.prototype.getStatus=Ar.prototype.ba,Ar.prototype.getResponseJson=Ar.prototype.Qa,Ar.prototype.getResponseText=Ar.prototype.ga,Ar.prototype.send=Ar.prototype.ea;var qy=Yl.createWebChannelTransport=function(){return new zy},dD=Yl.getStatEventTarget=function(){return Rg()},Wy=Yl.ErrorCode=kg,hD=Yl.EventType=jw,UM=Yl.Event=Ud,Nf=Yl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Gg=Yl.FetchXmlHttpFactory=Fg,Yy=Yl.WebChannel=RM,HM=Yl.XhrIo=Ar;const fD="@firebase/firestore";class gi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gi.UNAUTHENTICATED=new gi(null),gi.GOOGLE_CREDENTIALS=new gi("google-credentials-uid"),gi.FIRST_PARTY=new gi("first-party-uid"),gi.MOCK_USER=new gi("mock-user");let zd="9.6.10";const tc=new Hs.Yd("@firebase/firestore");function hC(){return tc.logLevel}function Re(n,...e){if(tc.logLevel<=Hs.in.DEBUG){const t=e.map(gD);tc.debug(`Firestore (${zd}): ${n}`,...t)}}function Ur(n,...e){if(tc.logLevel<=Hs.in.ERROR){const t=e.map(gD);tc.error(`Firestore (${zd}): ${n}`,...t)}}function Ky(n,...e){if(tc.logLevel<=Hs.in.WARN){const t=e.map(gD);tc.warn(`Firestore (${zd}): ${n}`,...t)}}function gD(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Je(n="Unexpected state"){const e=`FIRESTORE (${zd}) INTERNAL ASSERTION FAILED: `+n;throw Ur(e),new Error(e)}function Ct(n,e){n||Je()}function Ve(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ri{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Pf{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gi.UNAUTHENTICATED))}shutdown(){}}class GM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $M{constructor(e){this.t=e,this.currentUser=gi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let c=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ri,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const y=c;e.enqueueRetryable((0,pe.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},g=y=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ri)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new Pf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new gi(e)}}class zM{constructor(e,t,r){this.type="FirstParty",this.user=gi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class qM{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new zM(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(gi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WM{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=s=>{null!=s.error&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.p;return this.p=s.token,Re("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.p=t.token,new fC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class mi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function YM(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}mi.A=-1;class pC{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=YM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function $t(n,e){return n<e?-1:n>e?1:0}function qd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function _D(n){return n+"\0"}class _r{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new De(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new De(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new De(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _r.fromMillis(Date.now())}static fromDate(e){return _r.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new _r(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new _r(0,0))}static max(){return new vt(new _r(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Zy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function gC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Ff{constructor(e,t,r){void 0===t?t=0:t>e.length&&Je(),void 0===r?r=e.length-t:r>e.length-t&&Je(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ff.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ff?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),c=t.get(i);if(s<c)return-1;if(s>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class rn extends Ff{construct(e,t,r){return new rn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new De(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new rn(t)}static emptyPath(){return new rn([])}}const KM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _i extends Ff{construct(e,t,r){return new _i(e,t,r)}static isValidIdentifier(e){return KM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_i.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new _i(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new De(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new De(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new De(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(s(),i++)}if(s(),c)throw new De(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _i(t)}static emptyPath(){return new _i([])}}class hu{constructor(e){this.fields=e,e.sort(_i.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Hr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Hr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Hr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hr.EMPTY_BYTE_STRING=new Hr("");const QM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fu(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=QM.exec(n);if(Ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yr(n.seconds),nanos:yr(n.nanos)}}function yr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Yd(n){return"string"==typeof n?Hr.fromBase64String(n):Hr.fromUint8Array(n)}function mC(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function yD(n){const e=n.mapValue.fields.__previous_value__;return mC(e)?yD(e):e}function $g(n){const e=fu(n.mapValue.fields.__local_write_time__.timestampValue);return new _r(e.seconds,e.nanos)}class JM{constructor(e,t,r,i,s,c,h,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=g}}class Ya{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ya("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ya&&e.projectId===this.projectId&&e.database===this.database}}function pu(n){return null==n}function zg(n){return 0===n&&1/n==-1/0}function vD(n){return"number"==typeof n&&Number.isInteger(n)&&!zg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(rn.fromString(e))}static fromName(e){return new Ne(rn.fromString(e).popFirst(5))}static empty(){return new Ne(rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===rn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new rn(e.slice()))}}const bD={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wD={nullValue:"NULL_VALUE"};function Kd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mC(n)?4:XM(n)?9:10:Je()}function Do(n,e){if(n===e)return!0;const t=Kd(n);if(t!==Kd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $g(n).isEqual($g(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=fu(r.timestampValue),c=fu(i.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Yd(n.bytesValue).isEqual(Yd(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return yr(r.geoPointValue.latitude)===yr(i.geoPointValue.latitude)&&yr(r.geoPointValue.longitude)===yr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return yr(r.integerValue)===yr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=yr(r.doubleValue),c=yr(i.doubleValue);return s===c?zg(s)===zg(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return qd(n.arrayValue.values||[],e.arrayValue.values||[],Do);case 10:return function(r,i){const s=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Zy(s)!==Zy(c))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===c[h]||!Do(s[h],c[h])))return!1;return!0}(n,e);default:return Je()}var i}function Zd(n,e){return void 0!==(n.values||[]).find(t=>Do(t,e))}function nc(n,e){if(n===e)return 0;const t=Kd(n),r=Kd(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return function(i,s){const c=yr(i.integerValue||i.doubleValue),h=yr(s.integerValue||s.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return Qy(n.timestampValue,e.timestampValue);case 4:return Qy($g(n),$g(e));case 5:return $t(n.stringValue,e.stringValue);case 6:return function(i,s){const c=Yd(i),h=Yd(s);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const c=i.split("/"),h=s.split("/");for(let g=0;g<c.length&&g<h.length;g++){const y=$t(c[g],h[g]);if(0!==y)return y}return $t(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const c=$t(yr(i.latitude),yr(s.latitude));return 0!==c?c:$t(yr(i.longitude),yr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const c=i.values||[],h=s.values||[];for(let g=0;g<c.length&&g<h.length;++g){const y=nc(c[g],h[g]);if(y)return y}return $t(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){const c=i.fields||{},h=Object.keys(c),g=s.fields||{},y=Object.keys(g);h.sort(),y.sort();for(let E=0;E<h.length&&E<y.length;++E){const T=$t(h[E],y[E]);if(0!==T)return T;const x=nc(c[h[E]],g[y[E]]);if(0!==x)return x}return $t(h.length,y.length)}(n.mapValue,e.mapValue);default:throw Je()}}function Qy(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return $t(n,e);const t=fu(n),r=fu(e),i=$t(t.seconds,r.seconds);return 0!==i?i:$t(t.nanos,r.nanos)}function Lf(n){return _C(n)}function _C(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=fu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Yd(n.bytesValue).toBase64():"referenceValue"in n?Ne.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const c of r.values||[])s?s=!1:i+=",",i+=_C(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",c=!0;for(const h of i)c?c=!1:s+=",",s+=`${h}:${_C(r.fields[h])}`;return s+"}"}(n.mapValue):Je();var e}function gu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yC(n){return!!n&&"integerValue"in n}function Vf(n){return!!n&&"arrayValue"in n}function CD(n){return!!n&&"nullValue"in n}function vC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jy(n){return!!n&&"mapValue"in n}function Bf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Wd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Bf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function XM(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function ED(n,e){return void 0===n?e:void 0===e||nc(n,e)>0?n:e}function qg(n,e){return void 0===n?e:void 0===e||nc(n,e)<0?n:e}class Zi{constructor(e){this.value=e}static empty(){return new Zi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Jy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bf(t)}setAll(e){let t=_i.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=Bf(c):i.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Jy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Do(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Jy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Wd(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Zi(Bf(this.value))}}function Qd(n){const e=[];return Wd(n.fields,(t,r)=>{const i=new _i([t]);if(Jy(r)){const s=Qd(r.mapValue).fields;if(0===s.length)e.push(i);else for(const c of s)e.push(i.child(c))}else e.push(i)}),new hu(e)}class Dn{constructor(e,t,r,i,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=c}static newInvalidDocument(e){return new Dn(e,0,vt.min(),vt.min(),Zi.empty(),0)}static newFoundDocument(e,t,r){return new Dn(e,1,t,vt.min(),r,0)}static newNoDocument(e,t){return new Dn(e,2,t,vt.min(),Zi.empty(),0)}static newUnknownDocument(e,t){return new Dn(e,3,t,vt.min(),Zi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xy{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function SD(n){return n.fields.find(e=>2===e.kind)}function Jd(n){return n.fields.filter(e=>2!==e.kind)}Xy.UNKNOWN_ID=-1;class ev{constructor(e,t){this.fieldPath=e,this.kind=t}}class Wg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Wg(0,Ka.min())}}function DD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=vt.fromTimestamp(1e9===r?new _r(t+1,0):new _r(t,r));return new Ka(i,Ne.empty(),e)}function ex(n){return new Ka(n.readTime,n.key,-1)}class Ka{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ka(vt.min(),Ne.empty(),-1)}static max(){return new Ka(vt.max(),Ne.empty(),-1)}}function TD(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ne.comparator(n.documentKey,e.documentKey),0!==t?t:$t(n.largestBatchId,e.largestBatchId))}class bC{constructor(e,t=null,r=[],i=[],s=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=c,this.endAt=h,this.P=null}}function Yg(n,e=null,t=[],r=[],i=null,s=null,c=null){return new bC(n,e,t,r,i,s,c)}function oa(n){const e=Ve(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Lf(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),pu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Lf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Lf(r)).join(",")),e.P=t}return e.P}function Uf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!ix(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Do(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!CC(n.startAt,e.startAt)&&CC(n.endAt,e.endAt)}function Kg(n){return Ne.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function tv(n,e){return n.filters.filter(t=>t instanceof Fi&&t.field.isEqual(e))}class Fi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new wC(e,t,r):"array-contains"===t?new rx(e,r):"in"===t?new Hf(e,r):"not-in"===t?new AD(e,r):"array-contains-any"===t?new jf(e,r):new Fi(e,t,r)}static V(e,t,r){return"in"===t?new nx(e,r):new JP(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(nc(t,this.value)):null!==t&&Kd(this.value)===Kd(t)&&this.v(nc(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Je()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class wC extends Fi{constructor(e,t,r){super(e,t,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.v(t)}}class nx extends Fi{constructor(e,t){super(e,"in",t),this.keys=ID(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class JP extends Fi{constructor(e,t){super(e,"not-in",t),this.keys=ID(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ID(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ne.fromName(r.referenceValue))}class rx extends Fi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vf(t)&&Zd(t.arrayValue,this.value)}}class Hf extends Fi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zd(this.value.arrayValue,t)}}class AD extends Fi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zd(this.value.arrayValue,t)}}class jf extends Fi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Zd(this.value.arrayValue,r))}}class Xd{constructor(e,t){this.position=e,this.inclusive=t}}class eh{constructor(e,t="asc"){this.field=e,this.dir=t}}function ix(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function sx(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],c=n.position[i];if(r=s.field.isKeyField()?Ne.comparator(Ne.fromName(c.referenceValue),t.key):nc(c,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function CC(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Do(n.position[t],e.position[t]))return!1;return!0}class mu{constructor(e,t=null,r=[],i=[],s=null,c="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=c,this.startAt=h,this.endAt=g,this.D=null,this.C=null}}function EC(n,e,t,r,i,s,c,h){return new mu(n,e,t,r,i,s,c,h)}function _u(n){return new mu(n)}function nv(n){return!pu(n.limit)&&"F"===n.limitType}function Zg(n){return!pu(n.limit)&&"L"===n.limitType}function SC(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function DC(n){for(const e of n.filters)if(e.S())return e.field;return null}function TC(n){return null!==n.collectionGroup}function Gf(n){const e=Ve(n);if(null===e.D){e.D=[];const t=DC(e),r=SC(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new eh(t)),e.D.push(new eh(_i.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.D.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new eh(_i.keyField(),s))}}}return e.D}function To(n){const e=Ve(n);if(!e.C)if("F"===e.limitType)e.C=Yg(e.path,e.collectionGroup,Gf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Gf(e))t.push(new eh(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Xd(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new Xd(e.startAt.position,!e.startAt.inclusive):null;e.C=Yg(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function MD(n,e,t){return new mu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qg(n,e){return Uf(To(n),To(e))&&n.limitType===e.limitType}function xD(n){return`${oa(To(n))}|lt:${n.limitType}`}function th(n){return`Query(target=${function tx(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Lf(r.value)}`;var r}).join(", ")}]`),pu(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Lf(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Lf(t)).join(",")),`Target(${e})`}(To(n))}; limitType=${n.limitType})`}function rv(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ne.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,c){const h=sx(i,s,c);return i.inclusive?h<=0:h<0}(t.startAt,Gf(t),r)||t.endAt&&!function(i,s,c){const h=sx(i,s,c);return i.inclusive?h>=0:h>0}(t.endAt,Gf(t),r)));var t,r}function IC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AC(n){return(e,t)=>{let r=!1;for(const i of Gf(n)){const s=RD(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function RD(n,e,t){const r=n.field.isKeyField()?Ne.comparator(e.key,t.key):function(i,s,c){const h=s.data.field(i),g=c.data.field(i);return null!==h&&null!==g?nc(h,g):Je()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Je()}}function MC(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zg(e)?"-0":e}}function xC(n){return{integerValue:""+n}}function kD(n,e){return vD(e)?xC(e):MC(n,e)}class Jg{constructor(){this._=void 0}}function OD(n,e,t){return n instanceof $f?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof aa?PD(n,e):n instanceof rc?la(n,e):function(r,i){const s=ND(r,i),c=Xg(s)+Xg(r.k);return yC(s)&&yC(r.k)?xC(c):MC(r.M,c)}(n,e)}function ox(n,e,t){return n instanceof aa?PD(n,e):n instanceof rc?la(n,e):t}function ND(n,e){return n instanceof zf?yC(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class $f extends Jg{}class aa extends Jg{constructor(e){super(),this.elements=e}}function PD(n,e){const t=qf(e);for(const r of n.elements)t.some(i=>Do(i,r))||t.push(r);return{arrayValue:{values:t}}}class rc extends Jg{constructor(e){super(),this.elements=e}}function la(n,e){let t=qf(e);for(const r of n.elements)t=t.filter(i=>!Do(i,r));return{arrayValue:{values:t}}}class zf extends Jg{constructor(e,t){super(),this.M=e,this.k=t}}function Xg(n){return yr(n.integerValue||n.doubleValue)}function qf(n){return Vf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class em{constructor(e,t){this.field=e,this.transform=t}}class lx{constructor(e,t){this.version=e,this.transformResults=t}}class ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class iv{}function cx(n,e,t){n instanceof tm?function(r,i,s){const c=r.value.clone(),h=av(r.fieldTransforms,i,s.transformResults);c.setAll(h),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof rh?function(r,i,s){if(!nh(r.precondition,i))return void i.convertToUnknownDocument(s.version);const c=av(r.fieldTransforms,i,s.transformResults),h=i.data;h.setAll(ux(r)),h.setAll(c),i.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function sv(n,e,t){var i;n instanceof tm?function(r,i,s){if(!nh(r.precondition,i))return;const c=r.value.clone(),h=lv(r.fieldTransforms,s,i);c.setAll(h),i.convertToFoundDocument(RC(i),c).setHasLocalMutations()}(n,e,t):n instanceof rh?function(r,i,s){if(!nh(r.precondition,i))return;const c=lv(r.fieldTransforms,s,i),h=i.data;h.setAll(ux(r)),h.setAll(c),i.convertToFoundDocument(RC(i),h).setHasLocalMutations()}(n,e,t):nh(n.precondition,i=e)&&i.convertToNoDocument(vt.min())}function FD(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=ND(r.transform,i||null);null!=s&&(null==t&&(t=Zi.empty()),t.set(r.field,s))}return t||null}function ov(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&qd(t,r,(i,s)=>function ax(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof aa&&r instanceof aa||t instanceof rc&&r instanceof rc?qd(t.elements,r.elements,Do):t instanceof zf&&r instanceof zf?Do(t.k,r.k):t instanceof $f&&r instanceof $f);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function RC(n){return n.isFoundDocument()?n.version:vt.min()}class tm extends iv{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class rh extends iv{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}}function ux(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function av(n,e,t){const r=new Map;Ct(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],c=s.transform,h=e.data.field(s.field);r.set(s.field,ox(c,h,t[i]))}return r}function lv(n,e,t){const r=new Map;for(const i of n){const s=i.transform,c=t.data.field(i.field);r.set(i.field,OD(s,c,e))}return r}class Wf extends iv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class nm extends iv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class kC{constructor(e){this.count=e}}var jr,sn;function LD(n){switch(n){default:return Je();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function VD(n){if(void 0===n)return Ur("GRPC error has no .code"),ue.UNKNOWN;switch(n){case jr.OK:return ue.OK;case jr.CANCELLED:return ue.CANCELLED;case jr.UNKNOWN:return ue.UNKNOWN;case jr.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case jr.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case jr.INTERNAL:return ue.INTERNAL;case jr.UNAVAILABLE:return ue.UNAVAILABLE;case jr.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case jr.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case jr.NOT_FOUND:return ue.NOT_FOUND;case jr.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case jr.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case jr.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case jr.ABORTED:return ue.ABORTED;case jr.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case jr.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case jr.DATA_LOSS:return ue.DATA_LOSS;default:return Je()}}(sn=jr||(jr={}))[sn.OK=0]="OK",sn[sn.CANCELLED=1]="CANCELLED",sn[sn.UNKNOWN=2]="UNKNOWN",sn[sn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sn[sn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sn[sn.NOT_FOUND=5]="NOT_FOUND",sn[sn.ALREADY_EXISTS=6]="ALREADY_EXISTS",sn[sn.PERMISSION_DENIED=7]="PERMISSION_DENIED",sn[sn.UNAUTHENTICATED=16]="UNAUTHENTICATED",sn[sn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sn[sn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sn[sn.ABORTED=10]="ABORTED",sn[sn.OUT_OF_RANGE=11]="OUT_OF_RANGE",sn[sn.UNIMPLEMENTED=12]="UNIMPLEMENTED",sn[sn.INTERNAL=13]="INTERNAL",sn[sn.UNAVAILABLE=14]="UNAVAILABLE",sn[sn.DATA_LOSS=15]="DATA_LOSS";class ic{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wd(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return gC(this.inner)}size(){return this.innerSize}}class dr{constructor(e,t){this.comparator=e,this.root=t||yi.EMPTY}insert(e,t){return new dr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yi.BLACK,null,null))}remove(e){return new dr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rm(this.root,e,this.comparator,!1)}getReverseIterator(){return new rm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rm(this.root,e,this.comparator,!0)}}class rm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=null!=r?r:yi.RED,this.left=null!=i?i:yi.EMPTY,this.right=null!=s?s:yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new yi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return yi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Je();const e=this.left.check();if(e!==this.right.check())throw Je();return e+(this.isRed()?0:1)}}yi.EMPTY=null,yi.RED=!0,yi.BLACK=!1,yi.EMPTY=new class{constructor(){this.size=0}get key(){throw Je()}get value(){throw Je()}get color(){throw Je()}get left(){throw Je()}get right(){throw Je()}copy(n,e,t,r,i){return this}insert(n,e,t){return new yi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gn{constructor(e){this.comparator=e,this.data=new dr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new OC(this.data.getIterator())}getIteratorFrom(e){return new OC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Gn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Gn(this.comparator);return t.data=e,t}}class OC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Yf(n){return n.hasNext()?n.getNext():void 0}const BD=new dr(Ne.comparator);function js(){return BD}const dx=new dr(Ne.comparator);function cv(){return dx}function im(){return new ic(n=>n.toString(),(n,e)=>n.isEqual(e))}const cs=new dr(Ne.comparator),Kf=new Gn(Ne.comparator);function _n(...n){let e=Kf;for(const t of n)e=e.add(t);return e}const hx=new Gn($t);function NC(){return hx}class sc{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,sm.createSynthesizedTargetChangeForCurrentChange(e,t)),new sc(vt.min(),r,NC(),js(),_n())}}class sm{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new sm(Hr.EMPTY_BYTE_STRING,t,_n(),_n(),_n())}}class Zf{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class UD{constructor(e,t){this.targetId=e,this.$=t}}class PC{constructor(e,t,r=Hr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class HD{constructor(){this.B=0,this.L=FC(),this.U=Hr.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=_n(),t=_n(),r=_n();return this.L.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Je()}}),new sm(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=FC()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class fx{constructor(e){this.nt=e,this.st=new Map,this.it=js(),this.rt=uv(),this.ot=new Gn($t)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:Je()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const s=i.target;if(Kg(s))if(0===r){const c=new Ne(s.path);this.ct(t,c,Dn.newNoDocument(c,vt.min()))}else Ct(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((s,c)=>{const h=this.wt(c);if(h){if(s.current&&Kg(h.target)){const g=new Ne(h.target.path);null!==this.it.get(g)||this.It(c,g)||this.ct(c,g,Dn.newNoDocument(g,e))}s.j&&(t.set(c,s.H()),s.J())}});let r=_n();this.rt.forEach((s,c)=>{let h=!0;c.forEachWhile(g=>{const y=this.wt(g);return!y||2===y.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.it.forEach((s,c)=>c.setReadTime(e));const i=new sc(e,t,this.ot,this.it,r);return this.it=js(),this.rt=uv(),this.ot=new Gn($t),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new HD,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Gn($t),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new HD),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function uv(){return new dr(Ne.comparator)}function FC(){return new dr(Ne.comparator)}const jD={asc:"ASCENDING",desc:"DESCENDING"},dv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class LC{constructor(e,t){this.databaseId=e,this.N=t}}function hv(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VC(n,e){return n.N?e.toBase64():e.toUint8Array()}function px(n,e){return hv(n,e.toTimestamp())}function ii(n){return Ct(!!n),vt.fromTimestamp(function(e){const t=fu(e);return new _r(t.seconds,t.nanos)}(n))}function Qf(n,e){return(t=n,new rn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function BC(n){const e=rn.fromString(n);return Ct(vx(e)),e}function om(n,e){return Qf(n.databaseId,e.path)}function Io(n,e){const t=BC(e);if(t.get(1)!==n.databaseId.projectId)throw new De(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new De(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ne(GD(t))}function am(n,e){return Qf(n.databaseId,e)}function gx(n){const e=BC(n);return 4===e.length?rn.emptyPath():GD(e)}function lm(n){return new rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function GD(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function UC(n,e,t){return{name:om(n,e),fields:t.value.mapValue.fields}}function HC(n,e,t){const r=Io(n,e.name),i=ii(e.updateTime),s=new Zi({mapValue:{fields:e.fields}}),c=Dn.newFoundDocument(r,i,s);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Jf(n,e){let t;if(e instanceof tm)t={update:UC(n,e.key,e.value)};else if(e instanceof Wf)t={delete:om(n,e.key)};else if(e instanceof rh)t={update:UC(n,e.key,e.data),updateMask:e1(e.fieldMask)};else{if(!(e instanceof nm))return Je();t={verify:om(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const c=s.transform;if(c instanceof $f)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof aa)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof rc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof zf)return{fieldPath:s.field.canonicalString(),increment:c.k};throw Je()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:px(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Je()),t;var i}function jC(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ur.updateTime(ii(i.updateTime)):void 0!==i.exists?ur.exists(i.exists):ur.none():ur.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,c){let h=null;"setToServerValue"in c?(Ct("REQUEST_TIME"===c.setToServerValue),h=new $f):"appendMissingElements"in c?h=new aa(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new rc(c.removeAllFromArray.values||[]):"increment"in c?h=new zf(s,c.increment):Je();const g=_i.fromServerFormat(c.fieldPath);return new em(g,h)}(n,i)):[];var i;if(e.update){const i=Io(n,e.update.name),s=new Zi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new hu((e.updateMask.fieldPaths||[]).map(y=>_i.fromServerFormat(y)));return new rh(i,s,c,t,r)}return new tm(i,s,t,r)}if(e.delete){const i=Io(n,e.delete);return new Wf(i,t)}if(e.verify){const i=Io(n,e.verify);return new nm(i,t)}return Je()}function GC(n,e){return{documents:[am(n,e.path)]}}function zD(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=am(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=am(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0===g.length)return;const y=g.map(E=>function(T){if("=="===T.op){if(vC(T.value))return{unaryFilter:{field:Xf(T.field),op:"IS_NAN"}};if(CD(T.value))return{unaryFilter:{field:Xf(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(vC(T.value))return{unaryFilter:{field:Xf(T.field),op:"IS_NOT_NAN"}};if(CD(T.value))return{unaryFilter:{field:Xf(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xf(T.field),op:yx(T.op),value:T.value}}}(E));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(g){if(0!==g.length)return g.map(y=>{return{field:Xf((E=y).field),direction:WD(E.dir)};var E})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const c=(y=e.limit,n.N||pu(y)?y:{value:y});var y,h,g;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function $C(n){let e=gx(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(1===r);const E=t.from[0];E.allDescendants?i=E.collectionId:e=e.child(E.collectionId)}let s=[];t.where&&(s=zC(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(E=>{return new eh(cm((T=E).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let h=null;t.limit&&(h=function(E){let T;return T="object"==typeof E?E.value:E,pu(T)?null:T}(t.limit));let g=null;var E;t.startAt&&(g=new Xd((E=t.startAt).values||[],!!E.before));let y=null;return t.endAt&&(y=function(E){return new Xd(E.values||[],!E.before)}(t.endAt)),EC(e,i,c,s,h,"F",g,y)}function zC(n){return n?void 0!==n.unaryFilter?[XP(n)]:void 0!==n.fieldFilter?[YD(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>zC(e)).reduce((e,t)=>e.concat(t)):Je():[]}function WD(n){return jD[n]}function yx(n){return dv[n]}function Xf(n){return{fieldPath:n.canonicalString()}}function cm(n){return _i.fromServerFormat(n.fieldPath)}function YD(n){return Fi.create(cm(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Je()}}(n.fieldFilter.op),n.fieldFilter.value)}function XP(n){switch(n.unaryFilter.op){case"IS_NAN":const e=cm(n.unaryFilter.field);return Fi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=cm(n.unaryFilter.field);return Fi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=cm(n.unaryFilter.field);return Fi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=cm(n.unaryFilter.field);return Fi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Je()}}function e1(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function vx(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Li(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bx(e)),e=t1(n.get(t),e);return bx(e)}function t1(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function bx(n){return n+"\x01\x01"}function Za(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),rn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const c=n.indexOf("\x01",s);switch((c<0||c>t)&&Je(),n.charAt(c+1)){case"\x01":const h=n.substring(s,c);let g;0===i.length?g=h:(i+=h,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(s,c),i+="\0";break;case"\x11":i+=n.substring(s,c+1);break;default:Je()}s=c+2}return new rn(r)}const wx=["userId","batchId"];function ih(n,e){return[n,Li(e)]}function Cx(n,e,t){return[n,Li(e),t]}const KD={},qC=["prefixPath","collectionGroup","readTime","documentId"],ZD=["prefixPath","collectionGroup","documentId"],QD=["collectionGroup","readTime","prefixPath","documentId"],n1=["canonicalId","targetId"],WC=["targetId","path"],JD=["path","targetId"],XD=["collectionId","parent"],eT=["indexId","uid"],r1=["uid","sequenceNumber"],tT=["indexId","uid","arrayValue","directionalValue","documentKey"],Ex=["indexId","uid","documentKey"],YC=["userId","collectionPath","documentId"],Sx=["userId","collectionPath","largestBatchId"],s1=["userId","collectionGroup","largestBatchId"],Dx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],o1=[...Dx,"documentOverlays"],nT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Tx=[...nT,"indexConfiguration","indexState","indexEntries"],rT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ix{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let i=0,s=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++s,c&&s===i&&t()},g=>r(g))}),c=!0,s===i&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(i=>i?he.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}}class ep{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new ri,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new um(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=pv(r.target.error);this.At.reject(new um(e,i))}}static open(e,t,r,i){try{return new ep(t,e.transaction(i,r))}catch(s){throw new um(t,s)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ax(t)}}class ca{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===ca.Vt((0,P.z$)())&&Ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),sh(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,P.hl)())return!1;if(ca.St())return!0;const e=(0,P.z$)(),t=ca.Vt(e),r=0<t&&t<10,i=ca.Dt(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,pe.Z)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=c=>{r(c.target.result)},s.onblocked=()=>{i(new um(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new De(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new De(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new um(e,h))},s.onupgradeneeded=c=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,s.transaction,c.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,pe.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.Nt(e);const g=ep.open(s.db,e,c?"readonly":"readwrite",r),y=i(g).next(E=>(g.bt(),E)).catch(E=>(g.abort(E),he.reject(E))).toPromise();return y.catch(()=>{}),yield g.Rt,y}catch(g){const y="FirebaseError"!==g.name&&h<3;if(Re("SimpleDb","Transaction failed with error:",g.message,"Retrying:",y),s.close(),!y)return Promise.reject(g)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ua{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return sh(this.Ft.delete())}}class um extends De{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function oc(n){return"IndexedDbTransactionError"===n.name}class Ax{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),sh(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),sh(this.store.add(e))}get(e){return sh(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),sh(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),sh(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.Gt(i,(c,h)=>{s.push(h)}).next(()=>s)}{const i=this.store.getAll(r.range);return new he((s,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{s(h.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((i,s)=>{r.onerror=c=>{s(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Gt(i,(s,c,h)=>h.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Gt(i,t)}zt(e){const t=this.cursor({});return new he((r,i)=>{t.onerror=s=>{const c=pv(s.target.error);i(c)},t.onsuccess=s=>{const c=s.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}Gt(e,t){const r=[];return new he((i,s)=>{e.onerror=c=>{s(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const g=new ua(h),y=t(h.primaryKey,h.value,g);if(y instanceof he){const E=y.catch(T=>(g.done(),he.reject(T)));r.push(E)}g.isDone?i():null===g.Lt?h.continue():h.continue(g.Lt)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function sh(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=pv(r.target.error);t(i)}})}let fv=!1;function pv(n){const e=ca.Vt((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new De("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fv||(fv=!0,setTimeout(()=>{throw r},0)),r}}return n}class KC extends Ix{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function vi(n,e){const t=Ve(n);return ca.xt(t.Ht,e)}class gv{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&cx(s,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&sv(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&sv(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(vt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_n())}isEqual(e){return this.batchId===e.batchId&&qd(this.mutations,e.mutations,(t,r)=>ov(t,r))&&qd(this.baseMutations,e.baseMutations,(t,r)=>ov(t,r))}}class mv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ct(e.mutations.length===r.length);let i=cs;const s=e.mutations;for(let c=0;c<s.length;c++)i=i.insert(s[c].key,r[c].version);return new mv(e,t,r,i)}}class ZC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class yu{constructor(e,t,r,i,s=vt.min(),c=vt.min(),h=Hr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new yu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new yu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new yu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class _v{constructor(e){this.Jt=e}}function iT(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:QC(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:om(i=n.Jt,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:hv(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:oh(e.version)};else{if(!e.isUnknownDocument())return Je();r.unknownDocument={path:t.path.toArray(),version:oh(e.version)}}var i,s;return r}function QC(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function oh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vu(n){const e=new _r(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function tp(n,e){const t=(e.baseMutations||[]).map(s=>jC(n.Jt,s));for(let s=0;s<e.mutations.length-1;++s){const c=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(c.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>jC(n.Jt,s)),i=_r.fromMillis(e.localWriteTimeMs);return new gv(e.batchId,i,t,r)}function dm(n){const e=vu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?vu(n.lastLimboFreeSnapshotVersion):vt.min();let r;var i;return void 0!==n.query.documents?(Ct(1===(i=n.query).documents.length),r=To(_u(gx(i.documents[0])))):r=To($C(n.query)),new yu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Hr.fromBase64String(n.resumeToken))}function JC(n,e){const t=oh(e.snapshotVersion),r=oh(e.lastLimboFreeSnapshotVersion);let i;i=Kg(e.target)?GC(n.Jt,e.target):zD(n.Jt,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:oa(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function XC(n){const e=$C({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?MD(e,e.limit,"L"):e}function sT(n,e){return new ZC(e.largestBatchId,jC(n.Jt,e.overlayMutation))}function eE(n,e){const t=e.path.lastSegment();return[n,Li(e.path.popLast()),t]}class oT{getBundleMetadata(e,t){return aT(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:vu(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return aT(e).put({bundleId:(r=t).id,createTime:oh(ii(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return lT(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:XC(i.bundledQuery),readTime:vu(i.readTime)};var i})}saveNamedQuery(e,t){return lT(e).put({name:(r=t).name,readTime:oh(ii(r.readTime)),bundledQuery:r.bundledQuery});var r}}function aT(n){return vi(n,"bundles")}function lT(n){return vi(n,"namedQueries")}class yv{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new yv(e,t.uid||"")}getOverlay(e,t){return ah(e).get(eE(this.userId,t)).next(r=>r?sT(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((s,c)=>{const h=new ZC(t,c);i.push(this.Xt(e,h))}),he.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Li(c.getCollectionPath())));const s=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);s.push(ah(e).Qt("collectionPathOverlayIndex",h))}),he.waitFor(s)}getOverlaysForCollection(e,t,r){const i=im(),s=Li(t),c=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ah(e).qt("collectionPathOverlayIndex",c).next(h=>{for(const g of h){const y=sT(this.M,g);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=im();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ah(e).Wt({index:"collectionGroupOverlayIndex",range:h},(g,y,E)=>{const T=sT(this.M,y);s.size()<i||T.largestBatchId===c?(s.set(T.getKey(),T),c=T.largestBatchId):E.done()}).next(()=>s)}Xt(e,t){return ah(e).put(function(r,i,s){const[c,h,g]=eE(i,s.mutation.key);return{userId:i,collectionPath:h,documentId:g,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Jf(r.Jt,s.mutation)}}(this.M,this.userId,t))}}function ah(n){return vi(n,"documentOverlays")}class bu{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(yr(e.integerValue));else if("doubleValue"in e){const r=yr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),zg(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Yd(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?XM(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Je()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Ne.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function cT(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function uT(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=cT(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}bu.fe=new bu;class dT{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=uT(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=uT(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class hT{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Mx{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class vv{constructor(){this.De=new dT,this.Ce=new hT(this.De),this.xe=new Mx(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class lh{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new lh(this.indexId,this.documentKey,this.arrayValue,r)}}function np(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=tE(n.arrayValue,e.arrayValue),0!==t?t:(t=tE(n.directionalValue,e.directionalValue),0!==t?t:Ne.comparator(n.documentKey,e.documentKey)))}function tE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class xx{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=SD(e);if(void 0!==t&&!this.Be(t))return!1;const r=Jd(e);let i=0,s=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[s++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(s>=this.Me.length||!this.Ue(this.Me[s++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Rx{constructor(){this.qe=new nE}addToCollectionParentIndex(e,t){return this.qe.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getFieldIndex(e,t){return he.resolve(null)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class nE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Gn(rn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Gn(rn.comparator)).toArray()}}const rE=new Uint8Array(0);class a1{constructor(e){this.user=e,this.Ge=new nE,this.Ke=new ic(t=>oa(t),(t,r)=>Uf(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const s={collectionId:r,parent:Li(i)};return kx(e).put(s)}return he.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[_D(t),""],!1,!0);return kx(e).qt(i).next(s=>{for(const c of s){if(c.collectionId!==t)break;r.push(Za(c.parent))}return r})}addFieldIndex(e,t){const r=iE(e),i={indexId:(s=t).indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var s;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=iE(e),i=wv(e),s=bv(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=bv(e);let i=!0;const s=new Map;return he.forEach(this.Qe(t),c=>this.getFieldIndex(e,c).next(h=>{i&&(i=!!h),s.set(c,h)})).next(()=>{if(i){let c=_n();return he.forEach(s,(h,g)=>{var y;Re("IndexedDbIndexManager",`Using index ${y=h,`id=${y.indexId}|cg=${y.collectionGroup}|f=${y.fields.map(Me=>`${Me.fieldPath}:${Me.kind}`).join(",")}`} to execute ${oa(t)}`);const E=function(Me,Be){const ke=SD(Be);if(void 0===ke)return null;for(const mt of tv(Me,ke.fieldPath))switch(mt.op){case"array-contains-any":return mt.value.arrayValue.values||[];case"array-contains":return[mt.value]}return null}(g,h),T=function(Me,Be){const ke=new Map;for(const mt of Jd(Be))for(const ct of tv(Me,mt.fieldPath))switch(ct.op){case"==":case"in":ke.set(mt.fieldPath.canonicalString(),ct.value);break;case"not-in":case"!=":return ke.set(mt.fieldPath.canonicalString(),ct.value),Array.from(ke.values())}return null}(g,h),x=function(Me,Be){const ke=[];let mt=!0;for(const Rn of Jd(Be)){let Fn,si=!0;for(const Ln of tv(Me,Rn.fieldPath)){let nr,ol=!0;switch(Ln.op){case"<":case"<=":nr="nullValue"in(ct=Ln.value)?wD:"booleanValue"in ct?{booleanValue:!1}:"integerValue"in ct||"doubleValue"in ct?{doubleValue:NaN}:"timestampValue"in ct?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in ct?{stringValue:""}:"bytesValue"in ct?{bytesValue:""}:"referenceValue"in ct?gu(Ya.empty(),Ne.empty()):"geoPointValue"in ct?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in ct?{arrayValue:{}}:"mapValue"in ct?{mapValue:{}}:Je();break;case"==":case"in":case">=":nr=Ln.value;break;case">":nr=Ln.value,ol=!1;break;case"!=":case"not-in":nr=wD}ED(Fn,nr)===nr&&(Fn=nr,si=ol)}if(null!==Me.startAt)for(let Ln=0;Ln<Me.orderBy.length;++Ln)if(Me.orderBy[Ln].field.isEqual(Rn.fieldPath)){const nr=Me.startAt.position[Ln];ED(Fn,nr)===nr&&(Fn=nr,si=Me.startAt.inclusive);break}if(void 0===Fn)return null;ke.push(Fn),mt&&(mt=si)}var ct;return new Xd(ke,mt)}(g,h),N=function(Me,Be){const ke=[];let mt=!0;for(const Rn of Jd(Be)){let Fn,si=!0;for(const Ln of tv(Me,Rn.fieldPath)){let nr,ol=!0;switch(Ln.op){case">=":case">":nr="nullValue"in(ct=Ln.value)?{booleanValue:!1}:"booleanValue"in ct?{doubleValue:NaN}:"integerValue"in ct||"doubleValue"in ct?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in ct?{stringValue:""}:"stringValue"in ct?{bytesValue:""}:"bytesValue"in ct?gu(Ya.empty(),Ne.empty()):"referenceValue"in ct?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in ct?{arrayValue:{}}:"arrayValue"in ct?{mapValue:{}}:"mapValue"in ct?bD:Je(),ol=!1;break;case"==":case"in":case"<=":nr=Ln.value;break;case"<":nr=Ln.value,ol=!1;break;case"!=":case"not-in":nr=bD}qg(Fn,nr)===nr&&(Fn=nr,si=ol)}if(null!==Me.endAt)for(let Ln=0;Ln<Me.orderBy.length;++Ln)if(Me.orderBy[Ln].field.isEqual(Rn.fieldPath)){const nr=Me.endAt.position[Ln];qg(Fn,nr)===nr&&(Fn=nr,si=Me.endAt.inclusive);break}if(void 0===Fn)return null;ke.push(Fn),mt&&(mt=si)}var ct;return new Xd(ke,mt)}(g,h),U=this.je(h,g,x),K=this.je(h,g,N),le=this.We(h,g,T),Pe=this.ze(h.indexId,E,U,!!x&&x.inclusive,K,!!N&&N.inclusive,le);return he.forEach(Pe,Me=>r.Kt(Me,t.limit).next(Be=>{Be.forEach(ke=>{c=c.add(new Ne(Za(ke.documentKey)))})}))}).next(()=>c)}return he.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,i,s,c,h){const g=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=s?s.length:1),y=g/(null!=t?t.length:1),E=[];for(let T=0;T<g;++T){const x=t?this.He(t[T/y]):rE,N=r?this.Je(e,x,r[T%y],i):this.Ye(e),U=s?this.Xe(e,x,s[T%y],c):this.Ye(e+1);E.push(...this.createRange(N,U,h.map(K=>this.Je(e,x,K,!0))))}return E}Je(e,t,r,i){const s=new lh(e,Ne.empty(),t,r);return i?s:s.ke()}Xe(e,t,r,i){const s=new lh(e,Ne.empty(),t,r);return i?s.ke():s}Ye(e){return new lh(e,Ne.empty(),rE,rE)}getFieldIndex(e,t){const r=new xx(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{const c=s.filter(h=>r.$e(h));return c.sort((h,g)=>g.fields.length-h.fields.length),c.length>0?c[0]:null})}Ze(e,t){const r=new vv;for(const i of Jd(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const c=r.Ne(i.kind);bu.fe.Zt(s,c)}return r.Se()}He(e){const t=new vv;return bu.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new vv);let s=0;for(const c of Jd(e)){const h=r[s++];for(const g of i)if(this.tn(t,c.fieldPath)&&Vf(h))i=this.en(i,c,h);else{const y=g.Ne(c.kind);bu.fe.Zt(h,y)}}return this.nn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const i=[...e],s=[];for(const c of r.arrayValue.values||[])for(const h of i){const g=new vv;g.seed(h.Se()),bu.fe.Zt(c,g.Ne(t.kind)),s.push(g)}return s}tn(e,t){return!!e.filters.find(r=>r instanceof Fi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=iE(e),i=wv(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(s=>{const c=[];return he.forEach(s,h=>i.get([h.indexId,this.uid]).next(g=>{c.push(function(y,E){const T=E?new Wg(E.sequenceNumber,new Ka(vu(E.readTime),new Ne(Za(E.documentKey)),E.largestBatchId)):Wg.empty(),x=y.fields.map(([N,U])=>new ev(_i.fromServerFormat(N),U));return new Xy(y.indexId,y.collectionGroup,x,T)}(h,g))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:$t(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=iE(e),s=wv(e);return this.sn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>he.forEach(h,g=>{return s.put({indexId:g.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:oh((x=r).readTime),documentKey:Li(x.documentKey.path),largestBatchId:x.largestBatchId});var x})))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(i,s)=>{const c=r.get(i.collectionGroup);return(c?he.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),he.forEach(h,g=>this.rn(e,i,g).next(y=>{const E=this.on(s,g);return y.isEqual(E)?he.resolve():this.un(e,s,y,E)}))))})}an(e,t,r){return bv(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Li(t.key.path)})}cn(e,t,r){return bv(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Li(t.key.path)])}rn(e,t,r){const i=bv(e);let s=new Gn(np);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Li(t.path)])},(c,h)=>{s=s.add(new lh(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}on(e,t){let r=new Gn(np);const i=this.Ze(t,e);if(null==i)return r;const s=SD(t);if(null!=s){const c=e.data.field(s.fieldPath);if(Vf(c))for(const h of c.arrayValue.values||[])r=r.add(new lh(t.indexId,e.key,this.He(h),i))}else r=r.add(new lh(t.indexId,e.key,rE,i));return r}un(e,t,r,i){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(c,h,g,y,E){const T=c.getIterator(),x=h.getIterator();let N=Yf(T),U=Yf(x);for(;N||U;){let K=!1,le=!1;if(N&&U){const Pe=g(N,U);Pe<0?le=!0:Pe>0&&(K=!0)}else null!=N?le=!0:K=!0;K?(y(U),U=Yf(x)):le?(E(N),N=Yf(T)):(N=Yf(T),U=Yf(x))}}(r,i,np,c=>{s.push(this.an(e,t,c))},c=>{s.push(this.cn(e,t,c))}),he.waitFor(s)}sn(e){let t=1;return wv(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>np(c,h)).filter((c,h,g)=>!h||0!==np(c,g[h-1]));const i=[];i.push(e);for(const c of r){const h=np(c,e),g=np(c,t);if(0===h)i[0]=e.ke();else if(h>0&&g<0)i.push(c),i.push(c.ke());else if(g>0)break}i.push(t);const s=[];for(let c=0;c<i.length;c+=2)s.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,""],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,""]));return s}}function kx(n){return vi(n,"collectionParents")}function bv(n){return vi(n,"indexEntries")}function iE(n){return vi(n,"indexConfiguration")}function wv(n){return vi(n,"indexState")}const hm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ss{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ss(e,Ss.DEFAULT_COLLECTION_PERCENTILE,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fT(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],c=IDBKeyRange.only(t.batchId);let h=0;const g=r.Wt({range:c},(E,T,x)=>(h++,x.delete()));s.push(g.next(()=>{Ct(1===h)}));const y=[];for(const E of t.mutations){const T=Cx(e,E.key.path,t.batchId);s.push(i.delete(T)),y.push(E.key)}return he.waitFor(s).next(()=>y)}function fm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Je();e=n.noDocument}return JSON.stringify(e).length}Ss.DEFAULT_COLLECTION_PERCENTILE=10,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ss.DEFAULT=new Ss(41943040,Ss.DEFAULT_COLLECTION_PERCENTILE,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ss.DISABLED=new Ss(-1,0,0);class ac{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.hn={}}static Yt(e,t,r,i){Ct(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new ac(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qa(e).Wt({index:"userMutationsIndex",range:r},(i,s,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=wu(e),c=Qa(e);return c.add({}).next(h=>{Ct("number"==typeof h);const g=new gv(h,t,r,i),y=function(x,N,U){const K=U.baseMutations.map(Pe=>Jf(x.Jt,Pe)),le=U.mutations.map(Pe=>Jf(x.Jt,Pe));return{userId:N,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:K,mutations:le}}(this.M,this.userId,g),E=[];let T=new Gn((x,N)=>$t(x.canonicalString(),N.canonicalString()));for(const x of i){const N=Cx(this.userId,x.key.path,h);T=T.add(x.key.path.popLast()),E.push(c.put(y)),E.push(s.put(N,KD))}return T.forEach(x=>{E.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.hn[h]=g.keys()}),he.waitFor(E).next(()=>g)})}lookupMutationBatch(e,t){return Qa(e).get(t).next(r=>r?(Ct(r.userId===this.userId),tp(this.M,r)):null)}ln(e,t){return this.hn[t]?he.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.hn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Qa(e).Wt({index:"userMutationsIndex",range:i},(c,h,g)=>{h.userId===this.userId&&(Ct(h.batchId>=r),s=tp(this.M,h)),g.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Qa(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,s,c)=>{r=s.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qa(e).qt("userMutationsIndex",t).next(r=>r.map(i=>tp(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ih(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return wu(e).Wt({range:i},(c,h,g)=>{const[y,E,T]=c,x=Za(E);if(y===this.userId&&t.path.isEqual(x))return Qa(e).get(T).next(N=>{if(!N)throw Je();Ct(N.userId===this.userId),s.push(tp(this.M,N))});g.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gn($t);const i=[];return t.forEach(s=>{const c=ih(this.userId,s.path),h=IDBKeyRange.lowerBound(c),g=wu(e).Wt({range:h},(y,E,T)=>{const[x,N,U]=y,K=Za(N);x===this.userId&&s.path.isEqual(K)?r=r.add(U):T.done()});i.push(g)}),he.waitFor(i).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=ih(this.userId,r),c=IDBKeyRange.lowerBound(s);let h=new Gn($t);return wu(e).Wt({range:c},(g,y,E)=>{const[T,x,N]=g,U=Za(x);T===this.userId&&r.isPrefixOf(U)?U.length===i&&(h=h.add(N)):E.done()}).next(()=>this.fn(e,h))}fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Qa(e).get(s).next(c=>{if(null===c)throw Je();Ct(c.userId===this.userId),r.push(tp(this.M,c))}))}),he.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return fT(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),he.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return wu(e).Wt({range:r},(s,c,h)=>{if(s[0]===this.userId){const g=Za(s[1]);i.push(g)}else h.done()}).next(()=>{Ct(0===i.length)})})}containsKey(e,t){return sE(e,this.userId,t)}_n(e){return pT(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function sE(n,e,t){const r=ih(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let c=!1;return wu(n).Wt({range:s,jt:!0},(h,g,y)=>{const[E,T,x]=h;E===e&&T===i&&(c=!0),y.done()}).next(()=>c)}function Qa(n){return vi(n,"mutations")}function wu(n){return vi(n,"documentMutations")}function pT(n){return vi(n,"mutationQueues")}class lc{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new lc(0)}static gn(){return new lc(-1)}}class oE{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new lc(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>vt.fromTimestamp(new _r(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.pn(e,i)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>cc(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return cc(e).Wt((c,h)=>{const g=dm(h);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,s.push(this.removeTargetData(e,g)))}).next(()=>he.waitFor(s)).next(()=>i)}forEachTarget(e,t){return cc(e).Wt((r,i)=>{const s=dm(i);t(s)})}yn(e){return Ox(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}pn(e,t){return Ox(e).put("targetGlobalKey",t)}In(e,t){return cc(e).put(JC(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=oa(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return cc(e).Wt({range:i,index:"queryTargetsIndex"},(c,h,g)=>{const y=dm(h);Uf(t,y.target)&&(s=y,g.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=ch(e);return t.forEach(c=>{const h=Li(c.path);i.push(s.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),he.waitFor(i)}removeMatchingKeys(e,t,r){const i=ch(e);return he.forEach(t,s=>{const c=Li(s.path);return he.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=ch(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ch(e);let s=_n();return i.Wt({range:r,jt:!0},(c,h,g)=>{const y=Za(c[1]),E=new Ne(y);s=s.add(E)}).next(()=>s)}containsKey(e,t){const r=Li(t.path),i=IDBKeyRange.bound([r],[_D(r)],!1,!0);let s=0;return ch(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,h],g,y)=>{0!==c&&(s++,y.done())}).next(()=>s>0)}Et(e,t){return cc(e).get(t).next(r=>r?dm(r):null)}}function cc(n){return vi(n,"targets")}function Ox(n){return vi(n,"targetGlobal")}function ch(n){return vi(n,"targetDocuments")}function rp(n){return gT.apply(this,arguments)}function gT(){return gT=(0,pe.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==rT)throw n;Re("LocalStore","Unexpectedly lost primary lease")}),gT.apply(this,arguments)}function aE([n,e],[t,r]){const i=$t(n,t);return 0===i?$t(e,r):i}class Nx{constructor(e){this.En=e,this.buffer=new Gn(aE),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();aE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Px{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Re("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,pe.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){oc(i)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield rp(i)}yield t.vn(e)}))}}class Fx{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(mi.A);const r=new Nx(t);return this.Sn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Sn.Cn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(hm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hm):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,i,s,c,h,g,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,c=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,h=Date.now(),this.removeTargets(e,r,t))).next(T=>(s=T,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(y=Date.now(),hC()<=Hs.in.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-E}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${s} targets in `+(g-h)+`ms\n\tRemoved ${T} documents in `+(y-g)+`ms\nTotal Duration: ${y-E}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:T})))}}class Lx{constructor(e,t){this.db=e,this.garbageCollector=new Fx(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,i)=>t(i))}addReference(e,t,r){return pm(e,r)}removeReference(e,t,r){return pm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return pm(e,t)}Mn(e,t){return function(r,i){let s=!1;return pT(r).zt(c=>sE(r,c,i).next(h=>(h&&(s=!0),he.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.kn(e,(c,h)=>{if(h<=t){const g=this.Mn(e,c).next(y=>{if(!y)return s++,r.getEntry(e,c).next(()=>(r.removeEntry(c,vt.min()),ch(e).delete([0,Li(c.path)])))});i.push(g)}}).next(()=>he.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return pm(e,t)}kn(e,t){const r=ch(e);let i,s=mi.A;return r.Wt({index:"documentTargetsIndex"},([c,h],{path:g,sequenceNumber:y})=>{0===c?(s!==mi.A&&t(new Ne(Za(i)),s),s=y,i=g):s=mi.A}).next(()=>{s!==mi.A&&t(new Ne(Za(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pm(n,e){return ch(n).put((r=n.currentSequenceNumber,{targetId:0,path:Li(e.path),sequenceNumber:r}));var r}class lE{constructor(){this.changes=new ic(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mT{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Cu(e).put(r)}removeEntry(e,t,r){return Cu(e).delete(function(i,s){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],QC(s),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=Dn.newInvalidDocument(t);return Cu(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(uh(t))},(i,s)=>{r=this.Fn(t,s)}).next(()=>r)}$n(e,t){let r={size:0,document:Dn.newInvalidDocument(t)};return Cu(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(uh(t))},(i,s)=>{r={document:this.Fn(t,s),size:fm(s)}}).next(()=>r)}getEntries(e,t){let r=js();return this.Bn(e,t,(i,s)=>{const c=this.Fn(i,s);r=r.insert(i,c)}).next(()=>r)}Ln(e,t){let r=js(),i=new dr(Ne.comparator);return this.Bn(e,t,(s,c)=>{const h=this.Fn(s,c);r=r.insert(s,h),i=i.insert(s,fm(c))}).next(()=>({documents:r,Un:i}))}Bn(e,t,r){if(t.isEmpty())return he.resolve();let i=new Gn(cE);t.forEach(g=>i=i.add(g));const s=IDBKeyRange.bound(uh(i.first()),uh(i.last())),c=i.getIterator();let h=c.getNext();return Cu(e).Wt({index:"documentKeyIndex",range:s},(g,y,E)=>{const T=Ne.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&cE(h,T)<0;)r(h,null),h=c.getNext();h&&h.isEqual(T)&&(r(h,y),h=c.hasNext()?c.getNext():null),h?E.Ut(uh(h)):E.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),QC(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Cu(e).qt(IDBKeyRange.bound(i,s,!0)).next(c=>{let h=js();for(const g of c){const y=this.Fn(Ne.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(e,t,r,i){let s=js();const c=Bx(t,r),h=Bx(t,Ka.max());return Cu(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(g,y,E)=>{const T=this.Fn(Ne.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(T.key,T),s.size===i&&E.done()}).next(()=>s)}newChangeBuffer(e){return new Vx(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return _T(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}On(e,t){return _T(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function da(n,e){let t;if(e.document)t=HC(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ne.fromSegments(e.noDocument.path),i=vu(e.noDocument.readTime);t=Dn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Je();{const r=Ne.fromSegments(e.unknownDocument.path),i=vu(e.unknownDocument.version);t=Dn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new _r(r[0],r[1]);return vt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return Dn.newInvalidDocument(e)}}class Vx extends lE{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new ic(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Gn((s,c)=>$t(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const h=this.Gn.get(s);if(t.push(this.qn.removeEntry(e,s,h.readTime)),c.isValidDocument()){const g=iT(this.qn.M,c);i=i.add(s.path.popLast()),r+=fm(g)-h.size,t.push(this.qn.addEntry(e,s,g))}else if(r-=h.size,this.trackRemovals){const g=iT(this.qn.M,c.convertToNoDocument(vt.min()));t.push(this.qn.addEntry(e,s,g))}}),i.forEach(s=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.qn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:i})=>(i.forEach((s,c)=>{this.Gn.set(s,{size:c,readTime:r.get(s).readTime})}),r))}}function _T(n){return vi(n,"remoteDocumentGlobal")}function Cu(n){return vi(n,"remoteDocumentsV14")}function uh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Bx(n,e){const t=e.documentKey.path.toArray();return[n,QC(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function cE(n,e){const t=n.path.length-e.path.length;return 0!==t?t:Ne.comparator(n,e)}class uE{constructor(e){this.M=e}kt(e,t,r,i){const s=new ep("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wx,{unique:!0}),h.createObjectStore("documentMutations"),yT(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=he.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),yT(e)),c=c.next(()=>function(h){const g=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,g){return g.store("mutations").qt().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wx,{unique:!0});const E=g.store("mutations"),T=y.map(x=>E.put(x));return he.waitFor(T)})}(e,s))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Kn(s))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(s)))),r<7&&i>=7&&(c=c.next(()=>this.jn(s))),r<8&&i>=8&&(c=c.next(()=>this.Wn(e,s))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.zn(s))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const g=h.createObjectStore("documentOverlays",{keyPath:YC});g.createIndex("collectionPathOverlayIndex",Sx,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",s1,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const g=h.createObjectStore("remoteDocumentsV14",{keyPath:qC});g.createIndex("documentKeyIndex",ZD),g.createIndex("collectionGroupIndex",QD)}(e)).next(()=>this.Hn(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:eT}).createIndex("sequenceNumberIndex",r1,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:tT}).createIndex("documentKeyIndex",Ex,{unique:!1})}(e)})),c}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=fm(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>he.forEach(i,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(h=>he.forEach(h,g=>{Ct(g.userId===s.userId);const y=tp(this.M,g);return fT(e,s.userId,y).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Wt((c,h)=>{const g=new rn(c),y=[0,Li(g)];s.push(t.get(y).next(E=>E?he.resolve():t.put({targetId:0,path:Li(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>he.waitFor(s))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:XD});const r=t.store("collectionParents"),i=new nE,s=c=>{if(i.add(c)){const h=c.lastSegment(),g=c.popLast();return r.put({collectionId:h,parent:Li(g)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,h)=>{const g=new rn(c);return s(g.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,h,g],y)=>{const E=Za(h);return s(E.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,i)=>{const s=dm(i),c=JC(this.M,s);return t.put(c)})}Hn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((s,c)=>{const h=t.store("remoteDocumentsV14"),g=(y=c,y.document?new Ne(rn.fromString(y.document.name).popFirst(5)):y.noDocument?Ne.fromSegments(y.noDocument.path):y.unknownDocument?Ne.fromSegments(y.unknownDocument.path):Je()).path.toArray();var y;const E={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(E))}).next(()=>he.waitFor(i))}}function yT(n){n.createObjectStore("targetDocuments",{keyPath:WC}).createIndex("documentTargetsIndex",JD,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",n1,{unique:!0}),n.createObjectStore("targetGlobal")}const dE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vT{constructor(e,t,r,i,s,c,h,g,y,E,T=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=s,this.window=c,this.document=h,this.Yn=y,this.Xn=E,this.Zn=T,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=x=>Promise.resolve(),!vT.vt())throw new De(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Lx(this,i),this.cs=t+"main",this.M=new _v(g),this.hs=new ca(this.cs,this.Zn,new uE(this.M)),this.ls=new oE(this.referenceDelegate,this.M),this.fs=new mT(this.M),this.ds=new oT,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===E&&Ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new De(ue.FAILED_PRECONDITION,dE);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new mi(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,pe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,pe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,pe.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>hE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(oc(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return Cv(e).get("owner").next(t=>he.resolve(this.bs(t)))}Ps(e){return hE(e).delete(this.clientId)}Vs(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=vi(r,"clientMetadata");return i.qt().next(s=>{const c=e.Ss(s,18e5),h=s.filter(g=>-1===c.indexOf(g));return he.forEach(h,g=>i.delete(g.clientId)).next(()=>h)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?he.resolve(!0):Cv(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new De(ue.FAILED_PRECONDITION,dE);return!1}}return!(!this.networkEnabled||!this.inForeground)||hE(e).qt().next(r=>void 0===this.Ss(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new KC(t,mi.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>hE(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return ac.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new a1(e)}getDocumentOverlayCache(e){return yv.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Re("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=14===(c=this.Zn)?Tx:13===c?nT:12===c?o1:11===c?Dx:void Je();var c;let h;return this.hs.runTransaction(e,i,s,g=>(h=new KC(g,this.ts?this.ts.next():mi.A),"readwrite-primary"===t?this.Ts(h).next(y=>!!y||this.Es(h)).next(y=>{if(!y)throw Ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new De(ue.FAILED_PRECONDITION,rT);return r(h)}).next(y=>this.Rs(h).next(()=>y)):this.Fs(h).next(()=>r(h)))).then(g=>(h.raiseOnCommittedEvent(),g))}Fs(e){return Cv(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new De(ue.FAILED_PRECONDITION,dE)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Cv(e).put("owner",t)}static vt(){return ca.vt()}As(e){const t=Cv(e);return t.get("owner").next(r=>this.bs(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(Ur(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ur("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){Ur("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Cv(n){return vi(n,"owner")}function hE(n){return vi(n,"clientMetadata")}function fE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Ux{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(i=>{for(const s of r)s.applyToLocalView(i);return i})}Us(e,t){e.forEach((r,i)=>{for(const s of t)s.applyToLocalView(i)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return Ne.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Qs(e,t.path):TC(t)?this.js(e,t,r):this.Ws(e,t,r);var i}Qs(e,t){return this.Bs(e,new Ne(t)).next(r=>{let i=cv();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}js(e,t,r){const i=t.collectionGroup;let s=cv();return this.indexManager.getCollectionParents(e,i).next(c=>he.forEach(c,h=>{const g=(y=t,E=h.child(i),new mu(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,E;return this.Ws(e,g,r).next(y=>{y.forEach((E,T)=>{s=s.insert(E,T)})})}).next(()=>s))}Ws(e,t,r){let i;return this.fs.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(s=>{for(const c of s)for(const h of c.mutations){const g=h.key;let y=i.get(g);null==y&&(y=Dn.newInvalidDocument(g),i=i.insert(g,y)),sv(h,y,c.localWriteTime),y.isFoundDocument()||(i=i.remove(g))}}).next(()=>(i.forEach((s,c)=>{rv(t,c)||(i=i.remove(s))}),i))}}class bT{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=i}static Js(e,t){let r=_n(),i=_n();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new bT(e,t.fromCache,r,i)}}class Hx{Ys(e){this.Xs=e}Ks(e,t,r,i){return 0===(s=t).filters.length&&null===s.limit&&null==s.startAt&&null==s.endAt&&(0===s.explicitOrderBy.length||1===s.explicitOrderBy.length&&s.explicitOrderBy[0].field.isKeyField())||r.isEqual(vt.min())?this.Zs(e,t):this.Xs.qs(e,i).next(s=>{const c=this.ti(t,s);return(nv(t)||Zg(t))&&this.ei(t.limitType,c,i,r)?this.Zs(e,t):(hC()<=Hs.in.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),th(t)),this.Xs.Ks(e,t,DD(r,-1)).next(h=>(c.forEach(g=>{h=h.insert(g.key,g)}),h)))});var s}ti(e,t){let r=new Gn(AC(e));return t.forEach((i,s)=>{rv(e,s)&&(r=r.add(s))}),r}ei(e,t,r,i){if(r.size!==t.size)return!0;const s="F"===e?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Zs(e,t){return hC()<=Hs.in.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",th(t)),this.Xs.Ks(e,t,Ka.min())}}class l1{constructor(e,t,r,i){this.persistence=e,this.ni=t,this.M=i,this.si=new dr($t),this.ii=new ic(s=>oa(s),Uf),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new Ux(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function jx(n,e,t,r){return new l1(n,e,t,r)}function Gx(n,e){return pE.apply(this,arguments)}function pE(){return pE=(0,pe.Z)(function*(n,e){const t=Ve(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.$s.getAllMutationBatches(r).next(s=>(i=s,t.ui(e),t.$s.getAllMutationBatches(r))).next(s=>{const c=[],h=[];let g=_n();for(const y of i){c.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}for(const y of s){h.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}return t.ai.qs(r,g).next(y=>({ci:y,removedBatchIds:c,addedBatchIds:h}))})})}),pE.apply(this,arguments)}function c1(n,e){const t=Ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.oi.newChangeBuffer({trackRemovals:!0});return function(c,h,g,y){const E=g.batch,T=E.keys();let x=he.resolve();return T.forEach(N=>{x=x.next(()=>y.getEntry(h,N)).next(U=>{const K=g.docVersions.get(N);Ct(null!==K),U.version.compareTo(K)<0&&(E.applyToRemoteDocument(U,g),U.isValidDocument()&&(U.setReadTime(g.commitVersion),y.addEntry(U)))})}),x.next(()=>c.$s.removeMutationBatch(h,E))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,i))})}function $x(n){const e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function u1(n,e){const t=Ve(n),r=e.snapshotVersion;let i=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=t.oi.newChangeBuffer({trackRemovals:!0});i=t.si;const h=[];e.targetChanges.forEach((y,E)=>{const T=i.get(E);if(!T)return;h.push(t.ls.removeMatchingKeys(s,y.removedDocuments,E).next(()=>t.ls.addMatchingKeys(s,y.addedDocuments,E)));let x=T.withSequenceNumber(s.currentSequenceNumber);var N,U,K;e.targetMismatches.has(E)?x=x.withResumeToken(Hr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):y.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(y.resumeToken,r)),i=i.insert(E,x),U=x,K=y,(0===(N=T).resumeToken.approximateByteSize()||U.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8||K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0)&&h.push(t.ls.updateTargetData(s,x))});let g=js();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,y))}),h.push(zx(s,c,e.documentUpdates).next(y=>{g=y})),!r.isEqual(vt.min())){const y=t.ls.getLastRemoteSnapshotVersion(s).next(E=>t.ls.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(y)}return he.waitFor(h).next(()=>c.apply(s)).next(()=>t.ai.Gs(s,g)).next(()=>g)}).then(s=>(t.si=i,s))}function zx(n,e,t){let r=_n();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let s=js();return t.forEach((c,h)=>{const g=i.get(c);h.isNoDocument()&&h.version.isEqual(vt.min())?(e.removeEntry(c,h.readTime),s=s.insert(c,h)):!g.isValidDocument()||h.version.compareTo(g.version)>0||0===h.version.compareTo(g.version)&&g.hasPendingWrites?(e.addEntry(h),s=s.insert(c,h)):Re("LocalStore","Ignoring outdated watch update for ",c,". Current version:",g.version," Watch version:",h.version)}),s})}function o(n,e){const t=Ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function a(n,e){const t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ls.getTargetData(r,e).next(s=>s?(i=s,he.resolve(i)):t.ls.allocateTargetId(r).next(c=>(i=new yu(e,c,0,r.currentSequenceNumber),t.ls.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.si.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function u(n,e,t){return d.apply(this,arguments)}function d(){return d=(0,pe.Z)(function*(n,e,t){const r=Ve(n),i=r.si.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!oc(c))throw c;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.si=r.si.remove(e),r.ii.delete(i.target)}),d.apply(this,arguments)}function f(n,e,t){const r=Ve(n);let i=vt.min(),s=_n();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,g,y){const E=Ve(h),T=E.ii.get(y);return void 0!==T?he.resolve(E.si.get(T)):E.ls.getTargetData(g,y)}(r,c,To(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(c,h.targetId).next(g=>{s=g})}).next(()=>r.ni.Ks(c,e,t?i:vt.min(),t?s:_n())).next(h=>(C(r,IC(e),h),{documents:h,hi:s})))}function _(n,e){const t=Ve(n),r=Ve(t.ls),i=t.si.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.Et(s,e).next(c=>c?c.target:null))}function b(n,e){const t=Ve(n),r=t.ri.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.oi.getAllFromCollectionGroup(i,e,DD(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(C(t,e,i),i))}function C(n,e,t){let r=vt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ri.set(e,r)}function M(){return M=(0,pe.Z)(function*(n,e,t,r){const i=Ve(n);let s=_n(),c=js();for(const y of t){const E=e.li(y.metadata.name);y.document&&(s=s.add(E));const T=e.fi(y);T.setReadTime(e.di(y.metadata.readTime)),c=c.insert(E,T)}const h=i.oi.newChangeBuffer({trackRemovals:!0}),g=yield a(i,(y=r,To(_u(rn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>zx(y,h,c).next(E=>(h.apply(y),E)).next(E=>i.ls.removeMatchingKeysForTargetId(y,g.targetId).next(()=>i.ls.addMatchingKeys(y,s,g.targetId)).next(()=>i.ai.Gs(y,E)).next(()=>E)))}),M.apply(this,arguments)}function k(n,e){return V.apply(this,arguments)}function V(){return V=(0,pe.Z)(function*(n,e,t=_n()){const r=yield a(n,To(XC(e.bundledQuery))),i=Ve(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const c=ii(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.ds.saveNamedQuery(s,e);const h=r.withResumeToken(Hr.EMPTY_BYTE_STRING,c);return i.si=i.si.insert(h.targetId,h),i.ls.updateTargetData(s,h).next(()=>i.ls.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.ls.addMatchingKeys(s,t,r.targetId)).next(()=>i.ds.saveNamedQuery(s,e))})}),V.apply(this,arguments)}class q{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return he.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:ii(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:XC(r.bundledQuery),readTime:ii(r.readTime)}),he.resolve();var r}}class ee{constructor(){this.overlays=new dr(Ne.comparator),this.mi=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Xt(e,t,s)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.mi.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.mi.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const i=im(),s=t.length+1,c=new Ne(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const g=h.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&g.largestBatchId>r&&i.set(g.getKey(),g)}return he.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new dr((y,E)=>y-E);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let E=s.get(y.largestBatchId);null===E&&(E=im(),s=s.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const h=im(),g=s.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,E)=>h.set(y,E)),!(h.size()>=i)););return he.resolve(h)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.mi.get(i.largestBatchId).delete(r.key);this.mi.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new ZC(t,r));let s=this.mi.get(t);void 0===s&&(s=_n(),this.mi.set(t,s)),this.mi.set(t,s.add(r.key))}}class ge{constructor(){this.gi=new Gn(Se.yi),this.pi=new Gn(Se.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new Se(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new Se(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new Ne(new rn([])),r=new Se(t,e),i=new Se(t,e+1),s=[];return this.pi.forEachInRange([r,i],c=>{this.Ei(c),s.push(c.key)}),s}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Ne(new rn([])),r=new Se(t,e),i=new Se(t,e+1);let s=_n();return this.pi.forEachInRange([r,i],c=>{s=s.add(c.key)}),s}containsKey(e){const t=new Se(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Se{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Ne.comparator(e.key,t.key)||$t(e.Vi,t.Vi)}static Ii(e,t){return $t(e.Vi,t.Vi)||Ne.comparator(e.key,t.key)}}class Fe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new Gn(Se.yi)}checkEmpty(e){return he.resolve(0===this.$s.length)}addMutationBatch(e,t,r,i){const s=this.vi;this.vi++;const c=new gv(s,t,r,i);this.$s.push(c);for(const h of i)this.Si=this.Si.add(new Se(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,t){return he.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ci(t+1),s=i<0?0:i;return he.resolve(this.$s.length>s?this.$s[s]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return he.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Se(t,0),i=new Se(t,Number.POSITIVE_INFINITY),s=[];return this.Si.forEachInRange([r,i],c=>{const h=this.Di(c.Vi);s.push(h)}),he.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gn($t);return t.forEach(i=>{const s=new Se(i,0),c=new Se(i,Number.POSITIVE_INFINITY);this.Si.forEachInRange([s,c],h=>{r=r.add(h.Vi)})}),he.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Ne.isDocumentKey(s)||(s=s.child(""));const c=new Se(new Ne(s),0);let h=new Gn($t);return this.Si.forEachWhile(g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(g.Vi)),!0)},c),he.resolve(this.xi(h))}xi(e){const t=[];return e.forEach(r=>{const i=this.Di(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ct(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return he.forEach(t.mutations,i=>{const s=new Se(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new Se(t,0),i=this.Si.firstAfterOrEqual(r);return he.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return he.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class Ke{constructor(e){this.ki=e,this.docs=new dr(Ne.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,c=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():Dn.newInvalidDocument(t))}getEntries(e,t){let r=js();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Dn.newInvalidDocument(i))}),he.resolve(r)}getAllFromCollection(e,t,r){let i=js();const s=new Ne(t.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:h,value:{document:g}}=c.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||TD(ex(g),r)<=0||(i=i.insert(g.key,g.mutableCopy()))}return he.resolve(i)}getAllFromCollectionGroup(e,t,r,i){Je()}Mi(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ce(this)}getSize(e){return he.resolve(this.size)}}class Ce extends lE{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class lt{constructor(e){this.persistence=e,this.Oi=new ic(t=>oa(t),Uf),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Fi=0,this.$i=new ge,this.targetCount=0,this.Bi=lc.mn()}forEachTarget(e,t){return this.Oi.forEach((r,i)=>t(i)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),he.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new lc(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.In(t),he.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Oi.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Oi.delete(c),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),he.waitFor(s).next(()=>i)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(c=>{s.push(i.markPotentiallyOrphaned(e,c))}),he.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.$i.containsKey(t))}}class Wt{constructor(e,t){this.Li={},this.overlays={},this.ts=new mi(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new lt(this),this.indexManager=new Rx,this.fs=new Ke(r=>this.referenceDelegate.Ui(r)),this.M=new _v(t),this.ds=new q(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ee,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new Fe(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const i=new yn(this.ts.next());return this.referenceDelegate.qi(),r(i).next(s=>this.referenceDelegate.Gi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ki(e,t){return he.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class yn extends Ix{constructor(e){super(),this.currentSequenceNumber=e}}class us{constructor(e){this.persistence=e,this.Qi=new ge,this.ji=null}static Wi(e){return new us(e)}get zi(){if(this.ji)return this.ji;throw Je()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(i=>this.zi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.zi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.zi,r=>{const i=Ne.fromPath(r);return this.Hi(e,i).next(s=>{s||t.removeEntry(i,vt.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return he.or([()=>he.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function Eu(n,e){return`firestore_clients_${n}_${e}`}function Ev(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function gm(n,e){return`firestore_targets_${n}_${e}`}class ip{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let s,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(s=new De(i.error.code,i.error.message))),c?new ip(e,t,i.state,s):(Ur("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new De(r.error.code,r.error.message))),s?new dh(e,r.state,i):(Ur("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=NC();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=vD(r.activeTargetIds[c]),s=s.add(r.activeTargetIds[c]);return i?new sp(e,s):(Ur("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class mm{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new mm(t.clientId,t.onlineState):(Ur("SharedClientState",`Failed to parse online state: ${e}`),null)}}class _m{constructor(){this.activeTargetIds=NC()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ym{constructor(e,t,r,i,s){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new dr($t),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.rr=Eu(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new _m),this.ar=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const t=yield e.syncEngine.Os();for(const i of t){if(i===e.tr)continue;const s=e.getItem(Eu(e.persistenceKey,i));if(s){const c=sp.Ji(i,s);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(gm(this.persistenceKey,e));if(r){const i=dh.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gm(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,pe.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const i=t.Vr(r.key,r.newValue);if(i)return t.vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(s){let c=mi.A;if(null!=s)try{const h=JSON.parse(s);Ct("number"==typeof h),c=h}catch(h){Ur("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==mi.A&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Nr(s)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new ip(this.currentUser,e,t,r),s=Ev(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Yi())}pr(e){const t=Ev(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=gm(this.persistenceKey,e),s=new dh(e,t,r);this.setItem(i,s.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return sp.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),i=Number(r[1]);return ip.Ji(new gi(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return dh.Ji(i,t)}wr(e){return mm.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),s=this.gr(r),c=[],h=[];return s.forEach(g=>{i.has(g)||c.push(g)}),i.forEach(g=>{s.has(g)||h.push(g)}),this.syncEngine.Or(c,h).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=NC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Sv{constructor(){this.Fr=new _m,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new _m,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class lj{Br(e){}shutdown(){}}class d1{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const cj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class uj{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class dj extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,s){const c=this.oo(e,t);Re("RestConnection","Sending: ",c,r);const h={};return this.uo(h,i,s),this.ao(e,c,h,r).then(g=>(Re("RestConnection","Received: ",g),g),g=>{throw Ky("RestConnection",`${e} failed with error: `,g,"url: ",c,"request:",r),g})}co(e,t,r,i,s){return this.ro(e,t,r,i,s)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+zd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}oo(e,t){return`${this.so}/v1/${t}:${cj[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,i){return new Promise((s,c)=>{const h=new HM;h.listenOnce(hD.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Wy.NO_ERROR:const y=h.getResponseJson();Re("Connection","XHR received:",JSON.stringify(y)),s(y);break;case Wy.TIMEOUT:Re("Connection",'RPC "'+e+'" timed out'),c(new De(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Wy.HTTP_ERROR:const E=h.getStatus();if(Re("Connection",'RPC "'+e+'" failed with status:',E,"response text:",h.getResponseText()),E>0){const T=h.getResponseJson().error;if(T&&T.status&&T.message){const x=function(N){const U=N.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(U)>=0?U:ue.UNKNOWN}(T.status);c(new De(x,T.message))}else c(new De(ue.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new De(ue.UNAVAILABLE,"Connection failed."));break;default:Je()}}finally{Re("Connection",'RPC "'+e+'" completed.')}});const g=JSON.stringify(i);h.send(t,"POST",g,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=qy(),c=dD(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new Gg({})),this.uo(h.initMessageHeaders,t,r),(0,P.uI)()||(0,P.b$)()||(0,P.d)()||(0,P.w1)()||(0,P.Mn)()||(0,P.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const g=i.join("");Re("Connection","Creating WebChannel: "+g,h);const y=s.createWebChannel(g,h);let E=!1,T=!1;const x=new uj({jr:U=>{T?Re("Connection","Not sending because WebChannel is closed:",U):(E||(Re("Connection","Opening WebChannel transport."),y.open(),E=!0),Re("Connection","WebChannel sending:",U),y.send(U))},Wr:()=>y.close()}),N=(U,K,le)=>{U.listen(K,Pe=>{try{le(Pe)}catch(Me){setTimeout(()=>{throw Me},0)}})};return N(y,Yy.EventType.OPEN,()=>{T||Re("Connection","WebChannel transport opened.")}),N(y,Yy.EventType.CLOSE,()=>{T||(T=!0,Re("Connection","WebChannel transport closed"),x.eo())}),N(y,Yy.EventType.ERROR,U=>{T||(T=!0,Ky("Connection","WebChannel transport errored:",U),x.eo(new De(ue.UNAVAILABLE,"The operation could not be completed")))}),N(y,Yy.EventType.MESSAGE,U=>{var K;if(!T){const le=U.data[0];Ct(!!le);const Pe=le,Me=Pe.error||(null===(K=Pe[0])||void 0===K?void 0:K.error);if(Me){Re("Connection","WebChannel received error:",Me);const Be=Me.status;let ke=function(ct){const Rn=jr[ct];if(void 0!==Rn)return VD(Rn)}(Be),mt=Me.message;void 0===ke&&(ke=ue.INTERNAL,mt="Unknown error status: "+Be+" with message "+Me.message),T=!0,x.eo(new De(ke,mt)),y.close()}else Re("Connection","WebChannel received:",le),x.no(le)}}),N(c,UM.STAT_EVENT,U=>{U.stat===Nf.PROXY?Re("Connection","Detected buffering proxy"):U.stat===Nf.NOPROXY&&Re("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.Zr()},0),x}}function h1(){return"undefined"!=typeof window?window:null}function wT(){return"undefined"!=typeof document?document:null}function gE(n){return new LC(n,!0)}class qx{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=i,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class f1{constructor(e,t,r,i,s,c,h,g){this.Jn=e,this.Ao=r,this.Ro=i,this.bo=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new qx(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,pe.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,pe.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,pe.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Ur(t.toString()),Ur("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new De(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,pe.Z)(function*(){e.state=0,e.start()}))}qo(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hj extends f1{constructor(e,t,r,i,s,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=s}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function $D(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:Je(),i=e.targetChange.targetIds||[],s=function(g,y){return g.N?(Ct(void 0===y||"string"==typeof y),Hr.fromBase64String(y||"")):(Ct(void 0===y||y instanceof Uint8Array),Hr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(g){const y=void 0===g.code?ue.UNKNOWN:VD(g.code);return new De(y,g.message||"")}(c);t=new PC(r,i,s,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Io(n,r.document.name),s=ii(r.document.updateTime),c=new Zi({mapValue:{fields:r.document.fields}}),h=Dn.newFoundDocument(i,s,c);t=new Zf(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Io(n,r.document),s=r.readTime?ii(r.readTime):vt.min(),c=Dn.newNoDocument(i,s);t=new Zf([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Io(n,r.document);t=new Zf([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Je();{const r=e.filter,s=new kC(r.count||0);t=new UD(r.targetId,s)}}var g;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return vt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?vt.min():s.readTime?ii(s.readTime):vt.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=lm(this.M),t.addTarget=function(i,s){let c;const h=s.target;return c=Kg(h)?{documents:GC(i,h)}:{query:zD(i,h)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=VC(i,s.resumeToken):s.snapshotVersion.compareTo(vt.min())>0&&(c.readTime=hv(i,s.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function qD(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Je()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=lm(this.M),t.removeTarget=e,this.Oo(t)}}class fj extends f1{constructor(e,t,r,i,s,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function _x(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,i){let s=ii(r.updateTime?r.updateTime:i);return s.isEqual(vt.min())&&(s=ii(i)),new lx(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ii(e.commitTime);return this.listener.Jo(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=lm(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Jf(this.M,r))};this.Oo(t)}}class pj extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new De(ue.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.ro(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new De(ue.UNKNOWN,i.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.co(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new De(ue.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class gj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Ur(t),this.su=!1):Re("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class mj{constructor(e,t,r,i,s){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(h=>{r.enqueueAndForget((0,pe.Z)(function*(){var g;op(c)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,pe.Z)(function*(y){const E=Ve(y);E.lu.add(4),yield Dv(E),E._u.set("Unknown"),E.lu.delete(4),yield mE(E)}),function(y){return g.apply(this,arguments)})(c))}))}),this._u=new gj(r,i)}}function mE(n){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,pe.Z)(function*(n){if(op(n))for(const e of n.fu)yield e(!0)}),Wx.apply(this,arguments)}function Dv(n){return Yx.apply(this,arguments)}function Yx(){return Yx=(0,pe.Z)(function*(n){for(const e of n.fu)yield e(!1)}),Yx.apply(this,arguments)}function CT(n,e){const t=Ve(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),Qx(t)?Zx(t):Iv(t).Co()&&Kx(t,e))}function _E(n,e){const t=Ve(n),r=Iv(t);t.hu.delete(e),r.Co()&&p1(t,e),0===t.hu.size&&(r.Co()?r.ko():op(t)&&t._u.set("Unknown"))}function Kx(n,e){n.wu.Z(e.targetId),Iv(n).Qo(e)}function p1(n,e){n.wu.Z(e),Iv(n).jo(e)}function Zx(n){n.wu=new fx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),Iv(n).start(),n._u.iu()}function Qx(n){return op(n)&&!Iv(n).Do()&&n.hu.size>0}function op(n){return 0===Ve(n).lu.size}function g1(n){n.wu=void 0}function _j(n){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,pe.Z)(function*(n){n.hu.forEach((e,t)=>{Kx(n,e)})}),Jx.apply(this,arguments)}function yj(n,e){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,pe.Z)(function*(n,e){g1(n),Qx(n)?(n._u.uu(e),Zx(n)):n._u.set("Unknown")}),Xx.apply(this,arguments)}function vj(n,e,t){return eR.apply(this,arguments)}function eR(){return eR=(0,pe.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof PC&&2===e.state&&e.cause)try{yield(r=(0,pe.Z)(function*(i,s){const c=s.cause;for(const h of s.targetIds)i.hu.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.hu.delete(h),i.wu.removeTarget(h))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ET(n,r)}else if(e instanceof Zf?n.wu.ut(e):e instanceof UD?n.wu._t(e):n.wu.ht(e),!t.isEqual(vt.min()))try{const r=yield $x(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const c=i.wu.yt(s);return c.targetChanges.forEach((h,g)=>{if(h.resumeToken.approximateByteSize()>0){const y=i.hu.get(g);y&&i.hu.set(g,y.withResumeToken(h.resumeToken,s))}}),c.targetMismatches.forEach(h=>{const g=i.hu.get(h);if(!g)return;i.hu.set(h,g.withResumeToken(Hr.EMPTY_BYTE_STRING,g.snapshotVersion)),p1(i,h);const y=new yu(g.target,h,1,g.sequenceNumber);Kx(i,y)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),yield ET(n,r)}var r}),eR.apply(this,arguments)}function ET(n,e,t){return tR.apply(this,arguments)}function tR(){return tR=(0,pe.Z)(function*(n,e,t){if(!oc(e))throw e;n.lu.add(1),yield Dv(n),n._u.set("Offline"),t||(t=()=>$x(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield mE(n)}))}),tR.apply(this,arguments)}function m1(n,e){return e().catch(t=>ET(n,t,e))}function Tv(n){return nR.apply(this,arguments)}function nR(){return nR=(0,pe.Z)(function*(n){const e=Ve(n),t=ap(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;bj(e);)try{const i=yield o(e.localStore,r);if(null===i){0===e.cu.length&&t.ko();break}r=i.batchId,wj(e,i)}catch(i){yield ET(e,i)}_1(e)&&y1(e)}),nR.apply(this,arguments)}function bj(n){return op(n)&&n.cu.length<10}function wj(n,e){n.cu.push(e);const t=ap(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function _1(n){return op(n)&&!ap(n).Do()&&n.cu.length>0}function y1(n){ap(n).start()}function Cj(n){return rR.apply(this,arguments)}function rR(){return rR=(0,pe.Z)(function*(n){ap(n).Xo()}),rR.apply(this,arguments)}function Ej(n){return iR.apply(this,arguments)}function iR(){return iR=(0,pe.Z)(function*(n){const e=ap(n);for(const t of n.cu)e.Ho(t.mutations)}),iR.apply(this,arguments)}function Sj(n,e,t){return sR.apply(this,arguments)}function sR(){return sR=(0,pe.Z)(function*(n,e,t){const r=n.cu.shift(),i=mv.from(r,e,t);yield m1(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Tv(n)}),sR.apply(this,arguments)}function Dj(n,e){return oR.apply(this,arguments)}function oR(){return oR=(0,pe.Z)(function*(n,e){var t;e&&ap(n).zo&&(yield(t=(0,pe.Z)(function*(r,i){if(LD(s=i.code)&&s!==ue.ABORTED){const c=r.cu.shift();ap(r).No(),yield m1(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Tv(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),_1(n)&&y1(n)}),oR.apply(this,arguments)}function v1(n,e){return aR.apply(this,arguments)}function aR(){return aR=(0,pe.Z)(function*(n,e){const t=Ve(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=op(t);t.lu.add(3),yield Dv(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield mE(t)}),aR.apply(this,arguments)}function lR(n,e){return cR.apply(this,arguments)}function cR(){return cR=(0,pe.Z)(function*(n,e){const t=Ve(n);e?(t.lu.delete(2),yield mE(t)):e||(t.lu.add(2),yield Dv(t),t._u.set("Unknown"))}),cR.apply(this,arguments)}function Iv(n){return n.mu||(n.mu=function(e,t,r){const i=Ve(e);return i.tu(),new hj(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:_j.bind(null,n),Jr:yj.bind(null,n),Ko:vj.bind(null,n)}),n.fu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.mu.No(),Qx(n)?Zx(n):n._u.set("Unknown")):(yield n.mu.stop(),g1(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function ap(n){return n.gu||(n.gu=function(e,t,r){const i=Ve(e);return i.tu(),new fj(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:Cj.bind(null,n),Jr:Dj.bind(null,n),Yo:Ej.bind(null,n),Jo:Sj.bind(null,n)}),n.fu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.gu.No(),yield Tv(n)):(yield n.gu.stop(),n.cu.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class uR{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,s){const c=Date.now()+r,h=new uR(e,t,c,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new De(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Av(n,e){if(Ur("AsyncQueue",`${e}: ${n}`),oc(n))return new De(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class Mv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ne.comparator(t.key,r.key):(t,r)=>Ne.comparator(t.key,r.key),this.keyedMap=cv(),this.sortedSet=new dr(this.comparator)}static emptySet(e){return new Mv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Mv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class b1{constructor(){this.yu=new dr(Ne.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Je():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class xv{constructor(e,t,r,i,s,c,h,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=g}static fromInitialDocuments(e,t,r,i){const s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new xv(e,t,Mv.emptySet(t),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Tj{constructor(){this.Iu=void 0,this.listeners=[]}}class Ij{constructor(){this.queries=new ic(e=>xD(e),Qg),this.onlineState="Unknown",this.Tu=new Set}}function dR(n,e){return hR.apply(this,arguments)}function hR(){return hR=(0,pe.Z)(function*(n,e){const t=Ve(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new Tj),i)try{s.Iu=yield t.onListen(r)}catch(c){const h=Av(c,`Initialization of query '${th(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,s),s.listeners.push(e),e.Eu(t.onlineState),s.Iu&&e.Au(s.Iu)&&gR(t)}),hR.apply(this,arguments)}function fR(n,e){return pR.apply(this,arguments)}function pR(){return pR=(0,pe.Z)(function*(n,e){const t=Ve(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const c=s.listeners.indexOf(e);c>=0&&(s.listeners.splice(c,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),pR.apply(this,arguments)}function Aj(n,e){const t=Ve(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.Au(i)&&(r=!0);c.Iu=i}}r&&gR(t)}function Mj(n,e,t){const r=Ve(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function gR(n){n.Tu.forEach(e=>{e.next()})}class mR{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new xv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=xv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class xj{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class w1{constructor(e){this.M=e}li(e){return Io(this.M,e)}fi(e){return e.metadata.exists?HC(this.M,e.document,!1):Dn.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return ii(e)}}class Rj{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=C1(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=rn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new w1(this.M);for(const i of e)if(i.metadata.queries){const s=r.li(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||_n()).add(s);t.set(c,h)}}return t}complete(){var e=this;return(0,pe.Z)(function*(){const t=yield function D(n,e,t,r){return M.apply(this,arguments)}(e.localStore,new w1(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield k(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function C1(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class E1{constructor(e){this.key=e}}class S1{constructor(e){this.key=e}}class D1{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=_n(),this.mutatedKeys=_n(),this.Lu=AC(e),this.Uu=new Mv(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new b1,i=t?t.Uu:this.Uu;let s=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const g=nv(this.query)&&i.size===this.query.limit?i.last():null,y=Zg(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((E,T)=>{const x=i.get(E),N=rv(this.query,T)?T:null,U=!!x&&this.mutatedKeys.has(x.key),K=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let le=!1;x&&N?x.data.isEqual(N.data)?U!==K&&(r.track({type:3,doc:N}),le=!0):this.Qu(x,N)||(r.track({type:2,doc:N}),le=!0,(g&&this.Lu(N,g)>0||y&&this.Lu(N,y)<0)&&(h=!0)):!x&&N?(r.track({type:0,doc:N}),le=!0):x&&!N&&(r.track({type:1,doc:x}),le=!0,(g||y)&&(h=!0)),le&&(N?(c=c.add(N),s=K?s.add(E):s.delete(E)):(c=c.delete(E),s=s.delete(E)))}),nv(this.query)||Zg(this.query))for(;c.size>this.query.limit;){const E=nv(this.query)?c.last():c.first();c=c.delete(E.key),s=s.delete(E.key),r.track({type:1,doc:E})}return{Uu:c,Ku:r,ei:h,mutatedKeys:s}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Ku.pu();s.sort((y,E)=>function(T,x){const N=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Je()}};return N(T)-N(x)}(y.type,E.type)||this.Lu(y.doc,E.doc)),this.ju(r);const c=t?this.Wu():[],h=0===this.Bu.size&&this.current?1:0,g=h!==this.$u;return this.$u=h,0!==s.length||g?{snapshot:new xv(this.query,e.Uu,i,s,e.mutatedKeys,0===h,g,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new b1,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=_n(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new S1(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new E1(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=_n();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return xv.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class kj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Oj{constructor(e){this.key=e,this.Xu=!1}}class Nj{constructor(e,t,r,i,s,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.Zu={},this.ta=new ic(h=>xD(h),Qg),this.ea=new Map,this.na=new Set,this.sa=new dr(Ne.comparator),this.ia=new Map,this.ra=new ge,this.oa={},this.ua=new Map,this.aa=lc.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function Pj(n,e){return _R.apply(this,arguments)}function _R(){return _R=(0,pe.Z)(function*(n,e){const t=UR(n);let r,i;const s=t.ta.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Yu();else{const c=yield a(t.localStore,To(e));t.isPrimaryClient&&CT(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield yR(t,e,r,"current"===h)}return i}),_R.apply(this,arguments)}function yR(n,e,t,r){return vR.apply(this,arguments)}function vR(){return vR=(0,pe.Z)(function*(n,e,t,r){n.ha=(E,T,x)=>{return(N=(0,pe.Z)(function*(U,K,le,Pe){let Me=K.view.Gu(le);Me.ei&&(Me=yield f(U.localStore,K.query,!1).then(({documents:mt})=>K.view.Gu(mt,Me)));const Be=Pe&&Pe.targetChanges.get(K.targetId),ke=K.view.applyChanges(Me,U.isPrimaryClient,Be);return MR(U,K.targetId,ke.zu),ke.snapshot}),function(U,K,le,Pe){return N.apply(this,arguments)})(n,E,T,x);var N};const i=yield f(n.localStore,e,!0),s=new D1(e,i.hi),c=s.Gu(i.documents),h=sm.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),g=s.applyChanges(c,n.isPrimaryClient,h);MR(n,t,g.zu);const y=new kj(e,t,s);return n.ta.set(e,y),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),g.snapshot}),vR.apply(this,arguments)}function Fj(n,e){return bR.apply(this,arguments)}function bR(){return bR=(0,pe.Z)(function*(n,e){const t=Ve(n),r=t.ta.get(e),i=t.ea.get(r.targetId);if(i.length>1)return t.ea.set(r.targetId,i.filter(s=>!Qg(s,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield u(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),_E(t.remoteStore,r.targetId),Rv(t,r.targetId)}).catch(rp))):(Rv(t,r.targetId),yield u(t.localStore,r.targetId,!0))}),bR.apply(this,arguments)}function wR(){return wR=(0,pe.Z)(function*(n,e,t){const r=HR(n);try{const i=yield function(s,c){const h=Ve(s),g=_r.now(),y=c.reduce((T,x)=>T.add(x.key),_n());let E;return h.persistence.runTransaction("Locally write mutations","readwrite",T=>h.ai.qs(T,y).next(x=>{E=x;const N=[];for(const U of c){const K=FD(U,E.get(U.key));null!=K&&N.push(new rh(U.key,K,Qd(K.value.mapValue),ur.exists(!0)))}return h.$s.addMutationBatch(T,g,N,c)})).then(T=>(T.applyToLocalDocumentSet(E),{batchId:T.batchId,changes:E}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,h){let g=s.oa[s.currentUser.toKey()];g||(g=new dr($t)),g=g.insert(c,h),s.oa[s.currentUser.toKey()]=g}(r,i.batchId,t),yield hh(r,i.changes),yield Tv(r.remoteStore)}catch(i){const s=Av(i,"Failed to persist write");t.reject(s)}}),wR.apply(this,arguments)}function T1(n,e){return CR.apply(this,arguments)}function CR(){return CR=(0,pe.Z)(function*(n,e){const t=Ve(n);try{const r=yield u1(t.localStore,e);e.targetChanges.forEach((i,s)=>{const c=t.ia.get(s);c&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?Ct(c.Xu):i.removedDocuments.size>0&&(Ct(c.Xu),c.Xu=!1))}),yield hh(t,r,e)}catch(r){yield rp(r)}}),CR.apply(this,arguments)}function I1(n,e,t){const r=Ve(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ta.forEach((s,c)=>{const h=c.view.Eu(e);h.snapshot&&i.push(h.snapshot)}),function(s,c){const h=Ve(s);h.onlineState=c;let g=!1;h.queries.forEach((y,E)=>{for(const T of E.listeners)T.Eu(c)&&(g=!0)}),g&&gR(h)}(r.eventManager,e),i.length&&r.Zu.Ko(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Vj(n,e,t){return ER.apply(this,arguments)}function ER(){return ER=(0,pe.Z)(function*(n,e,t){const r=Ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ia.get(e),s=i&&i.key;if(s){let c=new dr(Ne.comparator);c=c.insert(s,Dn.newNoDocument(s,vt.min()));const h=_n().add(s),g=new sc(vt.min(),new Map,new Gn($t),c,h);yield T1(r,g),r.sa=r.sa.remove(s),r.ia.delete(e),xR(r)}else yield u(r.localStore,e,!1).then(()=>Rv(r,e,t)).catch(rp)}),ER.apply(this,arguments)}function Bj(n,e){return SR.apply(this,arguments)}function SR(){return SR=(0,pe.Z)(function*(n,e){const t=Ve(n),r=e.batch.batchId;try{const i=yield c1(t.localStore,e);AR(t,r,null),IR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield hh(t,i)}catch(i){yield rp(i)}}),SR.apply(this,arguments)}function Uj(n,e,t){return DR.apply(this,arguments)}function DR(){return DR=(0,pe.Z)(function*(n,e,t){const r=Ve(n);try{const i=yield function(s,c){const h=Ve(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return h.$s.lookupMutationBatch(g,c).next(E=>(Ct(null!==E),y=E.keys(),h.$s.removeMutationBatch(g,E))).next(()=>h.$s.performConsistencyCheck(g)).next(()=>h.ai.qs(g,y))})}(r.localStore,e);AR(r,e,t),IR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield hh(r,i)}catch(i){yield rp(i)}}),DR.apply(this,arguments)}function TR(){return TR=(0,pe.Z)(function*(n,e){const t=Ve(n);op(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const c=Ve(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.$s.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ua.get(r)||[];i.push(e),t.ua.set(r,i)}catch(r){const i=Av(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),TR.apply(this,arguments)}function IR(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function AR(n,e,t){const r=Ve(n);let i=r.oa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.oa[r.currentUser.toKey()]=i}}function Rv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||A1(n,r)})}function A1(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(_E(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),xR(n))}function MR(n,e,t){for(const r of t)r instanceof E1?(n.ra.addReference(r.key,e),jj(n,r)):r instanceof S1?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||A1(n,r.key)):Je()}function jj(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.na.add(r),xR(n))}function xR(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new Ne(rn.fromString(e)),r=n.aa.next();n.ia.set(r,new Oj(t)),n.sa=n.sa.insert(t,r),CT(n.remoteStore,new yu(To(_u(t.path)),r,2,mi.A))}}function hh(n,e,t){return RR.apply(this,arguments)}function RR(){return RR=(0,pe.Z)(function*(n,e,t){const r=Ve(n),i=[],s=[],c=[];var h;r.ta.isEmpty()||(r.ta.forEach((h,g)=>{c.push(r.ha(g,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,y.fromCache?"not-current":"current"),i.push(y);const E=bT.Js(g.targetId,y);s.push(E)}}))}),yield Promise.all(c),r.Zu.Ko(i),yield(h=(0,pe.Z)(function*(g,y){const E=Ve(g);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>he.forEach(y,x=>he.forEach(x.zs,N=>E.persistence.referenceDelegate.addReference(T,x.targetId,N)).next(()=>he.forEach(x.Hs,N=>E.persistence.referenceDelegate.removeReference(T,x.targetId,N)))))}catch(T){if(!oc(T))throw T;Re("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const x=T.targetId;if(!T.fromCache){const N=E.si.get(x),K=N.withLastLimboFreeSnapshotVersion(N.snapshotVersion);E.si=E.si.insert(x,K)}}}),function(g,y){return h.apply(this,arguments)})(r.localStore,s))}),RR.apply(this,arguments)}function Gj(n,e){return kR.apply(this,arguments)}function kR(){return kR=(0,pe.Z)(function*(n,e){const t=Ve(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=yield Gx(t.localStore,e);t.currentUser=e,(i=t).ua.forEach(c=>{c.forEach(h=>{h.reject(new De(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield hh(t,r.ci)}var i}),kR.apply(this,arguments)}function $j(n,e){const t=Ve(n),r=t.ia.get(e);if(r&&r.Xu)return _n().add(r.key);{let i=_n();const s=t.ea.get(e);if(!s)return i;for(const c of s){const h=t.ta.get(c);i=i.unionWith(h.view.qu)}return i}}function zj(n,e){return OR.apply(this,arguments)}function OR(){return OR=(0,pe.Z)(function*(n,e){const t=Ve(n),r=yield f(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&MR(t,e.targetId,i.zu),i}),OR.apply(this,arguments)}function qj(n,e){return NR.apply(this,arguments)}function NR(){return NR=(0,pe.Z)(function*(n,e){const t=Ve(n);return b(t.localStore,e).then(r=>hh(t,r))}),NR.apply(this,arguments)}function Wj(n,e,t,r){return PR.apply(this,arguments)}function PR(){return PR=(0,pe.Z)(function*(n,e,t,r){const i=Ve(n),s=yield function(c,h){const g=Ve(c),y=Ve(g.$s);return g.persistence.runTransaction("Lookup mutation documents","readonly",E=>y.ln(E,h).next(T=>T?g.ai.qs(E,T):he.resolve(null)))}(i.localStore,e);var h;null!==s?("pending"===t?yield Tv(i.remoteStore):"acknowledged"===t||"rejected"===t?(AR(i,e,r||null),IR(i,e),h=e,Ve(Ve(i.localStore).$s).dn(h)):Je(),yield hh(i,s)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)}),PR.apply(this,arguments)}function FR(){return FR=(0,pe.Z)(function*(n,e){const t=Ve(n);if(UR(t),HR(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield M1(t,r.toArray());t.ca=!0,yield lR(t.remoteStore,!0);for(const s of i)CT(t.remoteStore,s)}else if(!1===e&&!1!==t.ca){const r=[];let i=Promise.resolve();t.ea.forEach((s,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Rv(t,c),u(t.localStore,c,!0))),_E(t.remoteStore,c)}),yield i,yield M1(t,r),function(s){const c=Ve(s);c.ia.forEach((h,g)=>{_E(c.remoteStore,g)}),c.ra.bi(),c.ia=new Map,c.sa=new dr(Ne.comparator)}(t),t.ca=!1,yield lR(t.remoteStore,!1)}}),FR.apply(this,arguments)}function M1(n,e,t){return LR.apply(this,arguments)}function LR(){return LR=(0,pe.Z)(function*(n,e,t){const r=Ve(n),i=[],s=[];for(const c of e){let h;const g=r.ea.get(c);if(g&&0!==g.length){h=yield a(r.localStore,To(g[0]));for(const y of g){const E=r.ta.get(y),T=yield zj(r,E);T.snapshot&&s.push(T.snapshot)}}else{const y=yield _(r.localStore,c);h=yield a(r.localStore,y),yield yR(r,x1(y),c,!1)}i.push(h)}return r.Zu.Ko(s),i}),LR.apply(this,arguments)}function x1(n){return EC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Kj(n){const e=Ve(n);return Ve(Ve(e.localStore).persistence).Os()}function Zj(n,e,t,r){return VR.apply(this,arguments)}function VR(){return VR=(0,pe.Z)(function*(n,e,t,r){const i=Ve(n);if(i.ca)return void Re("SyncEngine","Ignoring unexpected query state notification.");const s=i.ea.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const c=yield b(i.localStore,IC(s[0])),h=sc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield hh(i,c,h);break}case"rejected":yield u(i.localStore,e,!0),Rv(i,e,r);break;default:Je()}}),VR.apply(this,arguments)}function Qj(n,e,t){return BR.apply(this,arguments)}function BR(){return BR=(0,pe.Z)(function*(n,e,t){const r=UR(n);if(r.ca){for(const i of e){if(r.ea.has(i)){Re("SyncEngine","Adding an already active target "+i);continue}const s=yield _(r.localStore,i),c=yield a(r.localStore,s);yield yR(r,x1(s),c.targetId,!1),CT(r.remoteStore,c)}for(const i of t)r.ea.has(i)&&(yield u(r.localStore,i,!1).then(()=>{_E(r.remoteStore,i),Rv(r,i)}).catch(rp))}}),BR.apply(this,arguments)}function UR(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=T1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$j.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Vj.bind(null,e),e.Zu.Ko=Aj.bind(null,e.eventManager),e.Zu.la=Mj.bind(null,e.eventManager),e}function HR(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Bj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Uj.bind(null,e),e}class R1{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,pe.Z)(function*(){t.M=gE(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return jx(this.persistence,new Hx,e.initialUser,this.M)}_a(e){return new Wt(us.Wi,this.M)}da(e){return new Sv}terminate(){var e=this;return(0,pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class k1 extends R1{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield HR(r.ga.syncEngine),yield Tv(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return jx(this.persistence,new Hx,e.initialUser,this.M)}wa(e){return new Px(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=fE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ss.withCacheSize(this.cacheSizeBytes):Ss.DEFAULT;return new vT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,h1(),wT(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new Sv}}class Xj extends k1{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e);const i=r.ga.syncEngine;r.sharedClientState instanceof ym&&(r.sharedClientState.syncEngine={kr:Wj.bind(null,i),Mr:Zj.bind(null,i),Or:Qj.bind(null,i),Os:Kj.bind(null,i),Nr:qj.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var s=(0,pe.Z)(function*(c){yield function Yj(n,e){return FR.apply(this,arguments)}(r.ga.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}da(e){const t=h1();if(!ym.vt(t))throw new De(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=fE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ym(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class jR{initialize(e,t){var r=this;return(0,pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>I1(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Gj.bind(null,r.syncEngine),yield lR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Ij}createDatastore(e){const t=gE(e.databaseInfo.databaseId),r=new dj(e.databaseInfo);return new pj(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=h=>I1(this.syncEngine,h,0),c=d1.vt()?new d1:new lj,new mj(t,r,i,s,c);var t,r,i,s,c}createSyncEngine(e,t){return function(r,i,s,c,h,g,y){const E=new Nj(r,i,s,c,h,g);return y&&(E.ca=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,pe.Z)(function*(t){const r=Ve(t);Re("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Dv(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function O1(n,e=10240){let t=0;return{read:()=>(0,pe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ST{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class eG{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new ri,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),i=Number(r);isNaN(i)&&e.Ra(`length string (${r}) is not valid number`);const s=yield e.ba(i);return new xj(JSON.parse(s),t.length+i)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,pe.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class tG{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new De(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,pe.Z)(function*(s,c){const h=Ve(s),g=lm(h.M)+"/documents",y={documents:c.map(N=>om(h.M,N))},E=yield h.co("BatchGetDocuments",g,y),T=new Map;E.forEach(N=>{const U=function mx(n,e){return"found"in e?function(t,r){Ct(!!r.found);const i=Io(t,r.found.name),s=ii(r.found.updateTime),c=new Zi({mapValue:{fields:r.found.fields}});return Dn.newFoundDocument(i,s,c)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const i=Io(t,r.missing),s=ii(r.readTime);return Dn.newNoDocument(i,s)}(n,e):Je()}(h.M,N);T.set(U.key.toString(),U)});const x=[];return c.forEach(N=>{const U=T.get(N.toString());Ct(!!U),x.push(U)}),x}),function(s,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Ne.fromPath(i);e.mutations.push(new nm(s,e.precondition(s)))}),yield(r=(0,pe.Z)(function*(i,s){const c=Ve(i),h=lm(c.M)+"/documents",g={writes:s.map(y=>Jf(c.M,y))};yield c.ro("Commit",h,g)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Je();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new De(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ur.updateTime(t):ur.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new De(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ur.updateTime(t)}return ur.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class nG{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new qx(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,pe.Z)(function*(){const t=new tG(e.datastore),r=e.Da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Ca(s)}))}).catch(i=>{e.Ca(i)})}))}Da(e){try{const t=this.updateFunction(e);return!pu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!LD(t)}return!1}}class rG{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gi.UNAUTHENTICATED,this.clientId=pC.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,pe.Z)(function*(h){Re("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Re("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new De(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Av(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function N1(n,e){return GR.apply(this,arguments)}function GR(){return GR=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,pe.Z)(function*(s){r.isEqual(s)||(yield Gx(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),GR.apply(this,arguments)}function P1(n,e){return $R.apply(this,arguments)}function $R(){return $R=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield zR(n);Re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>v1(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>v1(e.remoteStore,s)),n.onlineComponents=e}),$R.apply(this,arguments)}function zR(n){return qR.apply(this,arguments)}function qR(){return qR=(0,pe.Z)(function*(n){return n.offlineComponents||(Re("FirestoreClient","Using default OfflineComponentProvider"),yield N1(n,new R1)),n.offlineComponents}),qR.apply(this,arguments)}function DT(n){return WR.apply(this,arguments)}function WR(){return WR=(0,pe.Z)(function*(n){return n.onlineComponents||(Re("FirestoreClient","Using default OnlineComponentProvider"),yield P1(n,new jR)),n.onlineComponents}),WR.apply(this,arguments)}function F1(n){return zR(n).then(e=>e.persistence)}function YR(n){return zR(n).then(e=>e.localStore)}function L1(n){return DT(n).then(e=>e.remoteStore)}function KR(n){return DT(n).then(e=>e.syncEngine)}function kv(n){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,pe.Z)(function*(n){const e=yield DT(n),t=e.eventManager;return t.onListen=Pj.bind(null,e.syncEngine),t.onUnlisten=Fj.bind(null,e.syncEngine),t}),ZR.apply(this,arguments)}function V1(n,e,t={}){const r=new ri;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(i,s,c,h,g){const y=new ST({next:T=>{s.enqueueAndForget(()=>fR(i,E));const x=T.docs.has(c);!x&&T.fromCache?g.reject(new De(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&T.fromCache&&h&&"server"===h.source?g.reject(new De(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new mR(_u(c.path),y,{includeMetadataChanges:!0,Du:!0});return dR(i,E)}(yield kv(n),n.asyncQueue,e,t,r)})),r.promise}function B1(n,e,t={}){const r=new ri;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(i,s,c,h,g){const y=new ST({next:T=>{s.enqueueAndForget(()=>fR(i,E)),T.fromCache&&"server"===h.source?g.reject(new De(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new mR(c,y,{includeMetadataChanges:!0,Du:!0});return dR(i,E)}(yield kv(n),n.asyncQueue,e,t,r)})),r.promise}const U1=new Map;function QR(n,e,t){if(!t)throw new De(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function H1(n,e,t,r){if(!0===e&&!0===r)throw new De(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function j1(n){if(!Ne.isDocumentKey(n))throw new De(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function G1(n){if(Ne.isDocumentKey(n))throw new De(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function TT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Je()}function dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new De(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=TT(n);throw new De(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function $1(n,e){if(e<=0)throw new De(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class z1{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new De(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new De(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,H1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yE{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new z1({}),this._settingsFrozen=!1,e instanceof Ya?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new De(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ya(i.options.projectId)}(e))}get app(){if(!this._app)throw new De(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new De(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new z1(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new jM;switch(t.type){case"gapi":const r=t.client;return Ct(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new qM(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new De(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=U1.get(e);t&&(Re("ComponentProvider","Removing Datastore"),U1.delete(e),t.terminate())}(this),Promise.resolve()}}class hr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Su(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hr(this.firestore,e,this._key)}}class Ds{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ds(this.firestore,e,this._query)}}class Su extends Ds{constructor(e,t,r){super(e,t,_u(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hr(this.firestore,null,new Ne(e))}withConverter(e){return new Su(this.firestore,e,this._path)}}function q1(n,e,...t){if(n=(0,P.m9)(n),QR("collection","path",e),n instanceof yE){const r=rn.fromString(e,...t);return G1(r),new Su(n,null,r)}{if(!(n instanceof hr||n instanceof Su))throw new De(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rn.fromString(e,...t));return G1(r),new Su(n.firestore,null,r)}}function IT(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=pC.R()),QR("doc","path",e),n instanceof yE){const r=rn.fromString(e,...t);return j1(r),new hr(n,null,new Ne(r))}{if(!(n instanceof hr||n instanceof Su))throw new De(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rn.fromString(e,...t));return j1(r),new hr(n.firestore,n instanceof Su?n.converter:null,new Ne(r))}}function W1(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof hr||n instanceof Su)&&(e instanceof hr||e instanceof Su)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Y1(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof Ds&&e instanceof Ds&&n.firestore===e.firestore&&Qg(n._query,e._query)&&n.converter===e.converter}class pG{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new qx(this,"async_queue_retry"),this.Ua=()=>{const t=wT();t&&Re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=wT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=wT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new ri;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,pe.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!oc(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,Ur("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=uR.createAndSchedule(this,e,t,r,s=>this.Qa(s));return this.Oa.push(i),i}qa(){this.Fa&&Je()}verifyOperationInProgress(){}ja(){var e=this;return(0,pe.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function JR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class gG{constructor(){this._progressObserver={},this._taskCompletionResolver=new ri,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class vr extends yE{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new pG,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||K1(this),this._firestoreClient.terminate()}}function bi(n){return n._firestoreClient||K1(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function K1(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new JM(n._databaseId,s,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new rG(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Z1(n,e,t){const r=new ri;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield N1(n,t),yield P1(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(s=i).name?s.code===ue.FAILED_PRECONDITION||s.code===ue.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var s})).then(()=>r.promise)}function Q1(n){if(n._initialized||n._terminated)throw new De(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class fh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new De(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _i(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Du{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Du(Hr.fromBase64String(e))}catch(t){throw new De(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Du(Hr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class vm{constructor(e){this._methodName=e}}class AT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new De(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new De(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}const DG=/^__.*__$/;class TG{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new rh(e,this.data,this.fieldMask,t,this.fieldTransforms):new tm(e,this.data,t,this.fieldTransforms)}}class J1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new rh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function X1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Je()}}class MT{constructor(e,t,r,i,s,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Ja(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new MT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.ec(e),i}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return kT(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(X1(this.Ya)&&DG.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class IG{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||gE(e)}uc(e,t,r,i=!1){return new MT({Ya:e,methodName:t,oc:r,path:_i.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function bm(n){const e=n._freezeSettings(),t=gE(n._databaseId);return new IG(n._databaseId,!!e.ignoreUndefinedProperties,t)}function xT(n,e,t,r,i,s={}){const c=n.uc(s.merge||s.mergeFields?2:0,e,t,i);nk("Data must be an object, but it was:",c,r);const h=nF(r,c);let g,y;if(s.merge)g=new hu(c.fieldMask),y=c.fieldTransforms;else if(s.mergeFields){const E=[];for(const T of s.mergeFields){const x=rk(e,T,t);if(!c.contains(x))throw new De(ue.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);iF(E,x)||E.push(x)}g=new hu(E),y=c.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,y=c.fieldTransforms;return new TG(new Zi(h),g,y)}class vE extends vm{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vE}}function eF(n,e,t){return new MT({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class XR extends vm{_toFieldTransform(e){return new em(e.path,new $f)}isEqual(e){return e instanceof XR}}class AG extends vm{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=eF(this,e,!0),r=this.ac.map(s=>wm(s,t)),i=new aa(r);return new em(e.path,i)}isEqual(e){return this===e}}class MG extends vm{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=eF(this,e,!0),r=this.ac.map(s=>wm(s,t)),i=new rc(r);return new em(e.path,i)}isEqual(e){return this===e}}class xG extends vm{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new zf(e.M,kD(e.M,this.cc));return new em(e.path,t)}isEqual(e){return this===e}}function ek(n,e,t,r){const i=n.uc(1,e,t);nk("Data must be an object, but it was:",i,r);const s=[],c=Zi.empty();Wd(r,(g,y)=>{const E=RT(e,g,t);y=(0,P.m9)(y);const T=i.nc(E);if(y instanceof vE)s.push(E);else{const x=wm(y,T);null!=x&&(s.push(E),c.set(E,x))}});const h=new hu(s);return new J1(c,h,i.fieldTransforms)}function tk(n,e,t,r,i,s){const c=n.uc(1,e,t),h=[rk(e,r,t)],g=[i];if(s.length%2!=0)throw new De(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)h.push(rk(e,s[x])),g.push(s[x+1]);const y=[],E=Zi.empty();for(let x=h.length-1;x>=0;--x)if(!iF(y,h[x])){const N=h[x];let U=g[x];U=(0,P.m9)(U);const K=c.nc(N);if(U instanceof vE)y.push(N);else{const le=wm(U,K);null!=le&&(y.push(N),E.set(N,le))}}const T=new hu(y);return new J1(E,T,c.fieldTransforms)}function tF(n,e,t,r=!1){return wm(t,n.uc(r?4:3,e))}function wm(n,e){if(rF(n=(0,P.m9)(n)))return nk("Unsupported field value:",e,n),nF(n,e);if(n instanceof vm)return function(t,r){if(!X1(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const c of t){let h=wm(c,r.sc(s));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return kD(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=_r.fromDate(t);return{timestampValue:hv(r.M,i)}}if(t instanceof _r){const i=new _r(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:hv(r.M,i)}}if(t instanceof AT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Du)return{bytesValue:VC(r.M,t._byteString)};if(t instanceof hr){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ic(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Qf(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${TT(t)}`)}(n,e)}function nF(n,e){const t={};return gC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wd(n,(r,i)=>{const s=wm(i,e.Za(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function rF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof _r||n instanceof AT||n instanceof Du||n instanceof hr||n instanceof vm)}function nk(n,e,t){if(!rF(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=TT(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function rk(n,e,t){if((e=(0,P.m9)(e))instanceof fh)return e._internalPath;if("string"==typeof e)return RT(n,e);throw kT("Field path arguments must be of type string or ",n,!1,void 0,t)}const RG=new RegExp("[~\\*/\\[\\]]");function RT(n,e,t){if(e.search(RG)>=0)throw kT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fh(...e.split("."))._internalPath}catch(r){throw kT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kT(n,e,t,r,i){const s=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(s||c)&&(g+=" (found",s&&(g+=` in field ${r}`),c&&(g+=` in document ${i}`),g+=")"),new De(ue.INVALID_ARGUMENT,h+n+g)}function iF(n,e){return n.some(t=>t.isEqual(e))}class bE{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new hr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new kG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(OT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class kG extends bE{data(){return super.data()}}function OT(n,e){return"string"==typeof e?RT(n,e):e instanceof fh?e._internalPath:e._delegate._internalPath}class Cm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ph extends bE{constructor(e,t,r,i,s,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(OT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class wE extends ph{data(e={}){return super.data(e)}}class lp{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Cm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new wE(this._firestore,this._userDataWriter,r.key,r,new Cm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new De(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new wE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Cm(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new wE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Cm(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,y=-1;return 0!==c.type&&(g=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),y=s.indexOf(c.doc.key)),{type:OG(c.type),doc:h,oldIndex:g,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function OG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Je()}}function sF(n,e){return n instanceof ph&&e instanceof ph?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof lp&&e instanceof lp&&n._firestore===e._firestore&&Y1(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function oF(n){if(Zg(n)&&0===n.explicitOrderBy.length)throw new De(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class CE{}function cp(n,...e){for(const t of e)n=t._apply(n);return n}class NG extends CE{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=bm(e.firestore),r=function(i,s,c,h,g,y,E){let T;if(g.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new De(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){hF(E,y);const N=[];for(const U of E)N.push(dF(h,i,U));T={arrayValue:{values:N}}}else T=dF(h,i,E)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||hF(E,y),T=tF(c,"where",E,"in"===y||"not-in"===y);const x=Fi.create(g,y,T);return function(N,U){if(U.S()){const le=DC(N);if(null!==le&&!le.isEqual(U.field))throw new De(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${le.toString()}' and '${U.field.toString()}'`);const Pe=SC(N);null!==Pe&&fF(0,U.field,Pe)}const K=function(le,Pe){for(const Me of le.filters)if(Pe.indexOf(Me.op)>=0)return Me.op;return null}(N,function(le){switch(le){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(U.op));if(null!==K)throw new De(ue.INVALID_ARGUMENT,K===U.op?`Invalid query. You cannot use more than one '${U.op.toString()}' filter.`:`Invalid query. You cannot use '${U.op.toString()}' filters with '${K.toString()}' filters.`)}(i,x),x}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new Ds(e.firestore,e.converter,function(i,s){const c=i.filters.concat([s]);return new mu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class FG extends CE{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new De(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new De(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new eh(i,s);return function(h,g){if(null===SC(h)){const y=DC(h);null!==y&&fF(0,y,g.field)}}(r,c),c}(e._query,this.hc,this.dc);return new Ds(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new mu(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class aF extends CE{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new Ds(e.firestore,e.converter,MD(e._query,this._c,this.wc))}}class lF extends CE{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=uF(e,this.type,this.mc,this.gc);return new Ds(e.firestore,e.converter,(i=t,new mu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class cF extends CE{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=uF(e,this.type,this.mc,this.gc);return new Ds(e.firestore,e.converter,(i=t,new mu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function uF(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof bE)return function(i,s,c,h,g){if(!h)throw new De(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const E of Gf(i))if(E.field.isKeyField())y.push(gu(s,h.key));else{const T=h.data.field(E.field);if(mC(T))throw new De(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const x=E.field.canonicalString();throw new De(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}y.push(T)}return new Xd(y,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=bm(n.firestore);return function(s,c,h,g,y,E){const T=s.explicitOrderBy;if(y.length>T.length)throw new De(ue.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let N=0;N<y.length;N++){const U=y[N];if(T[N].field.isKeyField()){if("string"!=typeof U)throw new De(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof U}`);if(!TC(s)&&-1!==U.indexOf("/"))throw new De(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${U}' contains a slash.`);const K=s.path.child(rn.fromString(U));if(!Ne.isDocumentKey(K))throw new De(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${K}' is not because it contains an odd number of segments.`);const le=new Ne(K);x.push(gu(c,le))}else{const K=tF(h,g,U);x.push(K)}}return new Xd(x,E)}(n._query,n.firestore._databaseId,i,e,t,r)}}function dF(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new De(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TC(e)&&-1!==t.indexOf("/"))throw new De(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(rn.fromString(t));if(!Ne.isDocumentKey(r))throw new De(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gu(n,new Ne(r))}if(t instanceof hr)return gu(n,t._key);throw new De(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${TT(t)}.`)}function hF(n,e){if(!Array.isArray(n)||0===n.length)throw new De(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new De(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function fF(n,e,t){if(!t.isEqual(e))throw new De(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class ik{convertValue(e,t="none"){switch(Kd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Je()}}convertObject(e,t){const r={};return Wd(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new AT(yr(e.latitude),yr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=yD(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($g(e));default:return null}}convertTimestamp(e){const t=fu(e);return new _r(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=rn.fromString(e);Ct(vx(r));const i=new Ya(r.get(1),r.get(3)),s=new Ne(r.popFirst(5));return i.isEqual(t)||Ur(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function NT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class $G extends ik{constructor(e){super(),this.firestore=e}convertBytes(e){return new Du(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hr(this.firestore,null,t)}}class pF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=bm(e)}set(e,t,r){this._verifyNotCommitted();const i=up(e,this._firestore),s=NT(i.converter,t,r),c=xT(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,ur.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=up(e,this._firestore);let c;return c="string"==typeof(t=(0,P.m9)(t))||t instanceof fh?tk(this._dataReader,"WriteBatch.update",s._key,t,r,i):ek(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(c.toMutation(s._key,ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=up(e,this._firestore);return this._mutations=this._mutations.concat(new Wf(t._key,ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new De(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function up(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new De(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Em extends ik{constructor(e){super(),this.firestore=e}convertBytes(e){return new Du(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hr(this.firestore,null,t)}}function gF(n,e,t){n=dn(n,hr);const r=dn(n.firestore,vr),i=NT(n.converter,e,t);return Ov(r,[xT(bm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ur.none())])}function mF(n,e,t,...r){n=dn(n,hr);const i=dn(n.firestore,vr),s=bm(i);let c;return c="string"==typeof(e=(0,P.m9)(e))||e instanceof fh?tk(s,"updateDoc",n._key,e,t,r):ek(s,"updateDoc",n._key,e),Ov(i,[c.toMutation(n._key,ur.exists(!0))])}function _F(n,...e){var t,r,i;n=(0,P.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||JR(e[c])||(s=e[c],c++);const h={includeMetadataChanges:s.includeMetadataChanges};if(JR(e[c])){const T=e[c];e[c]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[c+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[c+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let g,y,E;if(n instanceof hr)y=dn(n.firestore,vr),E=_u(n._key.path),g={next:T=>{e[c]&&e[c](sk(y,n,T))},error:e[c+1],complete:e[c+2]};else{const T=dn(n,Ds);y=dn(T.firestore,vr),E=T._query;const x=new Em(y);g={next:N=>{e[c]&&e[c](new lp(y,x,T,N))},error:e[c+1],complete:e[c+2]},oF(n._query)}return function(T,x,N,U){const K=new ST(U),le=new mR(x,K,N);return T.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return dR(yield kv(T),le)})),()=>{K.pa(),T.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return fR(yield kv(T),le)}))}}(bi(y),E,h,g)}function Ov(n,e){return function(t,r){const i=new ri;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function Lj(n,e,t){return wR.apply(this,arguments)}(yield KR(t),r,i)})),i.promise}(bi(n),e)}function sk(n,e,t){const r=t.docs.get(e._key),i=new Em(n);return new ph(n,i,e._key,r,new Cm(t.hasPendingWrites,t.fromCache),e.converter)}class e$ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=bm(e)}get(e){const t=up(e,this._firestore),r=new $G(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Je();const s=i[0];if(s.isFoundDocument())return new bE(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new bE(this._firestore,r,t._key,null,t.converter);throw Je()})}set(e,t,r){const i=up(e,this._firestore),s=NT(i.converter,t,r),c=xT(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const s=up(e,this._firestore);let c;return c="string"==typeof(t=(0,P.m9)(t))||t instanceof fh?tk(this._dataReader,"Transaction.update",s._key,t,r,i):ek(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,c),this}delete(e){const t=up(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=up(e,this._firestore),r=new Em(this._firestore);return super.get(e).then(i=>new ph(this._firestore,r,t._key,i._document,new Cm(!1,!1),t.converter))}}function ok(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new De("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function vF(){if("undefined"==typeof Uint8Array)throw new De("unimplemented","Uint8Arrays are not available in this environment.")}function bF(){if(!function ZM(){return"undefined"!=typeof atob}())throw new De("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){zd=Oi.SDK_VERSION,(0,Oi._registerComponent)(new ia.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),s=new vr(i,new $M(t.getProvider("auth-internal")),new WM(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),(0,Oi.registerVersion)(fD,"3.4.7",n),(0,Oi.registerVersion)(fD,"3.4.7","esm2017")}();class EE{constructor(e){this._delegate=e}static fromBase64String(e){return bF(),new EE(Du.fromBase64String(e))}static fromUint8Array(e){return vF(),new EE(Du.fromUint8Array(e))}toBase64(){return bF(),this._delegate.toBase64()}toUint8Array(){return vF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ak(n){return function c$(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class u${enableIndexedDbPersistence(e,t){return function _G(n,e){Q1(n=dn(n,vr));const t=bi(n),r=n._freezeSettings(),i=new jR;return Z1(t,i,new k1(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function yG(n){Q1(n=dn(n,vr));const e=bi(n),t=n._freezeSettings(),r=new jR;return Z1(e,r,new Xj(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function vG(n){if(n._initialized&&!n._terminated)throw new De(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ri;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(t=(0,pe.Z)(function*(r){if(!ca.vt())return Promise.resolve();const i=r+"main";yield ca.delete(i)}),function(r){return t.apply(this,arguments)})(fE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class wF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ya||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ky("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function hG(n,e,t,r={}){var i;const s=(n=dn(n,yE))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Ky("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=gi.MOCK_USER;else{c=(0,P.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new De(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new gi(g)}n._authCredentials=new GM(new Pf(c,h))}}(this._delegate,e,t,r)}enableNetwork(){return function wG(n){return function iG(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield F1(n),t=yield L1(n);return e.setNetworkEnabled(!0),function(r){const i=Ve(r);return i.lu.delete(0),mE(i)}(t)}))}(bi(n=dn(n,vr)))}(this._delegate)}disableNetwork(){return function CG(n){return function sG(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield F1(n),t=yield L1(n);return e.setNetworkEnabled(!1),(r=(0,pe.Z)(function*(i){const s=Ve(i);s.lu.add(0),yield Dv(s),s._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(bi(n=dn(n,vr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,H1("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function bG(n){return function(e){const t=new ri;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function Hj(n,e){return TR.apply(this,arguments)}(yield KR(e),t)})),t.promise}(bi(n=dn(n,vr)))}(this._delegate)}onSnapshotsInSync(e){return function XG(n,e){return function lG(n,e){const t=new ST(e);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield kv(n),i=t,Ve(r).Tu.add(i),void i.next();var r,i})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield kv(n),i=t,void Ve(r).Tu.delete(i);var r,i}))}}(bi(n=dn(n,vr)),JR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new De("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Nv(this,q1(this._delegate,e))}catch(t){throw Gs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ja(this,IT(this._delegate,e))}catch(t){throw Gs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new $s(this,function fG(n,e){if(n=dn(n,yE),QR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new De(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ds(n,null,(t=e,new mu(rn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Gs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function t$(n,e){return function cG(n,e){const t=new ri;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const r=yield(i=n,DT(i).then(s=>s.datastore));var i;new nG(n.asyncQueue,r,e,t).run()})),t.promise}(bi(n=dn(n,vr)),t=>e(new e$(n,t)))}(this._delegate,t=>e(new CF(this,t)))}batch(){return bi(this._delegate),new EF(new pF(this._delegate,e=>Ov(this._delegate,e)))}loadBundle(e){return function EG(n,e){const t=bi(n=dn(n,vr)),r=new gG;return function uG(n,e,t,r){const i=function(s,c){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,g=function(g,y){if(g instanceof Uint8Array)return O1(g,y);if(g instanceof ArrayBuffer)return O1(new Uint8Array(g),y);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new eG(g,c);var g}(t,gE(e));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function Jj(n,e,t){const r=Ve(n);var i;(i=(0,pe.Z)(function*(s,c,h){try{const g=yield c.getMetadata();if(yield function(x,N){const U=Ve(x),K=ii(N.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",le=>U.ds.getBundleMetadata(le,N.id)).then(le=>!!le&&le.createTime.compareTo(K)>=0)}(s.localStore,g))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(x=g).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);h._updateProgress(C1(g));const y=new Rj(g,s.localStore,c.M);let E=yield c.fa();for(;E;){const x=yield y.Nu(E);x&&h._updateProgress(x),E=yield c.fa()}const T=yield y.complete();return yield hh(s,T.Ou,void 0),yield function(x,N){const U=Ve(x);return U.persistence.runTransaction("Save bundle","readwrite",K=>U.ds.saveBundleMetadata(K,N))}(s.localStore,g),h._completeWith(T.progress),Promise.resolve(T.Mu)}catch(g){return Ky("SyncEngine",`Loading bundle failed with ${g}`),h._failWith(g),Promise.resolve(new Set)}var x}),function(s,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield KR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function SG(n,e){return function dG(n,e){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(t,r){const i=Ve(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.ds.getNamedQuery(s,r))}(yield YR(n),e)}))}(bi(n=dn(n,vr)),e).then(t=>t?new Ds(n,null,t.query):null)}(this._delegate,e).then(t=>t?new $s(this,t):null)}}class PT extends ik{constructor(e){super(),this.firestore=e}convertBytes(e){return new EE(new Du(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ja.forKey(t,this.firestore,null)}}class CF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new PT(e)}get(e){const t=Dm(e);return this._delegate.get(t).then(r=>new SE(this._firestore,new ph(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Dm(e);return r?(ok("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Dm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Dm(e);return this._delegate.delete(t),this}}class EF{constructor(e){this._delegate=e}set(e,t,r){const i=Dm(e);return r?(ok("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Dm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Dm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Sm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new wE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new DE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Sm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Sm(e,new PT(e),t),i.set(t,s)),s}}Sm.INSTANCES=new WeakMap;class Ja{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new PT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new De("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ja(t,new hr(t._delegate,r,new Ne(e)))}static forKey(e,t,r){return new Ja(t,new hr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Nv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Nv(this.firestore,q1(this._delegate,e))}catch(t){throw Gs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof hr&&W1(this._delegate,e)}set(e,t){t=ok("DocumentReference.set",t);try{return t?gF(this._delegate,e,t):gF(this._delegate,e)}catch(r){throw Gs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?mF(this._delegate,e):mF(this._delegate,e,t,...r)}catch(i){throw Gs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function QG(n){return Ov(dn(n.firestore,vr),[new Wf(n._key,ur.none())])}(this._delegate)}onSnapshot(...e){const t=SF(e),r=DF(e,i=>new SE(this.firestore,new ph(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return _F(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function qG(n){n=dn(n,hr);const e=dn(n.firestore,vr),t=bi(e),r=new Em(e);return function oG(n,e){const t=new ri;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(i,s,c){try{const h=yield function(g,y){const E=Ve(g);return E.persistence.runTransaction("read document","readonly",T=>E.ai.Bs(T,y))}(i,s);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new De(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const g=Av(h,`Failed to get document '${s} from cache`);c.reject(g)}}),function(i,s,c){return r.apply(this,arguments)})(yield YR(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ph(e,r,n._key,i,new Cm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function WG(n){n=dn(n,hr);const e=dn(n.firestore,vr);return V1(bi(e),n._key,{source:"server"}).then(t=>sk(e,n,t))}(this._delegate):function zG(n){n=dn(n,hr);const e=dn(n.firestore,vr);return V1(bi(e),n._key).then(t=>sk(e,n,t))}(this._delegate),t.then(r=>new SE(this.firestore,new ph(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ja(this.firestore,this._delegate.withConverter(e?Sm.getInstance(this.firestore,e):null))}}function Gs(n,e,t){return n.message=n.message.replace(e,t),n}function SF(n){for(const e of n)if("object"==typeof e&&!ak(e))return e;return{}}function DF(n,e){var t,r;let i;return i=ak(n[0])?n[0]:ak(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class SE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ja(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return sF(this._delegate,e._delegate)}}class DE extends SE{data(e){const t=this._delegate.data(e);return function mD(n,e){n||Je()}(void 0!==t),t}}class $s{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new PT(e)}where(e,t,r){try{return new $s(this.firestore,cp(this._delegate,function PG(n,e,t){const r=e,i=OT("where",n);return new NG(i,r,t)}(e,t,r)))}catch(i){throw Gs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new $s(this.firestore,cp(this._delegate,function LG(n,e="asc"){const t=e,r=OT("orderBy",n);return new FG(r,t)}(e,t)))}catch(r){throw Gs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new $s(this.firestore,cp(this._delegate,function VG(n){return $1("limit",n),new aF("limit",n,"F")}(e)))}catch(t){throw Gs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new $s(this.firestore,cp(this._delegate,function BG(n){return $1("limitToLast",n),new aF("limitToLast",n,"L")}(e)))}catch(t){throw Gs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new $s(this.firestore,cp(this._delegate,function UG(...n){return new lF("startAt",n,!0)}(...e)))}catch(t){throw Gs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new $s(this.firestore,cp(this._delegate,function HG(...n){return new lF("startAfter",n,!1)}(...e)))}catch(t){throw Gs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new $s(this.firestore,cp(this._delegate,function jG(...n){return new cF("endBefore",n,!1)}(...e)))}catch(t){throw Gs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new $s(this.firestore,cp(this._delegate,function GG(...n){return new cF("endAt",n,!0)}(...e)))}catch(t){throw Gs(t,"endAt()","Query.endAt()")}}isEqual(e){return Y1(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function KG(n){n=dn(n,Ds);const e=dn(n.firestore,vr),t=bi(e),r=new Em(e);return function aG(n,e){const t=new ri;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(i,s,c){try{const h=yield f(i,s,!0),g=new D1(s,h.hi),y=g.Gu(h.documents),E=g.applyChanges(y,!1);c.resolve(E.snapshot)}catch(h){const g=Av(h,`Failed to execute query '${s} against cache`);c.reject(g)}}),function(i,s,c){return r.apply(this,arguments)})(yield YR(n),e,t);var r})),t.promise}(t,n._query).then(i=>new lp(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function ZG(n){n=dn(n,Ds);const e=dn(n.firestore,vr),t=bi(e),r=new Em(e);return B1(t,n._query,{source:"server"}).then(i=>new lp(e,r,n,i))}(this._delegate):function YG(n){n=dn(n,Ds);const e=dn(n.firestore,vr),t=bi(e),r=new Em(e);return oF(n._query),B1(t,n._query).then(i=>new lp(e,r,n,i))}(this._delegate),t.then(r=>new lk(this.firestore,new lp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=SF(e),r=DF(e,i=>new lk(this.firestore,new lp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return _F(this._delegate,t,r)}withConverter(e){return new $s(this.firestore,this._delegate.withConverter(e?Sm.getInstance(this.firestore,e):null))}}class h${constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new DE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class lk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new $s(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new DE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new h$(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new DE(this._firestore,r))})}isEqual(e){return sF(this._delegate,e._delegate)}}class Nv extends $s{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ja(this.firestore,e):null}doc(e){try{return new Ja(this.firestore,void 0===e?IT(this._delegate):IT(this._delegate,e))}catch(t){throw Gs(t,"doc()","CollectionReference.doc()")}}add(e){return function JG(n,e){const t=dn(n.firestore,vr),r=IT(n),i=NT(n.converter,e);return Ov(t,[xT(bm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ur.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ja(this.firestore,t))}isEqual(e){return W1(this._delegate,e._delegate)}withConverter(e){return new Nv(this.firestore,this._delegate.withConverter(e?Sm.getInstance(this.firestore,e):null))}}function Dm(n){return dn(n,hr)}class ck{constructor(...e){this._delegate=new fh(...e)}static documentId(){return new ck(_i.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof fh&&this._delegate._internalPath.isEqual(e._internalPath)}}class Tm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function r$(){return new XR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Tm(e)}static delete(){const e=function n$(){return new vE("deleteField")}();return e._methodName="FieldValue.delete",new Tm(e)}static arrayUnion(...e){const t=function i$(...n){return new AG("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Tm(t)}static arrayRemove(...e){const t=function s$(...n){return new MG("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Tm(t)}static increment(e){const t=function o$(n){return new xG("increment",n)}(e);return t._methodName="FieldValue.increment",new Tm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const f$={Firestore:wF,GeoPoint:AT,Timestamp:_r,Blob:EE,Transaction:CF,WriteBatch:EF,DocumentReference:Ja,DocumentSnapshot:SE,Query:$s,QueryDocumentSnapshot:DE,QuerySnapshot:lk,CollectionReference:Nv,FieldPath:ck,FieldValue:Tm,setLogLevel:function d$(n){!function pD(n){tc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function g$(n){(function p$(n,e){n.INTERNAL.registerComponent(new ia.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},f$)))})(n,(e,t)=>new wF(e,t,new u$)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(SS.Z);var dp=B(6787),TE=B(2102),m$=B(341),_$=B(5283);class y$ extends ot.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new v$(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,s=r.length;let c;if(this.closed)throw new Lh.N;if(this.isStopped||this.hasError?c=hi.w.EMPTY:(this.observers.push(e),c=new _$.W(this,e)),i&&e.add(e=new TE.ht(e,i)),t)for(let h=0;h<s&&!e.closed;h++)e.next(r[h]);else for(let h=0;h<s&&!e.closed;h++)e.next(r[h].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),c}_getNow(){return(this.scheduler||m$.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,i=this._events,s=i.length;let c=0;for(;c<s&&!(e-i[c].time<r);)c++;return s>t&&(c=Math.max(c,s-t)),c>0&&i.splice(0,c),i}}class v${constructor(e,t){this.time=e,this.value=t}}function uk(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},i=>i.lift(function b$({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let i,c,s=0,h=!1,g=!1;return function(E){let T;s++,!i||h?(h=!1,i=new y$(n,e,r),T=i.subscribe(this),c=E.subscribe({next(x){i.next(x)},error(x){h=!0,i.error(x)},complete(){g=!0,c=void 0,i.complete()}}),g&&(c=void 0)):T=i.subscribe(this),this.add(()=>{s--,T.unsubscribe(),T=void 0,c&&!g&&t&&0===s&&(c.unsubscribe(),c=void 0,i=void 0)})}}(r))}function TF(n,e){return e?zn(()=>n,e):zn(()=>n)}var dk=B(3334);B(5867);const AF=new Map,D$={activated:!1,tokenObservers:[]},T$={initialized:!1,enabled:!1};function Qi(n){return AF.get(n)||D$}function uc(n,e){AF.set(n,e)}function LT(){return T$}class R${constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,pe.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function k$(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const zs=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function xF(n){if(!Qi(n).activated)throw zs.create("use-before-activation",{appName:n.name})}function gk(n,e){return mk.apply(this,arguments)}function mk(){return mk=(0,pe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const T=yield i.getHeartbeatsHeader();T&&(r["X-Firebase-Client"]=T)}const s={method:"POST",body:JSON.stringify(e),headers:r};let c,h;try{c=yield fetch(n,s)}catch(T){throw zs.create("fetch-network-error",{originalErrorMessage:T.message})}if(200!==c.status)throw zs.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(T){throw zs.create("fetch-parse-error",{originalErrorMessage:T.message})}const g=h.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw zs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(g[1]),E=Date.now();return{token:h.attestationToken,expireTimeMillis:E+y,issuedAtTimeMillis:E}}),mk.apply(this,arguments)}function L$(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const IE="firebase-app-check-store";let UT=null;function kF(){return UT||(UT=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(zs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(IE,{keyPath:"compositeKey"})}}catch(t){e(zs.create("storage-open",{originalErrorMessage:t.message}))}}),UT)}function _k(){return _k=(0,pe.Z)(function*(n,e){const r=(yield kF()).transaction(IE,"readwrite"),s=r.objectStore(IE).put({compositeKey:n,value:e});return new Promise((c,h)=>{s.onsuccess=g=>{c()},r.onerror=g=>{var y;h(zs.create("storage-set",{originalErrorMessage:null===(y=g.target.error)||void 0===y?void 0:y.message}))}})}),_k.apply(this,arguments)}const AE=new Hs.Yd("@firebase/app-check");function FF(n,e){return(0,P.hl)()?function H$(n,e){return function OF(n,e){return _k.apply(this,arguments)}(function PF(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{AE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function LF(){return LT().enabled}function VF(){return wk.apply(this,arguments)}function wk(){return wk=(0,pe.Z)(function*(){const n=LT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),wk.apply(this,arguments)}const W$={error:"UNKNOWN_ERROR"};function Y$(n){return P.US.encodeString(JSON.stringify(n),!1)}function HT(n){return Ck.apply(this,arguments)}function Ck(){return Ck=(0,pe.Z)(function*(n,e=!1){const t=n.app;xF(t);const r=Qi(t);let s,i=r.token;if(!i){const g=yield r.cachedTokenPromise;g&&jT(g)&&(i=g)}if(!e&&i&&jT(i))return{token:i.token};let h,c=!1;if(LF()){r.exchangeTokenPromise||(r.exchangeTokenPromise=gk(L$(t,yield VF()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0);const g=yield r.exchangeTokenPromise;return yield FF(t,g),uc(t,Object.assign(Object.assign({},r),{token:g})),{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(g=>(r.exchangeTokenPromise=void 0,g)),c=!0),i=yield r.exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?AE.warn(g.message):AE.error(g),s=g}return i?(h={token:i.token},uc(t,Object.assign(Object.assign({},r),{token:i})),yield FF(t,i)):h=Z$(s),c&&UF(t,h),h}),Ck.apply(this,arguments)}function Sk(n,e){const t=Qi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),uc(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function BF(n){const{app:e}=n,t=Qi(e);let r=t.tokenRefresher;r||(r=function K$(n){const{app:e}=n;return new R$((0,pe.Z)(function*(){let r;if(r=Qi(e).token?yield HT(n,!0):yield HT(n),r.error)throw r.error}),()=>!0,()=>{const t=Qi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),uc(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function UF(n,e){const t=Qi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function jT(n){return n.expireTimeMillis-Date.now()>0}function Z$(n){return{token:Y$(W$),error:n}}class Q${constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Qi(this.app);for(const t of e)Sk(this.app,t.next);return Promise.resolve()}}const YF="app-check-internal";!function d3(){(0,Oi._registerComponent)(new ia.wA("app-check",n=>function J$(n,e){return new Q$(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(YF).initialize()})),(0,Oi._registerComponent)(new ia.wA(YF,n=>function X$(n){return{getToken:e=>HT(n,e),addTokenListener:e=>function Ek(n,e,t,r){const{app:i}=n,s=Qi(i),c={next:t,error:r,type:e};if(uc(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,c]})),s.token&&jT(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),BF(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>BF(n))}(n,"INTERNAL",e),removeTokenListener:e=>Sk(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Oi.registerVersion)("@firebase/app-check","0.5.5")}();class ME{constructor(){return(0,un.vb)("app-check")}}"undefined"!=typeof window&&window;var $T=B(127);const Mk=new l.OlP("angularfire2.auth.use-emulator"),xk=new l.OlP("angularfire2.auth.settings"),Rk=new l.OlP("angularfire2.auth.tenant-id"),kk=new l.OlP("angularfire2.auth.langugage-code"),Ok=new l.OlP("angularfire2.auth.use-device-language"),Nk=new l.OlP("angularfire.auth.persistence"),Pk=(n,e,t,r,i,s,c,h)=>(0,Vr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,s&&g.useDeviceLanguage(),c)for(const[y,E]of Object.entries(c))g.settings[y]=E;return h&&g.setPersistence(h),g},[t,r,i,s,c,h]);let Pv=(()=>{class n{constructor(t,r,i,s,c,h,g,y,E,T,x,N){const U=new ot.xQ,K=(0,Le.of)(void 0).pipe((0,TE.QV)(c.outsideAngular),zn(()=>s.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,1254)))),(0,ze.U)(()=>(0,Vr.on)(t,s,r)),(0,ze.U)(le=>Pk(le,s,h,y,E,T,g,x)),uk({bufferSize:1,refCount:!1}));if(No(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Le.of)(null);else{K.pipe(Fs()).subscribe();const Pe=K.pipe(zn(ke=>ke.getRedirectResult().then(mt=>mt,()=>null)),un.iC,uk({bufferSize:1,refCount:!1})),Me=K.pipe(zn(ke=>new mn.y(mt=>({unsubscribe:s.runOutsideAngular(()=>ke.onAuthStateChanged(ct=>mt.next(ct),ct=>mt.error(ct),()=>mt.complete()))})))),Be=K.pipe(zn(ke=>new mn.y(mt=>({unsubscribe:s.runOutsideAngular(()=>ke.onIdTokenChanged(ct=>mt.next(ct),ct=>mt.error(ct),()=>mt.complete()))}))));this.authState=Pe.pipe(TF(Me),(0,dk.R)(c.outsideAngular),(0,TE.QV)(c.insideAngular)),this.user=Pe.pipe(TF(Be),(0,dk.R)(c.outsideAngular),(0,TE.QV)(c.insideAngular)),this.idToken=this.user.pipe(zn(ke=>ke?(0,Sn.D)(ke.getIdToken()):(0,Le.of)(null))),this.idTokenResult=this.user.pipe(zn(ke=>ke?(0,Sn.D)(ke.getIdTokenResult()):(0,Le.of)(null))),this.credential=(0,dp.T)(Pe,U,this.authState.pipe(qn(ke=>!ke))).pipe((0,ze.U)(ke=>(null==ke?void 0:ke.user)?ke:null),(0,dk.R)(c.outsideAngular),(0,TE.QV)(c.insideAngular))}return(0,Vr.pX)(this,K,s,{spy:{apply:(le,Pe,Me)=>{(le.startsWith("signIn")||le.startsWith("createUser"))&&Me.then(Be=>U.next(Be))}}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Vr.Dh),l.LFG(Vr.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(un.HU),l.LFG(Mk,8),l.LFG(xk,8),l.LFG(Rk,8),l.LFG(kk,8),l.LFG(Ok,8),l.LFG(Nk,8),l.LFG(ME,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_3=(()=>{class n{constructor(){$T.Z.registerVersion("angularfire",un.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Pv]}),n})();function ZF(n,e){return function y3(n,e=yf.z){return new mn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Fk(n,e){return ZF(n,e).pipe((0,ze.U)(t=>({payload:t,type:"query"})))}function zT(n,e){return Fk(n,e).pipe(lr(void 0),fw(),(0,ze.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const g=i.find(E=>E.doc.ref.isEqual(c.ref)),y=null==t?void 0:t.payload.docs.find(E=>E.ref.isEqual(c.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(c.metadata)||!g&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),s}))}function QF(n,e,t){return zT(n,t).pipe(Ps((r,i)=>function b3(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function w3(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Lk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Lk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Lk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),ay(),(0,ze.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Lk(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function JF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class XF{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=zT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ze.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(lr(void 0),fw(),qn(([r,i])=>i.length>0||!r),(0,ze.U)(([r,i])=>i),un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ps((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=JF(e);return QF(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return Fk(this.query,this.afs.schedulers.outsideAngular).pipe((0,ze.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),un.iC)}get(e){return(0,Sn.D)(this.query.get(e)).pipe(un.iC)}add(e){return this.ref.add(e)}doc(e){return new eL(this.ref.doc(e),this.afs)}}class eL{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=rL(r,t);return new XF(i,s,this.afs)}snapshotChanges(){return function v3(n,e){return ZF(n,e).pipe(lr(void 0),fw(),(0,ze.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ze.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Sn.D)(this.ref.get(e)).pipe(un.iC)}}class C3{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?zT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ze.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),qn(t=>t.length>0),un.iC):zT(this.query,this.afs.schedulers.outsideAngular).pipe(un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ps((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=JF(e);return QF(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return Fk(this.query,this.afs.schedulers.outsideAngular).pipe((0,ze.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),un.iC)}get(e){return(0,Sn.D)(this.query.get(e)).pipe(un.iC)}}const tL=new l.OlP("angularfire2.enableFirestorePersistence"),nL=new l.OlP("angularfire2.firestore.persistenceSettings"),E3=new l.OlP("angularfire2.firestore.settings"),S3=new l.OlP("angularfire2.firestore.use-emulator");function rL(n,e=(t=>t)){return{query:e(n),ref:n}}let Vk=(()=>{class n{constructor(t,r,i,s,c,h,g,y,E,T,x,N,U,K,le,Pe,Me){this.schedulers=g;const Be=(0,Vr.on)(t,h,r),ke=E;T&&Pk(Be,h,x,U,K,le,N,Pe),[this.firestore,this.persistenceEnabled$]=(0,Vr.cc)(`${Be.name}.firestore`,"AngularFirestore",Be.name,()=>{const mt=h.runOutsideAngular(()=>Be.firestore());if(s&&mt.settings(s),ke&&mt.useEmulator(...ke),i&&!No(c)){const ct=()=>{try{return(0,Sn.D)(mt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Rn){return"undefined"!=typeof console&&console.warn(Rn),(0,Le.of)(!1)}};return[mt,h.runOutsideAngular(ct)]}return[mt,(0,Le.of)(!1)]},[s,ke,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:c}=rL(i,r),h=this.schedulers.ngZone.run(()=>s);return new XF(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),s=this.firestore.collectionGroup(t);return new C3(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new eL(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Vr.Dh),l.LFG(Vr.xv,8),l.LFG(tL,8),l.LFG(E3,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(un.HU),l.LFG(nL,8),l.LFG(S3,8),l.LFG(Pv,8),l.LFG(Mk,8),l.LFG(xk,8),l.LFG(Rk,8),l.LFG(kk,8),l.LFG(Ok,8),l.LFG(Nk,8),l.LFG(ME,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),D3=(()=>{class n{constructor(){$T.Z.registerVersion("angularfire",un.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:tL,useValue:!0},{provide:nL,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Vk]}),n})();function Yn(n){return null!=n&&"false"!=`${n}`}function qs(n,e=0){return function T3(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function qT(n){return Array.isArray(n)?n:[n]}function wi(n){return null==n?"":"string"==typeof n?n:`${n}px`}function gh(n){return n instanceof l.SBq?n.nativeElement:n}var I3=B(7043);function xE(n,e,t,r){return(0,I3.m)(t)&&(r=t,t=void 0),r?xE(n,e,t).pipe((0,ze.U)(i=>(0,kc.k)(i)?r(...i):r(i))):new mn.y(i=>{iL(n,e,function s(c){i.next(arguments.length>1?Array.prototype.slice.call(arguments):c)},i,t)})}function iL(n,e,t,r,i){let s;if(function x3(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const c=n;n.addEventListener(e,t,i),s=()=>c.removeEventListener(e,t,i)}else if(function M3(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const c=n;n.on(e,t),s=()=>c.off(e,t)}else if(function A3(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const c=n;n.addListener(e,t),s=()=>c.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let c=0,h=n.length;c<h;c++)iL(n[c],e,t,r,i)}r.add(s)}var R3=B(6686),O3=B(2268);new class N3 extends O3.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let r,i=-1,s=t.length;e=e||t.shift();do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this.active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class k3 extends R3.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,r=0){if(null!==r&&r>0||null===r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}});B(8139);class V3{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new B3(e,this.durationSelector))}}class B3 extends $n.Ds{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let t;try{const{durationSelector:i}=this;t=i(e)}catch(i){return this.destination.error(i)}const r=(0,$n.ft)(t,new $n.IY(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:e,hasValue:t,throttled:r}=this;r&&(this.remove(r),this.throttled=void 0,r.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var sL=B(4241);function H3(n){const{index:e,period:t,subscriber:r}=n;if(r.next(e),!r.closed){if(-1===t)return r.complete();n.index=e+1,this.schedule(n,t)}}function WT(n,e=yf.P){return function L3(n){return function(t){return t.lift(new V3(n))}}(()=>function U3(n=0,e,t){let r=-1;return(0,sL.k)(e)?r=Number(e)<1?1:Number(e):(0,jo.K)(e)&&(t=e),(0,jo.K)(t)||(t=yf.P),new mn.y(i=>{const s=(0,sL.k)(n)?n:+n-t.now();return t.schedule(H3,s,{index:0,period:r,subscriber:i})})}(n,e))}function Mr(n){return e=>e.lift(new j3(n))}class j3{constructor(e){this.notifier=e}call(e,t){const r=new G3(e),i=(0,$n.ft)(this.notifier,new $n.IY(r));return i&&!r.seenValue?(r.add(i),t.subscribe(r)):r}}class G3 extends $n.Ds{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let Uk;try{Uk="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){Uk=!1}let Fv,Tn=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function zi(n){return n===ao}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Uk)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.Lbi))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(l.Lbi))},token:n,providedIn:"root"}),n})(),RE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const oL=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function aL(){if(Fv)return Fv;if("object"!=typeof document||!document)return Fv=new Set(oL),Fv;let n=document.createElement("input");return Fv=new Set(oL.filter(e=>(n.setAttribute("type",e),n.type===e))),Fv}let kE,Im,Hk;function YT(n){return function $3(){if(null==kE&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>kE=!0}))}finally{kE=kE||!1}return kE}()?n:!!n.capture}function lL(){if(null==Im){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Im=!1,Im;if("scrollBehavior"in document.documentElement.style)Im=!0;else{const n=Element.prototype.scrollTo;Im=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Im}function cL(n){if(function z3(){if(null==Hk){const n="undefined"!=typeof document?document.head:null;Hk=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Hk}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Am(n){return n.composedPath?n.composedPath()[0]:n.target}function jk(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}const uL=new l.OlP("cdk-dir-doc",{providedIn:"root",factory:function W3(){return(0,l.f3M)(ne)}});let mh=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new l.vpe,t){const i=t.documentElement?t.documentElement.dir:null,s=(t.body?t.body.dir:null)||i;this.value="ltr"===s||"rtl"===s?s:"ltr"}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(uL,8))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(uL,8))},token:n,providedIn:"root"}),n})(),NE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function ZT(n){return n&&"function"==typeof n.connect}class dL{applyChanges(e,t,r,i,s){e.forEachOperation((c,h,g)=>{let y,E;if(null==c.previousIndex){const T=r(c,h,g);y=t.createEmbeddedView(T.templateRef,T.context,T.index),E=1}else null==g?(t.remove(h),E=3):(y=t.get(h),t.move(y,g),E=2);s&&s({context:null==y?void 0:y.context,operation:E,record:c})})}detach(){}}const Mm=new l.OlP("_ViewRepeater");let QT=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new ot.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new mn.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(WT(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Le.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(qn(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=gh(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>xE(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.R0b),l.LFG(Tn),l.LFG(ne,8))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(l.R0b),l.LFG(Tn),l.LFG(ne,8))},token:n,providedIn:"root"}),n})(),xm=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new ot.xQ,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(WT(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Tn),l.LFG(l.R0b),l.LFG(ne,8))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(Tn),l.LFG(l.R0b),l.LFG(ne,8))},token:n,providedIn:"root"}),n})(),$k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),zk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[NE,RE,$k],NE,$k]}),n})();class qk{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Wk extends qk{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class JT extends qk{constructor(e,t,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class oz extends qk{constructor(e){super(),this.element=e instanceof l.SBq?e.nativeElement:e}}class Yk{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Wk?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof JT?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof oz?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class az extends Yk{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=c=>{const h=c.element,g=this._document.createComment("dom-portal");h.parentNode.insertBefore(g,h),this.outletElement.appendChild(h),this._attachedPortal=c,super.setDisposeFn(()=>{g.parentNode&&g.parentNode.replaceChild(h,g)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let XT=(()=>{class n extends Yk{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new l.vpe,this.attachDomPortal=s=>{const c=s.element,h=this._document.createComment("dom-portal");s.setAttachedHost(this),c.parentNode.insertBefore(h,c),this._getRootNode().appendChild(c),this._attachedPortal=s,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(c,h)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),c=r.createComponent(s,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=t,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l._Vd),l.Y36(l.s_b),l.Y36(ne))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[l.qOj]}),n})(),mL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const bL=lL();class Ez{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=wi(-this._previousScrollPosition.left),e.style.top=wi(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",c=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),bL&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),bL&&(r.scrollBehavior=s,i.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class Sz{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class wL{enable(){}disable(){}attach(){}}function Xk(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function CL(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class Dz{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();Xk(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Tz=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new wL,this.close=c=>new Sz(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new Ez(this._viewportRuler,this._document),this.reposition=c=>new Dz(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(QT),l.LFG(xm),l.LFG(l.R0b),l.LFG(ne))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(QT),l.LFG(xm),l.LFG(l.R0b),l.LFG(ne))},token:n,providedIn:"root"}),n})();class eO{constructor(e){if(this.scrollStrategy=new wL,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class Iz{constructor(e,t,r,i,s){this.offsetX=r,this.offsetY=i,this.panelClass=s,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class Az{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let EL=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(ne))},token:n,providedIn:"root"}),n})(),Mz=(()=>{class n extends EL{constructor(t){super(t),this._keydownListener=r=>{const i=this._attachedOverlays;for(let s=i.length-1;s>-1;s--)if(i[s]._keydownEvents.observers.length>0){i[s]._keydownEvents.next(r);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(ne))},token:n,providedIn:"root"}),n})(),xz=(()=>{class n extends EL{constructor(t,r){super(t),this._platform=r,this._cursorStyleIsSet=!1,this._pointerDownListener=i=>{this._pointerDownEventTarget=Am(i)},this._clickListener=i=>{const s=Am(i),c="click"===i.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const h=this._attachedOverlays.slice();for(let g=h.length-1;g>-1;g--){const y=h[g];if(!(y._outsidePointerEvents.observers.length<1)&&y.hasAttached()){if(y.overlayElement.contains(s)||y.overlayElement.contains(c))break;y._outsidePointerEvents.next(i)}}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;r.addEventListener("pointerdown",this._pointerDownListener,!0),r.addEventListener("click",this._clickListener,!0),r.addEventListener("auxclick",this._clickListener,!0),r.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne),l.LFG(Tn))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(ne),l.LFG(Tn))},token:n,providedIn:"root"}),n})(),tO=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||jk()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].parentNode.removeChild(i[s])}const r=this._document.createElement("div");r.classList.add(t),jk()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne),l.LFG(Tn))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(ne),l.LFG(Tn))},token:n,providedIn:"root"}),n})();class Rz{constructor(e,t,r,i,s,c,h,g,y){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=c,this._document=h,this._location=g,this._outsideClickDispatcher=y,this._backdropElement=null,this._backdropClick=new ot.xQ,this._attachments=new ot.xQ,this._detachments=new ot.xQ,this._locationChanges=hi.w.EMPTY,this._backdropClickHandler=E=>this._backdropClick.next(E),this._keydownEvents=new ot.xQ,this._outsidePointerEvents=new ot.xQ,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(di(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=wi(this._config.width),e.height=wi(this._config.height),e.minWidth=wi(this._config.minWidth),e.minHeight=wi(this._config.minHeight),e.maxWidth=wi(this._config.maxWidth),e.maxHeight=wi(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(!e)return;let t;const r=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",r),this._disposeBackdrop(e)),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",r)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(r,500))}_toggleClasses(e,t,r){const i=e.classList;qT(t).forEach(s=>{s&&(r?i.add(s):i.remove(s))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Mr((0,dp.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.parentNode&&e.parentNode.removeChild(e),this._backdropElement===e&&(this._backdropElement=null))}}const SL="cdk-overlay-connected-position-bounding-box",kz=/([A-Za-z%]+)$/;class DL{constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ot.xQ,this._resizeSubscription=hi.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(SL),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=[];let s;for(let c of this._preferredPositions){let h=this._getOriginPoint(e,c),g=this._getOverlayPoint(h,t,c),y=this._getOverlayFit(g,t,r,c);if(y.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(c,h);this._canFitWithFlexibleDimensions(y,g,r)?i.push({position:c,origin:h,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(h,c)}):(!s||s.overlayFit.visibleArea<y.visibleArea)&&(s={overlayFit:y,overlayPoint:g,originPoint:h,position:c,overlayRect:t})}if(i.length){let c=null,h=-1;for(const g of i){const y=g.boundingBoxRect.width*g.boundingBoxRect.height*(g.position.weight||1);y>h&&(h=y,c=g)}return this._isPushed=!1,void this._applyPosition(c.position,c.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Rm(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(SL),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let r,i;if("center"==t.originX)r=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,c=this._isRtl()?e.left:e.right;r="start"==t.originX?s:c}return i="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,{x:r,y:i}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=IL(t);let{x:c,y:h}=e,g=this._getOffset(i,"x"),y=this._getOffset(i,"y");g&&(c+=g),y&&(h+=y);let x=0-h,N=h+s.height-r.height,U=this._subtractOverflows(s.width,0-c,c+s.width-r.width),K=this._subtractOverflows(s.height,x,N),le=U*K;return{visibleArea:le,isCompletelyWithinViewport:s.width*s.height===le,fitsInViewportVertically:K===s.height,fitsInViewportHorizontally:U==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,c=TL(this._overlayRef.getConfig().minHeight),h=TL(this._overlayRef.getConfig().minWidth),y=e.fitsInViewportHorizontally||null!=h&&h<=s;return(e.fitsInViewportVertically||null!=c&&c<=i)&&y}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=IL(t),s=this._viewportRect,c=Math.max(e.x+i.width-s.width,0),h=Math.max(e.y+i.height-s.height,0),g=Math.max(s.top-r.top-e.y,0),y=Math.max(s.left-r.left-e.x,0);let E=0,T=0;return E=i.width<=s.width?y||-c:e.x<this._viewportMargin?s.left-r.left-e.x:0,T=i.height<=s.height?g||-h:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:E,y:T},{x:e.x+E,y:e.y+T}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new Az(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,c,h,E,T,x;if("top"===t.overlayY)c=e.y,s=r.height-c+this._viewportMargin;else if("bottom"===t.overlayY)h=r.height-e.y+2*this._viewportMargin,s=r.height-h+this._viewportMargin;else{const N=Math.min(r.bottom-e.y+r.top,e.y),U=this._lastBoundingBoxSize.height;s=2*N,c=e.y-N,s>U&&!this._isInitialRender&&!this._growAfterOpen&&(c=e.y-U/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)x=r.width-e.x+this._viewportMargin,E=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)T=e.x,E=r.right-e.x;else{const N=Math.min(r.right-e.x+r.left,e.x),U=this._lastBoundingBoxSize.width;E=2*N,T=e.x-N,E>U&&!this._isInitialRender&&!this._growAfterOpen&&(T=e.x-U/2)}return{top:c,left:T,bottom:h,right:x,width:E,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;i.height=wi(r.height),i.top=wi(r.top),i.bottom=wi(r.bottom),i.width=wi(r.width),i.left=wi(r.left),i.right=wi(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=wi(s)),c&&(i.maxWidth=wi(c))}this._lastBoundingBoxSize=r,Rm(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Rm(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Rm(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(i){const E=this._viewportRuler.getViewportScrollPosition();Rm(r,this._getExactOverlayY(t,e,E)),Rm(r,this._getExactOverlayX(t,e,E))}else r.position="static";let h="",g=this._getOffset(t,"x"),y=this._getOffset(t,"y");g&&(h+=`translateX(${g}px) `),y&&(h+=`translateY(${y}px)`),r.transform=h.trim(),c.maxHeight&&(i?r.maxHeight=wi(c.maxHeight):s&&(r.maxHeight="")),c.maxWidth&&(i?r.maxWidth=wi(c.maxWidth):s&&(r.maxWidth="")),Rm(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r));let c=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return s.y-=c,"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=wi(s.y),i}_getExactOverlayX(e,t,r){let c,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),c=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===c?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=wi(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:CL(e,r),isOriginOutsideView:Xk(e,r),isOverlayClipped:CL(t,r),isOverlayOutsideView:Xk(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&qT(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof l.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Rm(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function TL(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(kz);return t&&"px"!==t?null:parseFloat(e)}return n||null}function IL(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}class Oz{constructor(e,t,r,i,s,c,h){this._preferredPositions=[],this._positionStrategy=new DL(r,i,s,c,h).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,t),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(e){this._positionStrategy.withScrollableContainers(e)}withFallbackPosition(e,t,r,i){const s=new Iz(e,t,r,i);return this._preferredPositions.push(s),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}withOffsetX(e){return this._positionStrategy.withDefaultOffsetX(e),this}withOffsetY(e){return this._positionStrategy.withDefaultOffsetY(e),this}withLockedPosition(e){return this._positionStrategy.withLockedPosition(e),this}withPositions(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(e){return this._positionStrategy.setOrigin(e),this}}const AL="cdk-global-overlay-wrapper";class Nz{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(AL),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:c,maxHeight:h}=r,g=!("100%"!==i&&"100vw"!==i||c&&"100%"!==c&&"100vw"!==c),y=!("100%"!==s&&"100vh"!==s||h&&"100%"!==h&&"100vh"!==h);e.position=this._cssPosition,e.marginLeft=g?"0":this._leftOffset,e.marginTop=y?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,g?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=y?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(AL),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Pz=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new Nz}connectedTo(t,r,i){return new Oz(r,i,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new DL(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(xm),l.LFG(ne),l.LFG(Tn),l.LFG(tO))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(xm),l.LFG(ne),l.LFG(Tn),l.LFG(tO))},token:n,providedIn:"root"}),n})(),Fz=0,Lv=(()=>{class n{constructor(t,r,i,s,c,h,g,y,E,T,x){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=c,this._injector=h,this._ngZone=g,this._document=y,this._directionality=E,this._location=T,this._outsideClickDispatcher=x}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),c=new eO(t);return c.direction=c.direction||this._directionality.value,new Rz(s,r,i,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+Fz++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(l.z2F)),new az(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Tz),l.LFG(tO),l.LFG(l._Vd),l.LFG(Pz),l.LFG(Mz),l.LFG(l.zs3),l.LFG(l.R0b),l.LFG(ne),l.LFG(mh),l.LFG(hn),l.LFG(xz))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Uz={provide:new l.OlP("cdk-connected-overlay-scroll-strategy"),deps:[Lv],useFactory:function Bz(n){return()=>n.scrollStrategies.reposition()}};let RL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Lv,Uz],imports:[[NE,mL,zk],zk]}),n})();function eI(n,e=yf.P){return t=>t.lift(new Hz(n,e))}class Hz{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new jz(e,this.dueTime,this.scheduler))}}class jz extends Jr.L{constructor(e,t,r){super(e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Gz,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function Gz(n){n.debouncedNext()}function kL(n){return e=>e.lift(new $z(n))}class $z{constructor(e){this.total=e}call(e,t){return t.subscribe(new zz(e,this.total))}}class zz extends Jr.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}let nO=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})(),OL=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=gh(t);return new mn.y(i=>{const c=this._observeElement(r).subscribe(i);return()=>{c.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new ot.xQ,i=this._mutationObserverFactory.create(s=>r.next(s));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(nO))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(nO))},token:n,providedIn:"root"}),n})(),qz=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new l.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Yn(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=qs(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(eI(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(OL),l.Y36(l.SBq),l.Y36(l.R0b))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),NL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[nO]}),n})();function UL(n){return 0===n.offsetX&&0===n.offsetY}function HL(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}"undefined"!=typeof Element&&Element;const jL=new l.OlP("cdk-input-modality-detector-options"),fq={ignoreKeys:[18,17,224,91,16]},Vv=YT({passive:!0,capture:!0});let $L=(()=>{class n{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new ui(null),this._lastTouchMs=0,this._onKeydown=c=>{var h,g;(null===(g=null===(h=this._options)||void 0===h?void 0:h.ignoreKeys)||void 0===g?void 0:g.some(y=>y===c.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Am(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(UL(c)?"keyboard":"mouse"),this._mostRecentTarget=Am(c))},this._onTouchstart=c=>{HL(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Am(c))},this._options=Object.assign(Object.assign({},fq),s),this.modalityDetected=this._modality.pipe(kL(1)),this.modalityChanged=this.modalityDetected.pipe(ay()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Vv),i.addEventListener("mousedown",this._onMousedown,Vv),i.addEventListener("touchstart",this._onTouchstart,Vv)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Vv),document.removeEventListener("mousedown",this._onMousedown,Vv),document.removeEventListener("touchstart",this._onTouchstart,Vv))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Tn),l.LFG(l.R0b),l.LFG(ne),l.LFG(jL,8))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(Tn),l.LFG(l.R0b),l.LFG(ne),l.LFG(jL,8))},token:n,providedIn:"root"}),n})();const zL=new l.OlP("liveAnnouncerElement",{providedIn:"root",factory:function pq(){return null}}),qL=new l.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let tI=(()=>{class n{constructor(t,r,i,s){this._ngZone=r,this._defaultOptions=s,this._document=i,this._liveElement=t||this._createLiveElement()}announce(t,...r){const i=this._defaultOptions;let s,c;return 1===r.length&&"number"==typeof r[0]?c=r[0]:[s,c]=r,this.clear(),clearTimeout(this._previousTimeout),s||(s=i&&i.politeness?i.politeness:"polite"),null==c&&i&&(c=i.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>new Promise(h=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,h(),"number"==typeof c&&(this._previousTimeout=setTimeout(()=>this.clear(),c))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const t="cdk-live-announcer-element",r=this._document.getElementsByClassName(t),i=this._document.createElement("div");for(let s=0;s<r.length;s++)r[s].parentNode.removeChild(r[s]);return i.classList.add(t),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),this._document.body.appendChild(i),i}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(zL,8),l.LFG(l.R0b),l.LFG(ne),l.LFG(qL,8))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(zL,8),l.LFG(l.R0b),l.LFG(ne),l.LFG(qL,8))},token:n,providedIn:"root"}),n})();const WL=new l.OlP("cdk-focus-monitor-default-options"),nI=YT({passive:!0,capture:!0});let rO=(()=>{class n{constructor(t,r,i,s,c){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ot.xQ,this._rootNodeFocusAndBlurListener=h=>{const g=Am(h),y="focus"===h.type?this._onFocus:this._onBlur;for(let E=g;E;E=E.parentElement)y.call(this,h,E)},this._document=s,this._detectionMode=(null==c?void 0:c.detectionMode)||0}monitor(t,r=!1){const i=gh(t);if(!this._platform.isBrowser||1!==i.nodeType)return(0,Le.of)(null);const s=cL(i)||this._getDocument(),c=this._elementInfo.get(i);if(c)return r&&(c.checkChildren=!0),c.subject;const h={checkChildren:r,subject:new ot.xQ,rootNode:s};return this._elementInfo.set(i,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const r=gh(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=gh(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([h,g])=>this._originChanged(h,r,g)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,r,i){i?t.classList.add(r):t.classList.remove(r)}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){this._toggleClass(t,"cdk-focused",!!r),this._toggleClass(t,"cdk-touch-focused","touch"===r),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===r),this._toggleClass(t,"cdk-mouse-focused","mouse"===r),this._toggleClass(t,"cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=Am(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,nI),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,nI)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Mr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,nI),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,nI),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.R0b),l.LFG(Tn),l.LFG($L),l.LFG(ne,8),l.LFG(WL,8))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(l.R0b),l.LFG(Tn),l.LFG($L),l.LFG(ne,8),l.LFG(WL,8))},token:n,providedIn:"root"}),n})();const YL="cdk-high-contrast-black-on-white",KL="cdk-high-contrast-white-on-black",iO="cdk-high-contrast-active";let ZL=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(iO),t.remove(YL),t.remove(KL),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(iO),t.add(YL)):2===r&&(t.add(iO),t.add(KL))}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Tn),l.LFG(ne))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(Tn),l.LFG(ne))},token:n,providedIn:"root"}),n})();const QL=new l.GfV("12.2.13");class JL{}const _h="*";function rI(n,e){return{type:7,name:n,definitions:e,options:{}}}function FE(n,e=null){return{type:4,styles:e,timings:n}}function XL(n,e=null){return{type:2,steps:n,options:e}}function dc(n){return{type:6,styles:n,offset:null}}function Bv(n,e,t){return{type:0,name:n,styles:e,options:t}}function Uv(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function eV(n){Promise.resolve(null).then(n)}class LE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){eV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class tV{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?eV(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==s&&this._onFinish()}),c.onDestroy(()=>{++r==s&&this._onDestroy()}),c.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,h)=>Math.max(c,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const on=!1;function nV(n){return new l.vHH(3e3,on)}function Qq(){return"undefined"!=typeof window&&void 0!==window.document}function oO(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function hp(n){switch(n.length){case 0:return new LE;case 1:return n[0];default:return new tV(n)}}function rV(n,e,t,r,i={},s={}){const c=[],h=[];let g=-1,y=null;if(r.forEach(E=>{const T=E.offset,x=T==g,N=x&&y||{};Object.keys(E).forEach(U=>{let K=U,le=E[U];if("offset"!==U)switch(K=e.normalizePropertyName(K,c),le){case"!":le=i[U];break;case _h:le=s[U];break;default:le=e.normalizeStyleValue(U,K,le,c)}N[K]=le}),x||h.push(N),y=N,g=T}),c.length)throw function Uq(n){return new l.vHH(3502,on)}();return h}function aO(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&lO(t,"start",n)));break;case"done":n.onDone(()=>r(t&&lO(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&lO(t,"destroy",n)))}}function lO(n,e,t){const r=t.totalTime,s=cO(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(s._data=c),s}function cO(n,e,t,r,i="",s=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!c}}function ha(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function iV(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let uO=(n,e)=>!1,sV=(n,e,t)=>[],oV=null;function dO(n){const e=n.parentNode||n.host;return e===oV?null:e}(oO()||"undefined"!=typeof Element)&&(Qq()?(oV=(()=>document.documentElement)(),uO=(n,e)=>{for(;e;){if(e===n)return!0;e=dO(e)}return!1}):uO=(n,e)=>n.contains(e),sV=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let km=null,aV=!1;function lV(n){km||(km=function Xq(){return"undefined"!=typeof document?document.body:null}()||{},aV=!!km.style&&"WebkitAppearance"in km.style);let e=!0;return km.style&&!function Jq(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in km.style,!e&&aV&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in km.style)),e}const cV=uO,uV=sV;let dV=(()=>{class n{validateStyleProperty(t){return lV(t)}matchesElement(t,r){return!1}containsElement(t,r){return cV(t,r)}getParentElement(t){return dO(t)}query(t,r,i){return uV(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,c,h=[],g){return new LE(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),hO=(()=>{class n{}return n.NOOP=new dV,n})();const fO="ng-enter",sI="ng-leave",oI="ng-trigger",aI=".ng-trigger",fV="ng-animating",pO=".ng-animating";function Om(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:gO(parseFloat(e[1]),e[2])}function gO(n,e){return"s"===e?1e3*n:n}function lI(n,e,t){return n.hasOwnProperty("duration")?n:function n6(n,e,t){let i,s=0,c="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(nV()),{duration:0,delay:0,easing:""};i=gO(parseFloat(h[1]),h[2]);const g=h[3];null!=g&&(s=gO(parseFloat(g),h[4]));const y=h[5];y&&(c=y)}else i=n;if(!t){let h=!1,g=e.length;i<0&&(e.push(function yq(){return new l.vHH(3100,on)}()),h=!0),s<0&&(e.push(function vq(){return new l.vHH(3101,on)}()),h=!0),h&&e.splice(g,0,nV())}return{duration:i,delay:s,easing:c}}(n,e,t)}function Hv(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function fp(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Hv(n,t);return t}function gV(n,e,t){return t?e+":"+t+";":""}function mV(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=gV(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=gV(0,s6(t),n.style[t]));n.setAttribute("style",e)}function Tu(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=_O(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),oO()&&mV(n))}function Nm(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=_O(t);n.style[r]=""}),oO()&&mV(n))}function VE(n){return Array.isArray(n)?1==n.length?n[0]:XL(n):n}const mO=new RegExp("{{\\s*(.+?)\\s*}}","g");function _V(n){let e=[];if("string"==typeof n){let t;for(;t=mO.exec(n);)e.push(t[1]);mO.lastIndex=0}return e}function cI(n,e,t){const r=n.toString(),i=r.replace(mO,(s,c)=>{let h=e[c];return e.hasOwnProperty(c)||(t.push(function wq(n){return new l.vHH(3003,on)}()),h=""),h.toString()});return i==r?n:i}function uI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const i6=/-+([a-z0-9])/g;function _O(n){return n.replace(i6,(...e)=>e[1].toUpperCase())}function s6(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function fa(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Cq(n){return new l.vHH(3004,on)}()}}function yV(n,e){return window.getComputedStyle(n)[e]}function d6(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function h6(n,e,t){if(":"==n[0]){const g=function f6(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Fq(n){return new l.vHH(3016,on)}()),"* => *"}}(n,t);if("function"==typeof g)return void e.push(g);n=g}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Pq(n){return new l.vHH(3015,on)}()),e;const i=r[1],s=r[2],c=r[3];e.push(vV(i,c));"<"==s[0]&&!("*"==i&&"*"==c)&&e.push(vV(c,i))}(r,t,e)):t.push(n),t}const pI=new Set(["true","1"]),gI=new Set(["false","0"]);function vV(n,e){const t=pI.has(n)||gI.has(n),r=pI.has(e)||gI.has(e);return(i,s)=>{let c="*"==n||n==i,h="*"==e||e==s;return!c&&t&&"boolean"==typeof i&&(c=i?pI.has(n):gI.has(n)),!h&&r&&"boolean"==typeof s&&(h=s?pI.has(e):gI.has(e)),c&&h}}const p6=new RegExp("s*:selfs*,?","g");function yO(n,e,t,r){return new g6(n).build(e,t,r)}class g6{constructor(e){this._driver=e}build(e,t,r){const i=new y6(t);this._resetContextStyleTimingState(i);const s=fa(this,VE(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function Sq(){return new l.vHH(3006,on)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const g=h,y=g.name;y.toString().split(/\s*,\s*/).forEach(E=>{g.name=E,s.push(this.visitState(g,t))}),g.name=y}else if(1==h.type){const g=this.visitTransition(h,t);r+=g.queryCount,i+=g.depCount,c.push(g)}else t.errors.push(function Dq(){return new l.vHH(3007,on)}())}),{type:7,name:e.name,states:s,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,c=i||{};r.styles.forEach(h=>{if(mI(h)){const g=h;Object.keys(g).forEach(y=>{_V(g[y]).forEach(E=>{c.hasOwnProperty(E)||s.add(E)})})}}),s.size&&(uI(s.values()),t.errors.push(function Tq(n,e){return new l.vHH(3008,on)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=fa(this,VE(e.animation),t);return{type:1,matchers:d6(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Pm(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>fa(this,r,t)),options:Pm(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(c=>{t.currentTime=r;const h=fa(this,c,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:s,options:Pm(e.options)}}visitAnimate(e,t){const r=function b6(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return vO(lI(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=vO(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=lI(t,e);return vO(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:dc({});if(5==s.type)i=this.visitKeyframes(s,t);else{let c=e.styles,h=!1;if(!c){h=!0;const y={};r.easing&&(y.easing=r.easing),c=dc(y)}t.currentTime+=r.duration+r.delay;const g=this.visitStyle(c,t);g.isEmptyStep=h,i=g}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==_h?r.push(c):t.errors.push(function Iq(n){return new l.vHH(3002,on)}()):r.push(c)}):r.push(e.styles);let i=!1,s=null;return r.forEach(c=>{if(mI(c)){const h=c,g=h.easing;if(g&&(s=g,delete h.easing),!i)for(let y in h)if(h[y].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:s,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(h=>{if(!this._driver.validateStyleProperty(h))return delete c[h],void t.unsupportedCSSPropertiesFound.add(h);const g=t.collectedStyles[t.currentQuerySelector],y=g[h];let E=!0;y&&(s!=i&&s>=y.startTime&&i<=y.endTime&&(t.errors.push(function Aq(n,e,t,r,i){return new l.vHH(3010,on)}()),E=!1),s=y.startTime),E&&(g[h]={startTime:s,endTime:i}),t.options&&function r6(n,e,t){const r=e.params||{},i=_V(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function bq(n){return new l.vHH(3001,on)}())})}(c[h],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Mq(){return new l.vHH(3011,on)}()),r;let s=0;const c=[];let h=!1,g=!1,y=0;const E=e.steps.map(Pe=>{const Me=this._makeStyleAst(Pe,t);let Be=null!=Me.offset?Me.offset:function v6(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(mI(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(mI(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Me.styles),ke=0;return null!=Be&&(s++,ke=Me.offset=Be),g=g||ke<0||ke>1,h=h||ke<y,y=ke,c.push(ke),Me});g&&t.errors.push(function xq(){return new l.vHH(3012,on)}()),h&&t.errors.push(function Rq(){return new l.vHH(3200,on)}());const T=e.steps.length;let x=0;s>0&&s<T?t.errors.push(function kq(){return new l.vHH(3202,on)}()):0==s&&(x=1/(T-1));const N=T-1,U=t.currentTime,K=t.currentAnimateTimings,le=K.duration;return E.forEach((Pe,Me)=>{const Be=x>0?Me==N?1:x*Me:c[Me],ke=Be*le;t.currentTime=U+K.delay+ke,K.duration=ke,this._validateStyleAst(Pe,t),Pe.offset=Be,r.styles.push(Pe)}),r}visitReference(e,t){return{type:8,animation:fa(this,VE(e.animation),t),options:Pm(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Pm(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Pm(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,c]=function m6(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(p6,"")),n=n.replace(/@\*/g,aI).replace(/@\w+/g,t=>aI+"-"+t.substr(1)).replace(/:animating/g,pO),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,ha(t.collectedStyles,t.currentQuerySelector,{});const h=fa(this,VE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:h,originalSelector:e.selector,options:Pm(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Oq(){return new l.vHH(3013,on)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:lI(e.timings,t.errors,!0);return{type:12,animation:fa(this,VE(e.animation),t),timings:r,options:null}}}class y6{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function mI(n){return!Array.isArray(n)&&"object"==typeof n}function Pm(n){return n?(n=Hv(n)).params&&(n.params=function _6(n){return n?Hv(n):null}(n.params)):n={},n}function vO(n,e,t){return{duration:n,delay:e,easing:t}}function bO(n,e,t,r,i,s,c=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:c,subTimeline:h}}class _I{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const E6=new RegExp(":enter","g"),D6=new RegExp(":leave","g");function wO(n,e,t,r,i,s={},c={},h,g,y=[]){return(new T6).buildKeyframes(n,e,t,r,i,s,c,h,g,y)}class T6{buildKeyframes(e,t,r,i,s,c,h,g,y,E=[]){y=y||new _I;const T=new CO(e,t,y,i,s,E,[]);T.options=g,T.currentTimeline.setStyles([c],null,T.errors,g),fa(this,r,T);const x=T.timelines.filter(N=>N.containsAnimation());if(Object.keys(h).length){let N;for(let U=x.length-1;U>=0;U--){const K=x[U];if(K.element===t){N=K;break}}N&&!N.allowOnlyTimelineStyles()&&N.setStyles([h],null,T.errors,g)}return x.length?x.map(N=>N.buildKeyframes()):[bO(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);s!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const c=null!=r.duration?Om(r.duration):null,h=null!=r.delay?Om(r.delay):null;return 0!==c&&e.forEach(g=>{const y=t.appendInstructionToTimeline(g,c,h);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),fa(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=yI);const c=Om(s.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>fa(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Om(e.options.delay):0;e.steps.forEach(c=>{const h=t.createSubContext(e.options);s&&h.delayNextStep(s),fa(this,c,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return lI(t.params?cI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(g=>{h.forwardTime((g.offset||0)*s),h.setStyles(g.styles,g.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Om(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=yI);let c=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let g=null;h.forEach((y,E)=>{t.currentQueryIndex=E;const T=t.createSubContext(e.options,y);s&&T.delayNextStep(s),y===t.element&&(g=T.currentTimeline),fa(this,e.animation,T),T.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,T.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),g&&(t.currentTimeline.mergeTimelineCollectedStyles(g),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,c=Math.abs(s.duration),h=c*(t.currentQueryTotal-1);let g=c*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":g=h-g;break;case"full":g=r.currentStaggerTime}const E=t.currentTimeline;g&&E.delayNextStep(g);const T=E.currentTime;fa(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-T+(i.startTime-r.currentTimeline.startTime)}}const yI={};class CO{constructor(e,t,r,i,s,c,h,g){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=c,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=yI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new vI(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Om(r.duration)),null!=r.delay&&(i.delay=Om(r.delay));const s=r.params;if(s){let c=i.params;c||(c=this.options.params={}),Object.keys(s).forEach(h=>{(!t||!c.hasOwnProperty(h))&&(c[h]=cI(s[h],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new CO(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=yI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},s=new I6(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,c){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(E6,"."+this._enterClassName)).replace(D6,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),h.push(...y)}return!s&&0==h.length&&c.push(function Nq(n){return new l.vHH(3014,on)}()),h}}class vI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new vI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||_h,this._currentKeyframe[t]=_h}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const s=i&&i.params||{},c=function A6(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(s=>{t[s]=_h})):fp(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(h=>{const g=cI(c[h],s,r);this._pendingStyles[h]=g,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:_h),this._updateStyle(h,g)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,g)=>{const y=fp(h,!0);Object.keys(y).forEach(E=>{const T=y[E];"!"==T?e.add(E):T==_h&&t.add(E)}),r||(y.offset=g/this.duration),i.push(y)});const s=e.size?uI(e.values()):[],c=t.size?uI(t.values()):[];if(r){const h=i[0],g=Hv(h);h.offset=0,g.offset=1,i=[h,g]}return bO(this.element,i,s,c,this.duration,this.startTime,this.easing,!1)}}class I6 extends vI{constructor(e,t,r,i,s,c,h=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],c=r+t,h=t/c,g=fp(e[0],!1);g.offset=0,s.push(g);const y=fp(e[0],!1);y.offset=CV(h),s.push(y);const E=e.length-1;for(let T=1;T<=E;T++){let x=fp(e[T],!1);x.offset=CV((t+x.offset*r)/c),s.push(x)}r=c,t=0,i="",e=s}return bO(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function CV(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class EO{}class M6 extends EO{normalizePropertyName(e,t){return _O(e)}normalizeStyleValue(e,t,r,i){let s="";const c=r.toString().trim();if(x6[t]&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(function Eq(n,e){return new l.vHH(3005,on)}())}return c+s}}const x6=(()=>function R6(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function EV(n,e,t,r,i,s,c,h,g,y,E,T,x){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:c,timelines:h,queriedElements:g,preStyleProps:y,postStyleProps:E,totalTime:T,errors:x}}const SO={};class SV{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function k6(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],s=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return s?s.buildStyles(t,r):c}build(e,t,r,i,s,c,h,g,y,E){const T=[],x=this.ast.options&&this.ast.options.params||SO,U=this.buildStyles(r,h&&h.params||SO,T),K=g&&g.params||SO,le=this.buildStyles(i,K,T),Pe=new Set,Me=new Map,Be=new Map,ke="void"===i,mt={params:Object.assign(Object.assign({},x),K)},ct=E?[]:wO(e,t,this.ast.animation,s,c,U,le,mt,y,T);let Rn=0;if(ct.forEach(si=>{Rn=Math.max(si.duration+si.delay,Rn)}),T.length)return EV(t,this._triggerName,r,i,ke,U,le,[],[],Me,Be,Rn,T);ct.forEach(si=>{const Ln=si.element,nr=ha(Me,Ln,{});si.preStyleProps.forEach(Qm=>nr[Qm]=!0);const ol=ha(Be,Ln,{});si.postStyleProps.forEach(Qm=>ol[Qm]=!0),Ln!==t&&Pe.add(Ln)});const Fn=uI(Pe.values());return EV(t,this._triggerName,r,i,ke,U,le,ct,Fn,Me,Be,Rn)}}class O6{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Hv(this.defaultParams);return Object.keys(e).forEach(s=>{const c=e[s];null!=c&&(i[s]=c)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const c=s;Object.keys(c).forEach(h=>{let g=c[h];g.length>1&&(g=cI(g,i,t));const y=this.normalizer.normalizePropertyName(h,t);g=this.normalizer.normalizeStyleValue(h,y,g,t),r[y]=g})}}),r}}class P6{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new O6(i.style,i.options&&i.options.params||{},r)}),DV(this.states,"true","1"),DV(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new SV(e,i,this.states))}),this.fallbackTransition=function F6(n,e,t){return new SV(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function DV(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const L6=new _I;class V6{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],s=yO(this._driver,t,r,[]);if(r.length)throw function Hq(n){return new l.vHH(3503,on)}();this._animations[e]=s}_buildPlayer(e,t,r){const i=e.element,s=rV(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations[e];let c;const h=new Map;if(s?(c=wO(this._driver,t,s,fO,sI,{},{},r,L6,i),c.forEach(E=>{const T=ha(h,E.element,{});E.postStyleProps.forEach(x=>T[x]=null)})):(i.push(function jq(){return new l.vHH(3300,on)}()),c=[]),i.length)throw function Gq(n){return new l.vHH(3504,on)}();h.forEach((E,T)=>{Object.keys(E).forEach(x=>{E[x]=this._driver.computeStyle(T,x,_h)})});const y=hp(c.map(E=>{const T=h.get(E.element);return this._buildPlayer(E,{},T)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function $q(n){return new l.vHH(3301,on)}();return t}listen(e,t,r,i){const s=cO(t,"","","");return aO(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const TV="ng-animate-queued",DO="ng-animate-disabled",G6=[],IV={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},$6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Xa="__ng_removed";class TO{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Y6(n){return null!=n?n:null}(r?e.value:e),r){const s=Hv(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const BE="void",IO=new TO(BE);class z6{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,el(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function zq(n,e){return new l.vHH(3302,on)}();if(null==r||0==r.length)throw function qq(n){return new l.vHH(3303,on)}();if(!function K6(n){return"start"==n||"done"==n}(r))throw function Wq(n,e){return new l.vHH(3400,on)}();const s=ha(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};s.push(c);const h=ha(this._engine.statesByElement,e,{});return h.hasOwnProperty(t)||(el(e,oI),el(e,oI+"-"+t),h[t]=IO),()=>{this._engine.afterFlush(()=>{const g=s.indexOf(c);g>=0&&s.splice(g,1),this._triggers[t]||delete h[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function Yq(n){return new l.vHH(3401,on)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),c=new AO(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(el(e,oI),el(e,oI+"-"+t),this._engine.statesByElement.set(e,h={}));let g=h[t];const y=new TO(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&g&&y.absorbOptions(g.options),h[t]=y,g||(g=IO),y.value!==BE&&g.value===y.value){if(!function J6(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(g.params,y.params)){const K=[],le=s.matchStyles(g.value,g.params,K),Pe=s.matchStyles(y.value,y.params,K);K.length?this._engine.reportError(K):this._engine.afterFlush(()=>{Nm(e,le),Tu(e,Pe)})}return}const x=ha(this._engine.playersByElement,e,[]);x.forEach(K=>{K.namespaceId==this.id&&K.triggerName==t&&K.queued&&K.destroy()});let N=s.matchTransition(g.value,y.value,e,y.params),U=!1;if(!N){if(!i)return;N=s.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:N,fromState:g,toState:y,player:c,isFallbackTransition:U}),U||(el(e,TV),c.onStart(()=>{jv(e,TV)})),c.onDone(()=>{let K=this.players.indexOf(c);K>=0&&this.players.splice(K,1);const le=this._engine.playersByElement.get(e);if(le){let Pe=le.indexOf(c);Pe>=0&&le.splice(Pe,1)}}),this.players.push(c),x.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,aI,!0);r.forEach(i=>{if(i[Xa])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),c=new Map;if(s){const h=[];if(Object.keys(s).forEach(g=>{if(c.set(g,s[g].value),this._triggers[g]){const y=this.trigger(e,g,BE,i);y&&h.push(y)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&hp(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const c=s.name;if(i.has(c))return;i.add(c);const g=this._triggers[c].fallbackTransition,y=r[c]||IO,E=new TO(BE),T=new AO(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:g,fromState:y,toState:E,player:T,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Xa];(!s||s===IV)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){el(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,c=this._elementListeners.get(s);c&&c.forEach(h=>{if(h.name==r.triggerName){const g=cO(s,r.triggerName,r.fromState.value,r.toState.value);g._data=e,aO(r.player,h.phase,g,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class q6{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new z6(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,s=r.length-1;if(s>=0){let c=!1;if(void 0!==this.driver.getParentElement){let h=this.driver.getParentElement(t);for(;h;){const g=i.get(h);if(g){const y=r.indexOf(g);r.splice(y+1,0,e),c=!0;break}h=this.driver.getParentElement(h)}}else for(let h=s;h>=0;h--)if(this.driver.containsElement(r[h].hostElement,t)){r.splice(h+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let s=0;s<i.length;s++){const c=r[i[s]].namespaceId;if(c){const h=this._fetchNamespace(c);h&&t.add(h)}}}return t}trigger(e,t,r,i){if(bI(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!bI(t))return;const s=t[Xa];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),el(e,DO)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),jv(e,DO))}removeNode(e,t,r,i){if(bI(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Xa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return bI(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,aI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,pO,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return hp(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Xa];if(r&&r.setForRemoval){if(e[Xa]=IV,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(DO))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)el(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?hp(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Kq(n){return new l.vHH(3402,on)}()}_flushAnimations(e,t){const r=new _I,i=[],s=new Map,c=[],h=new Map,g=new Map,y=new Map,E=new Set;this.disabledNodes.forEach(nt=>{E.add(nt);const _t=this.driver.query(nt,".ng-animate-queued",!0);for(let Et=0;Et<_t.length;Et++)E.add(_t[Et])});const T=this.bodyNode,x=Array.from(this.statesByElement.keys()),N=xV(x,this.collectedEnterElements),U=new Map;let K=0;N.forEach((nt,_t)=>{const Et=fO+K++;U.set(_t,Et),nt.forEach(pn=>el(pn,Et))});const le=[],Pe=new Set,Me=new Set;for(let nt=0;nt<this.collectedLeaveElements.length;nt++){const _t=this.collectedLeaveElements[nt],Et=_t[Xa];Et&&Et.setForRemoval&&(le.push(_t),Pe.add(_t),Et.hasAnimation?this.driver.query(_t,".ng-star-inserted",!0).forEach(pn=>Pe.add(pn)):Me.add(_t))}const Be=new Map,ke=xV(x,Array.from(Pe));ke.forEach((nt,_t)=>{const Et=sI+K++;Be.set(_t,Et),nt.forEach(pn=>el(pn,Et))}),e.push(()=>{N.forEach((nt,_t)=>{const Et=U.get(_t);nt.forEach(pn=>jv(pn,Et))}),ke.forEach((nt,_t)=>{const Et=Be.get(_t);nt.forEach(pn=>jv(pn,Et))}),le.forEach(nt=>{this.processLeaveNode(nt)})});const mt=[],ct=[];for(let nt=this._namespaceList.length-1;nt>=0;nt--)this._namespaceList[nt].drainQueuedTransitions(t).forEach(Et=>{const pn=Et.player,es=Et.element;if(mt.push(pn),this.collectedEnterElements.length){const Qs=es[Xa];if(Qs&&Qs.setForMove){if(Qs.previousTriggersValues&&Qs.previousTriggersValues.has(Et.triggerName)){const Jm=Qs.previousTriggersValues.get(Et.triggerName),Ap=this.statesByElement.get(Et.element);Ap&&Ap[Et.triggerName]&&(Ap[Et.triggerName].value=Jm)}return void pn.destroy()}}const Pu=!T||!this.driver.containsElement(T,es),ma=Be.get(es),Ip=U.get(es),Rr=this._buildInstruction(Et,r,Ip,ma,Pu);if(Rr.errors&&Rr.errors.length)return void ct.push(Rr);if(Pu)return pn.onStart(()=>Nm(es,Rr.fromStyles)),pn.onDestroy(()=>Tu(es,Rr.toStyles)),void i.push(pn);if(Et.isFallbackTransition)return pn.onStart(()=>Nm(es,Rr.fromStyles)),pn.onDestroy(()=>Tu(es,Rr.toStyles)),void i.push(pn);const nj=[];Rr.timelines.forEach(Qs=>{Qs.stretchStartingKeyframe=!0,this.disabledNodes.has(Qs.element)||nj.push(Qs)}),Rr.timelines=nj,r.append(es,Rr.timelines),c.push({instruction:Rr,player:pn,element:es}),Rr.queriedElements.forEach(Qs=>ha(h,Qs,[]).push(pn)),Rr.preStyleProps.forEach((Qs,Jm)=>{const Ap=Object.keys(Qs);if(Ap.length){let Xm=g.get(Jm);Xm||g.set(Jm,Xm=new Set),Ap.forEach(NP=>Xm.add(NP))}}),Rr.postStyleProps.forEach((Qs,Jm)=>{const Ap=Object.keys(Qs);let Xm=y.get(Jm);Xm||y.set(Jm,Xm=new Set),Ap.forEach(NP=>Xm.add(NP))})});if(ct.length){const nt=[];ct.forEach(_t=>{nt.push(function Zq(n,e){return new l.vHH(3505,on)}())}),mt.forEach(_t=>_t.destroy()),this.reportError(nt)}const Rn=new Map,Fn=new Map;c.forEach(nt=>{const _t=nt.element;r.has(_t)&&(Fn.set(_t,_t),this._beforeAnimationBuild(nt.player.namespaceId,nt.instruction,Rn))}),i.forEach(nt=>{const _t=nt.element;this._getPreviousPlayers(_t,!1,nt.namespaceId,nt.triggerName,null).forEach(pn=>{ha(Rn,_t,[]).push(pn),pn.destroy()})});const si=le.filter(nt=>kV(nt,g,y)),Ln=new Map;MV(Ln,this.driver,Me,y,_h).forEach(nt=>{kV(nt,g,y)&&si.push(nt)});const ol=new Map;N.forEach((nt,_t)=>{MV(ol,this.driver,new Set(nt),g,"!")}),si.forEach(nt=>{const _t=Ln.get(nt),Et=ol.get(nt);Ln.set(nt,Object.assign(Object.assign({},_t),Et))});const Qm=[],ej=[],tj={};c.forEach(nt=>{const{element:_t,player:Et,instruction:pn}=nt;if(r.has(_t)){if(E.has(_t))return Et.onDestroy(()=>Tu(_t,pn.toStyles)),Et.disabled=!0,Et.overrideTotalTime(pn.totalTime),void i.push(Et);let es=tj;if(Fn.size>1){let ma=_t;const Ip=[];for(;ma=ma.parentNode;){const Rr=Fn.get(ma);if(Rr){es=Rr;break}Ip.push(ma)}Ip.forEach(Rr=>Fn.set(Rr,es))}const Pu=this._buildAnimation(Et.namespaceId,pn,Rn,s,ol,Ln);if(Et.setRealPlayer(Pu),es===tj)Qm.push(Et);else{const ma=this.playersByElement.get(es);ma&&ma.length&&(Et.parentPlayer=hp(ma)),i.push(Et)}}else Nm(_t,pn.fromStyles),Et.onDestroy(()=>Tu(_t,pn.toStyles)),ej.push(Et),E.has(_t)&&i.push(Et)}),ej.forEach(nt=>{const _t=s.get(nt.element);if(_t&&_t.length){const Et=hp(_t);nt.setRealPlayer(Et)}}),i.forEach(nt=>{nt.parentPlayer?nt.syncPlayerEvents(nt.parentPlayer):nt.destroy()});for(let nt=0;nt<le.length;nt++){const _t=le[nt],Et=_t[Xa];if(jv(_t,sI),Et&&Et.hasAnimation)continue;let pn=[];if(h.size){let Pu=h.get(_t);Pu&&Pu.length&&pn.push(...Pu);let ma=this.driver.query(_t,pO,!0);for(let Ip=0;Ip<ma.length;Ip++){let Rr=h.get(ma[Ip]);Rr&&Rr.length&&pn.push(...Rr)}}const es=pn.filter(Pu=>!Pu.destroyed);es.length?Z6(this,_t,es):this.processLeaveNode(_t)}return le.length=0,Qm.forEach(nt=>{this.players.push(nt),nt.onDone(()=>{nt.destroy();const _t=this.players.indexOf(nt);this.players.splice(_t,1)}),nt.play()}),Qm}elementContainsData(e,t){let r=!1;const i=t[Xa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let c=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(c=h)}else{const h=this.playersByElement.get(e);if(h){const g=!s||s==BE;h.forEach(y=>{y.queued||!g&&y.triggerName!=i||c.push(y)})}}return(r||i)&&(c=c.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),c}_beforeAnimationBuild(e,t,r){const s=t.element,c=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const g of t.timelines){const y=g.element,E=y!==s,T=ha(r,y,[]);this._getPreviousPlayers(y,E,c,h,t.toState).forEach(N=>{const U=N.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),N.destroy(),T.push(N)})}Nm(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,c){const h=t.triggerName,g=t.element,y=[],E=new Set,T=new Set,x=t.timelines.map(U=>{const K=U.element;E.add(K);const le=K[Xa];if(le&&le.removedBeforeQueried)return new LE(U.duration,U.delay);const Pe=K!==g,Me=function Q6(n){const e=[];return RV(n,e),e}((r.get(K)||G6).map(Rn=>Rn.getRealPlayer())).filter(Rn=>!!Rn.element&&Rn.element===K),Be=s.get(K),ke=c.get(K),mt=rV(0,this._normalizer,0,U.keyframes,Be,ke),ct=this._buildPlayer(U,mt,Me);if(U.subTimeline&&i&&T.add(K),Pe){const Rn=new AO(e,h,K);Rn.setRealPlayer(ct),y.push(Rn)}return ct});y.forEach(U=>{ha(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function W6(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,U.element,U))}),E.forEach(U=>el(U,fV));const N=hp(x);return N.onDestroy(()=>{E.forEach(U=>jv(U,fV)),Tu(g,t.toStyles)}),T.forEach(U=>{ha(i,U,[]).push(N)}),N}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new LE(e.duration,e.delay)}}class AO{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new LE,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>aO(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ha(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function bI(n){return n&&1===n.nodeType}function AV(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function MV(n,e,t,r,i){const s=[];t.forEach(g=>s.push(AV(g)));const c=[];r.forEach((g,y)=>{const E={};g.forEach(T=>{const x=E[T]=e.computeStyle(y,T,i);(!x||0==x.length)&&(y[Xa]=$6,c.push(y))}),n.set(y,E)});let h=0;return t.forEach(g=>AV(g,s[h++])),c}function xV(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),s=new Map;function c(h){if(!h)return 1;let g=s.get(h);if(g)return g;const y=h.parentNode;return g=t.has(y)?y:i.has(y)?1:c(y),s.set(h,g),g}return e.forEach(h=>{const g=c(h);1!==g&&t.get(g).push(h)}),t}function el(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function jv(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function Z6(n,e,t){hp(t).onDone(()=>n.processLeaveNode(e))}function RV(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof tV?RV(r.players,e):e.push(r)}}function kV(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class wI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new q6(e,t,r),this._timelineEngine=new V6(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const c=e+"-"+i;let h=this._triggerCache[c];if(!h){const g=[],E=yO(this._driver,s,g,[]);if(g.length)throw function Bq(n,e){return new l.vHH(3404,on)}();h=function N6(n,e,t){return new P6(n,e,t)}(i,E,this._normalizer),this._triggerCache[c]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,c]=iV(r);this._timelineEngine.command(s,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[c,h]=iV(r);return this._timelineEngine.listen(c,t,h,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let eW=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Tu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Tu(this._element,this._initialStyles),this._endStyles&&(Tu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Nm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Nm(this._element,this._endStyles),this._endStyles=null),Tu(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function MO(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];tW(i)&&(e=e||{},e[i]=n[i])}return e}function tW(n){return"display"===n||"position"===n}class OV{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:yV(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class nW{validateStyleProperty(e){return lV(e)}matchesElement(e,t){return!1}containsElement(e,t){return cV(e,t)}getParentElement(e){return dO(e)}query(e,t,r){return uV(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,c=[]){const g={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(g.easing=s);const y={},E=c.filter(x=>x instanceof OV);(function o6(n,e){return 0===n||0===e})(r,i)&&E.forEach(x=>{let N=x.currentSnapshot;Object.keys(N).forEach(U=>y[U]=N[U])}),t=function a6(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let s=e[0],c=[];if(r.forEach(h=>{s.hasOwnProperty(h)||c.push(h),s[h]=t[h]}),c.length)for(var i=1;i<e.length;i++){let h=e[i];c.forEach(function(g){h[g]=yV(n,g)})}}return e}(e,t=t.map(x=>fp(x,!1)),y);const T=function X6(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=MO(e[0]),e.length>1&&(r=MO(e[e.length-1]))):e&&(t=MO(e)),t||r?new eW(n,t,r):null}(e,t);return new OV(e,t,g,T)}}let rW=(()=>{class n extends JL{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?XL(t):t;return NV(this._renderer,null,r,"register",[i]),new iW(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.FYo),l.LFG(ne))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class iW extends class gq{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new sW(this._id,e,t||{},this._renderer)}}class sW{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return NV(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function NV(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const PV="@.disabled";let oW=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,c)=>{const h=null==c?void 0:c.parentNode(s);h&&c.removeChild(h,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let E=this._rendererCache.get(s);return E||(E=new FV("",s,this.engine),this._rendererCache.set(s,E)),E}const c=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const g=E=>{Array.isArray(E)?E.forEach(g):this.engine.registerTrigger(c,h,t,E.name,E)};return r.data.animation.forEach(g),new aW(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,h]=s;c(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.FYo),l.LFG(wI),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class FV{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==PV?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class aW extends FV{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==PV?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function lW(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),c="";return"@"!=s.charAt(0)&&([s,c]=function cW(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,c,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let uW=(()=>{class n extends wI{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne),l.LFG(hO),l.LFG(EO))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Iu=new l.OlP("AnimationModuleType"),LV=[{provide:JL,useClass:rW},{provide:EO,useFactory:function dW(){return new M6}},{provide:wI,useClass:uW},{provide:l.FYo,useFactory:function hW(n,e,t){return new oW(n,e,t)},deps:[En,wI,l.R0b]}],VV=[{provide:hO,useFactory:()=>new nW},{provide:Iu,useValue:"BrowserAnimations"},...LV],fW=[{provide:hO,useClass:dV},{provide:Iu,useValue:"NoopAnimations"},...LV];let pW=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?fW:VV}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:VV,imports:[ho]}),n})();const BV=new l.GfV("12.2.13"),wW=new l.OlP("mat-sanity-checks",{providedIn:"root",factory:function bW(){return!0}});let Fm,Kn=(()=>{class n{constructor(t,r,i){this._hasDoneGlobalChecks=!1,this._document=i,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=r,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!(!(0,l.X6Q)()||jk())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const r=getComputedStyle(t);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&BV.full!==QL.full&&console.warn("The Angular Material version ("+BV.full+") does not match the Angular CDK version ("+QL.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ZL),l.LFG(wW,8),l.LFG(ne))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[NE],NE]}),n})();function xO(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Yn(e)}}}function EI(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function UV(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Yn(e)}}}function HV(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new ot.xQ,this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}try{Fm="undefined"!=typeof Intl}catch(n){Fm=!1}let RO=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})(),GV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Kn],Kn]}),n})();class FW{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const $V={enterDuration:225,exitDuration:150},kO=YT({passive:!0}),zV=["mousedown","touchstart"],qV=["mouseup","mouseleave","touchend","touchcancel"];class VW{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=gh(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},$V),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const c=r.radius||function UW(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),h=e-i.left,g=t-i.top,y=s.enterDuration,E=document.createElement("div");E.classList.add("mat-ripple-element"),E.style.left=h-c+"px",E.style.top=g-c+"px",E.style.height=2*c+"px",E.style.width=2*c+"px",null!=r.color&&(E.style.backgroundColor=r.color),E.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(E),function BW(n){window.getComputedStyle(n).getPropertyValue("opacity")}(E),E.style.transform="scale(1)";const T=new FW(this,E,r);return T.state=0,this._activeRipples.add(T),r.persistent||(this._mostRecentTransientRipple=T),this._runTimeoutOutsideZone(()=>{const x=T===this._mostRecentTransientRipple;T.state=1,!r.persistent&&(!x||!this._isPointerDown)&&T.fadeOut()},y),T}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=Object.assign(Object.assign({},$V),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.parentNode.removeChild(r)},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=gh(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(zV))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(qV),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=UL(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!HL(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,kO)})})}_removeTriggerEvents(){this._triggerElement&&(zV.forEach(e=>{this._triggerElement.removeEventListener(e,this,kO)}),this._pointerUpEventsRegistered&&qV.forEach(e=>{this._triggerElement.removeEventListener(e,this,kO)}))}}const HW=new l.OlP("mat-ripple-global-options");let DI=(()=>{class n{constructor(t,r,i,s,c){this._elementRef=t,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new VW(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(Tn),l.Y36(HW,8),l.Y36(Iu,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&l.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),n})(),WV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Kn,RE],Kn]}),n})(),GW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Kn]]}),n})(),PO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[WV,oo,Kn,GW]]}),n})();const ZV=["mat-button",""],QV=["*"],JV=".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n",JW=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],XW=EI(xO(UV(class{constructor(n){this._elementRef=n}})));let pp=(()=>{class n extends XW{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of JW)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(rO),l.Y36(Iu,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&l.Gf(DI,5),2&t){let i;l.iGM(i=l.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(l.uIk("disabled",r.disabled||null),l.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[l.qOj],attrs:ZV,ngContentSelectors:QV,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(l.F$t(),l.TgZ(0,"span",0),l.Hsn(1),l.qZA(),l._UZ(2,"span",1)(3,"span",2)),2&t&&(l.xp6(2),l.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),l.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[DI],styles:[JV],encapsulation:2,changeDetection:0}),n})(),e8=(()=>{class n extends pp{constructor(t,r,i){super(r,t,i)}_haltDisabledEvents(t){this.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(rO),l.Y36(l.SBq),l.Y36(Iu,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(t,r){1&t&&l.NdJ("click",function(s){return r._haltDisabledEvents(s)}),2&t&&(l.uIk("tabindex",r.disabled?-1:r.tabIndex||0)("disabled",r.disabled||null)("aria-disabled",r.disabled.toString()),l.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[l.qOj],attrs:ZV,ngContentSelectors:QV,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(l.F$t(),l.TgZ(0,"span",0),l.Hsn(1),l.qZA(),l._UZ(2,"span",1)(3,"span",2)),2&t&&(l.xp6(2),l.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),l.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[DI],styles:[JV],encapsulation:2,changeDetection:0}),n})(),XV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[WV,Kn],Kn]}),n})();const eB=new Set;let Gv,tB=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):n8}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function t8(n){if(!eB.has(n))try{Gv||(Gv=document.createElement("style"),Gv.setAttribute("type","text/css"),document.head.appendChild(Gv)),Gv.sheet&&(Gv.sheet.insertRule(`@media ${n} {body{ }}`,0),eB.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Tn))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(Tn))},token:n,providedIn:"root"}),n})();function n8(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let nB=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new ot.xQ}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return rB(qT(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=nd(rB(qT(t)).map(c=>this._registerQuery(c).observable));return s=Al(s.pipe(di(1)),s.pipe(kL(1),eI(0))),s.pipe((0,ze.U)(c=>{const h={matches:!1,breakpoints:{}};return c.forEach(({matches:g,query:y})=>{h.matches=h.matches||g,h.breakpoints[y]=g}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new mn.y(c=>{const h=g=>this._zone.run(()=>c.next(g));return r.addListener(h),()=>{r.removeListener(h)}}).pipe(lr(r),(0,ze.U)(({matches:c})=>({query:t,matches:c})),Mr(this._destroySubject)),mql:r};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(tB),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(tB),l.LFG(l.R0b))},token:n,providedIn:"root"}),n})();function rB(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function i8(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",1)(1,"button",2),l.NdJ("click",function(){return l.CHM(t),l.oxw().action()}),l._uU(2),l.qZA()()}if(2&n){const t=l.oxw();l.xp6(2),l.Oqu(t.data.action)}}function s8(n,e){}const iB=new l.OlP("MatSnackBarData");class TI{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const o8=Math.pow(2,31)-1;class FO{constructor(e,t){this._overlayRef=t,this._afterDismissed=new ot.xQ,this._afterOpened=new ot.xQ,this._onAction=new ot.xQ,this._dismissedByAction=!1,this.containerInstance=e,this.onAction().subscribe(()=>this.dismiss()),e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,o8))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let a8=(()=>{class n{constructor(t,r){this.snackBarRef=t,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(FO),l.Y36(iB))},n.\u0275cmp=l.Xpm({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,r){1&t&&(l.TgZ(0,"span"),l._uU(1),l.qZA(),l.YNc(2,i8,3,1,"div",0)),2&t&&(l.xp6(1),l.Oqu(r.data.message),l.xp6(1),l.Q6J("ngIf",r.hasAction))},directives:[sr,pp],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),n})();const l8={snackBarState:rI("state",[Bv("void, hidden",dc({transform:"scale(0.8)",opacity:0})),Bv("visible",dc({transform:"scale(1)",opacity:1})),Uv("* => visible",FE("150ms cubic-bezier(0, 0, 0.2, 1)")),Uv("* => void, * => hidden",FE("75ms cubic-bezier(0.4, 0.0, 1, 1)",dc({opacity:0})))])};let c8=(()=>{class n extends Yk{constructor(t,r,i,s,c){super(),this._ngZone=t,this._elementRef=r,this._changeDetectorRef=i,this._platform=s,this.snackBarConfig=c,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new ot.xQ,this._onExit=new ot.xQ,this._onEnter=new ot.xQ,this._animationState="void",this.attachDomPortal=h=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(h)),this._live="assertive"!==c.politeness||c.announcementMessage?"off"===c.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(t)}onAnimationEnd(t){const{fromState:r,toState:i}=t;if(("void"===i&&"void"!==r||"hidden"===i)&&this._completeExit(),"visible"===i){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(di(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const t=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(i=>t.classList.add(i)):t.classList.add(r)),"center"===this.snackBarConfig.horizontalPosition&&t.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&t.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&r){let i=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(i=document.activeElement),t.removeAttribute("aria-hidden"),r.appendChild(t),null==i||i.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.R0b),l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(Tn),l.Y36(TI))},n.\u0275cmp=l.Xpm({type:n,selectors:[["snack-bar-container"]],viewQuery:function(t,r){if(1&t&&l.Gf(XT,7),2&t){let i;l.iGM(i=l.CRH())&&(r._portalOutlet=i.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,r){1&t&&l.WFA("@state.done",function(s){return r.onAnimationEnd(s)}),2&t&&l.d8E("@state",r._animationState)},features:[l.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.YNc(1,s8,0,0,"ng-template",1),l.qZA(),l._UZ(2,"div")),2&t&&(l.xp6(2),l.uIk("aria-live",r._live)("role",r._role))},directives:[XT],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[l8.snackBarState]}}),n})(),sB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[RL,mL,oo,XV,Kn],Kn]}),n})();const oB=new l.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function u8(){return new TI}});let LO=(()=>{class n{constructor(t,r,i,s,c,h){this._overlay=t,this._live=r,this._injector=i,this._breakpointObserver=s,this._parentSnackBar=c,this._defaultConfig=h,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=a8,this.snackBarContainerComponent=c8,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,r){return this._attach(t,r)}openFromTemplate(t,r){return this._attach(t,r)}open(t,r="",i){const s=Object.assign(Object.assign({},this._defaultConfig),i);return s.data={message:t,action:r},s.announcementMessage===t&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,r){const s=l.zs3.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:TI,useValue:r}]}),c=new Wk(this.snackBarContainerComponent,r.viewContainerRef,s),h=t.attach(c);return h.instance.snackBarConfig=r,h.instance}_attach(t,r){const i=Object.assign(Object.assign(Object.assign({},new TI),this._defaultConfig),r),s=this._createOverlay(i),c=this._attachSnackBarContainer(s,i),h=new FO(c,s);if(t instanceof l.Rgc){const g=new JT(t,null,{$implicit:i.data,snackBarRef:h});h.instance=c.attachTemplatePortal(g)}else{const g=this._createInjector(i,h),y=new Wk(t,void 0,g),E=c.attachComponentPortal(y);h.instance=E.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Mr(s.detachments())).subscribe(g=>{const y=s.overlayElement.classList;g.matches?y.add(this.handsetCssClass):y.remove(this.handsetCssClass)}),i.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(h,i),this._openedSnackBarRef=h,this._openedSnackBarRef}_animateSnackBar(t,r){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),r.duration&&r.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(r.duration))}_createOverlay(t){const r=new eO;r.direction=t.direction;let i=this._overlay.position().global();const s="rtl"===t.direction,c="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!s||"end"===t.horizontalPosition&&s,h=!c&&"center"!==t.horizontalPosition;return c?i.left("0"):h?i.right("0"):i.centerHorizontally(),"top"===t.verticalPosition?i.top("0"):i.bottom("0"),r.positionStrategy=i,this._overlay.create(r)}_createInjector(t,r){return l.zs3.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:FO,useValue:r},{provide:iB,useValue:t.data}]})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Lv),l.LFG(tI),l.LFG(l.zs3),l.LFG(nB),l.LFG(n,12),l.LFG(oB))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(Lv),l.LFG(tI),l.LFG(l.gxx),l.LFG(nB),l.LFG(n,12),l.LFG(oB))},token:n,providedIn:sB}),n})(),$v=(()=>{class n{constructor(t,r,i,s,c){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=s,this._snackBar=c,this.afAuth.authState.subscribe(h=>{h?(this.userData=h,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SendForgotEmail(t){this.afAuth.sendPasswordResetEmail(t).then(()=>{this._snackBar.open("Password reset email sent","OK")},r=>{this._snackBar.open(r.message)})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.ngZone.run(()=>{this.router.navigate(["Home"])}),this.SetUserData(i.user),this._snackBar.open("Successfully logged in!","OK")},i=>{this._snackBar.open(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user),this._snackBar.open("Successfully registered!","OK")}).catch(i=>{this._snackBar.open(i.message)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("user"))}get isVerified(){return!1!==JSON.parse(localStorage.getItem("user")).emailVerified}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification())}Logout(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["Login"])})}verifyEmail(){this.isLoggedIn&&(this.isVerified||this._snackBar.open("You've not verified your email yet","RESEND").onAction().subscribe(()=>{this.SendVerificationMail()},t=>{this._snackBar.open(t.message,"ok")}))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Vk),l.LFG(Pv),l.LFG(Ut),l.LFG(l.R0b),l.LFG(LO))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const d8=["*",[["mat-card-footer"]]],h8=["*","mat-card-footer"];let VO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),n})(),BO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),UO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),n})(),HO=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,r){2&t&&l.ekj("mat-card-actions-align-end","end"===r.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),n})(),_8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-card-footer"]],hostAttrs:[1,"mat-card-footer"]}),n})(),jO=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Iu,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,r){2&t&&l.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:h8,decls:2,vars:0,template:function(t,r){1&t&&(l.F$t(d8),l.Hsn(0),l.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),y8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Kn],Kn]}),n})();const v8=["underline"],b8=["connectionContainer"],w8=["inputContainer"],C8=["label"];function E8(n,e){1&n&&(l.ynx(0),l.TgZ(1,"div",14),l._UZ(2,"div",15)(3,"div",16)(4,"div",17),l.qZA(),l.TgZ(5,"div",18),l._UZ(6,"div",15)(7,"div",16)(8,"div",17),l.qZA(),l.BQk())}function S8(n,e){1&n&&(l.TgZ(0,"div",19),l.Hsn(1,1),l.qZA())}function D8(n,e){if(1&n&&(l.ynx(0),l.Hsn(1,2),l.TgZ(2,"span"),l._uU(3),l.qZA(),l.BQk()),2&n){const t=l.oxw(2);l.xp6(3),l.Oqu(t._control.placeholder)}}function T8(n,e){1&n&&l.Hsn(0,3,["*ngSwitchCase","true"])}function I8(n,e){1&n&&(l.TgZ(0,"span",23),l._uU(1," *"),l.qZA())}function A8(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"label",20,21),l.NdJ("cdkObserveContent",function(){return l.CHM(t),l.oxw().updateOutlineGap()}),l.YNc(2,D8,4,1,"ng-container",12),l.YNc(3,T8,1,0,"ng-content",12),l.YNc(4,I8,2,0,"span",22),l.qZA()}if(2&n){const t=l.oxw();l.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),l.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),l.uIk("for",t._control.id)("aria-owns",t._control.id),l.xp6(2),l.Q6J("ngSwitchCase",!1),l.xp6(1),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function M8(n,e){1&n&&(l.TgZ(0,"div",24),l.Hsn(1,4),l.qZA())}function x8(n,e){if(1&n&&(l.TgZ(0,"div",25,26),l._UZ(2,"span",27),l.qZA()),2&n){const t=l.oxw();l.xp6(2),l.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function R8(n,e){if(1&n&&(l.TgZ(0,"div"),l.Hsn(1,5),l.qZA()),2&n){const t=l.oxw();l.Q6J("@transitionMessages",t._subscriptAnimationState)}}function k8(n,e){if(1&n&&(l.TgZ(0,"div",31),l._uU(1),l.qZA()),2&n){const t=l.oxw(2);l.Q6J("id",t._hintLabelId),l.xp6(1),l.Oqu(t.hintLabel)}}function O8(n,e){if(1&n&&(l.TgZ(0,"div",28),l.YNc(1,k8,2,2,"div",29),l.Hsn(2,6),l._UZ(3,"div",30),l.Hsn(4,7),l.qZA()),2&n){const t=l.oxw();l.Q6J("@transitionMessages",t._subscriptAnimationState),l.xp6(1),l.Q6J("ngIf",t.hintLabel)}}const N8=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],P8=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let F8=0;const aB=new l.OlP("MatError");let GO=(()=>{class n{constructor(t,r){this.id="mat-error-"+F8++,t||r.nativeElement.setAttribute("aria-live","polite")}}return n.\u0275fac=function(t){return new(t||n)(l.$8M("aria-live"),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["mat-error"]],hostAttrs:["aria-atomic","true",1,"mat-error"],hostVars:1,hostBindings:function(t,r){2&t&&l.uIk("id",r.id)},inputs:{id:"id"},features:[l._Bn([{provide:aB,useExisting:n}])]}),n})();const L8={transitionMessages:rI("transitionMessages",[Bv("enter",dc({opacity:1,transform:"translateY(0%)"})),Uv("void => enter",[dc({opacity:0,transform:"translateY(-5px)"}),FE("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let II=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n}),n})();const lB=new l.OlP("MatHint");let zv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-label"]]}),n})(),B8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const cB=new l.OlP("MatPrefix"),uB=new l.OlP("MatSuffix");let dB=0;const H8=EI(class{constructor(n){this._elementRef=n}},"primary"),j8=new l.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),$O=new l.OlP("MatFormField");let AI=(()=>{class n extends H8{constructor(t,r,i,s,c,h,g,y){super(t),this._changeDetectorRef=r,this._dir=s,this._defaults=c,this._platform=h,this._ngZone=g,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new ot.xQ,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+dB++,this._labelId="mat-form-field-label-"+dB++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==y,this.appearance=c&&c.appearance?c.appearance:"legacy",this._hideRequiredMarker=!(!c||null==c.hideRequiredMarker)&&c.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Yn(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(lr(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Mr(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Mr(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,dp.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(lr(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(lr(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Mr(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,xE(this._label.nativeElement,"transitionend").pipe(di(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,i=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&t&&t.children.length&&t.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let r=0,i=0;const s=this._connectionContainerRef.nativeElement,c=s.querySelectorAll(".mat-form-field-outline-start"),h=s.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const g=s.getBoundingClientRect();if(0===g.width&&0===g.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const y=this._getStartEnd(g),E=t.children,T=this._getStartEnd(E[0].getBoundingClientRect());let x=0;for(let N=0;N<E.length;N++)x+=E[N].offsetWidth;r=Math.abs(T-y)-5,i=x>0?.75*x+10:0}for(let g=0;g<c.length;g++)c[g].style.width=`${r}px`;for(let g=0;g<h.length;g++)h[g].style.width=`${i}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(l.SBq),l.Y36(mh,8),l.Y36(j8,8),l.Y36(Tn),l.Y36(l.R0b),l.Y36(Iu,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(l.Suo(i,II,5),l.Suo(i,II,7),l.Suo(i,zv,5),l.Suo(i,zv,7),l.Suo(i,B8,5),l.Suo(i,aB,5),l.Suo(i,lB,5),l.Suo(i,cB,5),l.Suo(i,uB,5)),2&t){let s;l.iGM(s=l.CRH())&&(r._controlNonStatic=s.first),l.iGM(s=l.CRH())&&(r._controlStatic=s.first),l.iGM(s=l.CRH())&&(r._labelChildNonStatic=s.first),l.iGM(s=l.CRH())&&(r._labelChildStatic=s.first),l.iGM(s=l.CRH())&&(r._placeholderChild=s.first),l.iGM(s=l.CRH())&&(r._errorChildren=s),l.iGM(s=l.CRH())&&(r._hintChildren=s),l.iGM(s=l.CRH())&&(r._prefixChildren=s),l.iGM(s=l.CRH())&&(r._suffixChildren=s)}},viewQuery:function(t,r){if(1&t&&(l.Gf(v8,5),l.Gf(b8,7),l.Gf(w8,5),l.Gf(C8,5)),2&t){let i;l.iGM(i=l.CRH())&&(r.underlineRef=i.first),l.iGM(i=l.CRH())&&(r._connectionContainerRef=i.first),l.iGM(i=l.CRH())&&(r._inputContainerRef=i.first),l.iGM(i=l.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&l.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[l._Bn([{provide:$O,useExisting:n}]),l.qOj],ngContentSelectors:P8,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(l.F$t(N8),l.TgZ(0,"div",0)(1,"div",1,2),l.NdJ("click",function(s){return r._control.onContainerClick&&r._control.onContainerClick(s)}),l.YNc(3,E8,9,0,"ng-container",3),l.YNc(4,S8,2,0,"div",4),l.TgZ(5,"div",5,6),l.Hsn(7),l.TgZ(8,"span",7),l.YNc(9,A8,5,16,"label",8),l.qZA()(),l.YNc(10,M8,2,0,"div",9),l.qZA(),l.YNc(11,x8,3,4,"div",10),l.TgZ(12,"div",11),l.YNc(13,R8,2,1,"div",12),l.YNc(14,O8,5,2,"div",13),l.qZA()()),2&t&&(l.xp6(3),l.Q6J("ngIf","outline"==r.appearance),l.xp6(1),l.Q6J("ngIf",r._prefixChildren.length),l.xp6(5),l.Q6J("ngIf",r._hasFloatingLabel()),l.xp6(1),l.Q6J("ngIf",r._suffixChildren.length),l.xp6(1),l.Q6J("ngIf","outline"!=r.appearance),l.xp6(1),l.Q6J("ngSwitch",r._getDisplayedMessages()),l.xp6(1),l.Q6J("ngSwitchCase","error"),l.xp6(1),l.Q6J("ngSwitchCase","hint"))},directives:[sr,Wr,qz,Yr],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[L8.transitionMessages]},changeDetection:0}),n})(),MI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[oo,Kn,NL],Kn]}),n})();const fB=YT({passive:!0});let pB=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Ii.E;const r=gh(t),i=this._monitoredElements.get(r);if(i)return i.subject;const s=new ot.xQ,c="cdk-text-field-autofilled",h=g=>{"cdk-text-field-autofill-start"!==g.animationName||r.classList.contains(c)?"cdk-text-field-autofill-end"===g.animationName&&r.classList.contains(c)&&(r.classList.remove(c),this._ngZone.run(()=>s.next({target:g.target,isAutofilled:!1}))):(r.classList.add(c),this._ngZone.run(()=>s.next({target:g.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",h,fB),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",h,fB)}}),s}stopMonitoring(t){const r=gh(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Tn),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(Tn),l.LFG(l.R0b))},token:n,providedIn:"root"}),n})(),gB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[RE]]}),n})();const $8=new l.OlP("MAT_INPUT_VALUE_ACCESSOR"),z8=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let q8=0;const W8=HV(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r}});let xI=(()=>{class n extends W8{constructor(t,r,i,s,c,h,g,y,E,T){super(h,s,c,i),this._elementRef=t,this._platform=r,this._autofillMonitor=y,this._formField=T,this._uid="mat-input-"+q8++,this.focused=!1,this.stateChanges=new ot.xQ,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(U=>aL().has(U));const x=this._elementRef.nativeElement,N=x.nodeName.toLowerCase();this._inputValueAccessor=g||x,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&E.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",U=>{const K=U.target;!K.value&&0===K.selectionStart&&0===K.selectionEnd&&(K.setSelectionRange(1,1),K.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===N,this._isTextarea="textarea"===N,this._isInFormField=!!T,this._isNativeSelect&&(this.controlType=x.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Yn(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required}set required(t){this._required=Yn(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&aL().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Yn(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,r;const i=(null===(r=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===r?void 0:r.call(t))?null:this.placeholder;if(i!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=i,i?s.setAttribute("placeholder",i):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){z8.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(Tn),l.Y36(jl,10),l.Y36(bg,8),l.Y36($a,8),l.Y36(RO),l.Y36($8,10),l.Y36(pB),l.Y36(l.R0b),l.Y36($O,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:11,hostBindings:function(t,r){1&t&&l.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(l.Ikx("disabled",r.disabled)("required",r.required),l.uIk("id",r.id)("data-placeholder",r.placeholder)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),l.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[l._Bn([{provide:II,useExisting:n}]),l.qOj,l.TTD]}),n})(),Y8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[RO],imports:[[gB,MI,Kn],gB,MI]}),n})();function K8(n,e){if(1&n&&(l.TgZ(0,"mat-error"),l._uU(1),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Oqu(t.getEmailError())}}function Z8(n,e){1&n&&(l.TgZ(0,"mat-error"),l._uU(1,"Password is required"),l.qZA())}function Q8(n,e){1&n&&(l.TgZ(0,"mat-error"),l._uU(1,"Password must be 8 characters long"),l.qZA())}const mB=function(n){return{"is-danger":n}};let J8=(()=>{class n{constructor(t){this.authService=t,this.loginForm=new ql({email:new wo("",[bo.email,bo.required]),password:new wo("",[bo.required,bo.minLength(8)])})}ngOnInit(){}getEmailError(){return this.loginForm.controls.email.hasError("required")?"Email is required":this.loginForm.controls.email.hasError("email")?"Not a valid email":""}Login(){this.authService.SignIn(this.loginForm.value.email,this.loginForm.value.password)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36($v))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-login"]],decls:27,vars:11,consts:[[2,"width","50%","max-width","600px","margin","auto","margin-top","10px"],["action","",3,"formGroup"],["appearance","fill"],["type","email","matInput","","placeholder","Ex. John@gmail.com","formControlName","email","required","",3,"ngClass"],[4,"ngIf"],["type","password","matInput","","formControlName","password","required","",3,"ngClass"],["routerLink","/Forgot",2,"margin-left","20px"],["align","end"],["mat-raised-button","","color","primary",3,"disabled","keydown.enter","click"],["mat-raised-button","","color","accent","routerLink","/Register"]],template:function(t,r){1&t&&(l.TgZ(0,"mat-card",0)(1,"mat-card-title"),l._uU(2,"Login"),l.qZA(),l.TgZ(3,"mat-card-subtitle"),l._uU(4,"This form is to login to the website"),l.qZA(),l.TgZ(5,"mat-card-content")(6,"form",1)(7,"mat-form-field",2)(8,"mat-label"),l._uU(9,"Email"),l.qZA(),l._UZ(10,"input",3),l.YNc(11,K8,2,1,"mat-error",4),l.qZA(),l._UZ(12,"br"),l.TgZ(13,"mat-form-field",2)(14,"mat-label"),l._uU(15,"Password"),l.qZA(),l._UZ(16,"input",5),l.YNc(17,Z8,2,0,"mat-error",4),l.YNc(18,Q8,2,0,"mat-error",4),l.qZA()(),l.TgZ(19,"mat-card-footer")(20,"a",6),l._uU(21,"Forgot your password?"),l.qZA()()(),l.TgZ(22,"mat-card-actions",7)(23,"button",8),l.NdJ("keydown.enter",function(){return r.Login()})("click",function(){return r.Login()}),l._uU(24,"LOGIN"),l.qZA(),l.TgZ(25,"button",9),l._uU(26,"REGISTER"),l.qZA()()()),2&t&&(l.xp6(6),l.Q6J("formGroup",r.loginForm),l.xp6(4),l.Q6J("ngClass",l.VKq(7,mB,r.loginForm.controls.email.invalid&&(r.loginForm.controls.email.dirty||r.loginForm.controls.email.touched&&(null==r.loginForm.controls.email.errors?null:r.loginForm.controls.email.errors.required)))),l.xp6(1),l.Q6J("ngIf",r.loginForm.controls.email.invalid),l.xp6(5),l.Q6J("ngClass",l.VKq(9,mB,r.loginForm.controls.password.invalid&&(r.loginForm.controls.password.dirty||r.loginForm.controls.password.touched&&(null==r.loginForm.controls.password.errors?null:r.loginForm.controls.password.errors.required)))),l.xp6(1),l.Q6J("ngIf",null==r.loginForm.controls.password.errors?null:r.loginForm.controls.password.errors.required),l.xp6(1),l.Q6J("ngIf",r.loginForm.controls.password.value.length<8),l.xp6(5),l.Q6J("disabled",r.loginForm.invalid))},directives:[jO,BO,UO,VO,Ad,q_,$a,AI,zv,xI,ou,z_,Md,ki,ji,sr,GO,_8,ea,HO,pp,Ba],styles:[""]}),n})(),X8=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-logout"]],decls:2,vars:0,template:function(t,r){1&t&&(l.TgZ(0,"p"),l._uU(1,"logout works!"),l.qZA())},styles:[""]}),n})();function eY(n,e){if(1&n&&(l.TgZ(0,"mat-error"),l._uU(1),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Oqu(t.getEmailError())}}function tY(n,e){1&n&&(l.TgZ(0,"mat-error"),l._uU(1,"Password is required"),l.qZA())}function nY(n,e){1&n&&(l.TgZ(0,"mat-error"),l._uU(1,"Password must be 8 characters long"),l.qZA())}const _B=function(n){return{"is-danger":n}};let rY=(()=>{class n{constructor(t,r){this.fb=t,this.authService=r,this.registerForm=new ql({email:new wo("",[bo.email,bo.required]),password:new wo("",[bo.required,bo.minLength(8)])})}ngOnInit(){}getEmailError(){return this.registerForm.controls.email.hasError("required")?"Email is required":this.registerForm.controls.email.hasError("email")?"Not a valid email":""}Register(){this.authService.SignUp(this.registerForm.value.email,this.registerForm.value.password)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(hw),l.Y36($v))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-register"]],decls:24,vars:11,consts:[[2,"width","50%","max-width","600px","margin","auto","margin-top","10px"],["action","",3,"formGroup"],["appearance","fill"],["type","email","matInput","","placeholder","Ex. John@gmail.com","formControlName","email","required","",3,"ngClass"],[4,"ngIf"],["type","password","matInput","","formControlName","password","required","",3,"ngClass"],["align","end"],["mat-raised-button","","color","primary",3,"disabled","keydown.enter","click"],["mat-raised-button","","color","accent","routerLink","/Login"]],template:function(t,r){1&t&&(l.TgZ(0,"mat-card",0)(1,"mat-card-title"),l._uU(2,"Register"),l.qZA(),l.TgZ(3,"mat-card-subtitle"),l._uU(4,"This form is to register to the website"),l.qZA(),l.TgZ(5,"mat-card-content")(6,"form",1)(7,"mat-form-field",2)(8,"mat-label"),l._uU(9,"Email"),l.qZA(),l._UZ(10,"input",3),l.YNc(11,eY,2,1,"mat-error",4),l.qZA(),l._UZ(12,"br"),l.TgZ(13,"mat-form-field",2)(14,"mat-label"),l._uU(15,"Password"),l.qZA(),l._UZ(16,"input",5),l.YNc(17,tY,2,0,"mat-error",4),l.YNc(18,nY,2,0,"mat-error",4),l.qZA()()(),l.TgZ(19,"mat-card-actions",6)(20,"button",7),l.NdJ("keydown.enter",function(){return r.Register()})("click",function(){return r.Register()}),l._uU(21,"REGISTER"),l.qZA(),l.TgZ(22,"button",8),l._uU(23,"LOGIN"),l.qZA()()()),2&t&&(l.xp6(6),l.Q6J("formGroup",r.registerForm),l.xp6(4),l.Q6J("ngClass",l.VKq(7,_B,r.registerForm.controls.email.invalid&&(r.registerForm.controls.email.dirty||r.registerForm.controls.email.touched&&(null==r.registerForm.controls.email.errors?null:r.registerForm.controls.email.errors.required)))),l.xp6(1),l.Q6J("ngIf",r.registerForm.controls.email.invalid),l.xp6(5),l.Q6J("ngClass",l.VKq(9,_B,r.registerForm.controls.password.invalid&&(r.registerForm.controls.password.dirty||r.registerForm.controls.password.touched&&(null==r.registerForm.controls.password.errors?null:r.registerForm.controls.password.errors.required)))),l.xp6(1),l.Q6J("ngIf",null==r.registerForm.controls.password.errors?null:r.registerForm.controls.password.errors.required),l.xp6(1),l.Q6J("ngIf",r.registerForm.controls.password.value.length<8),l.xp6(2),l.Q6J("disabled",r.registerForm.invalid))},directives:[jO,BO,UO,VO,Ad,q_,$a,AI,zv,xI,ou,z_,Md,ki,ji,sr,GO,HO,pp,Ba],styles:[""]}),n})();function iY(n,e){if(1&n&&(l.TgZ(0,"mat-error"),l._uU(1),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Oqu(t.getEmailError())}}const sY=function(n){return{"is-danger":n}};let oY=(()=>{class n{constructor(t){this.authService=t,this.forgotForm=new ql({email:new wo("",[bo.email,bo.required])})}ngOnInit(){}getEmailError(){return this.forgotForm.controls.email.hasError("required")?"Email is required":this.forgotForm.controls.email.hasError("email")?"Not a valid email":""}sendForgotEmail(){this.authService.SendForgotEmail(this.forgotForm.value.email)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36($v))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-forgot"]],decls:15,vars:6,consts:[[2,"width","50%","max-width","600px","margin","auto","margin-top","10px"],["action","",3,"formGroup"],["appearance","fill"],["type","email","matInput","","placeholder","Ex. John@gmail.com","formControlName","email","required","",3,"ngClass"],[4,"ngIf"],["align","end"],["mat-raised-button","","color","primary",3,"disabled","keydown.enter","click"]],template:function(t,r){1&t&&(l.TgZ(0,"mat-card",0)(1,"mat-card-title"),l._uU(2,"Forgot"),l.qZA(),l.TgZ(3,"mat-card-subtitle"),l._uU(4,"This form is to reset your password"),l.qZA(),l.TgZ(5,"mat-card-content")(6,"form",1)(7,"mat-form-field",2)(8,"mat-label"),l._uU(9,"Email"),l.qZA(),l._UZ(10,"input",3),l.YNc(11,iY,2,1,"mat-error",4),l.qZA()()(),l.TgZ(12,"mat-card-actions",5)(13,"button",6),l.NdJ("keydown.enter",function(){return r.sendForgotEmail()})("click",function(){return r.sendForgotEmail()}),l._uU(14,"SEND"),l.qZA()()()),2&t&&(l.xp6(6),l.Q6J("formGroup",r.forgotForm),l.xp6(4),l.Q6J("ngClass",l.VKq(4,sY,r.forgotForm.controls.email.invalid&&(r.forgotForm.controls.email.dirty||r.forgotForm.controls.email.touched&&(null==r.forgotForm.controls.email.errors?null:r.forgotForm.controls.email.errors.required)))),l.xp6(1),l.Q6J("ngIf",r.forgotForm.controls.email.invalid),l.xp6(2),l.Q6J("disabled",r.forgotForm.invalid))},directives:[jO,BO,UO,VO,Ad,q_,$a,AI,zv,xI,ou,z_,Md,ki,ji,sr,GO,HO,pp],styles:[""]}),n})(),yB=(()=>{class n{constructor(t,r,i,s,c,h){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=s,this._snackBar=c,this.authService=h}addInvoiceListToUser(t){let r=this.afs.createId();return this.afs.doc(`users/${t.uid}/invoiceLists/${r}`).set({uid:r,name:"New list"},{merge:!0})}addInvoiceToInvoiceList(t,r,i){let s=this.afs.createId();const c=this.afs.doc(`users/${t.uid}/invoiceLists/${r}/invoices/${s}`);return i.uid=s,c.set(i,{merge:!0})}getAllInvoiceListsByUser(t){return this.afs.collection(`users/${t.uid}/invoiceLists`).valueChanges()}getAllInvoices(t,r){return this.afs.collection(`users/${t.uid}/invoiceLists/${r}/invoices`).valueChanges()}deleteInvoiceList(t,r){return this.afs.collection("users").doc(t.uid).collection("invoiceLists").doc(r).delete()}deleteInvoice(t,r,i){return this.afs.collection("users").doc(t.uid).collection("invoiceLists").doc(r).collection("invoices").doc(i).delete()}updateInvoiceListName(t,r,i){return this.afs.doc(`users/${t.uid}/invoiceLists/${r}`).set({name:i},{merge:!0})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Vk),l.LFG(Pv),l.LFG(Ut),l.LFG(l.R0b),l.LFG(LO),l.LFG($v))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function aY(n,e){if(1&n&&(l.O4$(),l._UZ(0,"circle",3)),2&n){const t=l.oxw();l.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),l.uIk("r",t._getCircleRadius())}}function lY(n,e){if(1&n&&(l.O4$(),l._UZ(0,"circle",3)),2&n){const t=l.oxw();l.Udp("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),l.uIk("r",t._getCircleRadius())}}function cY(n,e){if(1&n&&(l.O4$(),l._UZ(0,"circle",3)),2&n){const t=l.oxw();l.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),l.uIk("r",t._getCircleRadius())}}function uY(n,e){if(1&n&&(l.O4$(),l._UZ(0,"circle",3)),2&n){const t=l.oxw();l.Udp("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),l.uIk("r",t._getCircleRadius())}}const vB=".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor;stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n",hY=EI(class{constructor(n){this._elementRef=n}},"primary"),bB=new l.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function fY(){return{diameter:100}}});class yh extends hY{constructor(e,t,r,i,s){super(e),this._document=r,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const c=yh._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),c.has(r.head)||c.set(r.head,new Set([100])),this._fallbackAnimation=t.EDGE||t.TRIDENT,this._noopAnimations="NoopAnimations"===i&&!!s&&!s._forceAnimations,s&&(s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth))}get diameter(){return this._diameter}set diameter(e){this._diameter=qs(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=qs(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,qs(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=cL(e)||this._document.head,this._attachStyleNode(),e.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,r=yh._diameters;let i=r.get(e);if(!i||!i.has(t)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),e.appendChild(s),i||(i=new Set,r.set(e,i)),i.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}yh.\u0275fac=function(e){return new(e||yh)(l.Y36(l.SBq),l.Y36(Tn),l.Y36(ne,8),l.Y36(Iu,8),l.Y36(bB))},yh.\u0275cmp=l.Xpm({type:yh,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(l.uIk("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),l.Udp("width",t.diameter,"px")("height",t.diameter,"px"),l.ekj("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[l.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(l.O4$(),l.TgZ(0,"svg",0),l.YNc(1,aY,1,9,"circle",1),l.YNc(2,lY,1,7,"circle",2),l.qZA()),2&e&&(l.Udp("width",t.diameter,"px")("height",t.diameter,"px"),l.Q6J("ngSwitch","indeterminate"===t.mode),l.uIk("viewBox",t._getViewBox()),l.xp6(1),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngSwitchCase",!1))},directives:[Wr,Yr],styles:[vB],encapsulation:2,changeDetection:0}),yh._diameters=new WeakMap;let gY=(()=>{class n extends yh{constructor(t,r,i,s,c){super(t,r,i,s,c),this.mode="indeterminate"}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(Tn),l.Y36(ne,8),l.Y36(Iu,8),l.Y36(bB))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(t,r){2&t&&(l.Udp("width",r.diameter,"px")("height",r.diameter,"px"),l.ekj("_mat-animation-noopable",r._noopAnimations))},inputs:{color:"color"},features:[l.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,r){1&t&&(l.O4$(),l.TgZ(0,"svg",0),l.YNc(1,cY,1,9,"circle",1),l.YNc(2,uY,1,7,"circle",2),l.qZA()),2&t&&(l.Udp("width",r.diameter,"px")("height",r.diameter,"px"),l.Q6J("ngSwitch","indeterminate"===r.mode),l.uIk("viewBox",r._getViewBox()),l.xp6(1),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngSwitchCase",!1))},directives:[Wr,Yr],styles:[vB],encapsulation:2,changeDetection:0}),n})(),mY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Kn,oo],Kn]}),n})(),_Y=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=Yn(t)}get inset(){return this._inset}set inset(t){this._inset=Yn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,r){2&t&&(l.uIk("aria-orientation",r.vertical?"vertical":"horizontal"),l.ekj("mat-divider-vertical",r.vertical)("mat-divider-horizontal",!r.vertical)("mat-divider-inset",r.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,r){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),n})(),yY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Kn],Kn]}),n})();var wB=B(2474);class vY{}class gp{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof gp?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new gp;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof gp?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let c=this.headers.get(t);if(!c)return;c=c.filter(h=>-1===s.indexOf(h)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class bY{encodeKey(e){return CB(e)}encodeValue(e){return CB(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const CY=/%(\d[a-f0-9])/gi,EY={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function CB(n){return encodeURIComponent(n).replace(CY,(e,t)=>{var r;return null!==(r=EY[t])&&void 0!==r?r:e})}function EB(n){return`${n}`}class mp{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new bY,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function wY(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[c,h]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],g=t.get(c)||[];g.push(h),t.set(c,g)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new mp({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(EB(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(EB(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class SY{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function SB(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function DB(n){return"undefined"!=typeof Blob&&n instanceof Blob}function TB(n){return"undefined"!=typeof FormData&&n instanceof FormData}class HE{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function DY(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new gp),this.context||(this.context=new SY),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+c}}else this.params=new mp,this.urlWithParams=t}serializeBody(){return null===this.body?null:SB(this.body)||DB(this.body)||TB(this.body)||function TY(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof mp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||TB(this.body)?null:DB(this.body)?this.body.type||null:SB(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof mp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,s=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,h=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,E=e.params||this.params;const T=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((x,N)=>x.set(N,e.setHeaders[N]),y)),e.setParams&&(E=Object.keys(e.setParams).reduce((x,N)=>x.set(N,e.setParams[N]),E)),new HE(r,i,c,{params:E,headers:y,context:T,reportProgress:g,responseType:s,withCredentials:h})}}var ds=(()=>((ds=ds||{})[ds.Sent=0]="Sent",ds[ds.UploadProgress=1]="UploadProgress",ds[ds.ResponseHeader=2]="ResponseHeader",ds[ds.DownloadProgress=3]="DownloadProgress",ds[ds.Response=4]="Response",ds[ds.User=5]="User",ds))();class qO extends class IY{constructor(e,t=200,r="OK"){this.headers=e.headers||new gp,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=ds.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new qO({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function WO(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let YO=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof HE)s=t;else{let g,y;g=i.headers instanceof gp?i.headers:new gp(i.headers),i.params&&(y=i.params instanceof mp?i.params:new mp({fromObject:i.params})),s=new HE(t,r,void 0!==i.body?i.body:null,{headers:g,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=(0,Le.of)(s).pipe(Ia(g=>this.handler.handle(g)));if(t instanceof HE||"events"===i.observe)return c;const h=c.pipe(qn(g=>g instanceof qO));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,ze.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return h.pipe((0,ze.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return h.pipe((0,ze.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return h.pipe((0,ze.U)(g=>g.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new mp).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,WO(i,r))}post(t,r,i={}){return this.request("POST",t,WO(i,r))}put(t,r,i={}){return this.request("PUT",t,WO(i,r))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(vY))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const MY=["*"];function AB(n){return Error(`Unable to find icon with the name "${n}"`)}function MB(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function xB(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Lm{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let RI=(()=>{class n{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new Lm(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const c=this._sanitizer.sanitize(l.q3G.HTML,i);if(!c)throw xB(i);return this._addSvgIconConfig(t,r,new Lm("",c,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new Lm(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(l.q3G.HTML,r);if(!s)throw xB(r);return this._addSvgIconSetConfig(t,new Lm("",s,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(l.q3G.RESOURCE_URL,t);if(!r)throw MB(t);const i=this._cachedIconsByUrl.get(r);return i?(0,Le.of)(kI(i)):this._loadSvgIconFromConfig(new Lm(t,null)).pipe((0,tn.b)(s=>this._cachedIconsByUrl.set(r,s)),(0,ze.U)(s=>kI(s)))}getNamedSvgIcon(t,r=""){const i=RB(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const c=this._iconSetConfigs.get(r);return c?this._getSvgFromIconSetConfigs(t,c):(0,ss._)(AB(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?(0,Le.of)(kI(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,ze.U)(r=>kI(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?(0,Le.of)(i):V0(r.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(Dr(h=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(l.q3G.RESOURCE_URL,c.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(y)),(0,Le.of)(null)})))).pipe((0,ze.U)(()=>{const c=this._extractIconWithNameFromAnySet(t,r);if(!c)throw AB(t);return c}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.indexOf(t)>-1){const c=this._svgElementFromConfig(s),h=this._extractSvgIconFromSet(c,t,s.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,tn.b)(r=>t.svgText=r),(0,ze.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?(0,Le.of)(null):this._fetchIcon(t).pipe((0,tn.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const c=s.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,i);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),i);const h=this._svgElementFromString("<svg></svg>");return h.appendChild(c),this._setSvgAttributes(h,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString("<svg></svg>"),i=t.attributes;for(let s=0;s<i.length;s++){const{name:c,value:h}=i[s];"id"!==c&&r.setAttribute(c,h)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){var r;const{url:i,options:s}=t,c=null!==(r=null==s?void 0:s.withCredentials)&&void 0!==r&&r;if(!this._httpClient)throw function xY(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const h=this._sanitizer.sanitize(l.q3G.RESOURCE_URL,i);if(!h)throw MB(i);const g=this._inProgressUrlFetches.get(h);if(g)return g;const y=this._httpClient.get(h,{responseType:"text",withCredentials:c}).pipe($o(()=>this._inProgressUrlFetches.delete(h)),(0,wB.B)());return this._inProgressUrlFetches.set(h,y),y}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(RB(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return kY(s)?new Lm(s.url,null,s.options):new Lm(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(YO,8),l.LFG(Qr),l.LFG(ne,8),l.LFG(l.qLn))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(YO,8),l.LFG(Qr),l.LFG(ne,8),l.LFG(l.qLn))},token:n,providedIn:"root"}),n})();function kI(n){return n.cloneNode(!0)}function RB(n,e){return n+":"+e}function kY(n){return!(!n.url||!n.options)}const OY=EI(class{constructor(n){this._elementRef=n}}),NY=new l.OlP("mat-icon-location",{providedIn:"root",factory:function PY(){const n=(0,l.f3M)(ne),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),kB=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],FY=n=>`[${n}]`,LY=kB.map(FY).join(", "),VY=/^url\(['"]?#(.*?)['"]?\)$/;let BY=(()=>{class n extends OY{constructor(t,r,i,s,c){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=c,this._inline=!1,this._currentIconFetch=hi.w.EMPTY,i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Yn(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=t.querySelectorAll("style");for(let s=0;s<r.length;s++)r[s].textContent+=" ";const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&t.removeChild(i)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),r&&t.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(c=>{s.setAttribute(c.name,`url('${t}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(LY),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)kB.forEach(c=>{const h=r[s],g=h.getAttribute(c),y=g?g.match(VY):null;if(y){let E=i.get(h);E||(E=[],i.set(h,E)),E.push({name:c,value:y[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(di(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(RI),l.$8M("aria-hidden"),l.Y36(NY),l.Y36(l.qLn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(l.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),l.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[l.qOj],ngContentSelectors:MY,decls:1,vars:0,template:function(t,r){1&t&&(l.F$t(),l.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),UY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Kn],Kn]}),n})();const HY=[[["caption"]],[["colgroup"],["col"]]],jY=["caption","colgroup, col"];function KO(n){return class extends n{constructor(...e){super(...e),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(e){const t=this._sticky;this._sticky=Yn(e),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const e=this._hasStickyChanged;return this._hasStickyChanged=!1,e}resetStickyChanged(){this._hasStickyChanged=!1}}}const qv=new l.OlP("CDK_TABLE");let Wv=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkCellDef",""]]}),n})(),Yv=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),OI=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class qY{}const WY=KO(qY);let vh=(()=>{class n extends WY{constructor(t){super(),this._table=t,this._stickyEnd=!1}get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const r=this._stickyEnd;this._stickyEnd=Yn(t),this._hasStickyChanged=r!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(qv,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(t,r,i){if(1&t&&(l.Suo(i,Wv,5),l.Suo(i,Yv,5),l.Suo(i,OI,5)),2&t){let s;l.iGM(s=l.CRH())&&(r.cell=s.first),l.iGM(s=l.CRH())&&(r.headerCell=s.first),l.iGM(s=l.CRH())&&(r.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[l._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),l.qOj]}),n})();class ZO{constructor(e,t){const r=t.nativeElement.classList;for(const i of e._columnCssClassName)r.add(i)}}let QO=(()=>{class n extends ZO{constructor(t,r){super(t,r)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(vh),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[l.qOj]}),n})(),JO=(()=>{class n extends ZO{constructor(t,r){var i;if(super(t,r),1===(null===(i=t._table)||void 0===i?void 0:i._elementRef.nativeElement.nodeType)){const s=t._table._elementRef.nativeElement.getAttribute("role");r.nativeElement.setAttribute("role","grid"===s||"treegrid"===s?"gridcell":"cell")}}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(vh),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[l.qOj]}),n})();class NB{constructor(){this.tasks=[],this.endTasks=[]}}const XO=new l.OlP("_COALESCED_STYLE_SCHEDULER");let PB=(()=>{class n{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new ot.xQ}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new NB,this._getScheduleObservable().pipe(Mr(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new NB;for(const r of t.tasks)r();for(const r of t.endTasks)r()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,Sn.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe(di(1))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),eN=(()=>{class n{constructor(t,r){this.template=t,this._differs=r}ngOnChanges(t){if(!this._columnsDiffer){const r=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(r).create(),this._columnsDiffer.diff(r)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof jE?t.headerCell.template:this instanceof GE?t.footerCell.template:t.cell.template}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,features:[l.TTD]}),n})();class YY extends eN{}const KY=KO(YY);let jE=(()=>{class n extends KY{constructor(t,r,i){super(t,r),this._table=i}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc),l.Y36(l.ZZ4),l.Y36(qv,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[l.qOj,l.TTD]}),n})();class ZY extends eN{}const QY=KO(ZY);let GE=(()=>{class n extends QY{constructor(t,r,i){super(t,r),this._table=i}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc),l.Y36(l.ZZ4),l.Y36(qv,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[l.qOj,l.TTD]}),n})(),NI=(()=>{class n extends eN{constructor(t,r,i){super(t,r),this._table=i}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc),l.Y36(l.ZZ4),l.Y36(qv,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[l.qOj]}),n})(),bh=(()=>{class n{constructor(t){this._viewContainer=t,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkCellOutlet",""]]}),n.mostRecentCellOutlet=null,n})(),tN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,r){1&t&&l.GkF(0,0)},directives:[bh],encapsulation:2}),n})(),rN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,r){1&t&&l.GkF(0,0)},directives:[bh],encapsulation:2}),n})(),PI=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const FB=["top","bottom","left","right"];class JY{constructor(e,t,r,i,s=!0,c=!0,h){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=r,this._coalescedStyleScheduler=i,this._isBrowser=s,this._needsPositionStickyOnElement=c,this._positionListener=h,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){const r=[];for(const i of e)if(i.nodeType===i.ELEMENT_NODE){r.push(i);for(let s=0;s<i.children.length;s++)r.push(i.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const i of r)this._removeStickyStyle(i,t)})}updateStickyColumns(e,t,r,i=!0){if(!e.length||!this._isBrowser||!t.some(x=>x)&&!r.some(x=>x))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=e[0],c=s.children.length,h=this._getCellWidths(s,i),g=this._getStickyStartColumnPositions(h,t),y=this._getStickyEndColumnPositions(h,r),E=t.lastIndexOf(!0),T=r.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const x="rtl"===this.direction,N=x?"right":"left",U=x?"left":"right";for(const K of e)for(let le=0;le<c;le++){const Pe=K.children[le];t[le]&&this._addStickyStyle(Pe,N,g[le],le===E),r[le]&&this._addStickyStyle(Pe,U,y[le],le===T)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===E?[]:h.slice(0,E+1).map((K,le)=>t[le]?K:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===T?[]:h.slice(T).map((K,le)=>r[le+T]?K:null).reverse()}))})}stickRows(e,t,r){if(!this._isBrowser)return;const i="bottom"===r?e.slice().reverse():e,s="bottom"===r?t.slice().reverse():t,c=[],h=[],g=[];for(let E=0,T=0;E<i.length;E++){if(!s[E])continue;c[E]=T;const x=i[E];g[E]=this._isNativeHtmlTable?Array.from(x.children):[x];const N=x.getBoundingClientRect().height;T+=N,h[E]=N}const y=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{var E,T;for(let x=0;x<i.length;x++){if(!s[x])continue;const N=c[x],U=x===y;for(const K of g[x])this._addStickyStyle(K,r,N,U)}"top"===r?null===(E=this._positionListener)||void 0===E||E.stickyHeaderRowsUpdated({sizes:h,offsets:c,elements:g}):null===(T=this._positionListener)||void 0===T||T.stickyFooterRowsUpdated({sizes:h,offsets:c,elements:g})})}updateStickyFooterContainer(e,t){if(!this._isNativeHtmlTable)return;const r=e.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{t.some(i=>!i)?this._removeStickyStyle(r,["bottom"]):this._addStickyStyle(r,"bottom",0,!1)})}_removeStickyStyle(e,t){for(const i of t)e.style[i]="",e.classList.remove(this._borderCellCss[i]);FB.some(i=>-1===t.indexOf(i)&&e.style[i])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,r,i){e.classList.add(this._stickCellCss),i&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${r}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){const t={top:100,bottom:10,left:1,right:1};let r=0;for(const i of FB)e.style[i]&&(r+=t[i]);return r?`${r}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const r=[],i=e.children;for(let s=0;s<i.length;s++)r.push(i[s].getBoundingClientRect().width);return this._cachedCellWidths=r,r}_getStickyStartColumnPositions(e,t){const r=[];let i=0;for(let s=0;s<e.length;s++)t[s]&&(r[s]=i,i+=e[s]);return r}_getStickyEndColumnPositions(e,t){const r=[];let i=0;for(let s=e.length;s>0;s--)t[s]&&(r[s]=i,i+=e[s]);return r}}const iN=new l.OlP("CDK_SPL");let FI=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","rowOutlet",""]]}),n})(),LI=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),VI=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),BI=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),UI=(()=>{class n{constructor(t,r,i,s,c,h,g,y,E,T,x){this._differs=t,this._changeDetectorRef=r,this._elementRef=i,this._dir=c,this._platform=g,this._viewRepeater=y,this._coalescedStyleScheduler=E,this._viewportRuler=T,this._stickyPositioningListener=x,this._onDestroy=new ot.xQ,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new l.vpe,this.viewChange=new ui({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=h,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=Yn(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=Yn(t),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,r)=>this.trackBy?this.trackBy(r.dataIndex,r.data):r),this._viewportRuler.change().pipe(Mr(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const r=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||r,this._forceRecalculateCellWidths=r,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){this._rowOutlet.viewContainer.clear(),this._noDataRowOutlet.viewContainer.clear(),this._headerRowOutlet.viewContainer.clear(),this._footerRowOutlet.viewContainer.clear(),this._cachedRenderRowsMap.clear(),this._onDestroy.next(),this._onDestroy.complete(),ZT(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return this._updateNoDataRow(),void this.contentChanged.next();const r=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,r,(i,s,c)=>this._getEmbeddedViewArgs(i.item,c),i=>i.item.data,i=>{1===i.operation&&i.context&&this._renderCellTemplateForItem(i.record.item.rowDef,i.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(i=>{r.get(i.currentIndex).context.$implicit=i.item.data}),this._updateNoDataRow(),this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),i=this._elementRef.nativeElement.querySelector("thead");i&&(i.style.display=t.length?"":"none");const s=this._headerRowDefs.map(c=>c.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,s,"top"),this._headerRowDefs.forEach(c=>c.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),i=this._elementRef.nativeElement.querySelector("tfoot");i&&(i.style.display=t.length?"":"none");const s=this._footerRowDefs.map(c=>c.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(c=>c.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),r=this._getRenderedRows(this._rowOutlet),i=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...r,...i],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((s,c)=>{this._addStickyColumnStyles([s],this._headerRowDefs[c])}),this._rowDefs.forEach(s=>{const c=[];for(let h=0;h<r.length;h++)this._renderRows[h].rowDef===s&&c.push(r[h]);this._addStickyColumnStyles(c,s)}),i.forEach((s,c)=>{this._addStickyColumnStyles([s],this._footerRowDefs[c])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const t=[],r=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let i=0;i<this._data.length;i++){let s=this._data[i];const c=this._getRenderRowsForData(s,i,r.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let h=0;h<c.length;h++){let g=c[h];const y=this._cachedRenderRowsMap.get(g.data);y.has(g.rowDef)?y.get(g.rowDef).push(g):y.set(g.rowDef,[g]),t.push(g)}}return t}_getRenderRowsForData(t,r,i){return this._getRowDefs(t,r).map(c=>{const h=i&&i.has(c)?i.get(c):[];if(h.length){const g=h.shift();return g.dataIndex=r,g}return{data:t,rowDef:c,dataIndex:r}})}_cacheColumnDefs(){this._columnDefsByName.clear(),HI(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(r=>{this._columnDefsByName.has(r.name),this._columnDefsByName.set(r.name,r)})}_cacheRowDefs(){this._headerRowDefs=HI(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=HI(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=HI(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(r=>!r.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(c,h)=>c||!!h.getColumnsDiff(),r=this._rowDefs.reduce(t,!1);r&&this._forceRenderDataRows();const i=this._headerRowDefs.reduce(t,!1);i&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(t,!1);return s&&this._forceRenderFooterRows(),r||i||s}_switchDataSource(t){this._data=[],ZT(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;ZT(this.dataSource)?t=this.dataSource.connect(this):function Bk(n){return!!n&&(n instanceof mn.y||"function"==typeof n.lift&&"function"==typeof n.subscribe)}(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=(0,Le.of)(this.dataSource)),this._renderChangeSubscription=t.pipe(Mr(this._onDestroy)).subscribe(r=>{this._data=r||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,r)=>this._renderRow(this._headerRowOutlet,t,r)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,r)=>this._renderRow(this._footerRowOutlet,t,r)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,r){const i=Array.from(r.columns||[]).map(h=>this._columnDefsByName.get(h)),s=i.map(h=>h.sticky),c=i.map(h=>h.stickyEnd);this._stickyStyler.updateStickyColumns(t,s,c,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){const r=[];for(let i=0;i<t.viewContainer.length;i++){const s=t.viewContainer.get(i);r.push(s.rootNodes[0])}return r}_getRowDefs(t,r){if(1==this._rowDefs.length)return[this._rowDefs[0]];let i=[];if(this.multiTemplateDataRows)i=this._rowDefs.filter(s=>!s.when||s.when(r,t));else{let s=this._rowDefs.find(c=>c.when&&c.when(r,t))||this._defaultRowDef;s&&i.push(s)}return i}_getEmbeddedViewArgs(t,r){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:r}}_renderRow(t,r,i,s={}){const c=t.viewContainer.createEmbeddedView(r.template,s,i);return this._renderCellTemplateForItem(r,s),c}_renderCellTemplateForItem(t,r){for(let i of this._getCellTemplates(t))bh.mostRecentCellOutlet&&bh.mostRecentCellOutlet._viewContainer.createEmbeddedView(i,r);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let r=0,i=t.length;r<i;r++){const c=t.get(r).context;c.count=i,c.first=0===r,c.last=r===i-1,c.even=r%2==0,c.odd=!c.even,this.multiTemplateDataRows?(c.dataIndex=this._renderRows[r].dataIndex,c.renderIndex=r):c.index=this._renderRows[r].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,r=>{const i=this._columnDefsByName.get(r);return t.extractCellTemplate(i)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),r=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const i of r){const s=this._document.createElement(i.tag);s.setAttribute("role","rowgroup");for(const c of i.outlets)s.appendChild(c.elementRef.nativeElement);t.appendChild(s)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(r,i)=>r||i.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new JY(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:(0,Le.of)()).pipe(Mr(this._onDestroy)).subscribe(r=>{this._stickyStyler.direction=r,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(r=>!r._table||r._table===this)}_updateNoDataRow(){const t=this._customNoDataRow||this._noDataRow;if(t){const r=0===this._rowOutlet.viewContainer.length;if(r!==this._isShowingNoDataRow){const i=this._noDataRowOutlet.viewContainer;r?i.createEmbeddedView(t.templateRef):i.clear(),this._isShowingNoDataRow=r}}}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.ZZ4),l.Y36(l.sBO),l.Y36(l.SBq),l.$8M("role"),l.Y36(mh,8),l.Y36(ne),l.Y36(Tn),l.Y36(Mm),l.Y36(XO),l.Y36(xm),l.Y36(iN,12))},n.\u0275cmp=l.Xpm({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(t,r,i){if(1&t&&(l.Suo(i,PI,5),l.Suo(i,vh,5),l.Suo(i,NI,5),l.Suo(i,jE,5),l.Suo(i,GE,5)),2&t){let s;l.iGM(s=l.CRH())&&(r._noDataRow=s.first),l.iGM(s=l.CRH())&&(r._contentColumnDefs=s),l.iGM(s=l.CRH())&&(r._contentRowDefs=s),l.iGM(s=l.CRH())&&(r._contentHeaderRowDefs=s),l.iGM(s=l.CRH())&&(r._contentFooterRowDefs=s)}},viewQuery:function(t,r){if(1&t&&(l.Gf(FI,7),l.Gf(LI,7),l.Gf(VI,7),l.Gf(BI,7)),2&t){let i;l.iGM(i=l.CRH())&&(r._rowOutlet=i.first),l.iGM(i=l.CRH())&&(r._headerRowOutlet=i.first),l.iGM(i=l.CRH())&&(r._footerRowOutlet=i.first),l.iGM(i=l.CRH())&&(r._noDataRowOutlet=i.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(t,r){2&t&&l.ekj("cdk-table-fixed-layout",r.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[l._Bn([{provide:qv,useExisting:n},{provide:Mm,useClass:dL},{provide:XO,useClass:PB},{provide:iN,useValue:null}])],ngContentSelectors:jY,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,r){1&t&&(l.F$t(HY),l.Hsn(0),l.Hsn(1,1),l.GkF(2,0)(3,1)(4,2)(5,3))},directives:[LI,FI,BI,VI],styles:[".cdk-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})();function HI(n,e){return n.concat(Array.from(e))}let e4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[zk]]}),n})();const t4=[[["caption"]],[["colgroup"],["col"]]],n4=["caption","colgroup, col"];let VB=(()=>{class n extends UI{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(t,r){2&t&&l.ekj("mat-table-fixed-layout",r.fixedLayout)},exportAs:["matTable"],features:[l._Bn([{provide:Mm,useClass:dL},{provide:UI,useExisting:n},{provide:qv,useExisting:n},{provide:XO,useClass:PB},{provide:iN,useValue:null}]),l.qOj],ngContentSelectors:n4,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,r){1&t&&(l.F$t(t4),l.Hsn(0),l.Hsn(1,1),l.GkF(2,0)(3,1)(4,2)(5,3))},directives:[LI,FI,BI,VI],styles:['mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-row::after,mat-header-row::after,mat-footer-row::after{display:inline-block;min-height:inherit;content:""}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:-webkit-sticky !important;position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}\n'],encapsulation:2}),n})(),sN=(()=>{class n extends Wv{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","matCellDef",""]],features:[l._Bn([{provide:Wv,useExisting:n}]),l.qOj]}),n})(),oN=(()=>{class n extends Yv{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","matHeaderCellDef",""]],features:[l._Bn([{provide:Yv,useExisting:n}]),l.qOj]}),n})(),aN=(()=>{class n extends vh{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[l._Bn([{provide:vh,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),l.qOj]}),n})(),lN=(()=>{class n extends QO{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[l.qOj]}),n})(),cN=(()=>{class n extends JO{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[l.qOj]}),n})(),BB=(()=>{class n extends jE{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[l._Bn([{provide:jE,useExisting:n}]),l.qOj]}),n})(),UB=(()=>{class n extends NI{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[l._Bn([{provide:NI,useExisting:n}]),l.qOj]}),n})(),HB=(()=>{class n extends tN{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[l._Bn([{provide:tN,useExisting:n}]),l.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,r){1&t&&l.GkF(0,0)},directives:[bh],encapsulation:2}),n})(),jB=(()=>{class n extends rN{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[l._Bn([{provide:rN,useExisting:n}]),l.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,r){1&t&&l.GkF(0,0)},directives:[bh],encapsulation:2}),n})(),h4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[e4,Kn],Kn]}),n})(),p4=(()=>{class n{constructor(t){this.invoiceService=t,this.invoiceForm=new ql({VAT:new wo(""),type:new wo(""),cost:new wo("")})}ngOnInit(){}submit(){let t=this.invoiceForm.value;this.invoiceService.addInvoiceToInvoiceList(this.loggedInUser,this.invoiceUid,{VAT:t.VAT,type:t.type,cost:t.cost})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(yB))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-invoice-add"]],inputs:{loggedInUser:"loggedInUser",invoiceUid:"invoiceUid"},decls:20,vars:1,consts:[["action","",3,"formGroup"],["appearance","fill"],["type","number","matInput","","placeholder","","formControlName","cost","required",""],["type","text","matInput","","placeholder","Phone costs","formControlName","type","required",""],["type","number","matInput","","formControlName","VAT","required",""],["mat-raised-button","","color","primary",3,"click"],["mat-stroked-button","","color","warn"]],template:function(t,r){1&t&&(l.TgZ(0,"form",0)(1,"mat-form-field",1)(2,"mat-label"),l._uU(3,"Costs"),l.qZA(),l._UZ(4,"input",2),l.qZA(),l._UZ(5,"br"),l.TgZ(6,"mat-form-field",1)(7,"mat-label"),l._uU(8,"Type"),l.qZA(),l._UZ(9,"input",3),l.qZA(),l._UZ(10,"br"),l.TgZ(11,"mat-form-field",1)(12,"mat-label"),l._uU(13,"VAT"),l.qZA(),l._UZ(14,"input",4),l.qZA(),l._UZ(15,"br"),l.TgZ(16,"button",5),l.NdJ("click",function(){return r.submit()}),l._uU(17,"SUBMIT"),l.qZA(),l.TgZ(18,"button",6),l._uU(19,"CANCEL"),l.qZA()()),2&t&&l.Q6J("formGroup",r.invoiceForm)},directives:[Ad,q_,$a,AI,zv,Cg,xI,ou,z_,Md,ki,pp],styles:[""]}),n})();function g4(n,e){1&n&&(l.TgZ(0,"div",12),l._UZ(1,"mat-spinner",13),l.qZA())}function m4(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",14),l.NdJ("click",function(){const s=l.CHM(t).$implicit;return l.oxw().selectInvoice(s.uid)}),l.TgZ(1,"a",15),l._uU(2),l.qZA(),l.TgZ(3,"div",16)(4,"a")(5,"mat-icon",17),l.NdJ("click",function(){const i=l.CHM(t),s=i.$implicit,c=i.index;return l.oxw().editList(s.uid,c)}),l._uU(6,"edit"),l.qZA()(),l.TgZ(7,"a")(8,"mat-icon",17),l.NdJ("click",function(){const s=l.CHM(t).$implicit;return l.oxw().deleteFromLists(s.uid)}),l._uU(9,"delete"),l.qZA()()()()}if(2&n){const t=e.$implicit;l.xp6(2),l.Oqu(t.name)}}function _4(n,e){1&n&&(l.TgZ(0,"p",18),l._uU(1,"Nothing selected yet, or no data available."),l.qZA())}function y4(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",19),l.NdJ("click",function(){return l.CHM(t),l.oxw().addNewInvoice()}),l._uU(1,"Add invoice"),l.qZA()}}function v4(n,e){1&n&&(l.TgZ(0,"th",30),l._uU(1," UID "),l.qZA())}function b4(n,e){if(1&n&&(l.TgZ(0,"td",31),l._uU(1),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.hij(" ",t.uid," ")}}function w4(n,e){1&n&&(l.TgZ(0,"th",30),l._uU(1," cost "),l.qZA())}function C4(n,e){if(1&n&&(l.TgZ(0,"td",31),l._uU(1),l.ALo(2,"currency"),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.hij(" ",l.xi3(2,1,t.cost,"EUR")," ")}}function E4(n,e){1&n&&(l.TgZ(0,"th",30),l._uU(1," Type of cost "),l.qZA())}function S4(n,e){if(1&n&&(l.TgZ(0,"td",31),l._uU(1),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.hij(" ",t.type," ")}}function D4(n,e){1&n&&(l.TgZ(0,"th",30),l._uU(1," VAT "),l.qZA())}function T4(n,e){if(1&n&&(l.TgZ(0,"td",31),l._uU(1),l.ALo(2,"percent"),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.hij(" ",l.lcZ(2,1,t.VAT)," ")}}function I4(n,e){1&n&&(l.TgZ(0,"th",30),l._uU(1," Actions "),l.qZA())}function A4(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"td",31)(1,"a")(2,"mat-icon"),l._uU(3,"edit"),l.qZA()(),l.TgZ(4,"a",32),l.NdJ("click",function(){const s=l.CHM(t).$implicit;return l.oxw(2).deleteInvoice(s.uid)}),l.TgZ(5,"mat-icon"),l._uU(6,"delete"),l.qZA()()()}}function M4(n,e){1&n&&l._UZ(0,"tr",33)}function x4(n,e){1&n&&l._UZ(0,"tr",34)}function R4(n,e){if(1&n&&(l.TgZ(0,"table",20),l.ynx(1,21),l.YNc(2,v4,2,0,"th",22),l.YNc(3,b4,2,1,"td",23),l.BQk(),l.ynx(4,24),l.YNc(5,w4,2,0,"th",22),l.YNc(6,C4,3,4,"td",23),l.BQk(),l.ynx(7,25),l.YNc(8,E4,2,0,"th",22),l.YNc(9,S4,2,1,"td",23),l.BQk(),l.ynx(10,26),l.YNc(11,D4,2,0,"th",22),l.YNc(12,T4,3,3,"td",23),l.BQk(),l.ynx(13,27),l.YNc(14,I4,2,0,"th",22),l.YNc(15,A4,7,0,"td",23),l.BQk(),l.YNc(16,M4,1,0,"tr",28),l.YNc(17,x4,1,0,"tr",29),l.qZA()),2&n){const t=l.oxw();l.Q6J("dataSource",t.dataSource),l.xp6(16),l.Q6J("matHeaderRowDef",t.displayedColumns),l.xp6(1),l.Q6J("matRowDefColumns",t.displayedColumns)}}function k4(n,e){if(1&n&&(l.TgZ(0,"div",35),l._UZ(1,"app-invoice-add",36),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Q6J("loggedInUser",t.loggedInUser)("invoiceUid",t.selectedInvoiceList)}}const O4=[{component:J8,path:"Login"},{component:X8,path:"Logout"},{component:rY,path:"Register"},{component:(()=>{class n{constructor(t,r,i){this.authService=t,this._snackBar=r,this.invoiceService=i,this.displayedColumns=["id","element","subelement","location","actions"],this.lists=[{uid:"nothing",name:"New list"}],this.dataSource=[],this.loading=!0,this.editing=!1}ngOnInit(){this.loading=!0,this.authService.verifyEmail(),this.loggedInUser=JSON.parse(localStorage.getItem("user")),this.invoiceService.getAllInvoiceListsByUser(this.loggedInUser).subscribe(t=>{this.lists=[],t.forEach(r=>{this.lists.push(r)}),this.loading=!1},t=>{this._snackBar.open(t.message,"ok")})}selectInvoice(t){this.loading=!0,this.selectedInvoiceList=t,this.invoiceService.getAllInvoices(this.loggedInUser,t).subscribe(r=>{this.dataSource=r,this.loading=!1},r=>{this._snackBar.open(r.message,"ok")})}addNewList(){this.invoiceService.addInvoiceListToUser(this.loggedInUser).then(t=>{},t=>{this._snackBar.open(t,"ok")})}deleteFromLists(t){window.confirm("Do you want to remove this list?")&&this.invoiceService.deleteInvoiceList(this.loggedInUser,t)}editList(t,r){let i,s=window.prompt("Please enter a name:",this.lists[r].name);""==s||null==s?i="New list":s.length>25?(this._snackBar.open("Invoice list name can't be longer than 25.","ok"),i="New list"):i=s,this.invoiceService.updateInvoiceListName(this.loggedInUser,t,i)}addNewInvoice(){this.editing=!this.editing}deleteInvoice(t){window.confirm("Do you want to remove this invoice?")&&this.invoiceService.deleteInvoice(this.loggedInUser,this.selectedInvoiceList,t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36($v),l.Y36(LO),l.Y36(yB))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-invoice"]],decls:16,vars:6,consts:[["style","position: absolute; background: rgba(0,0,0,0.5); padding-left: 50%; padding-top: 50%; height: 100%; width: 100%",4,"ngIf"],[1,"title","ml-6"],[1,"mb-6"],[1,"columns",2,"max-width","80%","margin","auto"],[1,"column","is-flex-grow-1","box","is-flex-direction-column",2,"min-width","200px"],[1,"mb-2",3,"click"],["class","is-flex mb-2",3,"click",4,"ngFor","ngForOf"],[1,"column","is-flex-grow-5","box","ml-1"],["class","has-text-centered",4,"ngIf"],["mat-raised-button","","color","primary","style","position: absolute; top: 14%; right: 10%;",3,"click",4,"ngIf"],["mat-table","","class","","style","width: 100%",3,"dataSource",4,"ngIf"],["class","column is-flex is-flex-wrap-wrap",4,"ngIf"],[2,"position","absolute","background","rgba(0,0,0,0.5)","padding-left","50%","padding-top","50%","height","100%","width","100%"],[2,"position","absolute","margin","auto"],[1,"is-flex","mb-2",3,"click"],[1,"is-flex-grow-1"],[1,""],["color","primary",1,"is-size-6",3,"click"],[1,"has-text-centered"],["mat-raised-button","","color","primary",2,"position","absolute","top","14%","right","10%",3,"click"],["mat-table","",1,"",2,"width","100%",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","element"],["matColumnDef","subelement"],["matColumnDef","location"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"click"],["mat-header-row",""],["mat-row",""],[1,"column","is-flex","is-flex-wrap-wrap"],[3,"loggedInUser","invoiceUid"]],template:function(t,r){1&t&&(l.YNc(0,g4,2,0,"div",0),l.TgZ(1,"p",1),l._uU(2,"Invoice tables"),l.qZA(),l._UZ(3,"mat-divider",2),l.TgZ(4,"div",3)(5,"div",4)(6,"a",5),l.NdJ("click",function(){return r.addNewList()}),l.TgZ(7,"mat-icon"),l._uU(8,"add"),l.qZA(),l._uU(9," Add a new list"),l.qZA(),l.YNc(10,m4,10,1,"div",6),l.qZA(),l.TgZ(11,"div",7),l.YNc(12,_4,2,0,"p",8),l.YNc(13,y4,2,0,"button",9),l.YNc(14,R4,18,3,"table",10),l.qZA(),l.YNc(15,k4,2,2,"div",11),l.qZA()),2&t&&(l.Q6J("ngIf",r.loading),l.xp6(10),l.Q6J("ngForOf",r.lists),l.xp6(2),l.Q6J("ngIf",0==r.dataSource.length),l.xp6(1),l.Q6J("ngIf",null!=r.selectedInvoiceList),l.xp6(1),l.Q6J("ngIf",0!=r.dataSource.length),l.xp6(1),l.Q6J("ngIf",r.editing))},directives:[sr,gY,_Y,BY,qr,pp,VB,aN,oN,lN,sN,cN,BB,HB,UB,jB,p4],pipes:[Cc,Rs],styles:[".mat-row[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.1)}"]}),n})(),path:"Invoice"},{component:oY,path:"Forgot"},{component:FA,path:"**"}];let N4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[k0.forRoot(O4)],k0]}),n})();const P4=["navBurger"],F4=["navMenu"];function L4(n,e){1&n&&(l.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"button",15),l._uU(4,"Login"),l.qZA(),l.TgZ(5,"button",16),l._uU(6,"Register"),l.qZA()()()()),2&n&&(l.xp6(3),l.Q6J("color","primary"),l.xp6(2),l.Q6J("color","primary"))}function V4(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"button",17)(4,"p",3),l._uU(5),l.ALo(6,"titlecase"),l.qZA()(),l.TgZ(7,"a",18),l.NdJ("click",function(){return l.CHM(t),l.oxw().logout()}),l._uU(8," Log out "),l.qZA()()()()}if(2&n){const t=l.oxw();l.xp6(5),l.Oqu(l.lcZ(6,1,t.returnUserEmail().charAt(0)))}}let B4=(()=>{class n{constructor(t){this.authService=t,this.user=JSON.parse(localStorage.getItem("user"))}ngOnInit(){this.user=JSON.parse(localStorage.getItem("user"))}returnUserEmail(){var t;return this.user=JSON.parse(localStorage.getItem("user")),null===(t=this.user)||void 0===t?void 0:t.email}toggleNavbar(){this.navBurger.nativeElement.classList.toggle("is-active"),this.navMenu.nativeElement.classList.toggle("is-active")}logout(){this.authService.Logout().then(()=>{this.user=JSON.parse(localStorage.getItem("user"))})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36($v))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-header"]],viewQuery:function(t,r){if(1&t&&(l.Gf(P4,5),l.Gf(F4,5)),2&t){let i;l.iGM(i=l.CRH())&&(r.navBurger=i.first),l.iGM(i=l.CRH())&&(r.navMenu=i.first)}},decls:17,vars:2,consts:[["role","navigation","aria-label","main navigation",1,"navbar"],[1,"navbar-brand"],["routerLink","Home",1,"navbar-item"],[1,""],["role","button","aria-label","menu","aria-expanded","false","data-target","navbarBasicExample",1,"navbar-burger",3,"click"],["navBurger",""],["aria-hidden","true"],["id","navbarBasicExample",1,"navbar-menu"],["navMenu",""],[1,"navbar-start"],["routerLink","Invoice",1,"navbar-item","pt-3","is-clickable"],["class","navbar-end",4,"ngIf"],[1,"navbar-end"],[1,"navbar-item"],[1,"buttons"],["mat-raised-button","","routerLink","Login",3,"color"],["mat-stroked-button","","routerLink","Register",3,"color"],["mat-mini-fab","","color","primary","aria-label","Example icon button with a plus one icon",1,"mr-1"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,r){1&t&&(l.TgZ(0,"nav",0)(1,"div",1)(2,"a",2)(3,"h1",3),l._uU(4,"Financial Platform"),l.qZA()(),l.TgZ(5,"a",4,5),l.NdJ("click",function(){return r.toggleNavbar()}),l._UZ(7,"span",6)(8,"span",6)(9,"span",6),l.qZA()(),l.TgZ(10,"div",7,8)(12,"div",9)(13,"h3",10),l._uU(14," Invoice tables "),l.qZA()(),l.YNc(15,L4,7,2,"div",11),l.YNc(16,V4,9,3,"div",11),l.qZA()()),2&t&&(l.xp6(15),l.Q6J("ngIf",!r.authService.isLoggedIn),l.xp6(1),l.Q6J("ngIf",r.authService.isLoggedIn))},directives:[ea,Ba,sr,pp,e8],pipes:[kp],styles:[""]}),n})(),U4=(()=>{class n{constructor(){this.title="financialPlatform"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&l._UZ(0,"app-header")(1,"router-outlet")},directives:[B4,rg],styles:[""]}),n})(),Q4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[GV,Kn],GV,Kn]}),n})();const d5={provide:new l.OlP("mat-select-scroll-strategy"),deps:[Lv],useFactory:function c5(n){return()=>n.scrollStrategies.reposition()}};let g5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[d5],imports:[[oo,RL,PO,Kn],$k,MI,PO,Kn]}),n})();const JB_firebase={apiKey:"AIzaSyBp-SOytfwzg5IExZnfBmuV80sYSkcPDSk",projectId:"financialplatform-a4f77"},XB="firebasestorage.googleapis.com",eU="storageBucket";class Gr extends P.ZR{constructor(e,t){super(dN(e),`Firebase Storage: ${t} (${dN(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gr.prototype)}_codeEquals(e){return dN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function dN(n){return"storage/"+n}function hN(){return new Gr("unknown","An unknown error occurred, please check the error payload for server response.")}function tU(){return new Gr("canceled","User canceled the upload/download.")}function nU(){return new Gr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Zv(n){return new Gr("invalid-argument",n)}function rU(){return new Gr("app-deleted","The Firebase app was deleted.")}function iU(n){return new Gr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zE(n,e){return new Gr("invalid-format","String does not match format '"+n+"': "+e)}function qE(n){throw new Gr("internal-error","Internal error: "+n)}class Ts{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ts.makeFromUrl(e,t)}catch(i){return new Ts(e,"")}if(""===r.path)return r;throw function D5(n){return new Gr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(ke){ke.path_=decodeURIComponent(ke.path)}const T=t.replace(/[.]/g,"\\."),Be=[{regex:h,indices:{bucket:1,path:3},postModify:function s(ke){"/"===ke.path.charAt(ke.path.length-1)&&(ke.path_=ke.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===XB?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let ke=0;ke<Be.length;ke++){const mt=Be[ke],ct=mt.regex.exec(e);if(ct){let Fn=ct[mt.indices.path];Fn||(Fn=""),r=new Ts(ct[mt.indices.bucket],Fn),mt.postModify(r);break}}if(null==r)throw function S5(n){return new Gr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class M5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function GI(n){return"string"==typeof n||n instanceof String}function sU(n){return fN()&&n instanceof Blob}function fN(){return"undefined"!=typeof Blob}function pN(n,e,t,r){if(r<e)throw Zv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Zv(`Invalid value for '${n}'. Expected ${t} or less.`)}function wh(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function oU(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var _p=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(_p||(_p={})),_p))();class P5{constructor(e,t,r,i,s,c,h,g,y,E,T){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=E,this.connectionFactory_=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,N)=>{this.resolve_=x,this.reject_=N,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(h,h.getResponse());!function k5(n){return void 0!==n}(g)?s():s(g)}catch(g){c(g)}else if(null!==h){const g=hN();g.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,g):g)}else c(i.canceled?this.appDelete_?rU():tU():function E5(){return new Gr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new $I(!1,null,!0)):this.backoffId_=function x5(n,e,t){let r=1,i=null,s=null,c=!1,h=0;function g(){return 2===h}let y=!1;function E(...le){y||(y=!0,e.apply(null,le))}function T(le){i=setTimeout(()=>{i=null,n(N,g())},le)}function x(){s&&clearTimeout(s)}function N(le,...Pe){if(y)return void x();if(le)return x(),void E.call(null,le,...Pe);if(g()||c)return x(),void E.call(null,le,...Pe);let Be;r<64&&(r*=2),1===h?(h=2,Be=0):Be=1e3*(r+Math.random()),T(Be)}let U=!1;function K(le){U||(U=!0,x(),!y&&(null!==i?(le||(h=2),clearTimeout(i),T(0)):le||(h=1)))}return T(0),s=setTimeout(()=>{c=!0,K(!0)},t),K}((r,i)=>{if(i)return void r(!1,new $I(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const h=s.getErrorCode()===_p.NO_ERROR,g=s.getStatus();if(!h||this.isRetryStatusCode_(g)){const E=s.getErrorCode()===_p.ABORT;return void r(!1,new $I(!1,null,E))}const y=-1!==this.successCodes_.indexOf(g);r(!0,new $I(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function R5(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),s=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||s}}class $I{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function j5(...n){const e=function H5(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(fN())return new Blob(n);throw new Gr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const pa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class gN{constructor(e,t){this.data=e,this.contentType=t||null}}function mN(n,e){switch(n){case pa.RAW:return new gN(aU(e));case pa.BASE64:case pa.BASE64URL:return new gN(lU(n,e));case pa.DATA_URL:return new gN(function q5(n){const e=new cU(n);return e.base64?lU(pa.BASE64,e.rest):function z5(n){let e;try{e=decodeURIComponent(n)}catch(t){throw zE(pa.DATA_URL,"Malformed data URL.")}return aU(e)}(e.rest)}(e),function W5(n){return new cU(n).contentType}(e))}throw hN()}function aU(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function lU(n,e){switch(n){case pa.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw zE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case pa.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw zE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function $5(n){return atob(n)}(e)}catch(i){throw zE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class cU{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw zE(pa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Y5(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Au{constructor(e,t){let r=0,i="";sU(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(sU(this.data_)){const i=function G5(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Au(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Au(r,!0)}}static getBlob(...e){if(fN()){const t=e.map(r=>r instanceof Au?r.data_:r);return new Au(j5.apply(null,t))}{const t=e.map(c=>GI(c)?mN(pa.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)i[s++]=c[h]}),new Au(i,!0)}}uploadData(){return this.data_}}function _N(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function N5(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function uU(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Q5(n,e){return e}class Ws{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Q5}}let zI=null;function WE(){if(zI)return zI;const n=[];n.push(new Ws("bucket")),n.push(new Ws("generation")),n.push(new Ws("metageneration")),n.push(new Ws("name","fullPath",!0));const t=new Ws("name");t.xform=function e(s,c){return function J5(n){return!GI(n)||n.length<2?n:uU(n)}(c)},n.push(t);const i=new Ws("size");return i.xform=function r(s,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Ws("timeCreated")),n.push(new Ws("updated")),n.push(new Ws("md5Hash",null,!0)),n.push(new Ws("cacheControl",null,!0)),n.push(new Ws("contentDisposition",null,!0)),n.push(new Ws("contentEncoding",null,!0)),n.push(new Ws("contentLanguage",null,!0)),n.push(new Ws("contentType",null,!0)),n.push(new Ws("metadata","customMetadata",!0)),zI=n,zI}function dU(n,e,t){const r=_N(e);return null===r?null:function eK(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const c=t[s];r[c.local]=c.xform(r,e[c.server])}return function X5(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Ts(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function yN(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const hU="prefixes";class Mu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function xu(n){if(!n)throw hN()}function qI(n,e){return function t(r,i){const s=dU(n,i,e);return xu(null!==s),s}}function Qv(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function w5(){return new Gr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function b5(){return new Gr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function v5(n){return new Gr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function C5(n){return new Gr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function YE(n){const e=Qv(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function y5(n){return new Gr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function pU(n,e,t){const i=wh(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Mu(i,"GET",qI(n,t),c);return h.errorHandler=YE(e),h}function oK(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const h=wh(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,E=new Mu(h,"GET",function iK(n,e){return function t(r,i){const s=function rK(n,e,t){const r=_N(t);return null===r?null:function nK(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[hU])for(const i of t[hU]){const s=i.replace(/\/$/,""),c=n._makeStorageReference(new Ts(e,s));r.prefixes.push(c)}if(t.items)for(const i of t.items){const s=n._makeStorageReference(new Ts(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return xu(null!==s),s}}(n,e.bucket),y);return E.urlParams=s,E.errorHandler=Qv(e),E}function mU(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function uK(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class WI{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function vN(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){xu(!1)}return xu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const pK={STATE_CHANGED:"state_changed"},Ys={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function bN(n){switch(n){case"running":case"pausing":case"canceling":return Ys.RUNNING;case"paused":return Ys.PAUSED;case"success":return Ys.SUCCESS;case"canceled":return Ys.CANCELED;default:return Ys.ERROR}}class gK{constructor(e,t,r){if(function O5(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Jv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class _K extends class mK{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_p.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_p.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_p.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw qE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw qE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function hc(){return new _K}class bU{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=WE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function dK(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),c=mU(e,r,i),h={name:c.fullPath},g=wh(s,n.host,n._protocol),E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},T=yN(c,t),U=new Mu(g,"POST",function N(K){let le;vN(K);try{le=K.getResponseHeader("X-Goog-Upload-URL")}catch(Pe){xu(!1)}return xu(GI(le)),le},n.maxUploadRetryTime);return U.urlParams=h,U.headers=E,U.body=T,U.errorHandler=Qv(e),U}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,hc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function hK(n,e,t,r){const g=new Mu(t,"POST",function s(y){const E=vN(y,["active","final"]);let T=null;try{T=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch(N){xu(!1)}T||xu(!1);const x=Number(T);return xu(!isNaN(x)),new WI(x,r.size(),"final"===E)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=Qv(e),g}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,hc,t,r);this._request=s,s.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new WI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let c;try{c=function fK(n,e,t,r,i,s,c,h){const g=new WI(0,0);if(c?(g.current=c.current,g.total=c.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw function I5(){return new Gr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=g.total-g.current;let E=y;i>0&&(E=Math.min(E,i));const T=g.current,U={"X-Goog-Upload-Command":E===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${g.current}`},K=r.slice(T,T+E);if(null===K)throw nU();const Be=new Mu(t,"POST",function le(ke,mt){const ct=vN(ke,["active","final"]),Rn=g.current+E,Fn=r.size();let si;return si="final"===ct?qI(e,s)(ke,mt):null,new WI(Rn,Fn,"final"===ct,si)},e.maxUploadRetryTime);return Be.headers=U,Be.body=K.uploadData(),Be.progressCallback=h||null,Be.errorHandler=Qv(n),Be}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const h=this._ref.storage._makeRequest(c,hc,i,s);this._request=h,h.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=pU(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,hc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function _U(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},g=function h(){let Be="";for(let ke=0;ke<2;ke++)Be+=Math.random().toString().slice(2);return Be}();c["Content-Type"]="multipart/related; boundary="+g;const y=mU(e,r,i),E=yN(y,t),N=Au.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+E+"\r\n--"+g+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+g+"--");if(null===N)throw nU();const U={name:y.fullPath},K=wh(s,n.host,n._protocol),Pe=n.maxUploadRetryTime,Me=new Mu(K,"POST",qI(n,t),Pe);return Me.urlParams=U,Me.headers=c,Me.body=N.uploadData(),Me.errorHandler=Qv(e),Me}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,hc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=tU(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=bN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new gK(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(bN(this._state)){case Ys.SUCCESS:Jv(this._resolve.bind(null,this.snapshot))();break;case Ys.CANCELED:case Ys.ERROR:Jv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(bN(this._state)){case Ys.RUNNING:case Ys.PAUSED:e.next&&Jv(e.next.bind(e,this.snapshot))();break;case Ys.SUCCESS:e.complete&&Jv(e.complete.bind(e))();break;default:e.error&&Jv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Bm{constructor(e,t){this._service=e,this._location=t instanceof Ts?t:Ts.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Bm(e,t)}get root(){const e=new Ts(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return uU(this._location.path)}get storage(){return this._service}get parent(){const e=function K5(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ts(this._location.bucket,e);return new Bm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw iU(e)}}function CU(n,e,t){return wN.apply(this,arguments)}function wN(){return wN=(0,pe.Z)(function*(n,e,t){const i=yield EU(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield CU(n,e,i.nextPageToken))}),wN.apply(this,arguments)}function EU(n,e){null!=e&&"number"==typeof e.maxResults&&pN("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=oK(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,hc)}function MK(n){n._throwIfRoot("getDownloadURL");const e=function aK(n,e,t){const i=wh(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Mu(i,"GET",function sK(n,e){return function t(r,i){const s=dU(n,i,e);return xu(null!==s),function tK(n,e,t,r){const i=_N(e);if(null===i||!GI(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(y=>{const T=n.fullPath;return wh("/b/"+c(n.bucket)+"/o/"+c(T),t,r)+oU({alt:"media",token:y})})[0]}(s,i,n.host,n._protocol)}}(n,t),c);return h.errorHandler=YE(e),h}(n.storage,n._location,WE());return n.storage.makeRequestWithTokens(e,hc).then(t=>{if(null===t)throw function A5(){return new Gr("no-download-url","The given file does not have any download URLs.")}();return t})}function SU(n,e){const t=function Z5(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ts(n._location.bucket,t);return new Bm(n.storage,r)}function DU(n,e){if(n instanceof CN){const t=n;if(null==t._bucket)throw function T5(){return new Gr("no-default-bucket","No default bucket found. Did you set the '"+eU+"' property when initializing the app?")}();const r=new Bm(t,t._bucket);return null!=e?DU(r,e):r}return void 0!==e?SU(n,e):n}function OK(n,e){if(e&&function RK(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof CN)return function kK(n,e){return new Bm(n,e)}(n,e);throw Zv("To use ref(service, url), the first argument must be a Storage instance.")}return DU(n,e)}function TU(n,e){const t=null==e?void 0:e[eU];return null==t?null:Ts.makeFromBucketSpec(t,n)}class CN{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=XB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ts.makeFromBucketSpec(i,this._host):TU(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ts.makeFromBucketSpec(this._url,e):TU(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){pN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){pN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,pe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,pe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bm(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new M5(rU());{const s=function U5(n,e,t,r,i,s){const c=oU(n.urlParams),h=n.url+c,g=Object.assign({},n.headers);return function V5(n,e){e&&(n["X-Firebase-GMPID"]=e)}(g,e),function F5(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(g,t),function L5(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(g,s),function B5(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(g,r),new P5(h,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var r=this;return(0,pe.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const IU="@firebase/storage";function xU(n,e){return OK(n=(0,P.m9)(n),e)}function $K(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new CN(t,r,i,e,Oi.SDK_VERSION)}!function zK(){(0,Oi._registerComponent)(new ia.wA("storage",$K,"PUBLIC").setMultipleInstances(!0)),(0,Oi.registerVersion)(IU,"0.9.4",""),(0,Oi.registerVersion)(IU,"0.9.4","esm2017")}();class YI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class RU{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new YI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new YI(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?c=>t(new YI(c,this,this._ref)):{next:t.next?c=>t.next(new YI(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class kU{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ch(e,this._service))}get items(){return this._delegate.items.map(e=>new Ch(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ch{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function jK(n,e){return SU(n,e)}(this._delegate,e);return new Ch(t,this.storage)}get root(){return new Ch(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ch(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new RU(function PK(n,e,t){return function SK(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new bU(n,new Au(e),t)}(n=(0,P.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=pa.RAW,r){this._throwIfRoot("putString");const i=mN(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new RU(new bU(this._delegate,new Au(i.data,!0),s),this)}listAll(){return function BK(n){return function TK(n){const e={prefixes:[],items:[]};return CU(n,e).then(()=>e)}(n=(0,P.m9)(n))}(this._delegate).then(e=>new kU(e,this.storage))}list(e){return function VK(n,e){return EU(n=(0,P.m9)(n),e)}(this._delegate,e||void 0).then(t=>new kU(t,this.storage))}getMetadata(){return function FK(n){return function IK(n){n._throwIfRoot("getMetadata");const e=pU(n.storage,n._location,WE());return n.storage.makeRequestWithTokens(e,hc)}(n=(0,P.m9)(n))}(this._delegate)}updateMetadata(e){return function LK(n,e){return function AK(n,e){n._throwIfRoot("updateMetadata");const t=function lK(n,e,t,r){const s=wh(e.fullServerUrl(),n.host,n._protocol),h=yN(t,r),y=n.maxOperationRetryTime,E=new Mu(s,"PATCH",qI(n,r),y);return E.headers={"Content-Type":"application/json; charset=utf-8"},E.body=h,E.errorHandler=YE(e),E}(n.storage,n._location,e,WE());return n.storage.makeRequestWithTokens(t,hc)}(n=(0,P.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function UK(n){return MK(n=(0,P.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function HK(n){return function xK(n){n._throwIfRoot("deleteObject");const e=function cK(n,e){const r=wh(e.fullServerUrl(),n.host,n._protocol),h=new Mu(r,"DELETE",function c(g,y){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=YE(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,hc)}(n=(0,P.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw iU(e)}}class OU{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(NU(e))throw Zv("ref() expected a child path but got a URL, use refFromURL instead.");return new Ch(xU(this._delegate,e),this)}refFromURL(e){if(!NU(e))throw Zv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ts.makeFromUrl(e,this._delegate.host)}catch(t){throw Zv("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ch(xU(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function GK(n,e,t,r={}){!function NK(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,P.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function NU(n){return/^[A-Za-z]+:\/\//.test(n)}function KK(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new OU(t,r)}function PU(n){const e=function QK(n){return new mn.y(e=>{const t=c=>e.next(c);t(n.snapshot);const s=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){s()}}).pipe(eI(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ze.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function KI(n){return{getDownloadURL:()=>(0,Le.of)(void 0).pipe(un.fc,zn(()=>n.getDownloadURL()),un.iC),getMetadata:()=>(0,Le.of)(void 0).pipe(un.fc,zn(()=>n.getMetadata()),un.iC),delete:()=>(0,Sn.D)(n.delete()),child:e=>KI(n.child(e)),updateMetadata:e=>(0,Sn.D)(n.updateMetadata(e)),put:(e,t)=>PU(n.put(e,t)),putString:(e,t,r)=>PU(n.putString(e,t,r)),list:e=>(0,Sn.D)(n.list(e)),listAll:()=>(0,Sn.D)(n.listAll())}}!function ZK(n){const e={TaskState:Ys,TaskEvent:pK,StringFormat:pa,Storage:OU,Reference:Ch};n.INTERNAL.registerComponent(new ia.wA("storage-compat",KK,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.12")}(SS.Z);const JK=new l.OlP("angularfire2.storageBucket"),XK=new l.OlP("angularfire2.storage.maxUploadRetryTime"),eZ=new l.OlP("angularfire2.storage.maxOperationRetryTime"),tZ=new l.OlP("angularfire2.storage.use-emulator");let nZ=(()=>{class n{constructor(t,r,i,s,c,h,g,y,E,T){const x=(0,Vr.on)(t,c,r);this.storage=(0,Vr.cc)(`${x.name}.storage.${i}`,"AngularFireStorage",x.name,()=>{const N=c.runOutsideAngular(()=>x.storage(i||void 0)),U=E;return U&&N.useEmulator(...U),g&&N.setMaxUploadRetryTime(g),y&&N.setMaxOperationRetryTime(y),N},[g,y])}ref(t){return KI(this.storage.ref(t))}refFromURL(t){return KI(this.storage.refFromURL(t))}upload(t,r,i){return KI(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Vr.Dh),l.LFG(Vr.xv,8),l.LFG(JK,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(un.HU),l.LFG(XK,8),l.LFG(eZ,8),l.LFG(tZ,8),l.LFG(ME,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),rZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),iZ=(()=>{class n{constructor(){$T.Z.registerVersion("angularfire",un.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[nZ],imports:[rZ]}),n})();class oZ{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new aZ(e,this.observables,this.project))}}class aZ extends fo{constructor(e,t,r){super(e),this.observables=t,this.project=r,this.toRespond=[];const i=t.length;this.values=new Array(i);for(let s=0;s<i;s++)this.toRespond.push(s);for(let s=0;s<i;s++)this.add(ks(this,t[s],void 0,s))}notifyNext(e,t,r){this.values[r]=t;const i=this.toRespond;if(i.length>0){const s=i.indexOf(r);-1!==s&&i.splice(s,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class cZ{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new uZ(e,this.predicate))}}class uZ extends Jr.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}const FU="@firebase/database";let EN="";function VU(n){EN=n}class dZ{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class hZ{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const BU=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new dZ(e)}}catch(e){}return new hZ},Um=BU("localStorage"),SN=BU("sessionStorage"),Xv=new Hs.Yd("@firebase/database"),UU=function(){let n=1;return function(){return n++}}(),HU=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},KE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=KE.apply(null,r):e+="object"==typeof r?(0,P.Pz)(r):r,e+=" "}return e};let Hm=null,jU=!0;const GU=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Xv.logLevel=Hs.in.VERBOSE,Hm=Xv.log.bind(Xv),e&&SN.set("logging_enabled",!0)):"function"==typeof n?Hm=n:(Hm=null,SN.remove("logging_enabled"))},Ji=function(...n){if(!0===jU&&(jU=!1,null===Hm&&!0===SN.get("logging_enabled")&&GU(!0)),Hm){const e=KE.apply(null,n);Hm(e)}},ZE=function(n){return function(...e){Ji(n,...e)}},DN=function(...n){const e="FIREBASE INTERNAL ERROR: "+KE(...n);Xv.error(e)},Ru=function(...n){const e=`FIREBASE FATAL ERROR: ${KE(...n)}`;throw Xv.error(e),new Error(e)},Ks=function(...n){const e="FIREBASE WARNING: "+KE(...n);Xv.warn(e)},ZI=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Eh="[MIN_NAME]",ku="[MAX_NAME]",jm=function(n,e){if(n===e)return 0;if(n===Eh||e===ku)return-1;if(e===Eh||n===ku)return 1;{const t=QI(n),r=QI(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},gZ=function(n,e){return n===e?0:n<e?-1:1},QE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Pz)(e))},TN=function(n){if("object"!=typeof n||null===n)return(0,P.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Pz)(e[r]),t+=":",t+=TN(n[e[r]]);return t+="}",t},$U=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Xi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const zU=function(n){(0,P.hu)(!ZI(n),"Invalid JSON number");const r=1023;let i,s,c,h,g;0===n?(s=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(g=52;g;g-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(g=11;g;g-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const E=y.join("");let T="";for(g=0;g<64;g+=8){let x=parseInt(E.substr(g,8),2).toString(16);1===x.length&&(x="0"+x),T+=x}return T.toLowerCase()},vZ=new RegExp("^-?(0*)\\d{1,10}$"),qU=-2147483648,IN=2147483647,QI=function(n){if(vZ.test(n)){const e=Number(n);if(e>=qU&&e<=IN)return e}return null},eb=function(n){try{n()}catch(e){setTimeout(()=>{throw Ks("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},JE=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class wZ{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ks(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class CZ{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ji("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ks(e)}}let XE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const QU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,XU="websocket",e2="long_polling";class MN{constructor(e,t,r,i,s=!1,c="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Um.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Um.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function t2(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===XU)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==e2)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function SZ(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Xi(t,(s,c)=>{i.push(s+"="+c)}),r+i.join("&")}class DZ{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const xN={},RN={};function kN(n){const e=n.toString();return xN[e]||(xN[e]=new DZ),xN[e]}class IZ{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&eb(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class tb{constructor(e,t,r,i,s,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ZE(e),this.stats_=kN(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),t2(t,e2,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new IZ(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ON((...s)=>{const[c,h,g,y,E]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=g;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&QU.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){tb.forceAllow_=!0}static forceDisallow(){tb.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!tb.forceAllow_&&(tb.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),i=$U(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ON{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=UU(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ON.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Ji("frame writing exception"),h.stack&&Ji(h.stack),Ji(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ji("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ji("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let e0=null;"undefined"!=typeof MozWebSocket?e0=MozWebSocket:"undefined"!=typeof WebSocket&&(e0=WebSocket);let t0=(()=>{class n{constructor(t,r,i,s,c,h,g){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ZE(this.connId),this.stats_=kN(r),this.connURL=n.connectionURL_(r,h,g,s),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s){const c={v:"5"};return!(0,P.Yr)()&&"undefined"!=typeof location&&location.hostname&&QU.test(location.hostname)&&(c.r="f"),r&&(c.s=r),i&&(c.ls=i),s&&(c.ac=s),t2(t,XU,c)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Um.set("previous_websocket_failure",!0);try{if((0,P.Yr)()){const s={headers:{"User-Agent":`Firebase/5/${EN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(s.proxy={origin:h}),this.mySock=new e0(this.connURL,[],s)}else this.mySock=new e0(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==e0&&!n.forceDisallow_}static previouslyFailed(){return Um.isInMemoryStorage||!0===Um.get("previous_websocket_failure")}markConnectionHealthy(){Um.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,P.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=$U(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class NN{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[tb,t0]}initTransports_(e){const t=t0&&t0.isAvailable();let r=t&&!t0.previouslyFailed();if(e.webSocketOnly&&(t||Ks("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[t0];else{const i=this.transports_=[];for(const s of NN.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class g2{constructor(e,t,r,i,s,c,h,g,y,E){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=g,this.onKill_=y,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ZE("c:"+this.id+":"),this.transportManager_=new NN(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=JE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=QE("t",e),r=QE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=QE("t",e),r=QE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=QE("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?DN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):DN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ks("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),JE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):JE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Um.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class m2{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class _2{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class XI extends _2{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new XI}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class xn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function vn(){return new xn("")}function Yt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function yp(n){return n.pieces_.length-n.pieceNum_}function Zn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new xn(n.pieces_,e)}function FN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function n0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function b2(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new xn(e,0)}function br(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof xn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new xn(t,0)}function Kt(n){return n.pieceNum_>=n.pieces_.length}function Zs(n,e){const t=Yt(n),r=Yt(e);if(null===t)return e;if(t===r)return Zs(Zn(n),Zn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function KZ(n,e){const t=n0(n,0),r=n0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=jm(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function LN(n,e){if(yp(n)!==yp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function tl(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(yp(n)>yp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class ZZ{constructor(e,t){this.errorPrefix_=t,this.parts_=n0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);w2(this)}}function w2(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Gm(n))}function Gm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class VN extends _2{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new VN}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const r0=1e3;let tA,$m=(()=>{class n extends m2{constructor(t,r,i,s,c,h,g,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=ZE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=r0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");VN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&XI.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,c={r:s,a:t,b:r};this.log_((0,P.Pz)(c)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new P.BH,i={p:t._path.toString(),q:t._queryObject},s={action:"g",request:i,onComplete:h=>{const g=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,g,!1,null),r.resolve(g)):r.reject(g)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[c];void 0===h||s!==h||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,s){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const g={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,g=>{const y=g.d,E=g.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",g),"ok"!==E&&this.removeListen_(i,s),t.onComplete&&t.onComplete(E,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const i=(0,P.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Ks(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const c=s.s,h=s.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const c={p:t};s&&(c.q=i,c.t=s),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):DN("Unrecognized action received from server: "+(0,P.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=r0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=r0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=r0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,pe.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let g=!1,y=null;const E=function(){y?y.close():(g=!0,s())};t.realtime_={close:E,sendRequest:function(N){(0,P.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(N)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[N,U]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);g?Ji("getToken() completed but was canceled"):(Ji("getToken() completed. Creating connection."),t.authToken_=N&&N.accessToken,t.appCheckToken_=U&&U.token,y=new g2(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,K=>{Ks(K+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(N){t.log_("Failed to get token: "+N),g||(t.repoInfo_.nodeAdmin&&Ks(N),E())}}})()}interrupt(t){Ji("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ji("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=r0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>TN(c)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new xn(t).toString();let s;if(this.listens.has(i)){const c=this.listens.get(i);s=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Ji("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ji("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+EN.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=XI.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Jt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Jt(e,t)}}class eA{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Jt(Eh,e),i=new Jt(Eh,t);return 0!==this.compare(r,i)}minPost(){return Jt.MIN}}class S2 extends eA{static get __EMPTY_NODE(){return tA}static set __EMPTY_NODE(e){tA=e}compare(e,t){return jm(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Jt.MIN}maxPost(){return new Jt(ku,tA)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Jt(e,tA)}toString(){return".key"}}const Ou=new S2;class nA{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let UN,fc=(()=>{class n{constructor(t,r,i,s,c){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=s?s:Ao.EMPTY_NODE,this.right=null!=c?c:Ao.EMPTY_NODE}copy(t,r,i,s,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=s?s:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const c=i(t,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===c?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ao.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ao.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ao{constructor(e,t=Ao.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ao(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,fc.BLACK,null,null))}remove(e){return new Ao(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,fc.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new nA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new nA(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new nA(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new nA(this.root_,null,this.comparator_,!0,e)}}function s7(n,e){return jm(n.name,e.name)}function BN(n,e){return jm(n,e)}Ao.EMPTY_NODE=new class i7{copy(e,t,r,i,s){return this}insert(e,t,r){return new fc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const D2=function(n){return"number"==typeof n?"number:"+zU(n):"string:"+n},T2=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===UN||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===UN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let I2,A2,M2,nb=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),T2(this.priorityNode_)}static set __childrenNodeConstructor(t){I2=t}static get __childrenNodeConstructor(){return I2}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Kt(t)?this:".priority"===Yt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Yt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===yp(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Zn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+D2(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?zU(this.value_):this.value_,this.lazyHash_=HU(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(s>=0,"Unknown leaf type: "+r),(0,P.hu)(c>=0,"Unknown leaf type: "+i),s===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const er=new class c7 extends eA{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?jm(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Jt.MIN}maxPost(){return new Jt(ku,new nb("[PRIORITY-POST]",M2))}makePost(e,t){const r=A2(e);return new Jt(t,new nb("[PRIORITY-POST]",r))}toString(){return".priority"}},u7=Math.log(2);class d7{constructor(e){this.count=parseInt(Math.log(e+1)/u7,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const rA=function(n,e,t,r){n.sort(e);const i=function(g,y){const E=y-g;let T,x;if(0===E)return null;if(1===E)return T=n[g],x=t?t(T):T,new fc(x,T.node,fc.BLACK,null,null);{const N=parseInt(E/2,10)+g,U=i(g,N),K=i(N+1,y);return T=n[N],x=t?t(T):T,new fc(x,T.node,fc.BLACK,U,K)}},h=function(g){let y=null,E=null,T=n.length;const x=function(U,K){const le=T-U,Pe=T;T-=U;const Me=i(le+1,Pe),Be=n[le],ke=t?t(Be):Be;N(new fc(ke,Be.node,K,null,Me))},N=function(U){y?(y.left=U,y=U):(E=U,y=U)};for(let U=0;U<g.count;++U){const K=g.nextBitIsOne(),le=Math.pow(2,g.count-(U+1));K?x(le,fc.BLACK):(x(le,fc.BLACK),x(le,fc.RED))}return E}(new d7(n.length));return new Ao(r||e,h)};let HN;const rb={};class Sh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(rb&&er,"ChildrenNode.ts has not been loaded"),HN=HN||new Sh({".priority":rb},{".priority":er}),HN}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ao?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==Ou,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(Jt.Wrap);let h,c=s.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=s.getNext();h=i?rA(r,e.getCompare()):rb;const g=e.toString(),y=Object.assign({},this.indexSet_);y[g]=e;const E=Object.assign({},this.indexes_);return E[g]=h,new Sh(E,y)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(i,s)=>{const c=(0,P.DV)(this.indexSet_,s);if((0,P.hu)(c,"Missing index implementation for "+s),i===rb){if(c.isDefinedOn(e.node)){const h=[],g=t.getIterator(Jt.Wrap);let y=g.getNext();for(;y;)y.name!==e.name&&h.push(y),y=g.getNext();return h.push(e),rA(h,c.getCompare())}return rb}{const h=t.get(e.name);let g=i;return h&&(g=g.remove(new Jt(e.name,h))),g.insert(e,e.node)}});return new Sh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,i=>{if(i===rb)return i;{const s=t.get(e.name);return s?i.remove(new Jt(e.name,s)):i}});return new Sh(r,this.indexSet_)}}let s0,Vt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&T2(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return s0||(s0=new n(new Ao(BN),null,Sh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||s0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?s0:r}}getChild(t){const r=Yt(t);return null===r?this:this.getImmediateChild(r).getChild(Zn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Jt(t,r);let s,c;r.isEmpty()?(s=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=s.isEmpty()?s0:this.priorityNode_;return new n(s,h,c)}}updateChild(t,r){const i=Yt(t);if(null===i)return r;{(0,P.hu)(".priority"!==Yt(t)||1===yp(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Zn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,c=!0;if(this.forEachChild(er,(h,g)=>{r[h]=g.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):c=!1}),!t&&c&&s<2*i){const h=[];for(const g in r)h[g]=r[g];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+D2(this.getPriority().val())+":"),this.forEachChild(er,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":HU(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const c=s.getPredecessorKey(new Jt(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Jt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Jt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Jt.Wrap);let c=s.peek();for(;null!=c&&r.compare(c,t)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Jt.Wrap);let c=s.peek();for(;null!=c&&r.compare(c,t)>0;)s.getNext(),c=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===o0?-1:0}withIndex(t){if(t===Ou||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ou||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(er),s=r.getIterator(er);let c=i.getNext(),h=s.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=s.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===Ou?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const o0=new class h7 extends Vt{constructor(){super(new Ao(BN),Vt.EMPTY_NODE,Sh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Vt.EMPTY_NODE}isEmpty(){return!1}};function xr(n,e=null){if(null===n)return Vt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new nb(n,xr(e));if(n instanceof Array){let t=Vt.EMPTY_NODE;return Xi(n,(r,i)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const s=xr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(xr(e))}{const t=[];let r=!1;if(Xi(n,(c,h)=>{if("."!==c.substring(0,1)){const g=xr(h);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new Jt(c,g)))}}),0===t.length)return Vt.EMPTY_NODE;const s=rA(t,s7,c=>c.name,BN);if(r){const c=rA(t,er.getCompare());return new Vt(s,xr(e),new Sh({".priority":c},{".priority":er}))}return new Vt(s,xr(e),Sh.Default)}}Object.defineProperties(Jt,{MIN:{value:new Jt(Eh,Vt.EMPTY_NODE)},MAX:{value:new Jt(ku,o0)}}),S2.__EMPTY_NODE=Vt.EMPTY_NODE,nb.__childrenNodeConstructor=Vt,function o7(n){UN=n}(o0),function l7(n){M2=n}(o0),function a7(n){A2=n}(xr);class jN extends eA{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!Kt(e)&&".priority"!==Yt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?jm(e.name,t.name):s}makePost(e,t){const r=xr(e),i=Vt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Jt(t,i)}maxPost(){const e=Vt.EMPTY_NODE.updateChild(this.indexPath_,o0);return new Jt(ku,e)}toString(){return n0(this.indexPath_,0).join("/")}}const GN=new class p7 extends eA{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?jm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Jt.MIN}maxPost(){return Jt.MAX}makePost(e,t){const r=xr(e);return new Jt(t,r)}toString(){return".value"}},ib="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",g7=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=ib.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let c=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=ib.charAt(e[i]);return(0,P.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),k2=function(n){if(n===""+IN)return"-";const e=QI(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return ku;const s=ib.charAt(ib.indexOf(t[r])+1);return t[r]=s,t.slice(0,r+1).join("")},O2=function(n){if(n===""+qU)return Eh;const e=QI(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+IN:(delete t[t.length-1],t.join("")):(t[t.length-1]=ib.charAt(ib.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function N2(n){return{type:"value",snapshotNode:n}}function sb(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function a0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function l0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class zN{constructor(e){this.index_=e}updateChild(e,t,r,i,s,c){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(a0(t,h)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(sb(t,r)):c.trackChildChange(l0(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(er,(i,s)=>{t.hasChild(i)||r.trackChildChange(a0(i,s))}),t.isLeafNode()||t.forEachChild(er,(i,s)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(s)||r.trackChildChange(l0(i,s,c))}else r.trackChildChange(sb(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Vt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class c0{constructor(e){this.indexedFilter_=new zN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=c0.getStartPost_(e),this.endPost_=c0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,c){return this.matches(new Jt(t,r))||(r=Vt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Vt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Vt.EMPTY_NODE);const s=this;return t.forEachChild(er,(c,h)=>{s.matches(new Jt(c,h))||(i=i.updateImmediateChild(c,Vt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class _7{constructor(e){this.rangedFilter_=new c0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,c){return this.rangedFilter_.matches(new Jt(t,r))||(r=Vt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,c):this.fullLimitUpdateChild_(e,t,r,s,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Vt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Vt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const h=s.getNext();let g;if(g=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!g)break;i=i.updateImmediateChild(h.name,h.node),c++}}else{let s,c,h,g;if(i=t.withIndex(this.index_),i=i.updatePriority(Vt.EMPTY_NODE),this.reverse_){g=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const T=this.index_.getCompare();h=(x,N)=>T(N,x)}else g=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,E=!1;for(;g.hasNext();){const T=g.getNext();!E&&h(s,T)<=0&&(E=!0),E&&y<this.limit_&&h(T,c)<=0?y++:i=i.updateImmediateChild(T.name,Vt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let c;if(this.reverse_){const T=this.index_.getCompare();c=(x,N)=>T(N,x)}else c=this.index_.getCompare();const h=e;(0,P.hu)(h.numChildren()===this.limit_,"");const g=new Jt(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),E=this.rangedFilter_.matches(g);if(h.hasChild(t)){const T=h.getImmediateChild(t);let x=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=x&&(x.name===t||h.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);const N=null==x?1:c(x,g);if(E&&!r.isEmpty()&&N>=0)return null!=s&&s.trackChildChange(l0(t,r,T)),h.updateImmediateChild(t,r);{null!=s&&s.trackChildChange(a0(t,T));const K=h.updateImmediateChild(t,Vt.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(null!=s&&s.trackChildChange(sb(x.name,x.node)),K.updateImmediateChild(x.name,x.node)):K}}return r.isEmpty()?e:E&&c(y,g)>=0?(null!=s&&(s.trackChildChange(a0(y.name,y.node)),s.trackChildChange(sb(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,Vt.EMPTY_NODE)):e}}class iA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=er}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Eh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ku}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===er}copy(){const e=new iA;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function qN(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function WN(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function sA(n,e){const t=n.copy();return t.index_=e,t}function P2(n){const e={};if(n.isDefault())return e;let t;return n.index_===er?t="$priority":n.index_===GN?t="$value":n.index_===Ou?t="$key":((0,P.hu)(n.index_ instanceof jN,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Pz)(t),n.startSet_&&(e.startAt=(0,P.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,P.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,P.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,P.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function F2(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==er&&(e.i=n.index_.toString()),e}class oA extends m2{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ZE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const c=oA.getListenId_(e,r),h={};this.listens_[c]=h;const g=P2(e._queryParams);this.restRequest_(s+".json",g,(y,E)=>{let T=E;if(404===y&&(T=null,y=null),null===y&&this.onDataUpdate_(s,T,!1,r),(0,P.DV)(this.listens_,c)===h){let x;x=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(x,null)}})}unlisten(e,t){const r=oA.getListenId_(e,t);delete this.listens_[r]}get(e){const t=P2(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",t,(s,c)=>{let h=c;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=(0,P.cI)(h.responseText)}catch(y){Ks("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,g)}else 401!==h.status&&404!==h.status&&Ks("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class E7{constructor(){this.rootNode_=Vt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function aA(){return{value:null,children:new Map}}function ob(n,e,t){if(Kt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Yt(e);n.children.has(r)||n.children.set(r,aA()),ob(n.children.get(r),e=Zn(e),t)}}function YN(n,e){if(Kt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(er,(r,i)=>{ob(n,new xn(r),i)}),YN(n,e)}}if(n.children.size>0){const t=Yt(e);return e=Zn(e),n.children.has(t)&&YN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function KN(n,e,t){null!==n.value?t(e,n.value):function S7(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{KN(i,new xn(e.toString()+"/"+r),t)})}class D7{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Xi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class A7{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new D7(e);const r=1e4+2e4*Math.random();JE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Xi(e,(i,s)=>{s>0&&(0,P.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),JE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var nl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(nl||(nl={})),nl))();function JN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class lA{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=nl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Kt(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new xn(e));return new lA(vn(),t,this.revert)}}return(0,P.hu)(Yt(this.path)===e,"operationForChild called for unrelated child."),new lA(Zn(this.path),this.affectedTree,this.revert)}}class u0{constructor(e,t){this.source=e,this.path=t,this.type=nl.LISTEN_COMPLETE}operationForChild(e){return Kt(this.path)?new u0(this.source,vn()):new u0(this.source,Zn(this.path))}}class zm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=nl.OVERWRITE}operationForChild(e){return Kt(this.path)?new zm(this.source,vn(),this.snap.getImmediateChild(e)):new zm(this.source,Zn(this.path),this.snap)}}class ab{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=nl.MERGE}operationForChild(e){if(Kt(this.path)){const t=this.children.subtree(new xn(e));return t.isEmpty()?null:t.value?new zm(this.source,vn(),t.value):new ab(this.source,vn(),t)}return(0,P.hu)(Yt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ab(this.source,Zn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class vp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Kt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Yt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class M7{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function d0(n,e,t,r,i,s){const c=r.filter(h=>h.type===t);c.sort((h,g)=>function k7(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new Jt(e.childName,e.snapshotNode),i=new Jt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,g)),c.forEach(h=>{const g=function R7(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(g,n.query_))})})}function cA(n,e){return{eventCache:n,serverCache:e}}function h0(n,e,t,r){return cA(new vp(e,t,r),n.serverCache)}function V2(n,e,t,r){return cA(n.eventCache,new vp(e,t,r))}function uA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function qm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let XN;class tr{constructor(e,t=(()=>(XN||(XN=new Ao(gZ)),XN))()){this.value=e,this.children=t}static fromObject(e){let t=new tr(null);return Xi(e,(r,i)=>{t=t.set(new xn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:vn(),value:this.value};if(Kt(e))return null;{const r=Yt(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Zn(e),t);return null!=s?{path:br(new xn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Kt(e))return this;{const t=Yt(e),r=this.children.get(t);return null!==r?r.subtree(Zn(e)):new tr(null)}}set(e,t){if(Kt(e))return new tr(t,this.children);{const r=Yt(e),s=(this.children.get(r)||new tr(null)).set(Zn(e),t),c=this.children.insert(r,s);return new tr(this.value,c)}}remove(e){if(Kt(e))return this.children.isEmpty()?new tr(null):new tr(null,this.children);{const t=Yt(e),r=this.children.get(t);if(r){const i=r.remove(Zn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new tr(null):new tr(this.value,s)}return this}}get(e){if(Kt(e))return this.value;{const t=Yt(e),r=this.children.get(t);return r?r.get(Zn(e)):null}}setTree(e,t){if(Kt(e))return t;{const r=Yt(e),s=(this.children.get(r)||new tr(null)).setTree(Zn(e),t);let c;return c=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new tr(this.value,c)}}fold(e){return this.fold_(vn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(br(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,vn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Kt(e))return null;{const s=Yt(e),c=this.children.get(s);return c?c.findOnPath_(Zn(e),br(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,vn(),t)}foreachOnPath_(e,t,r){if(Kt(e))return this;{this.value&&r(t,this.value);const i=Yt(e),s=this.children.get(i);return s?s.foreachOnPath_(Zn(e),br(t,i),r):new tr(null)}}foreach(e){this.foreach_(vn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(br(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class pc{constructor(e){this.writeTree_=e}static empty(){return new pc(new tr(null))}}function f0(n,e,t){if(Kt(e))return new pc(new tr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const c=Zs(i,e);return s=s.updateChild(c,t),new pc(n.writeTree_.set(i,s))}{const i=new tr(t),s=n.writeTree_.setTree(e,i);return new pc(s)}}}function eP(n,e,t){let r=n;return Xi(t,(i,s)=>{r=f0(r,br(e,i),s)}),r}function B2(n,e){if(Kt(e))return pc.empty();{const t=n.writeTree_.setTree(e,new tr(null));return new pc(t)}}function tP(n,e){return null!=Wm(n,e)}function Wm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Zs(t.path,e)):null}function U2(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(er,(r,i)=>{e.push(new Jt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Jt(r,i.value))}),e}function bp(n,e){if(Kt(e))return n;{const t=Wm(n,e);return new pc(null!=t?new tr(t):n.writeTree_.subtree(e))}}function nP(n){return n.writeTree_.isEmpty()}function lb(n,e){return H2(vn(),n.writeTree_,e)}function H2(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,P.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=H2(br(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(br(n,".priority"),r)),t}}function dA(n,e){return q2(e,n)}function V7(n,e){if(n.snap)return tl(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&tl(br(n.path,t),e))return!0;return!1}function U7(n){return n.visible}function j2(n,e,t){let r=pc.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const c=s.path;let h;if(s.snap)tl(t,c)?(h=Zs(t,c),r=f0(r,h,s.snap)):tl(c,t)&&(h=Zs(c,t),r=f0(r,vn(),s.snap.getChild(h)));else{if(!s.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(tl(t,c))h=Zs(t,c),r=eP(r,h,s.children);else if(tl(c,t))if(h=Zs(c,t),Kt(h))r=eP(r,vn(),s.children);else{const g=(0,P.DV)(s.children,Yt(h));if(g){const y=g.getChild(Zn(h));r=f0(r,vn(),y)}}}}}return r}function G2(n,e,t,r,i){if(r||i){const s=bp(n.visibleWrites,e);return!i&&nP(s)?t:i||null!=t||tP(s,vn())?lb(j2(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(tl(y.path,e)||tl(e,y.path))},e),t||Vt.EMPTY_NODE):null}{const s=Wm(n.visibleWrites,e);if(null!=s)return s;{const c=bp(n.visibleWrites,e);return nP(c)?t:null!=t||tP(c,vn())?lb(c,t||Vt.EMPTY_NODE):null}}}function hA(n,e,t,r){return G2(n.writeTree,n.treePath,e,t,r)}function rP(n,e){return function H7(n,e,t){let r=Vt.EMPTY_NODE;const i=Wm(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(er,(s,c)=>{r=r.updateImmediateChild(s,c)}),r;if(t){const s=bp(n.visibleWrites,e);return t.forEachChild(er,(c,h)=>{const g=lb(bp(s,new xn(c)),h);r=r.updateImmediateChild(c,g)}),U2(s).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return U2(bp(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function $2(n,e,t,r){return function j7(n,e,t,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=br(e,t);if(tP(n.visibleWrites,s))return null;{const c=bp(n.visibleWrites,s);return nP(c)?i.getChild(t):lb(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function fA(n,e){return function $7(n,e){return Wm(n.visibleWrites,e)}(n.writeTree,br(n.treePath,e))}function iP(n,e,t){return function G7(n,e,t,r){const i=br(e,t),s=Wm(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?lb(bp(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function z2(n,e){return q2(br(n.treePath,e),n.writeTree)}function q2(n,e){return{treePath:n,writeTree:e}}class Y7{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,l0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,a0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,sb(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,l0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const W2=new class K7{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class sP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new vp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return iP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:qm(this.viewCache_),s=function W7(n,e,t,r,i,s){return function z7(n,e,t,r,i,s,c){let h;const g=bp(n.visibleWrites,e),y=Wm(g,vn());if(null!=y)h=y;else{if(null==t)return[];h=lb(g,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const E=[],T=c.getCompare(),x=s?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let N=x.getNext();for(;N&&E.length<i;)0!==T(N,r)&&E.push(N),N=x.getNext();return E}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function Y2(n,e,t,r,i,s){const c=e.eventCache;if(null!=fA(r,t))return e;{let h,g;if(Kt(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=qm(e),T=rP(r,y instanceof Vt?y:Vt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),T,s)}else{const y=hA(r,qm(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=Yt(t);if(".priority"===y){(0,P.hu)(1===yp(t),"Can't have a priority with additional path components");const E=c.getNode();g=e.serverCache.getNode();const T=$2(r,t,E,g);h=null!=T?n.filter.updatePriority(E,T):c.getNode()}else{const E=Zn(t);let T;if(c.isCompleteForChild(y)){g=e.serverCache.getNode();const x=$2(r,t,c.getNode(),g);T=null!=x?c.getNode().getImmediateChild(y).updateChild(E,x):c.getNode().getImmediateChild(y)}else T=iP(r,y,e.serverCache);h=null!=T?n.filter.updateChild(c.getNode(),y,T,E,i,s):c.getNode()}}return h0(e,h,c.isFullyInitialized()||Kt(t),n.filter.filtersNodes())}}function pA(n,e,t,r,i,s,c,h){const g=e.serverCache;let y;const E=c?n.filter:n.filter.getIndexedFilter();if(Kt(t))y=E.updateFullNode(g.getNode(),r,null);else if(E.filtersNodes()&&!g.isFiltered()){const N=g.getNode().updateChild(t,r);y=E.updateFullNode(g.getNode(),N,null)}else{const N=Yt(t);if(!g.isCompleteForPath(t)&&yp(t)>1)return e;const U=Zn(t),le=g.getNode().getImmediateChild(N).updateChild(U,r);y=".priority"===N?E.updatePriority(g.getNode(),le):E.updateChild(g.getNode(),N,le,U,W2,null)}const T=V2(e,y,g.isFullyInitialized()||Kt(t),E.filtersNodes());return Y2(n,T,t,i,new sP(i,T,s),h)}function oP(n,e,t,r,i,s,c){const h=e.eventCache;let g,y;const E=new sP(i,e,s);if(Kt(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,c),g=h0(e,y,!0,n.filter.filtersNodes());else{const T=Yt(t);if(".priority"===T)y=n.filter.updatePriority(e.eventCache.getNode(),r),g=h0(e,y,h.isFullyInitialized(),h.isFiltered());else{const x=Zn(t),N=h.getNode().getImmediateChild(T);let U;if(Kt(x))U=r;else{const K=E.getCompleteChild(T);U=null!=K?".priority"===FN(x)&&K.getChild(b2(x)).isEmpty()?K:K.updateChild(x,r):Vt.EMPTY_NODE}g=N.equals(U)?e:h0(e,n.filter.updateChild(h.getNode(),T,U,x,E,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return g}function K2(n,e){return n.eventCache.isCompleteForChild(e)}function Z2(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function aP(n,e,t,r,i,s,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,g=e;y=Kt(t)?r:new tr(null).setTree(t,r);const E=e.serverCache.getNode();return y.children.inorderTraversal((T,x)=>{if(E.hasChild(T)){const U=Z2(0,e.serverCache.getNode().getImmediateChild(T),x);g=pA(n,g,new xn(T),U,i,s,c,h)}}),y.children.inorderTraversal((T,x)=>{const N=!e.serverCache.isCompleteForChild(T)&&void 0===x.value;if(!E.hasChild(T)&&!N){const K=Z2(0,e.serverCache.getNode().getImmediateChild(T),x);g=pA(n,g,new xn(T),K,i,s,c,h)}}),g}class iQ{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new zN(r.getIndex()),s=function y7(n){return n.loadsAllData()?new zN(n.getIndex()):n.hasLimit()?new _7(n):new c0(n)}(r);this.processor_=function Z7(n){return{filter:n}}(s);const c=t.serverCache,h=t.eventCache,g=i.updateFullNode(Vt.EMPTY_NODE,c.getNode(),null),y=s.updateFullNode(Vt.EMPTY_NODE,h.getNode(),null),E=new vp(g,c.isFullyInitialized(),i.filtersNodes()),T=new vp(y,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=cA(T,E),this.eventGenerator_=new M7(this.query_)}get query(){return this.query_}}function aQ(n,e){const t=qm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Kt(e)&&!t.getImmediateChild(Yt(e)).isEmpty())?t.getChild(e):null}function Q2(n){return 0===n.eventRegistrations_.length}function J2(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function X2(n,e,t,r){e.type===nl.MERGE&&null!==e.source.queryId&&((0,P.hu)(qm(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(uA(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function J7(n,e,t,r,i){const s=new Y7;let c,h;if(t.type===nl.OVERWRITE){const y=t;y.source.fromUser?c=oP(n,e,y.path,y.snap,r,i,s):((0,P.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!Kt(y.path),c=pA(n,e,y.path,y.snap,r,i,h,s))}else if(t.type===nl.MERGE){const y=t;y.source.fromUser?c=function eQ(n,e,t,r,i,s,c){let h=e;return r.foreach((g,y)=>{const E=br(t,g);K2(e,Yt(E))&&(h=oP(n,h,E,y,i,s,c))}),r.foreach((g,y)=>{const E=br(t,g);K2(e,Yt(E))||(h=oP(n,h,E,y,i,s,c))}),h}(n,e,y.path,y.children,r,i,s):((0,P.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),c=aP(n,e,y.path,y.children,r,i,h,s))}else if(t.type===nl.ACK_USER_WRITE){const y=t;c=y.revert?function rQ(n,e,t,r,i,s){let c;if(null!=fA(r,t))return e;{const h=new sP(r,e,i),g=e.eventCache.getNode();let y;if(Kt(t)||".priority"===Yt(t)){let E;if(e.serverCache.isFullyInitialized())E=hA(r,qm(e));else{const T=e.serverCache.getNode();(0,P.hu)(T instanceof Vt,"serverChildren would be complete if leaf node"),E=rP(r,T)}E=E,y=n.filter.updateFullNode(g,E,s)}else{const E=Yt(t);let T=iP(r,E,e.serverCache);null==T&&e.serverCache.isCompleteForChild(E)&&(T=g.getImmediateChild(E)),y=null!=T?n.filter.updateChild(g,E,T,Zn(t),h,s):e.eventCache.getNode().hasChild(E)?n.filter.updateChild(g,E,Vt.EMPTY_NODE,Zn(t),h,s):g,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=hA(r,qm(e)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,s)))}return c=e.serverCache.isFullyInitialized()||null!=fA(r,vn()),h0(e,y,c,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function tQ(n,e,t,r,i,s,c){if(null!=fA(i,t))return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(Kt(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return pA(n,e,t,g.getNode().getChild(t),i,s,h,c);if(Kt(t)){let y=new tr(null);return g.getNode().forEachChild(Ou,(E,T)=>{y=y.set(new xn(E),T)}),aP(n,e,t,y,i,s,h,c)}return e}{let y=new tr(null);return r.foreach((E,T)=>{const x=br(t,E);g.isCompleteForPath(x)&&(y=y.set(E,g.getNode().getChild(x)))}),aP(n,e,t,y,i,s,h,c)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==nl.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);c=function nQ(n,e,t,r,i){const s=e.serverCache;return Y2(n,V2(e,s.getNode(),s.isFullyInitialized()||Kt(t),s.isFiltered()),t,r,W2,i)}(n,e,t.path,r,s)}const g=s.getChanges();return function X7(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=uA(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(N2(uA(e)))}}(e,c,g),{viewCache:c,changes:g}}(n.processor_,i,e,t,r);return function Q7(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,P.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,eH(n,s.changes,s.viewCache.eventCache.getNode(),null)}function eH(n,e,t,r){return function x7(n,e,t,r){const i=[],s=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function m7(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),d0(n,i,"child_removed",e,r,t),d0(n,i,"child_added",e,r,t),d0(n,i,"child_moved",s,r,t),d0(n,i,"child_changed",e,r,t),d0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let gA,_A;class tH{constructor(){this.views=new Map}}function lP(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,P.hu)(null!=s,"SyncTree gave us an op for an invalid query."),X2(s,e,t,r)}{let s=[];for(const c of n.views.values())s=s.concat(X2(c,e,t,r));return s}}function nH(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let h=hA(t,i?r:null),g=!1;h?g=!0:r instanceof Vt?(h=rP(t,r),g=!1):(h=Vt.EMPTY_NODE,g=!1);const y=cA(new vp(h,g,!1),new vp(r,i,!1));return new iQ(e,y)}return c}function rH(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function wp(n,e){let t=null;for(const r of n.views.values())t=t||aQ(r,e);return t}function iH(n,e){return e._queryParams.loadsAllData()?mA(n):n.views.get(e._queryIdentifier)}function sH(n,e){return null!=iH(n,e)}function Cp(n){return null!=mA(n)}function mA(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let _Q=1;class oH{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tr(null),this.pendingWriteTree_=function q7(){return{visibleWrites:pc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function cP(n,e,t,r,i){return function N7(n,e,t,r,i){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=f0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?cb(n,new zm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Ep(n,e,t=!1){const r=function F7(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function L7(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&V7(h,r.path)?i=!1:tl(r.path,h.path)&&(s=!0)),c--}return!!i&&(s?(function B7(n){n.visibleWrites=j2(n.allWrites,U7,vn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=B2(n.visibleWrites,r.path):Xi(r.children,g=>{n.visibleWrites=B2(n.visibleWrites,br(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let s=new tr(null);return null!=r.snap?s=s.set(vn(),!0):Xi(r.children,c=>{s=s.set(new xn(c),!0)}),cb(n,new lA(r.path,s,t))}return[]}function p0(n,e,t){return cb(n,new zm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function uP(n,e,t,r){const i=e._path,s=n.syncPointTree_.get(i);let c=[];if(s&&("default"===e._queryIdentifier||sH(s,e))){const h=function pQ(n,e,t,r){const i=e._queryIdentifier,s=[];let c=[];const h=Cp(n);if("default"===i)for(const[g,y]of n.views.entries())c=c.concat(J2(y,t,r)),Q2(y)&&(n.views.delete(g),y.query._queryParams.loadsAllData()||s.push(y.query));else{const g=n.views.get(i);g&&(c=c.concat(J2(g,t,r)),Q2(g)&&(n.views.delete(i),g.query._queryParams.loadsAllData()||s.push(g.query)))}return h&&!Cp(n)&&s.push(new(function dQ(){return(0,P.hu)(gA,"Reference.ts has not been loaded"),gA}())(e._repo,e._path)),{removed:s,events:c}}(s,e,t,r);(function hQ(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const g=h.removed;c=h.events;const y=-1!==g.findIndex(T=>T._queryParams.loadsAllData()),E=n.syncPointTree_.findOnPath(i,(T,x)=>Cp(x));if(y&&!E){const T=n.syncPointTree_.subtree(i);if(!T.isEmpty()){const x=function DQ(n){return n.fold((e,t,r)=>{if(t&&Cp(t))return[mA(t)];{let i=[];return t&&(i=rH(t)),Xi(r,(s,c)=>{i=i.concat(c)}),i}})}(T);for(let N=0;N<x.length;++N){const U=x[N],K=U.query,le=uH(n,U);n.listenProvider_.startListening(g0(K),vA(n,K),le.hashFn,le.onComplete)}}}!E&&g.length>0&&!r&&(y?n.listenProvider_.stopListening(g0(e),null):g.forEach(T=>{const x=n.queryToTagMap.get(bA(T));n.listenProvider_.stopListening(g0(T),x)})),function TQ(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=bA(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,g)}return c}function aH(n,e,t){const r=e._path;let i=null,s=!1;n.syncPointTree_.foreachOnPath(r,(T,x)=>{const N=Zs(T,r);i=i||wp(x,N),s=s||Cp(x)});let h,c=n.syncPointTree_.get(r);c?(s=s||Cp(c),i=i||wp(c,vn())):(c=new tH,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=i?h=!0:(h=!1,i=Vt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((x,N)=>{const U=wp(N,vn());U&&(i=i.updateImmediateChild(x,U))}));const g=sH(c,e);if(!g&&!e._queryParams.loadsAllData()){const T=bA(e);(0,P.hu)(!n.queryToTagMap.has(T),"View does not exist, but we have a tag");const x=function IQ(){return _Q++}();n.queryToTagMap.set(T,x),n.tagToQueryMap.set(x,T)}let E=function fQ(n,e,t,r,i,s){const c=nH(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function lQ(n,e){n.eventRegistrations_.push(e)}(c,t),function cQ(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(er,(s,c)=>{r.push(sb(s,c))}),t.isFullyInitialized()&&r.push(N2(t.getNode())),eH(n,r,t.getNode(),e)}(c,t)}(c,e,t,dA(n.pendingWriteTree_,r),i,h);if(!g&&!s){const T=iH(c,e);E=E.concat(function AQ(n,e,t){const r=e._path,i=vA(n,e),s=uH(n,t),c=n.listenProvider_.startListening(g0(e),i,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,P.hu)(!Cp(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((y,E,T)=>{if(!Kt(y)&&E&&Cp(E))return[mA(E).query];{let x=[];return E&&(x=x.concat(rH(E).map(N=>N.query))),Xi(T,(N,U)=>{x=x.concat(U)}),x}});for(let y=0;y<g.length;++y){const E=g[y];n.listenProvider_.stopListening(g0(E),vA(n,E))}}return c}(n,e,T))}return E}function yA(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(c,h)=>{const y=wp(h,Zs(c,e));if(y)return y});return G2(i,e,s,t,!0)}function cb(n,e){return lH(e,n.syncPointTree_,null,dA(n.pendingWriteTree_,vn()))}function lH(n,e,t,r){if(Kt(n.path))return cH(n,e,t,r);{const i=e.get(vn());null==t&&null!=i&&(t=wp(i,vn()));let s=[];const c=Yt(n.path),h=n.operationForChild(c),g=e.children.get(c);if(g&&h){const y=t?t.getImmediateChild(c):null,E=z2(r,c);s=s.concat(lH(h,g,y,E))}return i&&(s=s.concat(lP(i,n,r,t))),s}}function cH(n,e,t,r){const i=e.get(vn());null==t&&null!=i&&(t=wp(i,vn()));let s=[];return e.children.inorderTraversal((c,h)=>{const g=t?t.getImmediateChild(c):null,y=z2(r,c),E=n.operationForChild(c);E&&(s=s.concat(cH(E,h,g,y)))}),i&&(s=s.concat(lP(i,n,r,t))),s}function uH(n,e){const t=e.query,r=vA(n,t);return{hashFn:()=>(function sQ(n){return n.viewCache_.serverCache.getNode()}(e)||Vt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function wQ(n,e,t){const r=dP(n,t);if(r){const i=hP(r),s=i.path,c=i.queryId,h=Zs(s,e);return fP(n,s,new u0(JN(c),h))}return[]}(n,t._path,r):function bQ(n,e){return cb(n,new u0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function yZ(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return uP(n,t,null,s)}}}}function vA(n,e){const t=bA(e);return n.queryToTagMap.get(t)}function bA(n){return n._path.toString()+"$"+n._queryIdentifier}function dP(n,e){return n.tagToQueryMap.get(e)}function hP(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new xn(n.substr(0,e))}}function fP(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),lP(r,t,dA(n.pendingWriteTree_,e),null)}function g0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function mQ(){return(0,P.hu)(_A,"Reference.ts has not been loaded"),_A}())(n._repo,n._path):n}class pP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new pP(t)}node(){return this.node_}}class gP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=br(this.path_,e);return new gP(this.syncTree_,t)}node(){return yA(this.syncTree_,this.path_)}}const dH=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?xQ(n[".sv"],e,t):"object"==typeof n[".sv"]?RQ(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},xQ=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},RQ=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},hH=function(n,e,t,r){return _P(e,new gP(t,n),r)},mP=function(n,e,t){return _P(n,new pP(e),t)};function _P(n,e,t){const r=n.getPriority().val(),i=dH(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const c=n,h=dH(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new nb(h,xr(i)):n}{const c=n;return s=c,i!==c.getPriority().val()&&(s=s.updatePriority(new nb(i))),c.forEachChild(er,(h,g)=>{const y=_P(g,e.getImmediateChild(h),t);y!==g&&(s=s.updateImmediateChild(h,y))}),s}}class yP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function wA(n,e){let t=e instanceof xn?e:new xn(e),r=n,i=Yt(t);for(;null!==i;){const s=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new yP(i,r,s),t=Zn(t),i=Yt(t)}return r}function Ym(n){return n.node.value}function vP(n,e){n.node.value=e,bP(n)}function fH(n){return n.node.childCount>0}function CA(n,e){Xi(n.node.children,(t,r)=>{e(new yP(t,n,r))})}function pH(n,e,t,r){t&&!r&&e(n),CA(n,i=>{pH(i,e,!0,r)}),t&&r&&e(n)}function m0(n){return new xn(null===n.parent?n.name:m0(n.parent)+"/"+n.name)}function bP(n){null!==n.parent&&function NQ(n,e,t){const r=function kQ(n){return void 0===Ym(n)&&!fH(n)}(t),i=(0,P.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,bP(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,bP(n))}(n.parent,n.name,n)}const PQ=/[\[\].#$\/\u0000-\u001F\u007F]/,FQ=/[\[\].#$\u0000-\u001F\u007F]/,wP=10485760,EA=function(n){return"string"==typeof n&&0!==n.length&&!PQ.test(n)},gH=function(n){return"string"==typeof n&&0!==n.length&&!FQ.test(n)},_0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!ZI(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},Nu=function(n,e,t,r){r&&void 0===e||y0((0,P.gK)(n,"value"),e,t)},y0=function(n,e,t){const r=t instanceof xn?new ZZ(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Gm(r));if("function"==typeof e)throw new Error(n+"contains a function "+Gm(r)+" with contents = "+e.toString());if(ZI(e))throw new Error(n+"contains "+e.toString()+" "+Gm(r));if("string"==typeof e&&e.length>wP/3&&(0,P.ug)(e)>wP)throw new Error(n+"contains a string greater than "+wP+" utf8 bytes "+Gm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Xi(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!EA(c)))throw new Error(n+" contains an invalid key ("+c+") "+Gm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function QZ(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),w2(n)})(r,c),y0(n,h,r),function JZ(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Gm(r)+" in addition to actual children.")}},mH=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Xi(e,(c,h)=>{const g=new xn(c);if(y0(i,h,br(t,g)),".priority"===FN(g)&&!_0(h))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(g)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=n0(r);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!EA(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(KZ);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&tl(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},CP=function(n,e,t){if(!t||void 0!==e){if(ZI(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!_0(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},v0=function(n,e,t,r){if(!(r&&void 0===t||EA(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},b0=function(n,e,t,r){if(!(r&&void 0===t||gH(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},rl=function(n,e){if(".info"===Yt(e))throw new Error(n+" failed = Can't modify data under /.info/")},_H=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!EA(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gH(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class UQ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function SA(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!LN(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function EP(n,e,t){SA(n,t),yH(n,r=>LN(r,e))}function il(n,e,t){SA(n,t),yH(n,r=>tl(r,e)||tl(e,r))}function yH(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(HQ(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function HQ(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Hm&&Ji("event: "+t.toString()),eb(r)}}}const vH="repo_interrupt";class GQ{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new UQ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=aA(),this.transactionQueueTree_=new yP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function bH(n){const t=n.infoData_.getNode(new xn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function w0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:bH(n)})}function wH(n,e,t,r,i){n.dataUpdateCount++;const s=new xn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const g=(0,P.UI)(t,y=>xr(y));c=function EQ(n,e,t,r){const i=dP(n,r);if(i){const s=hP(i),c=s.path,h=s.queryId,g=Zs(c,e),y=tr.fromObject(t);return fP(n,c,new ab(JN(h),g,y))}return[]}(n.serverSyncTree_,s,g,i)}else{const g=xr(t);c=function CQ(n,e,t,r){const i=dP(n,r);if(null!=i){const s=hP(i),c=s.path,h=s.queryId,g=Zs(c,e);return fP(n,c,new zm(JN(h),g,t))}return[]}(n.serverSyncTree_,s,g,i)}else if(r){const g=(0,P.UI)(t,y=>xr(y));c=function vQ(n,e,t){const r=tr.fromObject(t);return cb(n,new ab({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,g)}else{const g=xr(t);c=p0(n.serverSyncTree_,s,g)}let h=s;c.length>0&&(h=db(n,s)),il(n.eventQueue_,h,c)}function CH(n,e){SP(n,"connected",e),!1===e&&function YQ(n){ub(n,"onDisconnectEvents");const e=w0(n),t=aA();KN(n.onDisconnect_,vn(),(i,s)=>{const c=hH(i,s,n.serverSyncTree_,e);ob(t,i,c)});let r=[];KN(t,vn(),(i,s)=>{r=r.concat(p0(n.serverSyncTree_,i,s));const c=AP(n,i);db(n,c)}),n.onDisconnect_=aA(),il(n.eventQueue_,vn(),r)}(n)}function SP(n,e,t){const r=new xn("/.info/"+e),i=xr(t);n.infoData_.updateSnapshot(r,i);const s=p0(n.infoSyncTree_,r,i);il(n.eventQueue_,r,s)}function DA(n){return n.nextWriteId_++}function DP(n,e,t,r,i){ub(n,"set",{path:e.toString(),value:t,priority:r});const s=w0(n),c=xr(t,r),h=yA(n.serverSyncTree_,e),g=mP(c,h,s),y=DA(n),E=cP(n.serverSyncTree_,e,g,y,!0);SA(n.eventQueue_,E),n.server_.put(e.toString(),c.val(!0),(x,N)=>{const U="ok"===x;U||Ks("set at "+e+" failed: "+x);const K=Ep(n.serverSyncTree_,y,!U);il(n.eventQueue_,e,K),Sp(0,i,x,N)});const T=AP(n,e);db(n,T),il(n.eventQueue_,T,[])}function KQ(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&YN(n.onDisconnect_,e),Sp(0,t,r,i)})}function EH(n,e,t,r){const i=xr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,c)=>{"ok"===s&&ob(n.onDisconnect_,e,i),Sp(0,r,s,c)})}function TP(n,e,t){let r;r=".info"===Yt(e._path)?uP(n.infoSyncTree_,e,t):uP(n.serverSyncTree_,e,t),EP(n.eventQueue_,e._path,r)}function SH(n){n.persistentConnection_&&n.persistentConnection_.interrupt(vH)}function ub(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ji(t,...e)}function Sp(n,e,t,r){e&&eb(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const c=new Error(s);c.code=i,e(c)}})}function IP(n,e,t){return yA(n.serverSyncTree_,e,t)||Vt.EMPTY_NODE}function TA(n,e=n.transactionQueueTree_){if(e||IA(n,e),Ym(e)){const t=TH(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function t9(n,e,t){const r=t.map(y=>y.currentWriteId),i=IP(n,e,r);let s=i;const c=i.hash();for(let y=0;y<t.length;y++){const E=t[y];(0,P.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const T=Zs(e,E.path);s=s.updateChild(T,E.currentOutputSnapshotRaw)}const h=s.val(!0),g=e;n.server_.put(g.toString(),h,y=>{ub(n,"transaction put response",{path:g.toString(),status:y});let E=[];if("ok"===y){const T=[];for(let x=0;x<t.length;x++)t[x].status=2,E=E.concat(Ep(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&T.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();IA(n,wA(n.transactionQueueTree_,e)),TA(n,n.transactionQueueTree_),il(n.eventQueue_,e,E);for(let x=0;x<T.length;x++)eb(T[x])}else{if("datastale"===y)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{Ks("transaction at "+g.toString()+" failed: "+y);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=y}db(n,e)}},c)}(n,m0(e),t)}else fH(e)&&CA(e,t=>{TA(n,t)})}function db(n,e){const t=DH(n,e),r=m0(t);return function n9(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],y=Zs(t,g.path);let T,E=!1;if((0,P.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)E=!0,T=g.abortReason,i=i.concat(Ep(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)E=!0,T="maxretry",i=i.concat(Ep(n.serverSyncTree_,g.currentWriteId,!0));else{const x=IP(n,g.path,c);g.currentInputSnapshot=x;const N=e[h].update(x.val());if(void 0!==N){y0("transaction failed: Data returned ",N,g.path);let U=xr(N);"object"==typeof N&&null!=N&&(0,P.r3)(N,".priority")||(U=U.updatePriority(x.getPriority()));const le=g.currentWriteId,Pe=w0(n),Me=mP(U,x,Pe);g.currentOutputSnapshotRaw=U,g.currentOutputSnapshotResolved=Me,g.currentWriteId=DA(n),c.splice(c.indexOf(le),1),i=i.concat(cP(n.serverSyncTree_,g.path,Me,g.currentWriteId,g.applyLocally)),i=i.concat(Ep(n.serverSyncTree_,le,!0))}else E=!0,T="nodata",i=i.concat(Ep(n.serverSyncTree_,g.currentWriteId,!0))}il(n.eventQueue_,t,i),i=[],E&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===T?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(T),!1,null)))}IA(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)eb(r[h]);TA(n,n.transactionQueueTree_)}(n,TH(n,t),r),r}function DH(n,e){let t,r=n.transactionQueueTree_;for(t=Yt(e);null!==t&&void 0===Ym(r);)r=wA(r,t),t=Yt(e=Zn(e));return r}function TH(n,e){const t=[];return IH(n,e,t),t.sort((r,i)=>r.order-i.order),t}function IH(n,e,t){const r=Ym(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);CA(e,i=>{IH(n,i,t)})}function IA(n,e){const t=Ym(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,vP(e,t.length>0?t:void 0)}CA(e,r=>{IA(n,r)})}function AP(n,e){const t=m0(DH(n,e)),r=wA(n.transactionQueueTree_,e);return function OQ(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{MP(n,i)}),MP(n,r),pH(r,i=>{MP(n,i)}),t}function MP(n,e){const t=Ym(e);if(t){const r=[];let i=[],s=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,P.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,t[c].status=3,t[c].abortReason="set"):((0,P.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Ep(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?vP(e,void 0):t.length=s+1,il(n.eventQueue_,m0(e),i);for(let c=0;c<r.length;c++)eb(r[c])}}const xP=function(n,e){const t=s9(n),r=t.namespace;return"firebase.com"===t.domain&&Ru(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ru("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ks("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new MN(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new xn(t.pathString)}},s9=function(n){let e="",t="",r="",i="",s="",c=!0,h="https",g=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let E=n.indexOf("/");-1===E&&(E=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(E,T)),E<T&&(i=function r9(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}e+="/"+i}return e}(n.substring(E,T)));const x=function i9(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ks(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));y=e.indexOf(":"),y>=0?(c="https"===h||"wss"===h,g=parseInt(e.substring(y+1),10)):y=e.length;const N=e.slice(0,y);if("localhost"===N.toLowerCase())t="localhost";else if(N.split(".").length<=2)t=N;else{const U=e.indexOf(".");r=e.substring(0,U).toLowerCase(),t=e.substring(U+1),s=r}"ns"in x&&(s=x.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:s}};class AH{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Pz)(this.snapshot.exportVal())}}class MH{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class xH{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class RH{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return KQ(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){rl("OnDisconnect.remove",this._path);const e=new P.BH;return EH(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){rl("OnDisconnect.set",this._path),Nu("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return EH(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){rl("OnDisconnect.setWithPriority",this._path),Nu("OnDisconnect.setWithPriority",e,this._path,!1),CP("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function ZQ(n,e,t,r,i){const s=xr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(c,h)=>{"ok"===c&&ob(n.onDisconnect_,e,s),Sp(0,i,c,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){rl("OnDisconnect.update",this._path),mH("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function QQ(n,e,t,r){if((0,P.xb)(t))return Ji("onDisconnect().update() called with empty data.  Don't do anything."),void Sp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&Xi(t,(c,h)=>{const g=xr(h);ob(n.onDisconnect_,br(e,c),g)}),Sp(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Mo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Kt(this._path)?null:FN(this._path)}get ref(){return new sl(this._repo,this._path)}get _queryIdentifier(){const e=F2(this._queryParams),t=TN(e);return"{}"===t?"default":t}get _queryObject(){return F2(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof Mo))return!1;const t=this._repo===e._repo,r=LN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function YZ(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function AA(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Dp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ou){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Eh)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==ku)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===er){if(null!=e&&!_0(e)||null!=t&&!_0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof jN||n.getIndex()===GN,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function MA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class sl extends Mo{constructor(e,t){super(e,t,new iA,!1)}get parent(){const e=b2(this._path);return null===e?null:new sl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Km{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new xn(e),r=Zm(this.ref,e);return new Km(this._node.getChild(t),r,er)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Km(i,Zm(this.ref,r),er)))}hasChild(e){const t=new xn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function kH(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?Zm(n._root,e):n._root}function OH(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=xP(e,n._repo.repoInfo_.nodeAdmin);_H("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ru("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),kH(n,t.path.toString())}function Zm(n,e){return null===Yt((n=(0,P.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),b0("child","path",t,!1)):b0("child","path",e,!1),new sl(n._repo,br(n._path,e));var t}function RP(n,e){n=(0,P.m9)(n),rl("set",n._path),Nu("set",e,n._path,!1);const t=new P.BH;return DP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function u9(n,e){mH("update",e,n._path,!1);const t=new P.BH;return function WQ(n,e,t,r){ub(n,"update",{path:e.toString(),value:t});let i=!0;const s=w0(n),c={};if(Xi(t,(h,g)=>{i=!1,c[h]=hH(br(e,h),xr(g),n.serverSyncTree_,s)}),i)Ji("update() called with empty data.  Don't do anything."),Sp(0,r,"ok",void 0);else{const h=DA(n),g=function yQ(n,e,t,r){!function P7(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=eP(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=tr.fromObject(t);return cb(n,new ab({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,h);SA(n.eventQueue_,g),n.server_.merge(e.toString(),t,(y,E)=>{const T="ok"===y;T||Ks("update at "+e+" failed: "+y);const x=Ep(n.serverSyncTree_,h,!T),N=x.length>0?db(n,e):e;il(n.eventQueue_,N,x),Sp(0,r,y,E)}),Xi(t,y=>{const E=AP(n,br(e,y));db(n,E)}),il(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function d9(n){return function qQ(n,e){const t=function SQ(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,E)=>{const T=Zs(y,t);r=r||wp(E,T)});let i=n.syncPointTree_.get(t);i?r=r||wp(i,vn()):(i=new tH,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,c=s?new vp(r,!0,!1):null;return function oQ(n){return uA(n.viewCache_)}(nH(i,e,dA(n.pendingWriteTree_,e._path),s?c.getNode():Vt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=xr(r).withIndex(e._queryParams.getIndex()),s=p0(n.serverSyncTree_,e._path,i);return EP(n.eventQueue_,e._path,s),Promise.resolve(i)},r=>(ub(n,"get for query "+(0,P.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,P.m9)(n))._repo,n).then(e=>new Km(e,new sl(n._repo,n._path),n._queryParams.getIndex()))}class xA{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new AH("value",this,new Km(e.snapshotNode,new sl(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new MH(this,e,t):null}matches(e){return e instanceof xA&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class RA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new MH(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=Zm(new sl(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new AH(e.type,this,new Km(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof RA&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function C0(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const g=t,y=(E,T)=>{TP(n._repo,n,h),g(E,T)};y.userCallback=t.userCallback,y.context=t.context,t=y}const c=new xH(t,s||void 0),h="value"===e?new xA(c):new RA(e,c);return function JQ(n,e,t){let r;r=".info"===Yt(e._path)?aH(n.infoSyncTree_,e,t):aH(n.serverSyncTree_,e,t),EP(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>TP(n._repo,n,h)}function kP(n,e,t,r){return C0(n,"value",e,t,r)}function NH(n,e,t,r){return C0(n,"child_added",e,t,r)}function PH(n,e,t,r){return C0(n,"child_changed",e,t,r)}function FH(n,e,t,r){return C0(n,"child_moved",e,t,r)}function LH(n,e,t,r){return C0(n,"child_removed",e,t,r)}function VH(n,e,t){let r=null;const i=t?new xH(t):null;"value"===e?r=new xA(i):e&&(r=new RA(e,i)),TP(n._repo,n,r)}class gc{}class BH extends gc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nu("endAt",this._value,e._path,!0);const t=WN(e._queryParams,this._value,this._key);if(MA(t),Dp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Mo(e._repo,e._path,t,e._orderByCalled)}}class f9 extends gc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nu("endBefore",this._value,e._path,!1);const t=function C7(n,e,t){let r,i;return n.index_===Ou?("string"==typeof e&&(e=O2(e)),i=WN(n,e,t)):(r=null==t?Eh:O2(t),i=WN(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(MA(t),Dp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Mo(e._repo,e._path,t,e._orderByCalled)}}class UH extends gc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nu("startAt",this._value,e._path,!0);const t=qN(e._queryParams,this._value,this._key);if(MA(t),Dp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Mo(e._repo,e._path,t,e._orderByCalled)}}class m9 extends gc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nu("startAfter",this._value,e._path,!1);const t=function w7(n,e,t){let r;if(n.index_===Ou)"string"==typeof e&&(e=k2(e)),r=qN(n,e,t);else{let i;i=null==t?ku:k2(t),r=qN(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(MA(t),Dp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Mo(e._repo,e._path,t,e._orderByCalled)}}class y9 extends gc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Mo(e._repo,e._path,function v7(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class b9 extends gc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Mo(e._repo,e._path,function b7(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class C9 extends gc{constructor(e){super(),this._path=e}_apply(e){AA(e,"orderByChild");const t=new xn(this._path);if(Kt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new jN(t),i=sA(e._queryParams,r);return Dp(i),new Mo(e._repo,e._path,i,!0)}}class S9 extends gc{_apply(e){AA(e,"orderByKey");const t=sA(e._queryParams,Ou);return Dp(t),new Mo(e._repo,e._path,t,!0)}}class T9 extends gc{_apply(e){AA(e,"orderByPriority");const t=sA(e._queryParams,er);return Dp(t),new Mo(e._repo,e._path,t,!0)}}class A9 extends gc{_apply(e){AA(e,"orderByValue");const t=sA(e._queryParams,GN);return Dp(t),new Mo(e._repo,e._path,t,!0)}}class x9 extends gc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Nu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new BH(this._value,this._key)._apply(new UH(this._value,this._key)._apply(e))}}function mc(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function uQ(n){(0,P.hu)(!gA,"__referenceConstructor has already been defined"),gA=n})(sl),function gQ(n){(0,P.hu)(!_A,"__referenceConstructor has already been defined"),_A=n}(sl);const OP={};function jH(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Ru("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ji("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,y,c=xP(s,i),h=c.repoInfo;"undefined"!=typeof process&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(g=!0,s=`http://${y}?ns=${h.namespace}`,c=xP(s,i),h=c.repoInfo):g=!c.repoInfo.secure;const E=i&&g?new XE(XE.OWNER):new CZ(n.name,n.options,e);_H("Invalid Firebase Database URL",c),Kt(c.path)||Ru("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function P9(n,e,t,r){let i=OP[e.name];i||(i={},OP[e.name]=i);let s=i[n.toURLString()];return s&&Ru("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new GQ(n,false,t,r),i[n.toURLString()]=s,s}(h,n,E,new wZ(n.name,t));return new L9(T,n)}class L9{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function $Q(n,e,t){if(n.stats_=kN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new oA(n.repoInfo_,(r,i,s,c)=>{wH(n,r,i,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>CH(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new $m(n.repoInfo_,e,(r,i,s,c)=>{wH(n,r,i,s,c)},r=>{CH(n,r)},r=>{!function zQ(n,e){Xi(e,(t,r)=>{SP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function TZ(n,e){const t=n.toString();return RN[t]||(RN[t]=e()),RN[t]}(n.repoInfo_,()=>new A7(n.stats_,n.server_)),n.infoData_=new E7,n.infoSyncTree_=new oH({startListening:(r,i,s,c)=>{let h=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(h=p0(n.infoSyncTree_,r._path,g),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),SP(n,"connected",!1),n.serverSyncTree_=new oH({startListening:(r,i,s,c)=>(n.server_.listen(r,s,i,(h,g)=>{const y=c(h,g);il(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new sl(this._repo,vn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function N9(n,e){const t=OP[e];(!t||t[n.key]!==n)&&Ru(`Database ${e}(${n.repoInfo_}) has already been deleted.`),SH(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ru("Cannot call "+e+" on a deleted database.")}}function H9(n,e){GU(n,e)}const G9={".sv":"timestamp"};class q9{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}$m.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},$m.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function j9(n){VU(Oi.SDK_VERSION),(0,Oi._registerComponent)(new ia.wA("database",(e,{instanceIdentifier:t})=>jH(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Oi.registerVersion)(FU,"0.12.7",n),(0,Oi.registerVersion)(FU,"0.12.7","esm2017")}();const Z9=new Hs.Yd("@firebase/database-compat"),GH=function(n){Z9.warn("FIREBASE WARNING: "+n)};class X9{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,GH("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class eJ{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Tp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),b0("DataSnapshot.child","path",e,!1),new Tp(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),b0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Tp(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new ga(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class hs{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const c=hs.getCancelAndContextArgs_("Query.on",r,i),h=(y,E)=>{t.call(c.context,new Tp(this.database,y),E)};h.userCallback=t,h.context=c.context;const g=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(e){case"value":return kP(this._delegate,h,g),t;case"child_added":return NH(this._delegate,h,g),t;case"child_removed":return LH(this._delegate,h,g),t;case"child_changed":return PH(this._delegate,h,g),t;case"child_moved":return FH(this._delegate,h,g),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,VH(this._delegate,e,i)}else VH(this._delegate,e)}get(){return d9(this._delegate).then(e=>new Tp(this.database,e))}once(e,t,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const s=hs.getCancelAndContextArgs_("Query.once",r,i),c=new P.BH,h=(y,E)=>{const T=new Tp(this.database,y);t&&t.call(s.context,T,E),c.resolve(T)};h.userCallback=t,h.context=s.context;const g=y=>{s.cancel&&s.cancel.call(s.context,y),c.reject(y)};switch(e){case"value":kP(this._delegate,h,g,{onlyOnce:!0});break;case"child_added":NH(this._delegate,h,g,{onlyOnce:!0});break;case"child_removed":LH(this._delegate,h,g,{onlyOnce:!0});break;case"child_changed":PH(this._delegate,h,g,{onlyOnce:!0});break;case"child_moved":FH(this._delegate,h,g,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new hs(this.database,mc(this._delegate,function v9(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new y9(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new hs(this.database,mc(this._delegate,function w9(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new b9(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new hs(this.database,mc(this._delegate,function E9(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return b0("orderByChild","path",n,!1),new C9(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new hs(this.database,mc(this._delegate,function D9(){return new S9}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new hs(this.database,mc(this._delegate,function I9(){return new T9}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new hs(this.database,mc(this._delegate,function M9(){return new A9}()))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new hs(this.database,mc(this._delegate,function g9(n=null,e){return v0("startAt","key",e,!0),new UH(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new hs(this.database,mc(this._delegate,function _9(n,e){return v0("startAfter","key",e,!0),new m9(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new hs(this.database,mc(this._delegate,function h9(n,e){return v0("endAt","key",e,!0),new BH(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new hs(this.database,mc(this._delegate,function p9(n,e){return v0("endBefore","key",e,!0),new f9(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new hs(this.database,mc(this._delegate,function R9(n,e){return v0("equalTo","key",e,!0),new x9(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof hs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ga(this.database,new sl(this._delegate._repo,this._delegate._path))}}class ga extends hs{constructor(e,t){super(e,new Mo(t._repo,t._path,new iA,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ga(this.database,Zm(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ga(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new ga(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=RP(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,GH("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}rl("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=u9(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function c9(n,e,t){if(rl("setWithPriority",n._path),Nu("setWithPriority",e,n._path,!1),CP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return DP(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function a9(n){return rl("remove",n._path),RP(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function W9(n,e,t){var r;if(n=(0,P.m9)(n),rl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,s=new P.BH,h=kP(n,()=>{});return function e9(n,e,t,r,i,s){ub(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:UU(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=IP(n,e,void 0);c.currentInputSnapshot=h;const g=c.update(h.val());if(void 0===g)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{y0("transaction failed: Data returned ",g,c.path),c.status=0;const y=wA(n.transactionQueueTree_,e),E=Ym(y)||[];let T;E.push(c),vP(y,E),"object"==typeof g&&null!==g&&(0,P.r3)(g,".priority")?(T=(0,P.DV)(g,".priority"),(0,P.hu)(_0(T),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):T=(yA(n.serverSyncTree_,e)||Vt.EMPTY_NODE).getPriority().val();const x=w0(n),N=xr(g,T),U=mP(N,h,x);c.currentOutputSnapshotRaw=N,c.currentOutputSnapshotResolved=U,c.currentWriteId=DA(n);const K=cP(n.serverSyncTree_,e,U,c.currentWriteId,c.applyLocally);il(n.eventQueue_,e,K),TA(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(g,y,E)=>{let T=null;g?s.reject(g):(T=new Km(E,new sl(n._repo,n._path),er),s.resolve(new q9(y,T)))},h,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new eJ(s.committed,new Tp(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function l9(n,e){n=(0,P.m9)(n),rl("setPriority",n._path),CP("setPriority",e,!1);const t=new P.BH;return DP(n._repo,br(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function o9(n,e){n=(0,P.m9)(n),rl("push",n._path),Nu("push",e,n._path,!0);const t=bH(n._repo),r=g7(t),i=Zm(n,r),s=Zm(n,r);let c;return c=null!=e?RP(s,e).then(()=>s):Promise.resolve(s),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new ga(this.database,c));t&&i.then(()=>t(null),c=>t(c));const s=new ga(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return rl("Reference.onDisconnect",this._delegate._path),new X9(new RH(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class E0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function V9(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ru("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ru('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new XE(XE.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);s=new XE(c)}!function O9(n,e,t,r){n.repoInfo_=new MN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof ga){const t=OH(this._delegate,e.toString());return new ga(this,t)}{const t=kH(this._delegate,e);return new ga(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=OH(this._delegate,e);return new ga(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function B9(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),SH(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function U9(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function XQ(n){n.persistentConnection_&&n.persistentConnection_.resume(vH)}(n._repo)}(this._delegate)}}E0.ServerValue={TIMESTAMP:function $9(){return G9}(),increment:n=>function z9(n){return{".sv":{increment:n}}}(n)};var nJ=Object.freeze({__proto__:null,initStandalone:function tJ({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){VU(t);const c=new ia.zt("auth-internal",new ia.H0("database-standalone"));return c.setComponent(new ia.wA("auth-internal",()=>r,"PRIVATE")),{instance:new E0(jH(n,c,void 0,e,s),n),namespace:i}}});const rJ=E0.ServerValue;function $H(n){return null==n}function zH(n){return"function"==typeof n.set}function qH(n,e){return zH(e)?e:n.ref(e)}function WH(n,e){if(function sJ(n){return"string"==typeof n}(n))return e.stringCase();if(zH(n))return e.firebaseCase();if(function oJ(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function S0(n,e,t="on",r=yf.z){return new mn.y(i=>{let s=null;return s=n[t](e,(c,h)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,ze.U)(i=>{const{snapshot:s,prevKey:c}=i;let h=null;return s.exists()&&(h=s.key),{type:e,payload:s,prevKey:c,key:h}}),(0,wB.B)())}function YH(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function cJ(n,e){const{payload:t,prevKey:r,key:i}=e,s=YH(n,i),c=function lJ(n,e){if($H(e))return 0;{const t=YH(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(g=>{const y={payload:g,type:"value",prevKey:h,key:g.key};return h=g.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==r&&(n=n.filter(g=>g.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function KH(n){return($H(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function ZH(n,e,t){return function aJ(n,e,t){return S0(n,"value","once",t).pipe(zn(r=>{const i=[(0,Le.of)(r)];return e.forEach(s=>i.push(S0(n,s,"on",t))),(0,dp.T)(...i).pipe(Ps(cJ,[]))}),ay())}(n,e=KH(e),t)}function QH(n,e,t){const r=(e=KH(e)).map(i=>S0(n,i,"on",t));return(0,dp.T)(...r)}function JH(n,e){return function(r,i){return WH(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function fJ(n){return function(t){return t?WH(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function XH(n,e){return function(){return S0(n,"value","on",e)}}!function iJ(n){n.INTERNAL.registerComponent(new ia.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new E0(i,r)},"PUBLIC").setServiceProps({Reference:ga,Query:hs,Database:E0,DataSnapshot:Tp,enableLogging:H9,INTERNAL:nJ,ServerValue:rJ}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.7")}(SS.Z);const mJ=new l.OlP("angularfire2.realtimeDatabaseURL"),_J=new l.OlP("angularfire2.database.use-emulator");let yJ=(()=>{class n{constructor(t,r,i,s,c,h,g,y,E,T,x,N,U,K,le){this.schedulers=h;const Pe=g,Me=(0,Vr.on)(t,c,r);y&&Pk(Me,c,E,x,N,U,T,K),this.database=(0,Vr.cc)(`${Me.name}.database.${i}`,"AngularFireDatabase",Me.name,()=>{const Be=c.runOutsideAngular(()=>Me.database(i||void 0));return Pe&&Be.useEmulator(...Pe),Be},[Pe])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>qH(this.database,t));let s=i;return r&&(s=r(i)),function pJ(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:JH(r,"update"),set:JH(r,"set"),push:i=>r.push(i),remove:fJ(r),snapshotChanges:i=>ZH(n,i,t).pipe(un.iC),stateChanges:i=>QH(n,i,t).pipe(un.iC),auditTrail:i=>function uJ(n,e,t){return function hJ(n,e,t){return function dJ(n,e){return S0(n,"value","on",e).pipe((0,ze.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function sZ(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new oZ(n,t))}}(e),(0,ze.U)(([i,s])=>{const c=i.lastKeyToLoad,h=s.map(g=>g.key);return{actions:s,lastKeyToLoad:c,loadedKeys:h}}),function lZ(n){return e=>e.lift(new cZ(n))}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,ze.U)(i=>i.actions))}(n,QH(n,e).pipe(Ps((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(un.iC),valueChanges:(i,s)=>ZH(n,i,t).pipe((0,ze.U)(h=>h.map(g=>s&&s.idField?Object.assign(Object.assign({},g.payload.val()),{[s.idField]:g.key}):g.payload.val())),un.iC)}}(s,this)}object(t){return function gJ(n,e){return{query:n,snapshotChanges:()=>XH(n,e.schedulers.outsideAngular)().pipe(un.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>XH(n,e.schedulers.outsideAngular)().pipe(un.iC,(0,ze.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>qH(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Vr.Dh),l.LFG(Vr.xv,8),l.LFG(mJ,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(un.HU),l.LFG(_J,8),l.LFG(Pv,8),l.LFG(Mk,8),l.LFG(xk,8),l.LFG(Rk,8),l.LFG(kk,8),l.LFG(Ok,8),l.LFG(Nk,8),l.LFG(ME,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),vJ=(()=>{class n{constructor(){$T.Z.registerVersion("angularfire",un.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[yJ]}),n})(),bJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[U4]}),n.\u0275inj=l.cJS({providers:[],imports:[[ho,N4,pW,XV,UY,Q4,y8,MI,g5,PO,Y8,Vr.hO.initializeApp(JB_firebase),_3,D3,iZ,vJ,wM,bM,sB,h4,mY,yY]]}),n})();(0,l.G48)(),bl().bootstrapModule(bJ).catch(n=>console.error(n))},2011:(et,we,B)=>{B.d(we,{Dh:()=>te,GT:()=>Z,cc:()=>fe,hO:()=>se,on:()=>L,pX:()=>re,xv:()=>Q});var l=B(5e3),X=B(127),F=B(6351);et=B.hmd(et);const ae=["ngOnDestroy"],re=(ve,He,it,kt={})=>new Proxy(ve,{get:(hn,Ot)=>it.runOutsideAngular(()=>{var wr;if(ve[Ot])return(null===(wr=null==kt?void 0:kt.spy)||void 0===wr?void 0:wr.get)&&kt.spy.get(Ot,ve[Ot]),ve[Ot];if(ae.indexOf(Ot)>-1)return()=>{};const St=He.toPromise().then(Vn=>{const ht=Vn&&Vn[Ot];return"function"==typeof ht?ht.bind(Vn):ht&&ht.then?ht.then(zt=>it.run(()=>zt)):it.run(()=>ht)});return new Proxy(()=>{},{get:(Vn,ht)=>St[ht],apply:(Vn,ht,zt)=>St.then(Xt=>{var wt;const Zt=Xt&&Xt(...zt);return(null===(wt=null==kt?void 0:kt.spy)||void 0===wt?void 0:wt.apply)&&kt.spy.apply(Ot,zt,Zt),Zt})})})}),Z=(ve,He)=>{He.forEach(it=>{Object.getOwnPropertyNames(it.prototype||it).forEach(kt=>{Object.defineProperty(ve.prototype,kt,Object.getOwnPropertyDescriptor(it.prototype||it,kt))})})};class ne{constructor(He){return He}}const te=new l.OlP("angularfire2.app.options"),Q=new l.OlP("angularfire2.app.name");function L(ve,He,it){const hn="object"==typeof it&&it||{};hn.name=hn.name||"string"==typeof it&&it||"[DEFAULT]";const wr=X.Z.apps.filter(St=>St&&St.name===hn.name)[0]||He.runOutsideAngular(()=>X.Z.initializeApp(ve,hn));try{JSON.stringify(ve)!==JSON.stringify(wr.options)&&$("error",`${wr.name} Firebase App already initialized with different options${et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(St){}return new ne(wr)}const $=(ve,...He)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[ve](...He)},H={provide:ne,useFactory:L,deps:[te,l.R0b,[new l.FiY,Q]]};let se=(()=>{class ve{constructor(it){X.Z.registerVersion("angularfire",F.q4.full,"core"),X.Z.registerVersion("angularfire",F.q4.full,"app-compat"),X.Z.registerVersion("angular",l.q4F.full,it.toString())}static initializeApp(it,kt){return{ngModule:ve,providers:[{provide:te,useValue:it},{provide:Q,useValue:kt}]}}}return ve.\u0275fac=function(it){return new(it||ve)(l.LFG(l.Lbi))},ve.\u0275mod=l.oAB({type:ve}),ve.\u0275inj=l.cJS({providers:[H]}),ve})();function fe(ve,He,it,kt,hn){const[,Ot,wr]=globalThis.\u0275AngularfireInstanceCache.find(St=>St[0]===ve)||[];if(Ot)return function _e(ve,He){try{return ve.toString()===He.toString()}catch(it){return ve===He}}(hn,wr)||(ye("error",`${He} was already initialized on the ${it} Firebase App with different settings.${me?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:hn,was:wr})),Ot;{const St=kt();return globalThis.\u0275AngularfireInstanceCache.push([ve,St,hn]),St}}const me=!!et.hot,ye=(ve,...He)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[ve](...He)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6351:(et,we,B)=>{B.d(we,{q4:()=>Ma,iC:()=>Gh,fc:()=>Hh,HU:()=>Ra,vb:()=>jp,JM:()=>xa});var l=B(5e3),X=B(5867),F=B(5861),ae=B(9681),re=B(2090),Z=B(4859),ne=B(1877);const te="@firebase/installations",Q="0.5.7",$=`w:${Q}`,H="FIS_v2",ve=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function He(S){return S instanceof re.ZR&&S.code.includes("request-failed")}function it({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function kt(S){return{token:S.token,requestStatus:2,expiresIn:zt(S.expiresIn),creationTime:Date.now()}}function hn(S,A){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,F.Z)(function*(S,A){const j=(yield A.json()).error;return ve.create("request-failed",{requestName:S,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function wr({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function St(S,{refreshToken:A}){const O=wr(S);return O.append("Authorization",function Xt(S){return`${H} ${S}`}(A)),O}function Vn(S){return ht.apply(this,arguments)}function ht(){return(ht=(0,F.Z)(function*(S){const A=yield S();return A.status>=500&&A.status<600?S():A})).apply(this,arguments)}function zt(S){return Number(S.replace("s","000"))}function wt(S,A){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,F.Z)(function*({appConfig:S,heartbeatServiceProvider:A},{fid:O}){const j=it(S),J=wr(S),ce=A.getImmediate({optional:!0});if(ce){const yt=yield ce.getHeartbeatsHeader();yt&&J.append("x-firebase-client",yt)}const je={method:"POST",headers:J,body:JSON.stringify({fid:O,authVersion:H,appId:S.appId,sdkVersion:$})},tt=yield Vn(()=>fetch(j,je));if(tt.ok){const yt=yield tt.json();return{fid:yt.fid||O,registrationStatus:2,refreshToken:yt.refreshToken,authToken:kt(yt.authToken)}}throw yield hn("Create Installation",tt)})).apply(this,arguments)}function Ze(S){return new Promise(A=>{setTimeout(A,S)})}const Is=/^[cdef][\w-]{21}$/;function fr(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const O=function Dt(S){return function Fu(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return Is.test(O)?O:""}catch(S){return""}}function kr(S){return`${S.appName}!${S.appId}`}const As=new Map;function Lu(S,A){const O=kr(S);ts(O,A),function rr(S,A){const O=function an(){return!Cr&&"BroadcastChannel"in self&&(Cr=new BroadcastChannel("[Firebase] FID Change"),Cr.onmessage=S=>{ts(S.data.key,S.data.fid)}),Cr}();O&&O.postMessage({key:S,fid:A}),function Bn(){0===As.size&&Cr&&(Cr.close(),Cr=null)}()}(O,A)}function ts(S,A){const O=As.get(S);if(O)for(const j of O)j(A)}let Cr=null;const $r="firebase-installations-store";let Te=null;function Or(){return Te||(Te=(0,re.X3)("firebase-installations-database",1,(S,A)=>{0===A&&S.createObjectStore($r)})),Te}function We(S,A){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,F.Z)(function*(S,A){const O=kr(S),J=(yield Or()).transaction($r,"readwrite"),ce=J.objectStore($r),Ie=yield ce.get(O);return yield ce.put(A,O),yield J.complete,(!Ie||Ie.fid!==A.fid)&&Lu(S,A.fid),A})).apply(this,arguments)}function ln(S){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,F.Z)(function*(S){const A=kr(S),j=(yield Or()).transaction($r,"readwrite");yield j.objectStore($r).delete(A),yield j.complete})).apply(this,arguments)}function Bi(S,A){return fs.apply(this,arguments)}function fs(){return(fs=(0,F.Z)(function*(S,A){const O=kr(S),J=(yield Or()).transaction($r,"readwrite"),ce=J.objectStore($r),Ie=yield ce.get(O),je=A(Ie);return void 0===je?yield ce.delete(O):yield ce.put(je,O),yield J.complete,je&&(!Ie||Ie.fid!==je.fid)&&Lu(S,je.fid),je})).apply(this,arguments)}function kn(S){return ir.apply(this,arguments)}function ir(){return(ir=(0,F.Z)(function*(S){let A;const O=yield Bi(S.appConfig,j=>{const J=xs(j),ce=_c(S,J);return A=ce.registrationPromise,ce.installationEntry});return""===O.fid?{installationEntry:yield A}:{installationEntry:O,registrationPromise:A}})).apply(this,arguments)}function xs(S){return rt(S||{fid:fr(),registrationStatus:0})}function _c(S,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(ve.create("app-offline"))};const O={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},j=function Nt(S,A){return Xe.apply(this,arguments)}(S,O);return{installationEntry:O,registrationPromise:j}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:gt(S)}:{installationEntry:A}}function Xe(){return(Xe=(0,F.Z)(function*(S,A){try{const O=yield wt(S,A);return We(S.appConfig,O)}catch(O){throw He(O)&&409===O.customData.serverCode?yield ln(S.appConfig):yield We(S.appConfig,{fid:A.fid,registrationStatus:0}),O}})).apply(this,arguments)}function gt(S){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,F.Z)(function*(S){let A=yield eo(S.appConfig);for(;1===A.registrationStatus;)yield Ze(100),A=yield eo(S.appConfig);if(0===A.registrationStatus){const{installationEntry:O,registrationPromise:j}=yield kn(S);return j||O}return A})).apply(this,arguments)}function eo(S){return Bi(S,A=>{if(!A)throw ve.create("installation-not-found");return rt(A)})}function rt(S){return function In(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function Pr(S,A){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,F.Z)(function*({appConfig:S,heartbeatServiceProvider:A},O){const j=st(S,O),J=St(S,O),ce=A.getImmediate({optional:!0});if(ce){const yt=yield ce.getHeartbeatsHeader();yt&&J.append("x-firebase-client",yt)}const je={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:$,appId:S.appId}})},tt=yield Vn(()=>fetch(j,je));if(tt.ok)return kt(yield tt.json());throw yield hn("Generate Auth Token",tt)})).apply(this,arguments)}function st(S,{fid:A}){return`${it(S)}/${A}/authTokens:generate`}function On(S){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,F.Z)(function*(S,A=!1){let O;const j=yield Bi(S.appConfig,ce=>{if(!en(ce))throw ve.create("not-registered");const Ie=ce.authToken;if(!A&&W(Ie))return ce;if(1===Ie.requestStatus)return O=Ge(S,A),ce;{if(!navigator.onLine)throw ve.create("app-offline");const je=Y(ce);return O=ut(S,je),je}});return O?yield O:j.authToken})).apply(this,arguments)}function Ge(S,A){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,F.Z)(function*(S,A){let O=yield $e(S.appConfig);for(;1===O.authToken.requestStatus;)yield Ze(100),O=yield $e(S.appConfig);const j=O.authToken;return 0===j.requestStatus?On(S,A):j})).apply(this,arguments)}function $e(S){return Bi(S,A=>{if(!en(A))throw ve.create("not-registered");return function de(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function ut(S,A){return jt.apply(this,arguments)}function jt(){return(jt=(0,F.Z)(function*(S,A){try{const O=yield Pr(S,A),j=Object.assign(Object.assign({},A),{authToken:O});return yield We(S.appConfig,j),O}catch(O){if(!He(O)||401!==O.customData.serverCode&&404!==O.customData.serverCode){const j=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield We(S.appConfig,j)}else yield ln(S.appConfig);throw O}})).apply(this,arguments)}function en(S){return void 0!==S&&2===S.registrationStatus}function W(S){return 2===S.requestStatus&&!function G(S){const A=Date.now();return A<S.creationTime||S.creationTime+S.expiresIn<A+36e5}(S)}function Y(S){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:A})}function Oe(){return(Oe=(0,F.Z)(function*(S){const A=S,{installationEntry:O,registrationPromise:j}=yield kn(A);return j?j.catch(console.error):On(A).catch(console.error),O.fid})).apply(this,arguments)}function Qt(){return(Qt=(0,F.Z)(function*(S,A=!1){const O=S;return yield Er(O),(yield On(O,A)).token})).apply(this,arguments)}function Er(S){return qt.apply(this,arguments)}function qt(){return(qt=(0,F.Z)(function*(S){const{registrationPromise:A}=yield kn(S);A&&(yield A)})).apply(this,arguments)}function Qn(S){return ve.create("missing-app-config-values",{valueName:S})}const yc="installations",Ue=S=>{const A=S.getProvider("app").getImmediate(),O=function ro(S){if(!S||!S.options)throw Qn("App Configuration");if(!S.name)throw Qn("App Name");const A=["projectId","apiKey","appId"];for(const O of A)if(!S.options[O])throw Qn(O);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(A);return{app:A,appConfig:O,heartbeatServiceProvider:(0,ae._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},Mt=S=>{const A=S.getProvider("app").getImmediate(),O=(0,ae._getProvider)(A,yc).getImmediate();return{getId:()=>function ie(S){return Oe.apply(this,arguments)}(O),getToken:J=>function dt(S){return Qt.apply(this,arguments)}(O,J)}};(function nn(){(0,ae._registerComponent)(new Z.wA(yc,Ue,"PUBLIC")),(0,ae._registerComponent)(new Z.wA("installations-internal",Mt,"PRIVATE"))})(),(0,ae.registerVersion)(te,Q),(0,ae.registerVersion)(te,Q,"esm2017");const Un="@firebase/remote-config",An=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Dh{constructor(A,O,j,J){this.client=A,this.storage=O,this.storageCache=j,this.logger=J}isCachedDataFresh(A,O){if(!O)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-O,J=j<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${J}.`),J}fetch(A){var O=this;return(0,F.Z)(function*(){const[j,J]=yield Promise.all([O.storage.getLastSuccessfulFetchTimestampMillis(),O.storage.getLastSuccessfulFetchResponse()]);if(J&&O.isCachedDataFresh(A.cacheMaxAgeMillis,j))return J;A.eTag=J&&J.eTag;const ce=yield O.client.fetch(A),Ie=[O.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ce.status&&Ie.push(O.storage.setLastSuccessfulFetchResponse(ce)),yield Promise.all(Ie),ce})()}}function e_(S=navigator){return S.languages&&S.languages[0]||S.language}class Mp{constructor(A,O,j,J,ce,Ie){this.firebaseInstallations=A,this.sdkVersion=O,this.namespace=j,this.projectId=J,this.apiKey=ce,this.appId=Ie}fetch(A){var O=this;return(0,F.Z)(function*(){const[j,J]=yield Promise.all([O.firebaseInstallations.getId(),O.firebaseInstallations.getToken()]),Ie=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${O.projectId}/namespaces/${O.namespace}:fetch?key=${O.apiKey}`,je={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},tt={sdk_version:O.sdkVersion,app_instance_id:j,app_instance_id_token:J,app_id:O.appId,language_code:e_()},yt={method:"POST",headers:je,body:JSON.stringify(tt)},Ft=fetch(Ie,yt),bt=new Promise((Wi,Vs)=>{A.signal.addEventListener(()=>{const zh=new Error("The operation was aborted.");zh.name="AbortError",Vs(zh)})});let Mi;try{yield Promise.race([Ft,bt]),Mi=yield Ft}catch(Wi){let Vs="fetch-client-network";throw"AbortError"===Wi.name&&(Vs="fetch-timeout"),An.create(Vs,{originalErrorMessage:Wi.message})}let at=Mi.status;const pi=Mi.headers.get("ETag")||void 0;let Uc,Ls;if(200===Mi.status){let Wi;try{Wi=yield Mi.json()}catch(Vs){throw An.create("fetch-client-parse",{originalErrorMessage:Vs.message})}Uc=Wi.entries,Ls=Wi.state}if("INSTANCE_STATE_UNSPECIFIED"===Ls?at=500:"NO_CHANGE"===Ls?at=304:("NO_TEMPLATE"===Ls||"EMPTY_CONFIG"===Ls)&&(Uc={}),304!==at&&200!==at)throw An.create("fetch-status",{httpStatus:at});return{status:at,eTag:pi,config:Uc}})()}}class xp{constructor(A,O){this.client=A,this.storage=O}fetch(A){var O=this;return(0,F.Z)(function*(){const j=(yield O.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return O.attemptFetch(A,j)})()}attemptFetch(A,{throttleEndTimeMillis:O,backoffCount:j}){var J=this;return(0,F.Z)(function*(){yield function rs(S,A){return new Promise((O,j)=>{const J=Math.max(A-Date.now(),0),ce=setTimeout(O,J);S.addEventListener(()=>{clearTimeout(ce),j(An.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,O);try{const ce=yield J.client.fetch(A);return yield J.storage.deleteThrottleMetadata(),ce}catch(ce){if(!function ll(S){if(!(S instanceof re.ZR&&S.customData))return!1;const A=Number(S.customData.httpStatus);return 429===A||500===A||503===A||504===A}(ce))throw ce;const Ie={throttleEndTimeMillis:Date.now()+(0,re.$s)(j),backoffCount:j+1};return yield J.storage.setThrottleMetadata(Ie),J.attemptFetch(A,Ie)}})()}}class Ih{constructor(A,O,j,J,ce){this.app=A,this._client=O,this._storageCache=j,this._storage=J,this._logger=ce,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Uu(S,A){const O=S.target.error||void 0;return An.create(A,{originalErrorMessage:O&&O.message})}const io="app_namespace_store";class Mh{constructor(A,O,j,J=function Hu(){return new Promise((S,A)=>{try{const O=indexedDB.open("firebase_remote_config",1);O.onerror=j=>{A(Uu(j,"storage-open"))},O.onsuccess=j=>{S(j.target.result)},O.onupgradeneeded=j=>{0===j.oldVersion&&j.target.result.createObjectStore(io,{keyPath:"compositeKey"})}}catch(O){A(An.create("storage-open",{originalErrorMessage:O}))}})}()){this.appId=A,this.appName=O,this.namespace=j,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var O=this;return(0,F.Z)(function*(){const j=yield O.openDbPromise;return new Promise((J,ce)=>{const je=j.transaction([io],"readonly").objectStore(io),tt=O.createCompositeKey(A);try{const yt=je.get(tt);yt.onerror=Ft=>{ce(Uu(Ft,"storage-get"))},yt.onsuccess=Ft=>{const bt=Ft.target.result;J(bt?bt.value:void 0)}}catch(yt){ce(An.create("storage-get",{originalErrorMessage:yt&&yt.message}))}})})()}set(A,O){var j=this;return(0,F.Z)(function*(){const J=yield j.openDbPromise;return new Promise((ce,Ie)=>{const tt=J.transaction([io],"readwrite").objectStore(io),yt=j.createCompositeKey(A);try{const Ft=tt.put({compositeKey:yt,value:O});Ft.onerror=bt=>{Ie(Uu(bt,"storage-set"))},Ft.onsuccess=()=>{ce()}}catch(Ft){Ie(An.create("storage-set",{originalErrorMessage:Ft&&Ft.message}))}})})()}delete(A){var O=this;return(0,F.Z)(function*(){const j=yield O.openDbPromise;return new Promise((J,ce)=>{const je=j.transaction([io],"readwrite").objectStore(io),tt=O.createCompositeKey(A);try{const yt=je.delete(tt);yt.onerror=Ft=>{ce(Uu(Ft,"storage-delete"))},yt.onsuccess=()=>{J()}}catch(yt){ce(An.create("storage-delete",{originalErrorMessage:yt&&yt.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class t_{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,F.Z)(function*(){const O=A.storage.getLastFetchStatus(),j=A.storage.getLastSuccessfulFetchTimestampMillis(),J=A.storage.getActiveConfig(),ce=yield O;ce&&(A.lastFetchStatus=ce);const Ie=yield j;Ie&&(A.lastSuccessfulFetchTimestampMillis=Ie);const je=yield J;je&&(A.activeConfig=je)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function ju(){return wc.apply(this,arguments)}function wc(){return(wc=(0,F.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(S){return!1}})).apply(this,arguments)}!function xh(){(0,ae._registerComponent)(new Z.wA("remote-config",function S(A,{instanceIdentifier:O}){const j=A.getProvider("app").getImmediate(),J=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw An.create("registration-window");if(!(0,re.hl)())throw An.create("indexed-db-unavailable");const{projectId:ce,apiKey:Ie,appId:je}=j.options;if(!ce)throw An.create("registration-project-id");if(!Ie)throw An.create("registration-api-key");if(!je)throw An.create("registration-app-id");const tt=new Mh(je,j.name,O=O||"firebase"),yt=new t_(tt),Ft=new ne.Yd(Un);Ft.logLevel=ne.in.ERROR;const bt=new Mp(J,ae.SDK_VERSION,O,ce,Ie,je),Mi=new xp(bt,tt),at=new Dh(Mi,tt,yt,Ft),pi=new Ih(j,at,yt,tt,Ft);return function sr(S){const A=(0,re.m9)(S);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(pi),pi},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Un,"0.3.6"),(0,ae.registerVersion)(Un,"0.3.6","esm2017")}();const Op="/firebase-messaging-sw.js",Rh="/firebase-cloud-messaging-push-scope",Rs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",va="google.c.a.c_id",ba="google.c.a.c_l",cl="google.c.a.ts",so="google.c.a.e";var ao=(()=>{return(S=ao||(ao={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",ao;var S})();function pr(S){const A=new Uint8Array(S);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Gu(S){const O=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(O),J=new Uint8Array(j.length);for(let ce=0;ce<j.length;++ce)J[ce]=j.charCodeAt(ce);return J}const ul="fcm_token_details_db",No="fcm_token_object_Store";function n_(S){return wa.apply(this,arguments)}function wa(){return wa=(0,F.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ce=>ce.name).includes(ul))return null;let A=null;return(yield(0,re.X3)(ul,5,function(){var j=(0,F.Z)(function*(J,ce,Ie,je){var tt;if(ce<2||!J.objectStoreNames.contains(No))return;const yt=je.objectStore(No),Ft=yield yt.index("fcmSenderId").get(S);if(yield yt.clear(),Ft)if(2===ce){const bt=Ft;if(!bt.auth||!bt.p256dh||!bt.endpoint)return;A={token:bt.fcmToken,createTime:null!==(tt=bt.createTime)&&void 0!==tt?tt:Date.now(),subscriptionOptions:{auth:bt.auth,p256dh:bt.p256dh,endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:"string"==typeof bt.vapidKey?bt.vapidKey:pr(bt.vapidKey)}}}else if(3===ce){const bt=Ft;A={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:pr(bt.auth),p256dh:pr(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:pr(bt.vapidKey)}}}else if(4===ce){const bt=Ft;A={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:pr(bt.auth),p256dh:pr(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:pr(bt.vapidKey)}}}});return function(J,ce,Ie,je){return j.apply(this,arguments)}}())).close(),yield(0,re.Lj)(ul),yield(0,re.Lj)("fcm_vapid_details_db"),yield(0,re.Lj)("undefined"),r_(A)?A:null}),wa.apply(this,arguments)}function r_(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:A}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const ai="firebase-messaging-store";let hl=null;function Pp(){return hl||(hl=(0,re.X3)("firebase-messaging-database",1,(S,A)=>{0===A&&S.createObjectStore(ai)})),hl}function fn(S){return $u.apply(this,arguments)}function $u(){return($u=(0,F.Z)(function*(S){const A=Fo(S),j=yield(yield Pp()).transaction(ai).objectStore(ai).get(A);if(j)return j;{const J=yield n_(S.appConfig.senderId);if(J)return yield Po(S,J),J}})).apply(this,arguments)}function Po(S,A){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,F.Z)(function*(S,A){const O=Fo(S),J=(yield Pp()).transaction(ai,"readwrite");return yield J.objectStore(ai).put(A,O),yield J.complete,A})).apply(this,arguments)}function Ca(S){return ps.apply(this,arguments)}function ps(){return(ps=(0,F.Z)(function*(S){const A=Fo(S),j=(yield Pp()).transaction(ai,"readwrite");yield j.objectStore(ai).delete(A),yield j.complete})).apply(this,arguments)}function Fo({appConfig:S}){return S.appId}const gr=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function zu(S,A){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,F.Z)(function*(S,A){const O=yield or(S),j=ft(A),J={method:"POST",headers:O,body:JSON.stringify(j)};let ce;try{ce=yield(yield fetch(Di(S.appConfig),J)).json()}catch(Ie){throw gr.create("token-subscribe-failed",{errorInfo:Ie})}if(ce.error)throw gr.create("token-subscribe-failed",{errorInfo:ce.error.message});if(!ce.token)throw gr.create("token-subscribe-no-token");return ce.token})).apply(this,arguments)}function Si(S,A){return gs.apply(this,arguments)}function gs(){return(gs=(0,F.Z)(function*(S,A){const O=yield or(S),j=ft(A.subscriptionOptions),J={method:"PATCH",headers:O,body:JSON.stringify(j)};let ce;try{ce=yield(yield fetch(`${Di(S.appConfig)}/${A.token}`,J)).json()}catch(Ie){throw gr.create("token-update-failed",{errorInfo:Ie})}if(ce.error)throw gr.create("token-update-failed",{errorInfo:ce.error.message});if(!ce.token)throw gr.create("token-update-no-token");return ce.token})).apply(this,arguments)}function lo(S,A){return fl.apply(this,arguments)}function fl(){return(fl=(0,F.Z)(function*(S,A){const j={method:"DELETE",headers:yield or(S)};try{const ce=yield(yield fetch(`${Di(S.appConfig)}/${A}`,j)).json();if(ce.error)throw gr.create("token-unsubscribe-failed",{errorInfo:ce.error.message})}catch(J){throw gr.create("token-unsubscribe-failed",{errorInfo:J})}})).apply(this,arguments)}function Di({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function or(S){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,F.Z)(function*({appConfig:S,installations:A}){const O=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${O}`})})).apply(this,arguments)}function ft({p256dh:S,auth:A,endpoint:O,vapidKey:j}){const J={web:{endpoint:O,auth:A,p256dh:S}};return j!==Rs&&(J.web.applicationPubKey=j),J}const Ec=6048e5;function pl(S){return gl.apply(this,arguments)}function gl(){return(gl=(0,F.Z)(function*(S){const A=yield Yu(S.swRegistration,S.vapidKey),O={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:A.endpoint,auth:pr(A.getKey("auth")),p256dh:pr(A.getKey("p256dh"))},j=yield fn(S.firebaseDependencies);if(j){if(Ea(j.subscriptionOptions,O))return Date.now()>=j.createTime+Ec?Wu(S,{token:j.token,createTime:Date.now(),subscriptionOptions:O}):j.token;try{yield lo(S.firebaseDependencies,j.token)}catch(J){console.warn(J)}return be(S.firebaseDependencies,O)}return be(S.firebaseDependencies,O)})).apply(this,arguments)}function qu(S){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,F.Z)(function*(S){const A=yield fn(S.firebaseDependencies);A&&(yield lo(S.firebaseDependencies,A.token),yield Ca(S.firebaseDependencies));const O=yield S.swRegistration.pushManager.getSubscription();return!O||O.unsubscribe()})).apply(this,arguments)}function Wu(S,A){return ml.apply(this,arguments)}function ml(){return(ml=(0,F.Z)(function*(S,A){try{const O=yield Si(S.firebaseDependencies,A),j=Object.assign(Object.assign({},A),{token:O,createTime:Date.now()});return yield Po(S.firebaseDependencies,j),O}catch(O){throw yield qu(S),O}})).apply(this,arguments)}function be(S,A){return xt.apply(this,arguments)}function xt(){return(xt=(0,F.Z)(function*(S,A){const j={token:yield zu(S,A),createTime:Date.now(),subscriptionOptions:A};return yield Po(S,j),j.token})).apply(this,arguments)}function Yu(S,A){return En.apply(this,arguments)}function En(){return(En=(0,F.Z)(function*(S,A){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Gu(A)})})).apply(this,arguments)}function Ea(S,A){return A.vapidKey===S.vapidKey&&A.endpoint===S.endpoint&&A.auth===S.auth&&A.p256dh===S.p256dh}function Vo(S){const A={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function Ti(S,A){if(!A.notification)return;S.notification={};const O=A.notification.title;O&&(S.notification.title=O);const j=A.notification.body;j&&(S.notification.body=j);const J=A.notification.image;J&&(S.notification.image=J)}(A,S),function Sa(S,A){!A.data||(S.data=A.data)}(A,S),function _l(S,A){if(!A.fcmOptions)return;S.fcmOptions={};const O=A.fcmOptions.link;O&&(S.fcmOptions.link=O);const j=A.fcmOptions.analytics_label;j&&(S.fcmOptions.analyticsLabel=j)}(A,S),A}function Fp(S){return"object"==typeof S&&!!S&&va in S}function yl(S,A){const O=[];for(let j=0;j<S.length;j++)O.push(S.charAt(j)),j<A.length&&O.push(A.charAt(j));return O.join("")}function co(S){return gr.create("missing-app-config-values",{valueName:S})}yl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),yl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Fr{constructor(A,O,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function vl(S){if(!S||!S.options)throw co("App Configuration Object");if(!S.name)throw co("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:O}=S;for(const j of A)if(!O[j])throw co(j);return{appName:S.name,projectId:O.projectId,apiKey:O.apiKey,appId:O.appId,senderId:O.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:J,installations:O,analyticsProvider:j}}_delete(){return Promise.resolve()}}function qi(S){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,F.Z)(function*(S){try{S.swRegistration=yield navigator.serviceWorker.register(Op,{scope:Rh}),S.swRegistration.update().catch(()=>{})}catch(A){throw gr.create("failed-service-worker-registration",{browserErrorMessage:A.message})}})).apply(this,arguments)}function uo(S,A){return ci.apply(this,arguments)}function ci(){return(ci=(0,F.Z)(function*(S,A){if(!A&&!S.swRegistration&&(yield qi(S)),A||!S.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw gr.create("invalid-sw-registration");S.swRegistration=A}})).apply(this,arguments)}function Ku(S,A){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,F.Z)(function*(S,A){A?S.vapidKey=A:S.vapidKey||(S.vapidKey=Rs)})).apply(this,arguments)}function bl(){return(bl=(0,F.Z)(function*(S,A){if(!navigator)throw gr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw gr.create("permission-blocked");return yield Ku(S,null==A?void 0:A.vapidKey),yield uo(S,null==A?void 0:A.serviceWorkerRegistration),pl(S)})).apply(this,arguments)}function Zu(S,A,O){return ho.apply(this,arguments)}function ho(){return(ho=(0,F.Z)(function*(S,A,O){const j=Lp(A);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:O[va],message_name:O[ba],message_time:O[cl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Lp(S){switch(S){case ao.NOTIFICATION_CLICKED:return"notification_open";case ao.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Qu(){return(Qu=(0,F.Z)(function*(S,A){const O=A.data;if(!O.isFirebaseMessaging)return;S.onMessageHandler&&O.messageType===ao.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(Vo(O)):S.onMessageHandler.next(Vo(O)));const j=O.data;Fp(j)&&"1"===j[so]&&(yield Zu(S,O.messageType,j))})).apply(this,arguments)}const Tc="@firebase/messaging",Ic=S=>{const A=new Fr(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",O=>function wl(S,A){return Qu.apply(this,arguments)}(A,O)),A},Oh=S=>{const A=S.getProvider("messaging").getImmediate();return{getToken:j=>function kh(S,A){return bl.apply(this,arguments)}(A,j)}};function Nh(){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,F.Z)(function*(){try{yield(0,re.eu)()}catch(S){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ju(){(0,ae._registerComponent)(new Z.wA("messaging",Ic,"PUBLIC")),(0,ae._registerComponent)(new Z.wA("messaging-internal",Oh,"PRIVATE")),(0,ae.registerVersion)(Tc,"0.9.11"),(0,ae.registerVersion)(Tc,"0.9.11","esm2017")}();const Ac="analytics",Ph="firebase_id",ed="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Da="https://www.googletagmanager.com/gtag/js",ar=new ne.Yd("@firebase/analytics");function Mc(S){return Promise.all(S.map(A=>A.catch(O=>O)))}function i_(S,A){const O=document.createElement("script");O.src=`${Da}?l=${S}&id=${A}`,O.async=!0,document.head.appendChild(O)}function Dl(S,A,O,j,J,ce){return xc.apply(this,arguments)}function xc(){return(xc=(0,F.Z)(function*(S,A,O,j,J,ce){const Ie=j[J];try{if(Ie)yield A[Ie];else{const tt=(yield Mc(O)).find(yt=>yt.measurementId===J);tt&&(yield A[tt.appId])}}catch(je){ar.error(je)}S("config",J,ce)})).apply(this,arguments)}function s_(S,A,O,j,J){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,F.Z)(function*(S,A,O,j,J){try{let ce=[];if(J&&J.send_to){let Ie=J.send_to;Array.isArray(Ie)||(Ie=[Ie]);const je=yield Mc(O);for(const tt of Ie){const yt=je.find(bt=>bt.measurementId===tt),Ft=yt&&A[yt.appId];if(!Ft){ce=[];break}ce.push(Ft)}}0===ce.length&&(ce=Object.values(A)),yield Promise.all(ce),S("event",j,J||{})}catch(ce){ar.error(ce)}})).apply(this,arguments)}function o_(){const S=window.document.getElementsByTagName("script");for(const A of Object.values(S))if(A.src&&A.src.includes(Da))return A;return null}const Le=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),jo=new class ui{constructor(A={},O=1e3){this.throttleMetadata=A,this.intervalMillis=O}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,O){this.throttleMetadata[A]=O}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function kc(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function Jr(S){return fo.apply(this,arguments)}function fo(){return(fo=(0,F.Z)(function*(S){var A;const{appId:O,apiKey:j}=S,J={method:"GET",headers:kc(j)},ce=ed.replace("{app-id}",O),Ie=yield fetch(ce,J);if(200!==Ie.status&&304!==Ie.status){let je="";try{const tt=yield Ie.json();(null===(A=tt.error)||void 0===A?void 0:A.message)&&(je=tt.error.message)}catch(tt){}throw Le.create("config-fetch-failed",{httpStatus:Ie.status,responseMessage:je})}return Ie.json()})).apply(this,arguments)}function a_(S){return _s.apply(this,arguments)}function _s(){return(_s=(0,F.Z)(function*(S,A=jo,O){const{appId:j,apiKey:J,measurementId:ce}=S.options;if(!j)throw Le.create("no-app-id");if(!J){if(ce)return{measurementId:ce,appId:j};throw Le.create("no-api-key")}const Ie=A.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},je=new nd;return setTimeout((0,F.Z)(function*(){je.abort()}),void 0!==O?O:6e4),mn({appId:j,apiKey:J,measurementId:ce},Ie,je,A)})).apply(this,arguments)}function mn(S,A,O){return ks.apply(this,arguments)}function ks(){return(ks=(0,F.Z)(function*(S,{throttleEndTimeMillis:A,backoffCount:O},j,J=jo){const{appId:ce,measurementId:Ie}=S;try{yield l_(j,A)}catch(je){if(Ie)return ar.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ie} provided in the "measurementId" field in the local Firebase config. [${je.message}]`),{appId:ce,measurementId:Ie};throw je}try{const je=yield Jr(S);return J.deleteThrottleMetadata(ce),je}catch(je){if(!td(je)){if(J.deleteThrottleMetadata(ce),Ie)return ar.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ie} provided in the "measurementId" field in the local Firebase config. [${je.message}]`),{appId:ce,measurementId:Ie};throw je}const tt=503===Number(je.customData.httpStatus)?(0,re.$s)(O,J.intervalMillis,30):(0,re.$s)(O,J.intervalMillis),yt={throttleEndTimeMillis:Date.now()+tt,backoffCount:O+1};return J.setThrottleMetadata(ce,yt),ar.debug(`Calling attemptFetch again in ${tt} millis`),mn(S,yt,j,J)}})).apply(this,arguments)}function l_(S,A){return new Promise((O,j)=>{const J=Math.max(A-Date.now(),0),ce=setTimeout(O,J);S.addEventListener(()=>{clearTimeout(ce),j(Le.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function td(S){if(!(S instanceof re.ZR&&S.customData))return!1;const A=Number(S.customData.httpStatus);return 429===A||500===A||503===A||504===A}class nd{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}function Up(){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,F.Z)(function*(){if(!(0,re.hl)())return ar.warn(Le.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(S){return ar.warn(Le.create("indexeddb-unavailable",{errorInfo:S}).message),!1}return!0})).apply(this,arguments)}function Oc(){return(Oc=(0,F.Z)(function*(S,A,O,j,J,ce,Ie){var je;const tt=a_(S);tt.then(at=>{O[at.measurementId]=at.appId,S.options.measurementId&&at.measurementId!==S.options.measurementId&&ar.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${at.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(at=>ar.error(at)),A.push(tt);const yt=Up().then(at=>{if(at)return j.getId()}),[Ft,bt]=yield Promise.all([tt,yt]);o_()||i_(ce,Ft.measurementId),J("js",new Date);const Mi=null!==(je=null==Ie?void 0:Ie.config)&&void 0!==je?je:{};return Mi.origin="firebase",Mi.update=!0,null!=bt&&(Mi[Ph]=bt),J("config",Ft.measurementId,Mi),Ft.measurementId})).apply(this,arguments)}class Os{constructor(A){this.app=A}_delete(){return delete Lr[this.app.options.appId],Promise.resolve()}}let Lr={},Il=[];const Al={};let Ta,ze,Ii="dataLayer",$n=!1;function Ns(S,A,O){!function Pc(){const S=[];if((0,re.ru)()&&S.push("This is a browser extension environment."),(0,re.zI)()||S.push("Cookies are not available."),S.length>0){const A=S.map((j,J)=>`(${J+1}) ${j}`).join(" "),O=Le.create("invalid-analytics-context",{errorInfo:A});ar.warn(O.message)}}();const j=S.options.appId;if(!j)throw Le.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw Le.create("no-api-key");ar.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Lr[j])throw Le.create("already-exists",{id:j});if(!$n){!function Ho(S){let A=[];Array.isArray(window[S])?A=window[S]:window[S]=A}(Ii);const{wrappedGtag:ce,gtagCore:Ie}=function Fh(S,A,O,j,J){let ce=function(...Ie){window[j].push(arguments)};return window[J]&&"function"==typeof window[J]&&(ce=window[J]),window[J]=function Rc(S,A,O,j){function ce(){return(ce=(0,F.Z)(function*(Ie,je,tt){try{"event"===Ie?yield s_(S,A,O,je,tt):"config"===Ie?yield Dl(S,A,O,j,je,tt):S("set",je)}catch(yt){ar.error(yt)}})).apply(this,arguments)}return function J(Ie,je,tt){return ce.apply(this,arguments)}}(ce,S,A,O),{gtagCore:ce,wrappedGtag:window[J]}}(Lr,Il,Al,Ii,"gtag");ze=ce,Ta=Ie,$n=!0}return Lr[j]=function ss(S,A,O,j,J,ce,Ie){return Oc.apply(this,arguments)}(S,Il,Al,A,Ta,Ii,O),new Os(S)}function Pn(){return(Pn=(0,F.Z)(function*(S,A,O,j,J){if(J&&J.global)S("event",O,j);else{const ce=yield A;S("event",O,Object.assign(Object.assign({},j),{send_to:ce}))}})).apply(this,arguments)}function Dr(){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,F.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(S){return!1}})).apply(this,arguments)}const id="@firebase/analytics";!function h_(){(0,ae._registerComponent)(new Z.wA(Ac,(A,{options:O})=>Ns(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),O),"PUBLIC")),(0,ae._registerComponent)(new Z.wA("analytics-internal",function S(A){try{const O=A.getProvider(Ac).getImmediate();return{logEvent:(j,J,ce)=>function d_(S,A,O,j){S=(0,re.m9)(S),function c_(S,A,O,j,J){return Pn.apply(this,arguments)}(ze,Lr[S.app.options.appId],A,O,j).catch(J=>ar.error(J))}(O,j,J,ce)}}catch(O){throw Le.create("interop-component-reg-failed",{reason:O})}},"PRIVATE")),(0,ae.registerVersion)(id,"0.7.7"),(0,ae.registerVersion)(id,"0.7.7","esm2017")}();var f_=B(341),Vc=B(353),Aa=B(2868),Jn=B(2102),od=B(3334);const Ma=new l.GfV("7.3.0"),Bc="__angularfire_symbol__analyticsIsSupportedValue",Fs="__angularfire_symbol__analyticsIsSupported",tn="__angularfire_symbol__remoteConfigIsSupportedValue",Ai="__angularfire_symbol__remoteConfigIsSupported",hi="__angularfire_symbol__messagingIsSupportedValue",$o="__angularfire_symbol__messagingIsSupported";function xa(S,A,O){if(A){if(1===A.length)return A[0];const ce=A.filter(Ie=>Ie.app===O);if(1===ce.length)return ce[0]}return O.container.getProvider(S).getImmediate({optional:!0})}globalThis[Fs]||(globalThis[Fs]=Dr().then(S=>globalThis[Bc]=S).catch(()=>globalThis[Bc]=!1)),globalThis[$o]||(globalThis[$o]=Nh().then(S=>globalThis[hi]=S).catch(()=>globalThis[hi]=!1)),globalThis[Ai]||(globalThis[Ai]=ju().then(S=>globalThis[tn]=S).catch(()=>globalThis[tn]=!1));const jp=(S,A)=>{const O=A?[A]:(0,X.C6)(),j=[];return O.forEach(J=>{J.container.getProvider(S).instances.forEach(Ie=>{j.includes(Ie)||j.push(Ie)})}),j};function zo(){}class fi{constructor(A,O=f_.N){this.zone=A,this.delegate=O}now(){return this.delegate.now()}schedule(A,O,j){const J=this.zone;return this.delegate.schedule(function(Ie){J.runGuarded(()=>{A.apply(this,[Ie])})},O,j)}}class ad{constructor(A){this.zone=A,this.task=null}call(A,O){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zo,{},zo,zo)),O.pipe((0,Aa.b)({next:j,complete:j,error:j})).subscribe(A).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ra=(()=>{class S{constructor(O){this.ngZone=O,this.outsideAngular=O.runOutsideAngular(()=>new fi(Zone.current)),this.insideAngular=O.run(()=>new fi(Zone.current,Vc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(O){return new(O||S)(l.LFG(l.R0b))},S.\u0275prov=l.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function qo(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function Hh(S){return S.pipe((0,Jn.QV)(qo().outsideAngular))}function Gh(S){return qo(),function ld(S){return function(O){return(O=O.lift(new ad(S.ngZone))).pipe((0,od.R)(S.outsideAngular),(0,Jn.QV)(S.insideAngular))}}(qo())(S)}},2090:(et,we,B)=>{B.d(we,{$s:()=>In,BH:()=>fe,DV:()=>rr,Dv:()=>fs,G6:()=>Vn,GJ:()=>Ms,L:()=>Q,LL:()=>Fu,Lj:()=>jt,Mn:()=>wr,Pz:()=>Dt,Sg:()=>_e,UG:()=>ve,UI:()=>an,US:()=>ne,Wj:()=>xs,X3:()=>ut,Yr:()=>St,ZB:()=>H,ZR:()=>Ze,b$:()=>kt,cI:()=>fr,d:()=>hn,dS:()=>Nt,eu:()=>zt,g5:()=>ae,gK:()=>kn,gQ:()=>Or,h$:()=>te,hl:()=>ht,hu:()=>F,jU:()=>He,lb:()=>_c,m9:()=>st,ne:()=>We,p$:()=>$,pd:()=>Te,r3:()=>ts,ru:()=>it,tV:()=>L,uI:()=>ye,ug:()=>Xe,vZ:()=>Bn,w1:()=>Ot,w9:()=>bn,xO:()=>Ci,xb:()=>Cr,z$:()=>me,zI:()=>Xt,zd:()=>$r});var l=B(5861);const F=function(W,G){if(!W)throw ae(G)},ae=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},re=function(W){const G=[];let Y=0;for(let de=0;de<W.length;de++){let ie=W.charCodeAt(de);ie<128?G[Y++]=ie:ie<2048?(G[Y++]=ie>>6|192,G[Y++]=63&ie|128):55296==(64512&ie)&&de+1<W.length&&56320==(64512&W.charCodeAt(de+1))?(ie=65536+((1023&ie)<<10)+(1023&W.charCodeAt(++de)),G[Y++]=ie>>18|240,G[Y++]=ie>>12&63|128,G[Y++]=ie>>6&63|128,G[Y++]=63&ie|128):(G[Y++]=ie>>12|224,G[Y++]=ie>>6&63|128,G[Y++]=63&ie|128)}return G},ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,G){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,de=[];for(let ie=0;ie<W.length;ie+=3){const Oe=W[ie],dt=ie+1<W.length,Qt=dt?W[ie+1]:0,Er=ie+2<W.length,qt=Er?W[ie+2]:0;let Cn=(15&Qt)<<2|qt>>6,Ui=63&qt;Er||(Ui=64,dt||(Cn=64)),de.push(Y[Oe>>2],Y[(3&Oe)<<4|Qt>>4],Y[Cn],Y[Ui])}return de.join("")},encodeString(W,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(W):this.encodeByteArray(re(W),G)},decodeString(W,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(W):function(W){const G=[];let Y=0,de=0;for(;Y<W.length;){const ie=W[Y++];if(ie<128)G[de++]=String.fromCharCode(ie);else if(ie>191&&ie<224){const Oe=W[Y++];G[de++]=String.fromCharCode((31&ie)<<6|63&Oe)}else if(ie>239&&ie<365){const Er=((7&ie)<<18|(63&W[Y++])<<12|(63&W[Y++])<<6|63&W[Y++])-65536;G[de++]=String.fromCharCode(55296+(Er>>10)),G[de++]=String.fromCharCode(56320+(1023&Er))}else{const Oe=W[Y++],dt=W[Y++];G[de++]=String.fromCharCode((15&ie)<<12|(63&Oe)<<6|63&dt)}}return G.join("")}(this.decodeStringToByteArray(W,G))},decodeStringToByteArray(W,G){this.init_();const Y=G?this.charToByteMapWebSafe_:this.charToByteMap_,de=[];for(let ie=0;ie<W.length;){const Oe=Y[W.charAt(ie++)],Qt=ie<W.length?Y[W.charAt(ie)]:0;++ie;const qt=ie<W.length?Y[W.charAt(ie)]:64;++ie;const Tt=ie<W.length?Y[W.charAt(ie)]:64;if(++ie,null==Oe||null==Qt||null==qt||null==Tt)throw Error();de.push(Oe<<2|Qt>>4),64!==qt&&(de.push(Qt<<4&240|qt>>2),64!==Tt&&de.push(qt<<6&192|Tt))}return de},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},te=function(W){const G=re(W);return ne.encodeByteArray(G,!0)},Q=function(W){return te(W).replace(/\./g,"")},L=function(W){try{return ne.decodeString(W,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function $(W){return H(void 0,W)}function H(W,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return G}for(const Y in G)!G.hasOwnProperty(Y)||!se(Y)||(W[Y]=H(W[Y],G[Y]));return W}function se(W){return"__proto__"!==W}class fe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,Y)=>{this.resolve=G,this.reject=Y})}wrapCallback(G){return(Y,de)=>{Y?this.reject(Y):this.resolve(de),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(Y):G(Y,de))}}}function _e(W,G){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const de=G||"demo-project",ie=W.iat||0,Oe=W.sub||W.user_id;if(!Oe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const dt=Object.assign({iss:`https://securetoken.google.com/${de}`,aud:de,iat:ie,exp:ie+3600,auth_time:ie,sub:Oe,user_id:Oe,firebase:{sign_in_provider:"custom",identities:{}}},W);return[Q(JSON.stringify({alg:"none",type:"JWT"})),Q(JSON.stringify(dt)),""].join(".")}function me(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ye(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(me())}function ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(W){return!1}}function He(){return"object"==typeof self&&self.self===self}function it(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function kt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function hn(){return me().indexOf("Electron/")>=0}function Ot(){const W=me();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function wr(){return me().indexOf("MSAppHost/")>=0}function St(){return!1}function Vn(){return!ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ht(){return"object"==typeof indexedDB}function zt(){return new Promise((W,G)=>{try{let Y=!0;const de="validate-browser-context-for-indexeddb-analytics-module",ie=self.indexedDB.open(de);ie.onsuccess=()=>{ie.result.close(),Y||self.indexedDB.deleteDatabase(de),W(!0)},ie.onupgradeneeded=()=>{Y=!1},ie.onerror=()=>{var Oe;G((null===(Oe=ie.error)||void 0===Oe?void 0:Oe.message)||"")}}catch(Y){G(Y)}})}function Xt(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ze extends Error{constructor(G,Y,de){super(Y),this.code=G,this.customData=de,this.name="FirebaseError",Object.setPrototypeOf(this,Ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fu.prototype.create)}}class Fu{constructor(G,Y,de){this.service=G,this.serviceName=Y,this.errors=de}create(G,...Y){const de=Y[0]||{},ie=`${this.service}/${G}`,Oe=this.errors[G],dt=Oe?function Is(W,G){return W.replace(Js,(Y,de)=>{const ie=G[de];return null!=ie?String(ie):`<${de}?>`})}(Oe,de):"Error";return new Ze(ie,`${this.serviceName}: ${dt} (${ie}).`,de)}}const Js=/\{\$([^}]+)}/g;function fr(W){return JSON.parse(W)}function Dt(W){return JSON.stringify(W)}const kr=function(W){let G={},Y={},de={},ie="";try{const Oe=W.split(".");G=fr(L(Oe[0])||""),Y=fr(L(Oe[1])||""),ie=Oe[2],de=Y.d||{},delete Y.d}catch(Oe){}return{header:G,claims:Y,data:de,signature:ie}},bn=function(W){const Y=kr(W).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},Ms=function(W){const G=kr(W).claims;return"object"==typeof G&&!0===G.admin};function ts(W,G){return Object.prototype.hasOwnProperty.call(W,G)}function rr(W,G){if(Object.prototype.hasOwnProperty.call(W,G))return W[G]}function Cr(W){for(const G in W)if(Object.prototype.hasOwnProperty.call(W,G))return!1;return!0}function an(W,G,Y){const de={};for(const ie in W)Object.prototype.hasOwnProperty.call(W,ie)&&(de[ie]=G.call(Y,W[ie],ie,W));return de}function Bn(W,G){if(W===G)return!0;const Y=Object.keys(W),de=Object.keys(G);for(const ie of Y){if(!de.includes(ie))return!1;const Oe=W[ie],dt=G[ie];if(xo(Oe)&&xo(dt)){if(!Bn(Oe,dt))return!1}else if(Oe!==dt)return!1}for(const ie of de)if(!Y.includes(ie))return!1;return!0}function xo(W){return null!==W&&"object"==typeof W}function Ci(W){const G=[];for(const[Y,de]of Object.entries(W))Array.isArray(de)?de.forEach(ie=>{G.push(encodeURIComponent(Y)+"="+encodeURIComponent(ie))}):G.push(encodeURIComponent(Y)+"="+encodeURIComponent(de));return G.length?"&"+G.join("&"):""}function $r(W){const G={};return W.replace(/^\?/,"").split("&").forEach(de=>{if(de){const[ie,Oe]=de.split("=");G[decodeURIComponent(ie)]=decodeURIComponent(Oe)}}),G}function Te(W){const G=W.indexOf("?");if(!G)return"";const Y=W.indexOf("#",G);return W.substring(G,Y>0?Y:void 0)}class Or{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let G=1;G<this.blockSize;++G)this.pad_[G]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(G,Y){Y||(Y=0);const de=this.W_;if("string"==typeof G)for(let Tt=0;Tt<16;Tt++)de[Tt]=G.charCodeAt(Y)<<24|G.charCodeAt(Y+1)<<16|G.charCodeAt(Y+2)<<8|G.charCodeAt(Y+3),Y+=4;else for(let Tt=0;Tt<16;Tt++)de[Tt]=G[Y]<<24|G[Y+1]<<16|G[Y+2]<<8|G[Y+3],Y+=4;for(let Tt=16;Tt<80;Tt++){const Cn=de[Tt-3]^de[Tt-8]^de[Tt-14]^de[Tt-16];de[Tt]=4294967295&(Cn<<1|Cn>>>31)}let qt,wn,ie=this.chain_[0],Oe=this.chain_[1],dt=this.chain_[2],Qt=this.chain_[3],Er=this.chain_[4];for(let Tt=0;Tt<80;Tt++){Tt<40?Tt<20?(qt=Qt^Oe&(dt^Qt),wn=1518500249):(qt=Oe^dt^Qt,wn=1859775393):Tt<60?(qt=Oe&dt|Qt&(Oe|dt),wn=2400959708):(qt=Oe^dt^Qt,wn=3395469782);const Cn=(ie<<5|ie>>>27)+qt+Er+wn+de[Tt]&4294967295;Er=Qt,Qt=dt,dt=4294967295&(Oe<<30|Oe>>>2),Oe=ie,ie=Cn}this.chain_[0]=this.chain_[0]+ie&4294967295,this.chain_[1]=this.chain_[1]+Oe&4294967295,this.chain_[2]=this.chain_[2]+dt&4294967295,this.chain_[3]=this.chain_[3]+Qt&4294967295,this.chain_[4]=this.chain_[4]+Er&4294967295}update(G,Y){if(null==G)return;void 0===Y&&(Y=G.length);const de=Y-this.blockSize;let ie=0;const Oe=this.buf_;let dt=this.inbuf_;for(;ie<Y;){if(0===dt)for(;ie<=de;)this.compress_(G,ie),ie+=this.blockSize;if("string"==typeof G){for(;ie<Y;)if(Oe[dt]=G.charCodeAt(ie),++dt,++ie,dt===this.blockSize){this.compress_(Oe),dt=0;break}}else for(;ie<Y;)if(Oe[dt]=G[ie],++dt,++ie,dt===this.blockSize){this.compress_(Oe),dt=0;break}}this.inbuf_=dt,this.total_+=Y}digest(){const G=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ie=this.blockSize-1;ie>=56;ie--)this.buf_[ie]=255&Y,Y/=256;this.compress_(this.buf_);let de=0;for(let ie=0;ie<5;ie++)for(let Oe=24;Oe>=0;Oe-=8)G[de]=this.chain_[ie]>>Oe&255,++de;return G}}function We(W,G){const Y=new Vi(W,G);return Y.subscribe.bind(Y)}class Vi{constructor(G,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{G(this)}).catch(de=>{this.error(de)})}next(G){this.forEachObserver(Y=>{Y.next(G)})}error(G){this.forEachObserver(Y=>{Y.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,Y,de){let ie;if(void 0===G&&void 0===Y&&void 0===de)throw new Error("Missing Observer.");ie=function Nr(W,G){if("object"!=typeof W||null===W)return!1;for(const Y of G)if(Y in W&&"function"==typeof W[Y])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:Y,complete:de},void 0===ie.next&&(ie.next=Bi),void 0===ie.error&&(ie.error=Bi),void 0===ie.complete&&(ie.complete=Bi);const Oe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ie.error(this.finalError):ie.complete()}catch(dt){}}),this.observers.push(ie),Oe}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,G)}sendOne(G,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{Y(this.observers[G])}catch(de){"undefined"!=typeof console&&console.error&&console.error(de)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bi(){}const fs=function(W,G,Y,de){let ie;if(de<G?ie="at least "+G:de>Y&&(ie=0===Y?"none":"no more than "+Y),ie)throw new Error(W+" failed: Was called with "+de+(1===de?" argument.":" arguments.")+" Expects "+ie+".")};function kn(W,G){return`${W} failed: ${G} argument `}function xs(W,G,Y,de){if((!de||Y)&&"function"!=typeof Y)throw new Error(kn(W,G)+"must be a valid function.")}function _c(W,G,Y,de){if((!de||Y)&&("object"!=typeof Y||null===Y))throw new Error(kn(W,G)+"must be a valid context object.")}const Nt=function(W){const G=[];let Y=0;for(let de=0;de<W.length;de++){let ie=W.charCodeAt(de);if(ie>=55296&&ie<=56319){const Oe=ie-55296;de++,F(de<W.length,"Surrogate pair missing trail surrogate."),ie=65536+(Oe<<10)+(W.charCodeAt(de)-56320)}ie<128?G[Y++]=ie:ie<2048?(G[Y++]=ie>>6|192,G[Y++]=63&ie|128):ie<65536?(G[Y++]=ie>>12|224,G[Y++]=ie>>6&63|128,G[Y++]=63&ie|128):(G[Y++]=ie>>18|240,G[Y++]=ie>>12&63|128,G[Y++]=ie>>6&63|128,G[Y++]=63&ie|128)}return G},Xe=function(W){let G=0;for(let Y=0;Y<W.length;Y++){const de=W.charCodeAt(Y);de<128?G++:de<2048?G+=2:de>=55296&&de<=56319?(G+=4,Y++):G+=3}return G};function In(W,G=1e3,Y=2){const de=G*Math.pow(Y,W),ie=Math.round(.5*de*(Math.random()-.5)*2);return Math.min(144e5,de+ie)}function st(W){return W&&W._delegate?W._delegate:W}function On(W,G){return new Promise((Y,de)=>{W.onsuccess=ie=>{Y(ie.target.result)},W.onerror=ie=>{var Oe;de(`${G}: ${null===(Oe=ie.target.error)||void 0===Oe?void 0:Oe.message}`)}})}class Pt{constructor(G){this._db=G,this.objectStoreNames=this._db.objectStoreNames}transaction(G,Y){return new Ge(this._db.transaction.call(this._db,G,Y))}createObjectStore(G,Y){return new Ee(this._db.createObjectStore(G,Y))}close(){this._db.close()}}class Ge{constructor(G){this._transaction=G,this.complete=new Promise((Y,de)=>{this._transaction.oncomplete=function(){Y()},this._transaction.onerror=()=>{de(this._transaction.error)},this._transaction.onabort=()=>{de(this._transaction.error)}})}objectStore(G){return new Ee(this._transaction.objectStore(G))}}class Ee{constructor(G){this._store=G}index(G){return new $e(this._store.index(G))}createIndex(G,Y,de){return new $e(this._store.createIndex(G,Y,de))}get(G){return On(this._store.get(G),"Error reading from IndexedDB")}put(G,Y){return On(this._store.put(G,Y),"Error writing to IndexedDB")}delete(G){return On(this._store.delete(G),"Error deleting from IndexedDB")}clear(){return On(this._store.clear(),"Error clearing IndexedDB object store")}}class $e{constructor(G){this._index=G}get(G){return On(this._index.get(G),"Error reading from IndexedDB")}}function ut(W,G,Y){return new Promise((de,ie)=>{try{const Oe=indexedDB.open(W,G);Oe.onsuccess=dt=>{de(new Pt(dt.target.result))},Oe.onerror=dt=>{var Qt;ie(`Error opening indexedDB: ${null===(Qt=dt.target.error)||void 0===Qt?void 0:Qt.message}`)},Oe.onupgradeneeded=dt=>{Y(new Pt(Oe.result),dt.oldVersion,dt.newVersion,new Ge(Oe.transaction))}}catch(Oe){ie(`Error opening indexedDB: ${Oe.message}`)}})}function jt(W){return en.apply(this,arguments)}function en(){return(en=(0,l.Z)(function*(W){return new Promise((G,Y)=>{try{const de=indexedDB.deleteDatabase(W);de.onsuccess=()=>{G()},de.onerror=ie=>{var Oe;Y(`Error deleting indexedDB database "${W}": ${null===(Oe=ie.target.error)||void 0===Oe?void 0:Oe.message}`)}}catch(de){Y(`Error deleting indexedDB database "${W}": ${de.message}`)}})})).apply(this,arguments)}},5867:(et,we,B)=>{B.d(we,{C6:()=>l.getApps,Mq:()=>l.getApp});var l=B(9681);(0,l.registerVersion)("firebase","9.6.10","app")},127:(et,we,B)=>{B.d(we,{Z:()=>l.Z});var l=B(3942);l.Z.registerVersion("firebase","9.6.10","app-compat")},1254:(et,we,B)=>{B.r(we);var l=B(5861),X=B(3942),F=B(2090),ae=B(9681);function te(v,p){var m={};for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&p.indexOf(w)<0&&(m[w]=v[w]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var I=0;for(w=Object.getOwnPropertySymbols(v);I<w.length;I++)p.indexOf(w[I])<0&&Object.prototype.propertyIsEnumerable.call(v,w[I])&&(m[w[I]]=v[w[I]])}return m}var Zt=B(1877),Ze=B(4859);const Lu=function kr(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},bn=function As(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ms=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),rr=new Zt.Yd("@firebase/auth");function Cr(v,...p){rr.logLevel<=Zt.in.ERROR&&rr.error(`Auth (${ae.SDK_VERSION}): ${v}`,...p)}function an(v,...p){throw $r(v,...p)}function Bn(v,...p){return $r(v,...p)}function xo(v,p,m){const w=Object.assign(Object.assign({},bn()),{[p]:m});return new F.LL("auth","Firebase",w).create(p,{appName:v.name})}function Ci(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&an(v,"argument-error"),xo(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $r(v,...p){if("string"!=typeof v){const m=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(m,...w)}return Ms.create(v,...p)}function Te(v,p,...m){if(!v)throw $r(p,...m)}function Or(v){const p="INTERNAL ASSERTION FAILED: "+v;throw Cr(p),new Error(p)}function We(v,p){v||Or(p)}const Vi=new Map;function ln(v){We(v instanceof Function,"Expected a class definition");let p=Vi.get(v);return p?(We(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,Vi.set(v,p),p)}function fs(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function kn(){return"http:"===ir()||"https:"===ir()}function ir(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Nt{constructor(p,m){this.shortDelay=p,this.longDelay=m,We(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function xs(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(kn()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Xe(v,p){We(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class gt{static initialize(p,m,w){this.fetchImpl=p,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xs={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},eo=new Nt(3e4,6e4);function rt(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function In(v,p,m,w){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,l.Z)(function*(v,p,m,w,I={}){return Ei(v,I,(0,l.Z)(function*(){let R={},z={};w&&("GET"===p?z=w:R={body:JSON.stringify(w)});const oe=(0,F.xO)(Object.assign({key:v.config.apiKey},z)).slice(1),xe=yield v._getAdditionalHeaders();return xe["Content-Type"]="application/json",v.languageCode&&(xe["X-Firebase-Locale"]=v.languageCode),gt.fetch()(Ge(v,v.config.apiHost,m,oe),Object.assign({method:p,headers:xe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Ei(v,p,m){return st.apply(this,arguments)}function st(){return(st=(0,l.Z)(function*(v,p,m){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},Xs),p);try{const I=new Ee(v),R=yield Promise.race([m(),I.promise]);I.clearNetworkTimeout();const z=yield R.json();if("needConfirmation"in z)throw $e(v,"account-exists-with-different-credential",z);if(R.ok&&!("errorMessage"in z))return z;{const oe=R.ok?z.errorMessage:z.error.message,[xe,Ae]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===xe)throw $e(v,"credential-already-in-use",z);if("EMAIL_EXISTS"===xe)throw $e(v,"email-already-in-use",z);const qe=w[xe]||xe.toLowerCase().replace(/[_\s]+/g,"-");if(Ae)throw xo(v,qe,Ae);an(v,qe)}}catch(I){if(I instanceof F.ZR)throw I;an(v,"network-request-failed")}})).apply(this,arguments)}function On(v,p,m,w){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,l.Z)(function*(v,p,m,w,I={}){const R=yield In(v,p,m,w,I);return"mfaPendingCredential"in R&&an(v,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Ge(v,p,m,w){const I=`${p}${m}?${w}`;return v.config.emulator?Xe(v.config,I):`${v.config.apiScheme}://${I}`}class Ee{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(Bn(this.auth,"network-request-failed")),eo.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $e(v,p,m){const w={appName:v.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const I=Bn(v,p,w);return I.customData._tokenResponse=m,I}function jt(){return(jt=(0,l.Z)(function*(v,p){return In(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function en(v,p){return W.apply(this,arguments)}function W(){return(W=(0,l.Z)(function*(v,p){return In(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function G(v,p){return Y.apply(this,arguments)}function Y(){return(Y=(0,l.Z)(function*(v,p){return In(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function de(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function dt(){return(dt=(0,l.Z)(function*(v,p=!1){const m=(0,F.m9)(v),w=yield m.getIdToken(p),I=Er(w);Te(I&&I.exp&&I.auth_time&&I.iat,m.auth,"internal-error");const R="object"==typeof I.firebase?I.firebase:void 0,z=null==R?void 0:R.sign_in_provider;return{claims:I,token:w,authTime:de(Qt(I.auth_time)),issuedAtTime:de(Qt(I.iat)),expirationTime:de(Qt(I.exp)),signInProvider:z||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Qt(v){return 1e3*Number(v)}function Er(v){const[p,m,w]=v.split(".");if(void 0===p||void 0===m||void 0===w)return Cr("JWT malformed, contained fewer than 3 sections"),null;try{const I=(0,F.tV)(m);return I?JSON.parse(I):(Cr("Failed to decode base64 JWT payload"),null)}catch(I){return Cr("Caught error parsing JWT payload as JSON",I),null}}function wn(v,p){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,l.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(w){throw w instanceof F.ZR&&Cn(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function Cn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Ui{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const I=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,I)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,l.Z)(function*(){yield m.iteration()}),w)}iteration(){var p=this;return(0,l.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&p.schedule(!0))}p.schedule()})()}}class to{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=de(this.lastLoginAt),this.creationTime=de(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function no(v){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,l.Z)(function*(v){var p;const m=v.auth,w=yield v.getIdToken(),I=yield wn(v,G(m,{idToken:w}));Te(null==I?void 0:I.users.length,m,"internal-error");const R=I.users[0];v._notifyReloadListener(R);const z=(null===(p=R.providerUserInfo)||void 0===p?void 0:p.length)?Hi(R.providerUserInfo):[],oe=yc(v.providerData,z),qe=!!v.isAnonymous&&!(v.email&&R.passwordHash||(null==oe?void 0:oe.length)),Qe={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:oe,metadata:new to(R.createdAt,R.lastLoginAt),isAnonymous:qe};Object.assign(v,Qe)})).apply(this,arguments)}function Qn(){return(Qn=(0,l.Z)(function*(v){const p=(0,F.m9)(v);yield no(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function yc(v,p){return[...v.filter(w=>!p.some(I=>I.providerId===w.providerId)),...p]}function Hi(v){return v.map(p=>{var{providerId:m}=p,w=te(p,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Mt(){return(Mt=(0,l.Z)(function*(v,p){const m=yield Ei(v,{},(0,l.Z)(function*(){const w=(0,F.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:I,apiKey:R}=v.config,z=Ge(v,I,"/v1/token",`key=${R}`),oe=yield v._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",gt.fetch()(z,{method:"POST",headers:oe,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class nn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Te(p.idToken,"internal-error"),Te(void 0!==p.idToken,"internal-error"),Te(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function qt(v){const p=Er(v);return Te(p,"internal-error"),Te(void 0!==p.exp,"internal-error"),Te(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var w=this;return(0,l.Z)(function*(){return Te(!w.accessToken||w.refreshToken,p,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var w=this;return(0,l.Z)(function*(){const{accessToken:I,refreshToken:R,expiresIn:z}=yield function Ue(v,p){return Mt.apply(this,arguments)}(p,m);w.updateTokensAndExpiration(I,R,Number(z))})()}updateTokensAndExpiration(p,m,w){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,m){const{refreshToken:w,accessToken:I,expirationTime:R}=m,z=new nn;return w&&(Te("string"==typeof w,"internal-error",{appName:p}),z.refreshToken=w),I&&(Te("string"==typeof I,"internal-error",{appName:p}),z.accessToken=I),R&&(Te("number"==typeof R,"internal-error",{appName:p}),z.expirationTime=R),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new nn,this.toJSON())}_performRefresh(){return Or("not implemented")}}function Un(v,p){Te("string"==typeof v||void 0===v,"internal-error",{appName:p})}class oi{constructor(p){var{uid:m,auth:w,stsTokenManager:I}=p,R=te(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ui(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=I,this.accessToken=I.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new to(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,l.Z)(function*(){const w=yield wn(m,m.stsTokenManager.getToken(m.auth,p));return Te(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(p){return function Oe(v){return dt.apply(this,arguments)}(this,p)}reload(){return function ro(v){return Qn.apply(this,arguments)}(this)}_assign(p){this!==p&&(Te(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new oi(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var w=this;return(0,l.Z)(function*(){let I=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),I=!0),m&&(yield no(w)),yield w.auth._persistUserIfCurrent(w),I&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,l.Z)(function*(){const m=yield p.getIdToken();return yield wn(p,function ut(v,p){return jt.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var w,I,R,z,oe,xe,Ae,qe;const Qe=null!==(w=m.displayName)&&void 0!==w?w:void 0,Ht=null!==(I=m.email)&&void 0!==I?I:void 0,Ut=null!==(R=m.phoneNumber)&&void 0!==R?R:void 0,Xo=null!==(z=m.photoURL)&&void 0!==z?z:void 0,su=null!==(oe=m.tenantId)&&void 0!==oe?oe:void 0,Ba=null!==(xe=m._redirectEventId)&&void 0!==xe?xe:void 0,ea=null!==(Ae=m.createdAt)&&void 0!==Ae?Ae:void 0,Vl=null!==(qe=m.lastLoginAt)&&void 0!==qe?qe:void 0,{uid:uf,emailVerified:fg,isAnonymous:df,providerData:wd,stsTokenManager:hf}=m;Te(uf&&hf,p,"internal-error");const Cd=nn.fromJSON(this.name,hf);Te("string"==typeof uf,p,"internal-error"),Un(Qe,p.name),Un(Ht,p.name),Te("boolean"==typeof fg,p,"internal-error"),Te("boolean"==typeof df,p,"internal-error"),Un(Ut,p.name),Un(Xo,p.name),Un(su,p.name),Un(Ba,p.name),Un(ea,p.name),Un(Vl,p.name);const Ua=new oi({uid:uf,auth:p,email:Ht,emailVerified:fg,displayName:Qe,isAnonymous:df,photoURL:Xo,phoneNumber:Ut,tenantId:su,stsTokenManager:Cd,createdAt:ea,lastLoginAt:Vl});return wd&&Array.isArray(wd)&&(Ua.providerData=wd.map(Nb=>Object.assign({},Nb))),Ba&&(Ua._redirectEventId=Ba),Ua}static _fromIdTokenResponse(p,m,w=!1){return(0,l.Z)(function*(){const I=new nn;I.updateFromServerResponse(m);const R=new oi({uid:m.localId,auth:p,stsTokenManager:I,isAnonymous:w});return yield no(R),R})()}}const zr=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(m,w){var I=this;return(0,l.Z)(function*(){I.storage[m]=w})()}_get(m){var w=this;return(0,l.Z)(function*(){const I=w.storage[m];return void 0===I?null:I})()}_remove(m){var w=this;return(0,l.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return v.type="NONE",v})();function cn(v,p,m){return`firebase:${v}:${p}:${m}`}class An{constructor(p,m,w){this.persistence=p,this.auth=m,this.userKey=w;const{config:I,name:R}=this.auth;this.fullUserKey=cn(this.userKey,I.apiKey,R),this.fullPersistenceKey=cn("persistence",I.apiKey,R),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,l.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?oi._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,l.Z)(function*(){if(m.persistence===p)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,w="authUser"){return(0,l.Z)(function*(){if(!m.length)return new An(ln(zr),p,w);const I=(yield Promise.all(m.map(function(){var Ae=(0,l.Z)(function*(qe){if(yield qe._isAvailable())return qe});return function(qe){return Ae.apply(this,arguments)}}()))).filter(Ae=>Ae);let R=I[0]||ln(zr);const z=cn(w,p.config.apiKey,p.name);let oe=null;for(const Ae of m)try{const qe=yield Ae._get(z);if(qe){const Qe=oi._fromJSON(p,qe);Ae!==R&&(oe=Qe),R=Ae;break}}catch(qe){}const xe=I.filter(Ae=>Ae._shouldAllowMigration);return R._shouldAllowMigration&&xe.length?(R=xe[0],oe&&(yield R._set(z,oe.toJSON())),yield Promise.all(m.map(function(){var Ae=(0,l.Z)(function*(qe){if(qe!==R)try{yield qe._remove(z)}catch(Qe){}});return function(qe){return Ae.apply(this,arguments)}}())),new An(R,p,w)):new An(R,p,w)})()}}function ko(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(vc(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(It(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(qr(p))return"Blackberry";if(Oo(p))return"Webos";if(_a(p))return"Safari";if((p.includes("chrome/")||ji(p))&&!p.includes("edge/"))return"Chrome";if(Gi(p))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function It(v=(0,F.z$)()){return/firefox\//i.test(v)}function _a(v=(0,F.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function ji(v=(0,F.z$)()){return/crios\//i.test(v)}function vc(v=(0,F.z$)()){return/iemobile/i.test(v)}function Gi(v=(0,F.z$)()){return/android/i.test(v)}function qr(v=(0,F.z$)()){return/blackberry/i.test(v)}function Oo(v=(0,F.z$)()){return/webos/i.test(v)}function $i(v=(0,F.z$)()){return/iphone|ipad|ipod/i.test(v)}function Vu(v=(0,F.z$)()){return $i(v)||Gi(v)||Oo(v)||qr(v)||/windows phone/i.test(v)||vc(v)}function Yr(v,p=[]){let m;switch(v){case"Browser":m=ko((0,F.z$)());break;case"Worker":m=`${ko((0,F.z$)())}-${v}`;break;default:m=v}const w=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${ae.SDK_VERSION}/${w}`}class Bu{constructor(p,m,w){this.app=p,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new al(this),this.idTokenSubscription=new al(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ms,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(p,m){var w=this;return m&&(this._popupRedirectResolver=ln(m)),this._initializationPromise=this.queue((0,l.Z)(function*(){var I,R;if(!w._deleted&&(w.persistenceManager=yield An.create(w,p),!w._deleted)){if(null===(I=w._popupRedirectResolver)||void 0===I?void 0:I._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(z){}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(R=w.currentUser)||void 0===R?void 0:R.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,l.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m)}})()}initializeCurrentUser(p){var m=this;return(0,l.Z)(function*(){var w;let I=yield m.assertedPersistence.getCurrentUser();if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const R=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,z=null==I?void 0:I._redirectEventId,oe=yield m.tryRedirectSignIn(p);(!R||R===z)&&(null==oe?void 0:oe.user)&&(I=oe.user)}return I?I._redirectEventId?(Te(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===I._redirectEventId?m.directlySetCurrentUser(I):m.reloadAndSetCurrentUserOrClear(I)):m.reloadAndSetCurrentUserOrClear(I):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var m=this;return(0,l.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(I){yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,l.Z)(function*(){try{yield no(p)}catch(w){if("auth/network-request-failed"!==w.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function _c(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,l.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,l.Z)(function*(){const w=p?(0,F.m9)(p):null;return w&&Te(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(p){var m=this;return(0,l.Z)(function*(){if(!m._deleted)return p&&Te(m.tenantId===p.tenantId,m,"tenant-id-mismatch"),m.queue((0,l.Z)(function*(){yield m.directlySetCurrentUser(p),m.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,l.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var m=this;return this.queue((0,l.Z)(function*(){yield m.assertedPersistence.setPersistence(ln(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new F.LL("auth","Firebase",p())}onAuthStateChanged(p,m,w){return this.registerStateListener(this.authStateSubscription,p,m,w)}onIdTokenChanged(p,m,w){return this.registerStateListener(this.idTokenSubscription,p,m,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var w=this;return(0,l.Z)(function*(){const I=yield w.getOrInitRedirectPersistenceManager(m);return null===p?I.removeCurrentUser():I.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,l.Z)(function*(){if(!m.redirectPersistenceManager){const w=p&&ln(p)||m._popupRedirectResolver;Te(w,m,"argument-error"),m.redirectPersistenceManager=yield An.create(m,[ln(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,l.Z)(function*(){var w,I;return m._isInitialized&&(yield m.queue((0,l.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===p?m._currentUser:(null===(I=m.redirectUser)||void 0===I?void 0:I._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,l.Z)(function*(){if(p===m.currentUser)return m.queue((0,l.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,w,I){if(this._deleted)return()=>{};const R="function"==typeof m?m:m.next.bind(m),z=this._isInitialized?Promise.resolve():this._initializationPromise;return Te(z,this,"internal-error"),z.then(()=>R(this.currentUser)),"function"==typeof m?p.addObserver(m,w,I):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,l.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Yr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,l.Z)(function*(){var m;const w={"X-Client-Version":p.clientVersion};p.app.options.appId&&(w["X-Firebase-gmpid"]=p.app.options.appId);const I=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return I&&(w["X-Firebase-Client"]=I),w})()}}function Nn(v){return(0,F.m9)(v)}class al{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,F.ne)(m=>this.observer=m)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Dh(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Mp(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class ll{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return Or("not implemented")}_getIdTokenResponse(p){return Or("not implemented")}_linkToIdToken(p,m){return Or("not implemented")}_getReauthenticationResolver(p){return Or("not implemented")}}function xp(v,p){return Th.apply(this,arguments)}function Th(){return(Th=(0,l.Z)(function*(v,p){return In(v,"POST","/v1/accounts:resetPassword",rt(v,p))})).apply(this,arguments)}function Rp(v,p){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,l.Z)(function*(v,p){return In(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Uu(v,p){return io.apply(this,arguments)}function io(){return(io=(0,l.Z)(function*(v,p){return In(v,"POST","/v1/accounts:update",rt(v,p))})).apply(this,arguments)}function Ah(){return(Ah=(0,l.Z)(function*(v,p){return On(v,"POST","/v1/accounts:signInWithPassword",rt(v,p))})).apply(this,arguments)}function Hu(v,p){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,l.Z)(function*(v,p){return In(v,"POST","/v1/accounts:sendOobCode",rt(v,p))})).apply(this,arguments)}function t_(v,p){return xh.apply(this,arguments)}function xh(){return(xh=(0,l.Z)(function*(v,p){return Hu(v,p)})).apply(this,arguments)}function hb(v,p){return ya.apply(this,arguments)}function ya(){return(ya=(0,l.Z)(function*(v,p){return Hu(v,p)})).apply(this,arguments)}function ju(v,p){return wc.apply(this,arguments)}function wc(){return(wc=(0,l.Z)(function*(v,p){return Hu(v,p)})).apply(this,arguments)}function Op(v,p){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,l.Z)(function*(v,p){return Hu(v,p)})).apply(this,arguments)}function Cc(){return(Cc=(0,l.Z)(function*(v,p){return On(v,"POST","/v1/accounts:signInWithEmailLink",rt(v,p))})).apply(this,arguments)}function ba(){return(ba=(0,l.Z)(function*(v,p){return On(v,"POST","/v1/accounts:signInWithEmailLink",rt(v,p))})).apply(this,arguments)}class cl extends ll{constructor(p,m,w,I=null){super("password",w),this._email=p,this._password=m,this._tenantId=I}static _fromEmailAndPassword(p,m){return new cl(p,m,"password")}static _fromEmailAndCode(p,m,w=null){return new cl(p,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,l.Z)(function*(){switch(m.signInMethod){case"password":return function kp(v,p){return Ah.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Rs(v,p){return Cc.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:an(p,"internal-error")}})()}_linkToIdToken(p,m){var w=this;return(0,l.Z)(function*(){switch(w.signInMethod){case"password":return Rp(p,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function va(v,p){return ba.apply(this,arguments)}(p,{idToken:m,email:w._email,oobCode:w._password});default:an(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function so(v,p){return oo.apply(this,arguments)}function oo(){return(oo=(0,l.Z)(function*(v,p){return On(v,"POST","/v1/accounts:signInWithIdp",rt(v,p))})).apply(this,arguments)}class pr extends ll{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new pr(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):an("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:I}=m,R=te(m,["providerId","signInMethod"]);if(!w||!I)return null;const z=new pr(w,I);return z.idToken=R.idToken||void 0,z.accessToken=R.accessToken||void 0,z.secret=R.secret,z.nonce=R.nonce,z.pendingToken=R.pendingToken||null,z}_getIdTokenResponse(p){return so(p,this.buildRequest())}_linkToIdToken(p,m){const w=this.buildRequest();return w.idToken=m,so(p,w)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,so(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,F.xO)(m)}return p}}function Gu(v,p){return ul.apply(this,arguments)}function ul(){return(ul=(0,l.Z)(function*(v,p){return In(v,"POST","/v1/accounts:sendVerificationCode",rt(v,p))})).apply(this,arguments)}function No(){return(No=(0,l.Z)(function*(v,p){return On(v,"POST","/v1/accounts:signInWithPhoneNumber",rt(v,p))})).apply(this,arguments)}function wa(){return(wa=(0,l.Z)(function*(v,p){const m=yield On(v,"POST","/v1/accounts:signInWithPhoneNumber",rt(v,p));if(m.temporaryProof)throw $e(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const r_={USER_NOT_FOUND:"user-not-found"};function dl(){return(dl=(0,l.Z)(function*(v,p){return On(v,"POST","/v1/accounts:signInWithPhoneNumber",rt(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),r_)})).apply(this,arguments)}class ai extends ll{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new ai({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new ai({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function zi(v,p){return No.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function n_(v,p){return wa.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Np(v,p){return dl.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:w,verificationCode:I}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:w,code:I}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:w,phoneNumber:I,temporaryProof:R}=p;return w||m||I||R?new ai({verificationId:m,verificationCode:w,phoneNumber:I,temporaryProof:R}):null}}class fn{constructor(p){var m,w,I,R,z,oe;const xe=(0,F.zd)((0,F.pd)(p)),Ae=null!==(m=xe.apiKey)&&void 0!==m?m:null,qe=null!==(w=xe.oobCode)&&void 0!==w?w:null,Qe=function hl(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(I=xe.mode)&&void 0!==I?I:null);Te(Ae&&qe&&Qe,"argument-error"),this.apiKey=Ae,this.operation=Qe,this.code=qe,this.continueUrl=null!==(R=xe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(z=xe.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(oe=xe.tenantId)&&void 0!==oe?oe:null}static parseLink(p){const m=function Pp(v){const p=(0,F.zd)((0,F.pd)(v)).link,m=p?(0,F.zd)((0,F.pd)(p)).deep_link_id:null,w=(0,F.zd)((0,F.pd)(v)).deep_link_id;return(w?(0,F.zd)((0,F.pd)(w)).link:null)||w||m||p||v}(p);try{return new fn(m)}catch(w){return null}}}let Po=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,w){return cl._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const I=fn.parseLink(w);return Te(I,"argument-error"),cl._fromEmailAndCode(m,I.code,I.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Gt{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Ca extends Gt{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ps extends Ca{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return Te("providerId"in m&&"signInMethod"in m,"argument-error"),pr._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Te(p.idToken||p.accessToken,"argument-error"),pr._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ps.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ps.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:I,pendingToken:R,nonce:z,providerId:oe}=p;if(!w&&!I&&!m&&!R||!oe)return null;try{return new ps(oe)._credential({idToken:m,accessToken:w,nonce:z,pendingToken:R})}catch(xe){return null}}}let Fo=(()=>{class v extends Ca{constructor(){super("facebook.com")}static credential(m){return pr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(w){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),li=(()=>{class v extends Ca{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return pr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:I}=m;if(!w&&!I)return null;try{return v.credential(w,I)}catch(R){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),gr=(()=>{class v extends Ca{constructor(){super("github.com")}static credential(m){return pr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(w){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Kr extends ll{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return so(p,this.buildRequest())}_linkToIdToken(p,m){const w=this.buildRequest();return w.idToken=m,so(p,w)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,so(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:I,pendingToken:R}=m;return w&&I&&R&&w===I?new Kr(w,R):null}static _create(p,m){return new Kr(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class gs extends Gt{constructor(p){Te(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return gs.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return gs.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Kr.fromJSON(p);return Te(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:w}=p;if(!m||!w)return null;try{return Kr._create(w,m)}catch(I){return null}}}let lo=(()=>{class v extends Ca{constructor(){super("twitter.com")}static credential(m,w){return pr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:I}=m;if(!w||!I)return null;try{return v.credential(w,I)}catch(R){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function fl(v,p){return Di.apply(this,arguments)}function Di(){return(Di=(0,l.Z)(function*(v,p){return On(v,"POST","/v1/accounts:signUp",rt(v,p))})).apply(this,arguments)}class or{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,w,I=!1){return(0,l.Z)(function*(){const R=yield oi._fromIdTokenResponse(p,w,I),z=Lo(w);return new or({user:R,providerId:z,_tokenResponse:w,operationType:m})})()}static _forOperation(p,m,w){return(0,l.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const I=Lo(w);return new or({user:p,providerId:I,_tokenResponse:w,operationType:m})})()}}function Lo(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Ec(){return(Ec=(0,l.Z)(function*(v){var p;const m=Nn(v);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new or({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield fl(m,{returnSecureToken:!0}),I=yield or._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(I.user),I})).apply(this,arguments)}class pl extends F.ZR{constructor(p,m,w,I){var R;super(m.code,m.message),this.operationType=w,this.user=I,Object.setPrototypeOf(this,pl.prototype),this.customData={appName:p.name,tenantId:null!==(R=p.tenantId)&&void 0!==R?R:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,m,w,I){return new pl(p,m,w,I)}}function gl(v,p,m,w){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?pl._fromErrorAndOperation(v,R,p,w):R})}function qu(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function Wu(){return(Wu=(0,l.Z)(function*(v,p){const m=(0,F.m9)(v);yield xt(!0,m,p);const{providerUserInfo:w}=yield en(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),I=qu(w||[]);return m.providerData=m.providerData.filter(R=>I.has(R.providerId)),I.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function ml(v,p){return be.apply(this,arguments)}function be(){return(be=(0,l.Z)(function*(v,p,m=!1){const w=yield wn(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return or._forOperation(v,"link",w)})).apply(this,arguments)}function xt(v,p,m){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,l.Z)(function*(v,p,m){yield no(p);const I=!1===v?"provider-already-linked":"no-such-provider";Te(qu(p.providerData).has(m)===v,p.auth,I)})).apply(this,arguments)}function En(v,p){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,l.Z)(function*(v,p,m=!1){const{auth:w}=v,I="reauthenticate";try{const R=yield wn(v,gl(w,I,p,v),m);Te(R.idToken,w,"internal-error");const z=Er(R.idToken);Te(z,w,"internal-error");const{sub:oe}=z;return Te(v.uid===oe,w,"user-mismatch"),or._forOperation(v,I,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&an(w,"user-mismatch"),R}})).apply(this,arguments)}function Vo(v,p){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,l.Z)(function*(v,p,m=!1){const w="signIn",I=yield gl(v,w,p),R=yield or._fromIdTokenResponse(v,w,I);return m||(yield v._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Sa(v,p){return _l.apply(this,arguments)}function _l(){return(_l=(0,l.Z)(function*(v,p){return Vo(Nn(v),p)})).apply(this,arguments)}function Fp(v,p){return yl.apply(this,arguments)}function yl(){return(yl=(0,l.Z)(function*(v,p){const m=(0,F.m9)(v);return yield xt(!1,m,p.providerId),ml(m,p)})).apply(this,arguments)}function vl(v,p){return co.apply(this,arguments)}function co(){return(co=(0,l.Z)(function*(v,p){return En((0,F.m9)(v),p)})).apply(this,arguments)}function Fr(v,p){return qi.apply(this,arguments)}function qi(){return(qi=(0,l.Z)(function*(v,p){return On(v,"POST","/v1/accounts:signInWithCustomToken",rt(v,p))})).apply(this,arguments)}function uo(){return(uo=(0,l.Z)(function*(v,p){const m=Nn(v),w=yield Fr(m,{token:p,returnSecureToken:!0}),I=yield or._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(I.user),I})).apply(this,arguments)}class ci{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Ku._fromServerResponse(p,m):an(p,"internal-error")}}class Ku extends ci{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Ku(m)}}function Bo(v,p,m){var w;Te((null===(w=m.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),Te(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(Te(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(Te(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function bl(){return(bl=(0,l.Z)(function*(v,p,m){const w=(0,F.m9)(v),I={requestType:"PASSWORD_RESET",email:p};m&&Bo(w,I,m),yield hb(w,I)})).apply(this,arguments)}function ho(){return(ho=(0,l.Z)(function*(v,p,m){yield xp((0,F.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function wl(){return(wl=(0,l.Z)(function*(v,p){yield Uu((0,F.m9)(v),{oobCode:p})})).apply(this,arguments)}function Qu(v,p){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,l.Z)(function*(v,p){const m=(0,F.m9)(v),w=yield xp(m,{oobCode:p}),I=w.requestType;switch(Te(I,m,"internal-error"),I){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Te(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Te(w.mfaInfo,m,"internal-error");default:Te(w.email,m,"internal-error")}let R=null;return w.mfaInfo&&(R=ci._fromServerResponse(Nn(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:R},operation:I}})).apply(this,arguments)}function Ic(){return(Ic=(0,l.Z)(function*(v,p){const{data:m}=yield Qu((0,F.m9)(v),p);return m.email})).apply(this,arguments)}function Ju(){return(Ju=(0,l.Z)(function*(v,p,m){const w=Nn(v),I=yield fl(w,{returnSecureToken:!0,email:p,password:m}),R=yield or._fromIdTokenResponse(w,"signIn",I);return yield w._updateCurrentUser(R.user),R})).apply(this,arguments)}function ms(){return(ms=(0,l.Z)(function*(v,p,m){const w=(0,F.m9)(v),I={requestType:"EMAIL_SIGNIN",email:p};Te(m.handleCodeInApp,w,"argument-error"),m&&Bo(w,I,m),yield ju(w,I)})).apply(this,arguments)}function is(){return(is=(0,l.Z)(function*(v,p,m){const w=(0,F.m9)(v),I=Po.credentialWithLink(p,m||fs());return Te(I._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Sa(w,I)})).apply(this,arguments)}function Hn(v,p){return El.apply(this,arguments)}function El(){return(El=(0,l.Z)(function*(v,p){return In(v,"POST","/v1/accounts:createAuthUri",rt(v,p))})).apply(this,arguments)}function Vp(){return(Vp=(0,l.Z)(function*(v,p){const w={identifier:p,continueUri:kn()?fs():"http://localhost"},{signinMethods:I}=yield Hn((0,F.m9)(v),w);return I||[]})).apply(this,arguments)}function Ph(){return(Ph=(0,l.Z)(function*(v,p){const m=(0,F.m9)(v),I={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Bo(m.auth,I,p);const{email:R}=yield t_(m.auth,I);R!==v.email&&(yield v.reload())})).apply(this,arguments)}function Sl(){return(Sl=(0,l.Z)(function*(v,p,m){const w=(0,F.m9)(v),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Bo(w.auth,R,m);const{email:z}=yield Op(w.auth,R);z!==v.email&&(yield v.reload())})).apply(this,arguments)}function ed(v,p){return Da.apply(this,arguments)}function Da(){return(Da=(0,l.Z)(function*(v,p){return In(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Mc(){return(Mc=(0,l.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const w=(0,F.m9)(v),R={idToken:yield w.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},z=yield wn(w,ed(w.auth,R));w.displayName=z.displayName||null,w.photoURL=z.photoUrl||null;const oe=w.providerData.find(({providerId:xe})=>"password"===xe);oe&&(oe.displayName=w.displayName,oe.photoURL=w.photoURL),yield w._updateTokensIfNecessary(z)})).apply(this,arguments)}function Dl(v,p,m){return xc.apply(this,arguments)}function xc(){return(xc=(0,l.Z)(function*(v,p,m){const{auth:w}=v,R={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(R.email=p),m&&(R.password=m);const z=yield wn(v,Rp(w,R));yield v._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Qr{constructor(p,m,w={}){this.isNewUser=p,this.providerId=m,this.profile=w}}class Rc extends Qr{constructor(p,m,w,I){super(p,m,w),this.username=I}}class Fh extends Qr{constructor(p,m){super(p,"facebook.com",m)}}class o_ extends Rc{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Sn extends Qr{constructor(p,m){super(p,"google.com",m)}}class Le extends Rc{constructor(p,m,w){super(p,"twitter.com",m,w)}}function ot(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function s_(v){var p,m;if(!v)return null;const{providerId:w}=v,I=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},R=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&(null==v?void 0:v.idToken)){const z=null===(m=null===(p=Er(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(z)return new Qr(R,"anonymous"!==z&&"custom"!==z?z:null)}if(!w)return null;switch(w){case"facebook.com":return new Fh(R,I);case"github.com":return new o_(R,I);case"google.com":return new Sn(R,I);case"twitter.com":return new Le(R,I,v.screenName||null);case"custom":case"anonymous":return new Qr(R,null);default:return new Qr(R,w,I)}}(m)}class mn{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new mn("enroll",p)}static _fromMfaPendingCredential(p){return new mn("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,w;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return mn._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(w=p.multiFactorSession)||void 0===w?void 0:w.idToken)return mn._fromIdtoken(p.multiFactorSession.idToken)}return null}}class ks{constructor(p,m,w){this.session=p,this.hints=m,this.signInResolver=w}static _fromError(p,m){const w=Nn(p),I=m.customData._serverResponse,R=(I.mfaInfo||[]).map(oe=>ci._fromServerResponse(w,oe));Te(I.mfaPendingCredential,w,"internal-error");const z=mn._fromMfaPendingCredential(I.mfaPendingCredential);return new ks(z,R,function(){var oe=(0,l.Z)(function*(xe){const Ae=yield xe._process(w,z);delete I.mfaInfo,delete I.mfaPendingCredential;const qe=Object.assign(Object.assign({},I),{idToken:Ae.idToken,refreshToken:Ae.refreshToken});switch(m.operationType){case"signIn":const Qe=yield or._fromIdTokenResponse(w,m.operationType,qe);return yield w._updateCurrentUser(Qe.user),Qe;case"reauthenticate":return Te(m.user,w,"internal-error"),or._forOperation(m.user,m.operationType,qe);default:an(w,"internal-error")}});return function(xe){return oe.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,l.Z)(function*(){return m.signInResolver(p)})()}}function td(v,p){return In(v,"POST","/v2/accounts/mfaEnrollment:start",rt(v,p))}class Tl{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>ci._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new Tl(p)}getSession(){var p=this;return(0,l.Z)(function*(){return mn._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var w=this;return(0,l.Z)(function*(){const I=p,R=yield w.getSession(),z=yield wn(w.user,I._process(w.user.auth,R,m));return yield w.user._updateTokensIfNecessary(z),w.user.reload()})()}unenroll(p){var m=this;return(0,l.Z)(function*(){const w="string"==typeof p?p:p.uid,I=yield m.user.getIdToken(),R=yield wn(m.user,function Up(v,p){return In(v,"POST","/v2/accounts/mfaEnrollment:withdraw",rt(v,p))}(m.user.auth,{idToken:I,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:z})=>z!==w),yield m.user._updateTokensIfNecessary(R);try{yield m.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const ss=new WeakMap,Os="__sak";class Lr{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Os,"1"),this.storage.removeItem(Os),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ta=(()=>{class v extends Lr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Il(){const v=(0,F.z$)();return _a(v)||$i(v)}()&&function Wr(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Vu(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const I=this.storage.getItem(w),R=this.localCache[w];I!==R&&m(w,R,I)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((oe,xe,Ae)=>{this.notifyListeners(oe,Ae)});const I=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(I);if(m.newValue!==oe)null!==m.newValue?this.storage.setItem(I,m.newValue):this.storage.removeItem(I);else if(this.localCache[I]===m.newValue&&!w)return}const R=()=>{const oe=this.storage.getItem(I);!w&&this.localCache[I]===oe||this.notifyListeners(I,oe)},z=this.storage.getItem(I);!function bc(){return(0,F.w1)()&&10===document.documentMode}()||z===m.newValue||m.newValue===m.oldValue?R():setTimeout(R,10)}notifyListeners(m,w){this.localCache[m]=w;const I=this.listeners[m];if(I)for(const R of Array.from(I))R(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,I)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:I}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var I=()=>super._set,R=this;return(0,l.Z)(function*(){yield I().call(R,m,w),R.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,I=this;return(0,l.Z)(function*(){const R=yield w().call(I,m);return I.localCache[m]=JSON.stringify(R),R})()}_remove(m){var w=()=>super._remove,I=this;return(0,l.Z)(function*(){yield w().call(I,m),delete I.localCache[m]})()}}return v.type="LOCAL",v})(),$n=(()=>{class v extends Lr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return v.type="SESSION",v})();let Pc=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(R=>R.isListeningto(m));if(w)return w;const I=new v(m);return this.receivers.push(I),I}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,l.Z)(function*(){const I=m,{eventId:R,eventType:z,data:oe}=I.data,xe=w.handlersMap[z];if(!(null==xe?void 0:xe.size))return;I.ports[0].postMessage({status:"ack",eventId:R,eventType:z});const Ae=Array.from(xe).map(function(){var Qe=(0,l.Z)(function*(Ht){return Ht(I.origin,oe)});return function(Ht){return Qe.apply(this,arguments)}}()),qe=yield function zn(v){return Promise.all(v.map(function(){var p=(0,l.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return p.apply(this,arguments)}}()))}(Ae);I.ports[0].postMessage({status:"done",eventId:R,eventType:z,response:qe})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ns(v="",p=10){let m="";for(let w=0;w<p;w++)m+=Math.floor(10*Math.random());return v+m}class c_{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,w=50){var I=this;return(0,l.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let z,oe;return new Promise((xe,Ae)=>{const qe=Ns("",20);R.port1.start();const Qe=setTimeout(()=>{Ae(new Error("unsupported_event"))},w);oe={messageChannel:R,onMessage(Ht){const Ut=Ht;if(Ut.data.eventId===qe)switch(Ut.data.status){case"ack":clearTimeout(Qe),z=setTimeout(()=>{Ae(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),xe(Ut.data.response);break;default:clearTimeout(Qe),clearTimeout(z),Ae(new Error("invalid_response"))}}},I.handlers.add(oe),R.port1.addEventListener("message",oe.onMessage),I.target.postMessage({eventType:p,eventId:qe,data:m},[R.port2])}).finally(()=>{oe&&I.removeMessageHandler(oe)})})()}}function Pn(){return window}function ys(){return void 0!==Pn().WorkerGlobalScope&&"function"==typeof Pn().importScripts}function lr(){return(lr=(0,l.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Go="firebaseLocalStorageDb",Fc="firebaseLocalStorage",Lc="fbase_key";class Dr{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Ml(v,p){return v.transaction([Fc],p?"readwrite":"readonly").objectStore(Fc)}function Bt(){const v=indexedDB.open(Go,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(Fc,{keyPath:Lc})}catch(I){m(I)}}),v.addEventListener("success",(0,l.Z)(function*(){const w=v.result;w.objectStoreNames.contains(Fc)?p(w):(w.close(),yield function u_(){const v=indexedDB.deleteDatabase(Go);return new Dr(v).toPromise()}(),p(yield Bt()))}))})}function Ia(v,p,m){return rd.apply(this,arguments)}function rd(){return(rd=(0,l.Z)(function*(v,p,m){const w=Ml(v,!0).put({[Lc]:p,value:m});return new Dr(w).toPromise()})).apply(this,arguments)}function id(){return(id=(0,l.Z)(function*(v,p){const m=Ml(v,!1).get(p),w=yield new Dr(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function sd(v,p){const m=Ml(v,!0).delete(p);return new Dr(m).toPromise()}const Aa=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,l.Z)(function*(){return m.db||(m.db=yield Bt()),m.db})()}_withRetries(m){var w=this;return(0,l.Z)(function*(){let I=0;for(;;)try{const R=yield w._openDb();return yield m(R)}catch(R){if(I++>3)throw R;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,l.Z)(function*(){return ys()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,l.Z)(function*(){m.receiver=Pc._getInstance(function po(){return ys()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,l.Z)(function*(I,R){return{keyProcessed:(yield m._poll()).includes(R.key)}});return function(I,R){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,l.Z)(function*(I,R){return["keyChanged"]});return function(I,R){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,l.Z)(function*(){var w,I;if(m.activeServiceWorker=yield function Vh(){return lr.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new c_(m.activeServiceWorker);const R=yield m.sender._send("ping",{},800);!R||(null===(w=R[0])||void 0===w?void 0:w.fulfilled)&&(null===(I=R[0])||void 0===I?void 0:I.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,l.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Ps(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch(I){}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Bt();return yield Ia(m,Os,"1"),yield sd(m,Os),!0}catch(m){}return!1})()}_withPendingWrite(m){var w=this;return(0,l.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var I=this;return(0,l.Z)(function*(){return I._withPendingWrite((0,l.Z)(function*(){return yield I._withRetries(R=>Ia(R,m,w)),I.localCache[m]=w,I.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,l.Z)(function*(){const I=yield w._withRetries(R=>function d_(v,p){return id.apply(this,arguments)}(R,m));return w.localCache[m]=I,I})()}_remove(m){var w=this;return(0,l.Z)(function*(){return w._withPendingWrite((0,l.Z)(function*(){return yield w._withRetries(I=>sd(I,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,l.Z)(function*(){const w=yield m._withRetries(z=>{const oe=Ml(z,!1).getAll();return new Dr(oe).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const I=[],R=new Set;for(const{fbase_key:z,value:oe}of w)R.add(z),JSON.stringify(m.localCache[z])!==JSON.stringify(oe)&&(m.notifyListeners(z,oe),I.push(z));for(const z of Object.keys(m.localCache))m.localCache[z]&&!R.has(z)&&(m.notifyListeners(z,null),I.push(z));return I})()}notifyListeners(m,w){this.localCache[m]=w;const I=this.listeners[m];if(I)for(const R of Array.from(I))R(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Jn(v,p){return In(v,"POST","/v2/accounts/mfaSignIn:start",rt(v,p))}function Bc(){return(Bc=(0,l.Z)(function*(v){return(yield In(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function tn(v){return new Promise((p,m)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=p,w.onerror=I=>{const R=Bn("internal-error");R.customData=I,m(R)},w.type="text/javascript",w.charset="UTF-8",function Fs(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(w)})}function Ai(v){return`__${v}${Math.floor(1e6*Math.random())}`}const vs=1e12;class Hp{constructor(p){this.auth=p,this.counter=vs,this._widgets=new Map}render(p,m){const w=this.counter;return this._widgets.set(w,new go(p,this.auth.name,m||{})),this.counter++,w}reset(p){var m;const w=p||vs;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(p){var m;return(null===(m=this._widgets.get(p||vs))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,l.Z)(function*(){var w;return null===(w=m._widgets.get(p||vs))||void 0===w||w.execute(),""})()}}class go{constructor(p,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const I="string"==typeof p?document.getElementById(p):p;Te(I,"argument-error",{appName:m}),this.container=I,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Bh(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const xa=Ai("rcb"),jp=new Nt(3e4,6e4);class fi{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Pn().grecaptcha}load(p,m=""){return Te(function ad(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Pn().grecaptcha):new Promise((w,I)=>{const R=Pn().setTimeout(()=>{I(Bn(p,"network-request-failed"))},jp.get());Pn()[xa]=()=>{Pn().clearTimeout(R),delete Pn()[xa];const oe=Pn().grecaptcha;if(!oe)return void I(Bn(p,"internal-error"));const xe=oe.render;oe.render=(Ae,qe)=>{const Qe=xe(Ae,qe);return this.counter++,Qe},this.hostLanguage=m,w(oe)},tn(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:xa,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(R),I(Bn(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Pn().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ra{load(p){return(0,l.Z)(function*(){return new Hp(p)})()}clearedOneInstance(){}}const qo="recaptcha",Uh={theme:"light",type:"image"};class mo{constructor(p,m=Object.assign({},Uh),w){this.parameters=m,this.type=qo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Nn(w),this.isInvisible="invisible"===this.parameters.size,Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const I="string"==typeof p?document.getElementById(p):p;Te(I,this.auth,"argument-error"),this.container=I,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ra:new fi,this.validateStartingState()}verify(){var p=this;return(0,l.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(m)||new Promise(R=>{const z=oe=>{!oe||(p.tokenChangeListeners.delete(z),R(oe))};p.tokenChangeListeners.add(z),p.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Te(!this.parameters.sitekey,this.auth,"argument-error"),Te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof p)p(m);else if("string"==typeof p){const w=Pn()[p];"function"==typeof w&&w(m)}}}assertNotDestroyed(){Te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,l.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,l.Z)(function*(){Te(kn()&&!ys(),p.auth,"internal-error"),yield function Hh(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function Ma(v){return Bc.apply(this,arguments)}(p.auth);Te(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return Te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class jh{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=ai._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function ld(){return(ld=(0,l.Z)(function*(v,p,m){const w=Nn(v),I=yield O(w,p,(0,F.m9)(m));return new jh(I,R=>Sa(w,R))})).apply(this,arguments)}function xl(){return(xl=(0,l.Z)(function*(v,p,m){const w=(0,F.m9)(v);yield xt(!1,w,"phone");const I=yield O(w.auth,p,(0,F.m9)(m));return new jh(I,R=>Fp(w,R))})).apply(this,arguments)}function A(){return(A=(0,l.Z)(function*(v,p,m){const w=(0,F.m9)(v),I=yield O(w.auth,p,(0,F.m9)(m));return new jh(I,R=>vl(w,R))})).apply(this,arguments)}function O(v,p,m){return j.apply(this,arguments)}function j(){return(j=(0,l.Z)(function*(v,p,m){var w;const I=yield m.verify();try{let R;if(Te("string"==typeof I,v,"argument-error"),Te(m.type===qo,v,"argument-error"),R="string"==typeof p?{phoneNumber:p}:p,"session"in R){const z=R.session;if("phoneNumber"in R)return Te("enroll"===z.type,v,"internal-error"),(yield td(v,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:I}})).phoneSessionInfo.sessionInfo;{Te("signin"===z.type,v,"internal-error");const oe=(null===(w=R.multiFactorHint)||void 0===w?void 0:w.uid)||R.multiFactorUid;return Te(oe,v,"missing-multi-factor-info"),(yield Jn(v,{mfaPendingCredential:z.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:I}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield Gu(v,{phoneNumber:R.phoneNumber,recaptchaToken:I});return z}}finally{m._reset()}})).apply(this,arguments)}function ce(){return(ce=(0,l.Z)(function*(v,p){yield ml((0,F.m9)(v),p)})).apply(this,arguments)}let Ie=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Nn(m)}verifyPhoneNumber(m,w){return O(this.auth,m,(0,F.m9)(w))}static credential(m,w){return ai._fromVerification(m,w)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:I}=m;return w&&I?ai._fromTokenResponse(w,I):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function je(v,p){return p?ln(p):(Te(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class tt extends ll{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return so(p,this._buildIdpRequest())}_linkToIdToken(p,m){return so(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return so(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function yt(v){return Vo(v.auth,new tt(v),v.bypassAuthState)}function Ft(v){const{auth:p,user:m}=v;return Te(m,p,"internal-error"),En(m,new tt(v),v.bypassAuthState)}function bt(v){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,l.Z)(function*(v){const{auth:p,user:m}=v;return Te(m,p,"internal-error"),ml(m,new tt(v),v.bypassAuthState)})).apply(this,arguments)}class at{constructor(p,m,w,I,R=!1){this.auth=p,this.resolver=w,this.user=I,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,l.Z)(function*(w,I){p.pendingPromise={resolve:w,reject:I};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(R){p.reject(R)}});return function(w,I){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,l.Z)(function*(){const{urlResponse:w,sessionId:I,postBody:R,tenantId:z,error:oe,type:xe}=p;if(oe)return void m.reject(oe);const Ae={auth:m.auth,requestUri:w,sessionId:I,tenantId:z||void 0,postBody:R||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(xe)(Ae))}catch(qe){m.reject(qe)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return yt;case"linkViaPopup":case"linkViaRedirect":return bt;case"reauthViaPopup":case"reauthViaRedirect":return Ft;default:an(this.auth,"internal-error")}}resolve(p){We(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){We(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pi=new Nt(2e3,1e4);function Ls(){return(Ls=(0,l.Z)(function*(v,p,m){const w=Nn(v);Ci(v,p,Gt);const I=je(w,m);return new Hc(w,"signInViaPopup",p,I).executeNotNull()})).apply(this,arguments)}function Vs(){return(Vs=(0,l.Z)(function*(v,p,m){const w=(0,F.m9)(v);Ci(w.auth,p,Gt);const I=je(w.auth,m);return new Hc(w.auth,"reauthViaPopup",p,I,w).executeNotNull()})).apply(this,arguments)}function qh(){return(qh=(0,l.Z)(function*(v,p,m){const w=(0,F.m9)(v);Ci(w.auth,p,Gt);const I=je(w.auth,m);return new Hc(w.auth,"linkViaPopup",p,I,w).executeNotNull()})).apply(this,arguments)}let Hc=(()=>{class v extends at{constructor(m,w,I,R,z){super(m,w,R,z),this.provider=I,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,l.Z)(function*(){const w=yield m.execute();return Te(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,l.Z)(function*(){We(1===m.filter.length,"Popup operations only handle one event");const w=Ns();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(I=>{m.reject(I)}),m.resolver._isIframeWebStorageSupported(m.auth,I=>{I||m.reject(Bn(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,I;this.pollId=(null===(I=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===I?void 0:I.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Bn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,pi.get())};m()}}return v.currentPopupAction=null,v})();const Gc=new Map;class ka extends at{constructor(p,m,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,l.Z)(function*(){let w=Gc.get(m.auth._key());if(!w){try{const R=(yield function Rl(v,p){return Lt.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;w=()=>Promise.resolve(R)}catch(I){w=()=>Promise.reject(I)}Gc.set(m.auth._key(),w)}return m.bypassAuthState||Gc.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,w=this;return(0,l.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(w,p);if("unknown"!==p.type){if(p.eventId){const I=yield w.auth._redirectUserForId(p.eventId);if(I)return w.user=I,m().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function Lt(){return(Lt=(0,l.Z)(function*(v,p){const m=Gp(p),w=p_(v);if(!(yield w._isAvailable()))return!1;const I="true"===(yield w._get(m));return yield w._remove(m),I})).apply(this,arguments)}function Wo(v,p){return $c.apply(this,arguments)}function $c(){return($c=(0,l.Z)(function*(v,p){return p_(v)._set(Gp(p),"true")})).apply(this,arguments)}function p_(v){return ln(v._redirectPersistence)}function Gp(v){return cn("pendingRedirect",v.config.apiKey,v.name)}function zc(){return(zc=(0,l.Z)(function*(v,p,m){const w=Nn(v);Ci(v,p,Gt);const I=je(w,m);return yield Wo(I,w),I._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function qc(){return(qc=(0,l.Z)(function*(v,p,m){const w=(0,F.m9)(v);Ci(w.auth,p,Gt);const I=je(w.auth,m);yield Wo(I,w.auth);const R=yield m_(w);return I._openRedirect(w.auth,p,"reauthViaRedirect",R)})).apply(this,arguments)}function Wc(){return(Wc=(0,l.Z)(function*(v,p,m){const w=(0,F.m9)(v);Ci(w.auth,p,Gt);const I=je(w.auth,m);yield xt(!1,w,p.providerId),yield Wo(I,w.auth);const R=yield m_(w);return I._openRedirect(w.auth,p,"linkViaRedirect",R)})).apply(this,arguments)}function Ol(){return(Ol=(0,l.Z)(function*(v,p){return yield Nn(v)._initializationPromise,Yc(v,p,!1)})).apply(this,arguments)}function Yc(v,p){return Na.apply(this,arguments)}function Na(){return(Na=(0,l.Z)(function*(v,p,m=!1){const w=Nn(v),I=je(w,p),z=yield new ka(w,I,m).execute();return z&&!m&&(delete z.user._redirectEventId,yield w._persistUserIfCurrent(z.user),yield w._setRedirectUser(null,p)),z})).apply(this,arguments)}function m_(v){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,l.Z)(function*(v){const p=Ns(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class ud{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(m=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function __(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qp(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var w;if(p.error&&!qp(p)){const I=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(Bn(this.auth,I))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const w=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yh(p))}saveEventToCache(p){this.cachedEventUids.add(Yh(p)),this.lastProcessedEventTime=Date.now()}}function Yh(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function qp({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Kh(v){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,l.Z)(function*(v,p={}){return In(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Wp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yo=/^https?/;function Zh(){return(Zh=(0,l.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Kh(v);for(const m of p)try{if(y_(m))return}catch(w){}an(v,"unauthorized-domain")})).apply(this,arguments)}function y_(v){const p=fs(),{protocol:m,hostname:w}=new URL(p);if(v.startsWith("chrome-extension://")){const z=new URL(v);return""===z.hostname&&""===w?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&z.hostname===w}if(!Yo.test(m))return!1;if(Wp.test(v))return w===v;const I=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+I+"|"+I+")$","i").test(w)}const Ko=new Nt(3e4,6e4);function bs(){const v=Pn().___jsl;if(null==v?void 0:v.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Qh=null;function Jh(v){return Qh=Qh||function Yp(v){return new Promise((p,m)=>{var w,I,R;function z(){bs(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{bs(),m(Bn(v,"network-request-failed"))},timeout:Ko.get()})}if(null===(I=null===(w=Pn().gapi)||void 0===w?void 0:w.iframes)||void 0===I?void 0:I.Iframe)p(gapi.iframes.getContext());else{if(!(null===(R=Pn().gapi)||void 0===R?void 0:R.load)){const oe=Ai("iframefcb");return Pn()[oe]=()=>{gapi.load?z():m(Bn(v,"network-request-failed"))},tn(`https://apis.google.com/js/api.js?onload=${oe}`).catch(xe=>m(xe))}z()}}).catch(p=>{throw Qh=null,p})}(v),Qh}const v_=new Nt(5e3,15e3),Xh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pb(v){const p=v.config;Te(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?Xe(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:p.apiKey,appName:v.name,v:ae.SDK_VERSION},I=Zp.get(v.config.apiHost);I&&(w.eid=I);const R=v._getFrameworks();return R.length&&(w.fw=R.join(",")),`${m}?${(0,F.xO)(w).slice(1)}`}function Qp(){return Qp=(0,l.Z)(function*(v){const p=yield Jh(v),m=Pn().gapi;return Te(m,v,"internal-error"),p.open({where:document.body,url:pb(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xh,dontclear:!0},w=>new Promise(function(){var I=(0,l.Z)(function*(R,z){yield w.restyle({setHideOnLeave:!1});const oe=Bn(v,"network-request-failed"),xe=Pn().setTimeout(()=>{z(oe)},v_.get());function Ae(){Pn().clearTimeout(xe),R(w)}w.ping(Ae).then(Ae,()=>{z(oe)})});return function(R,z){return I.apply(this,arguments)}}()))}),Qp.apply(this,arguments)}const I0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Nl{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function C_(v,p,m,w,I,R){Te(v.config.authDomain,v,"auth-domain-config-required"),Te(v.config.apiKey,v,"invalid-api-key");const z={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:w,v:ae.SDK_VERSION,eventId:I};if(p instanceof Gt){p.setDefaultLanguage(v.languageCode),z.providerId=p.providerId||"",(0,F.xb)(p.getCustomParameters())||(z.customParameters=JSON.stringify(p.getCustomParameters()));for(const[xe,Ae]of Object.entries(R||{}))z[xe]=Ae}if(p instanceof Ca){const xe=p.getScopes().filter(Ae=>""!==Ae);xe.length>0&&(z.scopes=xe.join(","))}v.tenantId&&(z.tid=v.tenantId);const oe=z;for(const xe of Object.keys(oe))void 0===oe[xe]&&delete oe[xe];return`${function M0({config:v}){return v.emulator?Xe(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,F.xO)(oe).slice(1)}`}const Jc="webStorageSupport";class S_ extends class E_{constructor(p){this.factorId=p}_process(p,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,w);case"signin":return this._finalizeSignIn(p,m.credential);default:return Or("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new S_(p)}_finalizeEnroll(p,m,w){return function nd(v,p){return In(v,"POST","/v2/accounts/mfaEnrollment:finalize",rt(v,p))}(p,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function od(v,p){return In(v,"POST","/v2/accounts/mfaSignIn:finalize",rt(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Xp=(()=>{class v{constructor(){}static assertion(m){return S_._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var eg="@firebase/auth",D_="0.19.11";class mb{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,l.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(w=>{var I;p((null===(I=w)||void 0===I?void 0:I.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Fa(){return window}function Wn(){return(Wn=(0,l.Z)(function*(v,p,m){var w;const{BuildInfo:I}=Fa();We(p.sessionId,"AuthEvent did not contain a session ID");const R=yield rg(p.sessionId),z={};return $i()?z.ibi=I.packageName:Gi()?z.apn=I.packageName:an(v,"operation-not-supported-in-this-environment"),I.displayName&&(z.appDisplayName=I.displayName),z.sessionId=R,C_(v,m,p.type,void 0,null!==(w=p.eventId)&&void 0!==w?w:void 0,z)})).apply(this,arguments)}function tg(){return(tg=(0,l.Z)(function*(v){const{BuildInfo:p}=Fa(),m={};$i()?m.iosBundleId=p.packageName:Gi()?m.androidPackageName=p.packageName:an(v,"operation-not-supported-in-this-environment"),yield Kh(v,m)})).apply(this,arguments)}function ng(){return(ng=(0,l.Z)(function*(v,p,m){const{cordova:w}=Fa();let I=()=>{};try{yield new Promise((R,z)=>{let oe=null;function xe(){var Qe;R();const Ht=null===(Qe=w.plugins.browsertab)||void 0===Qe?void 0:Qe.close;"function"==typeof Ht&&Ht(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Ae(){oe||(oe=window.setTimeout(()=>{z(Bn(v,"redirect-cancelled-by-user"))},2e3))}function qe(){"visible"===(null==document?void 0:document.visibilityState)&&Ae()}p.addPassiveListener(xe),document.addEventListener("resume",Ae,!1),Gi()&&document.addEventListener("visibilitychange",qe,!1),I=()=>{p.removePassiveListener(xe),document.removeEventListener("resume",Ae,!1),document.removeEventListener("visibilitychange",qe,!1),oe&&window.clearTimeout(oe)}})}finally{I()}})).apply(this,arguments)}function rg(v){return ig.apply(this,arguments)}function ig(){return(ig=(0,l.Z)(function*(v){const p=T_(v),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(I=>I.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function T_(v){if(We(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),m=new Uint8Array(p);for(let w=0;w<v.length;w++)m[w]=v.charCodeAt(w);return m}!function nf(v){(0,ae._registerComponent)(new Ze.wA("auth",(p,{options:m})=>{const w=p.getProvider("app").getImmediate(),I=p.getProvider("heartbeat"),{apiKey:R,authDomain:z}=w.options;return((oe,xe)=>{Te(R&&!R.includes(":"),"invalid-api-key",{appName:oe.name}),Te(!(null==z?void 0:z.includes(":")),"argument-error",{appName:oe.name});const Ae={apiKey:R,authDomain:z,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yr(v)},qe=new Bu(oe,xe,Ae);return function Bi(v,p){const m=(null==p?void 0:p.persistence)||[],w=(Array.isArray(m)?m:[m]).map(ln);(null==p?void 0:p.errorMap)&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(w,null==p?void 0:p.popupRedirectResolver)}(qe,m),qe})(w,I)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,w)=>{p.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new Ze.wA("auth-internal",p=>{const m=Nn(p.getProvider("auth").getImmediate());return new mb(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(eg,D_,function _b(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ae.registerVersion)(eg,D_,"esm2017")}("Browser");class x0 extends ud{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,l.Z)(function*(){yield p.initPromise})()}}function xi(v){return pd.apply(this,arguments)}function pd(){return(pd=(0,l.Z)(function*(v){const p=yield yo()._get(gd(v));return p&&(yield yo()._remove(gd(v))),p})).apply(this,arguments)}function Tr(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const w=Math.floor(Math.random()*p.length);v.push(p.charAt(w))}return v.join("")}function yo(){return ln(Ta)}function gd(v){return cn("authEvent",v.config.apiKey,v.name)}function md(v){if(!(null==v?void 0:v.includes("?")))return{};const[p,...m]=v.split("?");return(0,F.zd)(m.join("?"))}function tu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Bn("no-auth-event")}}function af(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function M_(v=(0,F.z$)()){return!("file:"!==af()&&"ionic:"!==af()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function yd(){try{const v=self.localStorage,p=Ns();if(v)return v.setItem(p,"1"),v.removeItem(p),!function x_(v=(0,F.z$)()){return function nu(){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Db(v=(0,F.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,F.hl)()}catch(v){return lg()&&(0,F.hl)()}return!1}function lg(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function cg(){return(function ag(){return"http:"===af()||"https:"===af()}()||(0,F.ru)()||M_())&&!function Sb(){return(0,F.b$)()||(0,F.UG)()}()&&yd()&&!lg()}function ru(){return M_()&&"undefined"!=typeof document}function Fl(){return(Fl=(0,l.Z)(function*(){return!!ru()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const os={LOCAL:"local",NONE:"none",SESSION:"session"},Qo=Te,R_="persistence";function ug(v){return La.apply(this,arguments)}function La(){return(La=(0,l.Z)(function*(v){yield v._initializationPromise;const p=Mb(),m=cn(R_,v.config.apiKey,v.name);p&&p.setItem(m,v._getPersistence())})).apply(this,arguments)}function Mb(){var v;try{return(null===(v=function Ib(){return"undefined"!=typeof window?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch(p){return null}}const R0=Te;class Jo{constructor(){this.browserResolver=ln(class Xc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$n,this._completeRedirectFn=Yc}_openPopup(p,m,w,I){var R=this;return(0,l.Z)(function*(){var z;We(null===(z=R.eventManagers[p._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const oe=C_(p,m,w,fs(),I);return function Jp(v,p,m,w=500,I=600){const R=Math.max((window.screen.availHeight-I)/2,0).toString(),z=Math.max((window.screen.availWidth-w)/2,0).toString();let oe="";const xe=Object.assign(Object.assign({},I0),{width:w.toString(),height:I.toString(),top:R,left:z}),Ae=(0,F.z$)().toLowerCase();m&&(oe=ji(Ae)?"_blank":m),It(Ae)&&(p=p||"http://localhost",xe.scrollbars="yes");const qe=Object.entries(xe).reduce((Ht,[Ut,Xo])=>`${Ht}${Ut}=${Xo},`,"");if(function gn(v=(0,F.z$)()){var p;return $i(v)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Ae)&&"_self"!==oe)return function w_(v,p){const m=document.createElement("a");m.href=v,m.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(p||"",oe),new Nl(null);const Qe=window.open(p||"",oe,qe);Te(Qe,v,"popup-blocked");try{Qe.focus()}catch(Ht){}return new Nl(Qe)}(p,oe,Ns())})()}_openRedirect(p,m,w,I){var R=this;return(0,l.Z)(function*(){return yield R._originValidation(p),function di(v){Pn().location.href=v}(C_(p,m,w,fs(),I)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:I,promise:R}=this.eventManagers[m];return I?Promise.resolve(I):(We(R,"If manager is not set, promise should be"),R)}const w=this.initAndGetManager(p);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(p){var m=this;return(0,l.Z)(function*(){const w=yield function dd(v){return Qp.apply(this,arguments)}(p),I=new ud(p);return w.register("authEvent",R=>(Te(null==R?void 0:R.authEvent,p,"invalid-auth-event"),{status:I.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:I},m.iframes[p._key()]=w,I})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Jc,{type:Jc},I=>{var R;const z=null===(R=null==I?void 0:I[0])||void 0===R?void 0:R[Jc];void 0!==z&&m(!!z),an(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Zc(v){return Zh.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Vu()||_a()||$i()}}),this.cordovaResolver=ln(class og{constructor(){this._redirectPersistence=$n,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Yc}_initialize(p){var m=this;return(0,l.Z)(function*(){const w=p._key();let I=m.eventManagers.get(w);return I||(I=new x0(p),m.eventManagers.set(w,I),m.attachCallbackListeners(p,I)),I})()}_openPopup(p){an(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,w,I){var R=this;return(0,l.Z)(function*(){!function hd(v){var p,m,w,I,R,z,oe,xe,Ae,qe;const Qe=Fa();Te("function"==typeof(null===(p=null==Qe?void 0:Qe.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Te(void 0!==(null===(m=null==Qe?void 0:Qe.BuildInfo)||void 0===m?void 0:m.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Te("function"==typeof(null===(R=null===(I=null===(w=null==Qe?void 0:Qe.cordova)||void 0===w?void 0:w.plugins)||void 0===I?void 0:I.browsertab)||void 0===R?void 0:R.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(xe=null===(oe=null===(z=null==Qe?void 0:Qe.cordova)||void 0===z?void 0:z.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===xe?void 0:xe.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(qe=null===(Ae=null==Qe?void 0:Qe.cordova)||void 0===Ae?void 0:Ae.InAppBrowser)||void 0===qe?void 0:qe.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const z=yield R._initialize(p);yield z.initialized(),z.resetRedirect(),function Oa(){Gc.clear()}(),yield R._originValidation(p);const oe=function fd(v,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:Tr(),postBody:null,tenantId:v.tenantId,error:Bn(v,"no-auth-event")}}(p,w,I);yield function Xr(v,p){return yo()._set(gd(v),p)}(p,oe);const xe=yield function yb(v,p,m){return Wn.apply(this,arguments)}(p,oe,m),Ae=yield function Pl(v){const{cordova:p}=Fa();return new Promise(m=>{p.plugins.browsertab.isAvailable(w=>{let I=null;w?p.plugins.browsertab.openUrl(v):I=p.InAppBrowser.open(v,function sr(v=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),m(I)})})}(xe);return function eu(v,p,m){return ng.apply(this,arguments)}(p,z,Ae)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function vb(v){return tg.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:w,handleOpenURL:I,BuildInfo:R}=Fa(),z=setTimeout((0,l.Z)(function*(){yield xi(p),m.onEvent(tu())}),500),oe=function(){var qe=(0,l.Z)(function*(Qe){clearTimeout(z);const Ht=yield xi(p);let Ut=null;Ht&&(null==Qe?void 0:Qe.url)&&(Ut=function sg(v,p){var m,w;const I=function Cb(v){const p=md(v),m=p.link?decodeURIComponent(p.link):void 0,w=md(m).link,I=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return md(I).link||I||w||m||v}(p);if(I.includes("/__/auth/callback")){const R=md(I),z=R.firebaseError?function wb(v){try{return JSON.parse(v)}catch(p){return null}}(decodeURIComponent(R.firebaseError)):null,oe=null===(w=null===(m=null==z?void 0:z.code)||void 0===m?void 0:m.split("auth/"))||void 0===w?void 0:w[1],xe=oe?Bn(oe):null;return xe?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:xe,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:I,postBody:null}}return null}(Ht,Qe.url)),m.onEvent(Ut||tu())});return function(Ht){return qe.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,oe);const xe=I,Ae=`${R.packageName.toLowerCase()}://`;Fa().handleOpenURL=function(){var qe=(0,l.Z)(function*(Qe){if(Qe.toLowerCase().startsWith(Ae)&&oe({url:Qe}),"function"==typeof xe)try{xe(Qe)}catch(Ht){console.error(Ht)}});return function(Qe){return qe.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=$n,this._completeRedirectFn=Yc}_initialize(p){var m=this;return(0,l.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,w,I){var R=this;return(0,l.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(p,m,w,I)})()}_openRedirect(p,m,w,I){var R=this;return(0,l.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(p,m,w,I)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return ru()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return R0(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,l.Z)(function*(){if(p.underlyingResolver)return;const m=yield function Tb(){return Fl.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function xb(v){return v.unwrap()}function dg(v){return k_(v)}function k_(v){const{_tokenResponse:p}=v instanceof F.ZR?v.customData:v;if(!p)return null;if(!(v instanceof F.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return Ie.credentialFromResult(v);const m=p.providerId;if(!m||"password"===m)return null;let w;switch(m){case"google.com":w=li;break;case"facebook.com":w=Fo;break;case"github.com":w=gr;break;case"twitter.com":w=lo;break;default:const{oauthIdToken:I,oauthAccessToken:R,oauthTokenSecret:z,pendingToken:oe,nonce:xe}=p;return R||z||I||oe?oe?m.startsWith("saml.")?Kr._create(m,oe):pr._fromParams({providerId:m,signInMethod:m,pendingToken:oe,idToken:I,accessToken:R}):new ps(m).credential({idToken:I,accessToken:R,rawNonce:xe}):null}return v instanceof F.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function Ri(v,p){return p.catch(m=>{throw m instanceof F.ZR&&function hg(v,p){var m;const w=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new Rb(v,function l_(v,p){var m;const w=(0,F.m9)(v),I=p;return Te(p.customData.operationType,w,"argument-error"),Te(null===(m=I.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),ks._fromError(w,I)}(v,p));else if(w){const I=k_(p),R=p;I&&(R.credential=I,R.tenantId=w.tenantId||void 0,R.email=w.email||void 0,R.phoneNumber=w.phoneNumber||void 0)}}(v,m),m}).then(m=>{const I=m.user;return{operationType:m.operationType,credential:dg(m),additionalUserInfo:ot(m),user:Cs.getOrCreate(I)}})}function Ll(v,p){return vd.apply(this,arguments)}function vd(){return(vd=(0,l.Z)(function*(v,p){const m=yield p;return{verificationId:m.verificationId,confirm:w=>Ri(v,m.confirm(w))}})).apply(this,arguments)}class Rb{constructor(p,m){this.resolver=m,this.auth=function Us(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Ri(xb(this.auth),this.resolver.resolveSignIn(p))}}class Cs{constructor(p){this._delegate=p,this.multiFactor=function Oc(v){const p=(0,F.m9)(v);return ss.has(p)||ss.set(p,Tl._fromUser(p)),ss.get(p)}(p)}static getOrCreate(p){return Cs.USER_MAP.has(p)||Cs.USER_MAP.set(p,new Cs(p)),Cs.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,l.Z)(function*(){return Ri(m.auth,Fp(m._delegate,p))})()}linkWithPhoneNumber(p,m){var w=this;return(0,l.Z)(function*(){return Ll(w.auth,function $h(v,p,m){return xl.apply(this,arguments)}(w._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,l.Z)(function*(){return Ri(m.auth,function zh(v,p,m){return qh.apply(this,arguments)}(m._delegate,p,Jo))})()}linkWithRedirect(p){var m=this;return(0,l.Z)(function*(){return yield ug(Nn(m.auth)),function D0(v,p,m){return function zp(v,p,m){return Wc.apply(this,arguments)}(v,p,m)}(m._delegate,p,Jo)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,l.Z)(function*(){return Ri(m.auth,vl(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return Ll(this.auth,function S(v,p,m){return A.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return Ri(this.auth,function Wi(v,p,m){return Vs.apply(this,arguments)}(this._delegate,p,Jo))}reauthenticateWithRedirect(p){var m=this;return(0,l.Z)(function*(){return yield ug(Nn(m.auth)),function Wh(v,p,m){return function $p(v,p,m){return qc.apply(this,arguments)}(v,p,m)}(m._delegate,p,Jo)})()}sendEmailVerification(p){return function Ac(v,p){return Ph.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,l.Z)(function*(){return yield function Sc(v,p){return Wu.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function i_(v,p){return Dl((0,F.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function Ho(v,p){return Dl((0,F.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function J(v,p){return ce.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function ar(v,p){return Mc.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function Bp(v,p,m){return Sl.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Cs.USER_MAP=new WeakMap;const Va=Te;let lf=(()=>{class v{constructor(m,w){if(this.app=m,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:I}=m.options;Va(I,"invalid-api-key",{appName:m.name}),Va(I,"invalid-api-key",{appName:m.name});const R="undefined"!=typeof window?Jo:void 0;this._delegate=w.initialize({options:{persistence:iu(I,m.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Lu),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Cs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,w){!function ns(v,p,m){const w=Nn(v);Te(w._canInitEmulator,w,"emulator-config-failed"),Te(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const I=!!(null==m?void 0:m.disableWarnings),R=Dh(p),{host:z,port:oe}=function e_(v){const p=Dh(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",I=/^(\[[^\]]+\])(:|$)/.exec(w);if(I){const R=I[1];return{host:R,port:Mp(w.substr(R.length+1))}}{const[R,z]=w.split(":");return{host:R,port:Mp(z)}}}(p);w.config.emulator={url:`${R}//${z}${null===oe?"":`:${oe}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:z,port:oe,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:I})}),I||function rs(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,m,w)}applyActionCode(m){return function Lp(v,p){return wl.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Qu(this._delegate,m)}confirmPasswordReset(m,w){return function Zu(v,p,m){return ho.apply(this,arguments)}(this._delegate,m,w)}createUserWithEmailAndPassword(m,w){var I=this;return(0,l.Z)(function*(){return Ri(I._delegate,function Oh(v,p,m){return Ju.apply(this,arguments)}(I._delegate,m,w))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function fb(v,p){return Vp.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Xu(v,p){const m=fn.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,l.Z)(function*(){Va(cg(),m._delegate,"operation-not-supported-in-this-environment");const w=yield function g_(v,p){return Ol.apply(this,arguments)}(m._delegate,Jo);return w?Ri(m._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function A_(v,p){Nn(v)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,w,I){const{next:R,error:z,complete:oe}=O_(m,w,I);return this._delegate.onAuthStateChanged(R,z,oe)}onIdTokenChanged(m,w,I){const{next:R,error:z,complete:oe}=O_(m,w,I);return this._delegate.onIdTokenChanged(R,z,oe)}sendSignInLinkToEmail(m,w){return function Uo(v,p,m){return ms.apply(this,arguments)}(this._delegate,m,w)}sendPasswordResetEmail(m,w){return function kh(v,p,m){return bl.apply(this,arguments)}(this._delegate,m,w||void 0)}setPersistence(m){var w=this;return(0,l.Z)(function*(){let I;switch(function Ab(v,p){Qo(Object.values(os).includes(p),v,"invalid-persistence-type"),(0,F.b$)()?Qo(p!==os.SESSION,v,"unsupported-persistence-type"):(0,F.UG)()?Qo(p===os.NONE,v,"unsupported-persistence-type"):lg()?Qo(p===os.NONE||p===os.LOCAL&&(0,F.hl)(),v,"unsupported-persistence-type"):Qo(p===os.NONE||yd(),v,"unsupported-persistence-type")}(w._delegate,m),m){case os.SESSION:I=$n;break;case os.LOCAL:I=(yield ln(Aa)._isAvailable())?Aa:Ta;break;case os.NONE:I=zr;break;default:return an("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(I)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Ri(this._delegate,function ft(v){return Ec.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Ri(this._delegate,Sa(this._delegate,m))}signInWithCustomToken(m){return Ri(this._delegate,function Dc(v,p){return uo.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,w){return Ri(this._delegate,function Nh(v,p,m){return Sa((0,F.m9)(v),Po.credential(p,m))}(this._delegate,m,w))}signInWithEmailLink(m,w){return Ri(this._delegate,function Zr(v,p,m){return is.apply(this,arguments)}(this._delegate,m,w))}signInWithPhoneNumber(m,w){return Ll(this._delegate,function Gh(v,p,m){return ld.apply(this,arguments)}(this._delegate,m,w))}signInWithPopup(m){var w=this;return(0,l.Z)(function*(){return Va(cg(),w._delegate,"operation-not-supported-in-this-environment"),Ri(w._delegate,function Uc(v,p,m){return Ls.apply(this,arguments)}(w._delegate,m,Jo))})()}signInWithRedirect(m){var w=this;return(0,l.Z)(function*(){return Va(cg(),w._delegate,"operation-not-supported-in-this-environment"),yield ug(w._delegate),function kl(v,p,m){return function cd(v,p,m){return zc.apply(this,arguments)}(v,p,m)}(w._delegate,m,Jo)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Cl(v,p){return Ic.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=os,v})();function O_(v,p,m){let w=v;"function"!=typeof v&&({next:w,error:p,complete:m}=v);const I=w;return{next:z=>I(z&&Cs.getOrCreate(z)),error:p,complete:m}}function iu(v,p){const m=function vo(v,p){const m=Mb();if(!m)return[];const w=cn(R_,v,p);switch(m.getItem(w)){case os.NONE:return[zr];case os.LOCAL:return[Aa,$n];case os.SESSION:return[$n];default:return[]}}(v,p);if("undefined"!=typeof self&&!m.includes(Aa)&&m.push(Aa),"undefined"!=typeof window)for(const w of[Ta,$n])m.includes(w)||m.push(w);return m.includes(zr)||m.push(zr),m}class bd{constructor(){this.providerId="phone",this._delegate=new Ie(xb(X.Z.auth()))}static credential(p,m){return Ie.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}bd.PHONE_SIGN_IN_METHOD=Ie.PHONE_SIGN_IN_METHOD,bd.PROVIDER_ID=Ie.PROVIDER_ID;const N_=Te;class kb{constructor(p,m,w=X.Z.app()){var I;N_(null===(I=w.options)||void 0===I?void 0:I.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new mo(p,m,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ob(v){v.INTERNAL.registerComponent(new Ze.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),w=p.getProvider("auth");return new lf(m,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Po,FacebookAuthProvider:Fo,GithubAuthProvider:gr,GoogleAuthProvider:li,OAuthProvider:ps,SAMLAuthProvider:gs,PhoneAuthProvider:bd,PhoneMultiFactorGenerator:Xp,RecaptchaVerifier:kb,TwitterAuthProvider:lo,Auth:lf,AuthCredential:ll,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.11")}(X.Z)},2916:(et,we,B)=>{B.d(we,{y:()=>$});var l=B(3489),F=B(7668),ae=B(3292),Z=B(3821),ne=B(5379);var L=B(2830);let $=(()=>{class se{constructor(_e){this._isScalar=!1,_e&&(this._subscribe=_e)}lift(_e){const me=new se;return me.source=this,me.operator=_e,me}subscribe(_e,me,ye){const{operator:ve}=this,He=function re(se,fe,_e){if(se){if(se instanceof l.L)return se;if(se[F.b])return se[F.b]()}return se||fe||_e?new l.L(se,fe,_e):new l.L(ae.c)}(_e,me,ye);if(He.add(ve?ve.call(He,this.source):this.source||L.v.useDeprecatedSynchronousErrorHandling&&!He.syncErrorThrowable?this._subscribe(He):this._trySubscribe(He)),L.v.useDeprecatedSynchronousErrorHandling&&He.syncErrorThrowable&&(He.syncErrorThrowable=!1,He.syncErrorThrown))throw He.syncErrorValue;return He}_trySubscribe(_e){try{return this._subscribe(_e)}catch(me){L.v.useDeprecatedSynchronousErrorHandling&&(_e.syncErrorThrown=!0,_e.syncErrorValue=me),function X(se){for(;se;){const{closed:fe,destination:_e,isStopped:me}=se;if(fe||me)return!1;se=_e&&_e instanceof l.L?_e:null}return!0}(_e)?_e.error(me):console.warn(me)}}forEach(_e,me){return new(me=H(me))((ye,ve)=>{let He;He=this.subscribe(it=>{try{_e(it)}catch(kt){ve(kt),He&&He.unsubscribe()}},ve,ye)})}_subscribe(_e){const{source:me}=this;return me&&me.subscribe(_e)}[Z.L](){return this}pipe(..._e){return 0===_e.length?this:function Q(se){return 0===se.length?ne.y:1===se.length?se[0]:function(_e){return se.reduce((me,ye)=>ye(me),_e)}}(_e)(this)}toPromise(_e){return new(_e=H(_e))((me,ye)=>{let ve;this.subscribe(He=>ve=He,He=>ye(He),()=>me(ve))})}}return se.create=fe=>new se(fe),se})();function H(se){if(se||(se=L.v.Promise||Promise),!se)throw new Error("no Promise impl found");return se}},3292:(et,we,B)=>{B.d(we,{c:()=>F});var l=B(2830),X=B(2782);const F={closed:!0,next(ae){},error(ae){if(l.v.useDeprecatedSynchronousErrorHandling)throw ae;(0,X.z)(ae)},complete(){}}},8929:(et,we,B)=>{B.d(we,{Yc:()=>ne,xQ:()=>te});var l=B(2916),X=B(3489),F=B(2654),ae=B(5279),re=B(5283),Z=B(7668);class ne extends X.L{constructor($){super($),this.destination=$}}let te=(()=>{class L extends l.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Z.b](){return new ne(this)}lift(H){const se=new Q(this,this);return se.operator=H,se}next(H){if(this.closed)throw new ae.N;if(!this.isStopped){const{observers:se}=this,fe=se.length,_e=se.slice();for(let me=0;me<fe;me++)_e[me].next(H)}}error(H){if(this.closed)throw new ae.N;this.hasError=!0,this.thrownError=H,this.isStopped=!0;const{observers:se}=this,fe=se.length,_e=se.slice();for(let me=0;me<fe;me++)_e[me].error(H);this.observers.length=0}complete(){if(this.closed)throw new ae.N;this.isStopped=!0;const{observers:H}=this,se=H.length,fe=H.slice();for(let _e=0;_e<se;_e++)fe[_e].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(H){if(this.closed)throw new ae.N;return super._trySubscribe(H)}_subscribe(H){if(this.closed)throw new ae.N;return this.hasError?(H.error(this.thrownError),F.w.EMPTY):this.isStopped?(H.complete(),F.w.EMPTY):(this.observers.push(H),new re.W(this,H))}asObservable(){const H=new l.y;return H.source=this,H}}return L.create=($,H)=>new Q($,H),L})();class Q extends te{constructor($,H){super(),this.destination=$,this.source=H}next($){const{destination:H}=this;H&&H.next&&H.next($)}error($){const{destination:H}=this;H&&H.error&&this.destination.error($)}complete(){const{destination:$}=this;$&&$.complete&&this.destination.complete()}_subscribe($){const{source:H}=this;return H?this.source.subscribe($):F.w.EMPTY}}},5283:(et,we,B)=>{B.d(we,{W:()=>X});var l=B(2654);class X extends l.w{constructor(ae,re){super(),this.subject=ae,this.subscriber=re,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ae=this.subject,re=ae.observers;if(this.subject=null,!re||0===re.length||ae.isStopped||ae.closed)return;const Z=re.indexOf(this.subscriber);-1!==Z&&re.splice(Z,1)}}},3489:(et,we,B)=>{B.d(we,{L:()=>ne});var l=B(7043),X=B(3292),F=B(2654),ae=B(7668),re=B(2830),Z=B(2782);class ne extends F.w{constructor(L,$,H){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=X.c;break;case 1:if(!L){this.destination=X.c;break}if("object"==typeof L){L instanceof ne?(this.syncErrorThrowable=L.syncErrorThrowable,this.destination=L,L.add(this)):(this.syncErrorThrowable=!0,this.destination=new te(this,L));break}default:this.syncErrorThrowable=!0,this.destination=new te(this,L,$,H)}}[ae.b](){return this}static create(L,$,H){const se=new ne(L,$,H);return se.syncErrorThrowable=!1,se}next(L){this.isStopped||this._next(L)}error(L){this.isStopped||(this.isStopped=!0,this._error(L))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(L){this.destination.next(L)}_error(L){this.destination.error(L),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:L}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=L,this}}class te extends ne{constructor(L,$,H,se){super(),this._parentSubscriber=L;let fe,_e=this;(0,l.m)($)?fe=$:$&&(fe=$.next,H=$.error,se=$.complete,$!==X.c&&(_e=Object.create($),(0,l.m)(_e.unsubscribe)&&this.add(_e.unsubscribe.bind(_e)),_e.unsubscribe=this.unsubscribe.bind(this))),this._context=_e,this._next=fe,this._error=H,this._complete=se}next(L){if(!this.isStopped&&this._next){const{_parentSubscriber:$}=this;re.v.useDeprecatedSynchronousErrorHandling&&$.syncErrorThrowable?this.__tryOrSetError($,this._next,L)&&this.unsubscribe():this.__tryOrUnsub(this._next,L)}}error(L){if(!this.isStopped){const{_parentSubscriber:$}=this,{useDeprecatedSynchronousErrorHandling:H}=re.v;if(this._error)H&&$.syncErrorThrowable?(this.__tryOrSetError($,this._error,L),this.unsubscribe()):(this.__tryOrUnsub(this._error,L),this.unsubscribe());else if($.syncErrorThrowable)H?($.syncErrorValue=L,$.syncErrorThrown=!0):(0,Z.z)(L),this.unsubscribe();else{if(this.unsubscribe(),H)throw L;(0,Z.z)(L)}}}complete(){if(!this.isStopped){const{_parentSubscriber:L}=this;if(this._complete){const $=()=>this._complete.call(this._context);re.v.useDeprecatedSynchronousErrorHandling&&L.syncErrorThrowable?(this.__tryOrSetError(L,$),this.unsubscribe()):(this.__tryOrUnsub($),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(L,$){try{L.call(this._context,$)}catch(H){if(this.unsubscribe(),re.v.useDeprecatedSynchronousErrorHandling)throw H;(0,Z.z)(H)}}__tryOrSetError(L,$,H){if(!re.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{$.call(this._context,H)}catch(se){return re.v.useDeprecatedSynchronousErrorHandling?(L.syncErrorValue=se,L.syncErrorThrown=!0,!0):((0,Z.z)(se),!0)}return!1}_unsubscribe(){const{_parentSubscriber:L}=this;this._context=null,this._parentSubscriber=null,L.unsubscribe()}}},2654:(et,we,B)=>{B.d(we,{w:()=>Z});var l=B(6688),X=B(7830),F=B(7043);const re=(()=>{function te(Q){return Error.call(this),this.message=Q?`${Q.length} errors occurred during unsubscription:\n${Q.map((L,$)=>`${$+1}) ${L.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Q,this}return te.prototype=Object.create(Error.prototype),te})();class Z{constructor(Q){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,Q&&(this._ctorUnsubscribe=!0,this._unsubscribe=Q)}unsubscribe(){let Q;if(this.closed)return;let{_parentOrParents:L,_ctorUnsubscribe:$,_unsubscribe:H,_subscriptions:se}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,L instanceof Z)L.remove(this);else if(null!==L)for(let fe=0;fe<L.length;++fe)L[fe].remove(this);if((0,F.m)(H)){$&&(this._unsubscribe=void 0);try{H.call(this)}catch(fe){Q=fe instanceof re?ne(fe.errors):[fe]}}if((0,l.k)(se)){let fe=-1,_e=se.length;for(;++fe<_e;){const me=se[fe];if((0,X.K)(me))try{me.unsubscribe()}catch(ye){Q=Q||[],ye instanceof re?Q=Q.concat(ne(ye.errors)):Q.push(ye)}}}if(Q)throw new re(Q)}add(Q){let L=Q;if(!Q)return Z.EMPTY;switch(typeof Q){case"function":L=new Z(Q);case"object":if(L===this||L.closed||"function"!=typeof L.unsubscribe)return L;if(this.closed)return L.unsubscribe(),L;if(!(L instanceof Z)){const se=L;L=new Z,L._subscriptions=[se]}break;default:throw new Error("unrecognized teardown "+Q+" added to Subscription.")}let{_parentOrParents:$}=L;if(null===$)L._parentOrParents=this;else if($ instanceof Z){if($===this)return L;L._parentOrParents=[$,this]}else{if(-1!==$.indexOf(this))return L;$.push(this)}const H=this._subscriptions;return null===H?this._subscriptions=[L]:H.push(L),L}remove(Q){const L=this._subscriptions;if(L){const $=L.indexOf(Q);-1!==$&&L.splice($,1)}}}var te;function ne(te){return te.reduce((Q,L)=>Q.concat(L instanceof re?L.errors:L),[])}Z.EMPTY=((te=new Z).closed=!0,te)},2830:(et,we,B)=>{B.d(we,{v:()=>X});let l=!1;const X={Promise:void 0,set useDeprecatedSynchronousErrorHandling(F){if(F){const ae=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ae.stack)}else l&&console.log("RxJS: Back to a better error behavior. Thank you. <3");l=F},get useDeprecatedSynchronousErrorHandling(){return l}}},1177:(et,we,B)=>{B.d(we,{Ds:()=>Z,IY:()=>ae,ft:()=>te});var l=B(3489),X=B(2916),F=B(9249);class ae extends l.L{constructor(L){super(),this.parent=L}_next(L){this.parent.notifyNext(L)}_error(L){this.parent.notifyError(L),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Z extends l.L{notifyNext(L){this.destination.next(L)}notifyError(L){this.destination.error(L)}notifyComplete(){this.destination.complete()}}function te(Q,L){if(L.closed)return;if(Q instanceof X.y)return Q.subscribe(L);let $;try{$=(0,F.s)(Q)(L)}catch(H){L.error(H)}return $}},1762:(et,we,B)=>{B.d(we,{N:()=>Z,c:()=>re});var l=B(8929),X=B(2916),F=B(2654),ae=B(4327);class re extends X.y{constructor($,H){super(),this.source=$,this.subjectFactory=H,this._refCount=0,this._isComplete=!1}_subscribe($){return this.getSubject().subscribe($)}getSubject(){const $=this._subject;return(!$||$.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let $=this._connection;return $||(this._isComplete=!1,$=this._connection=new F.w,$.add(this.source.subscribe(new ne(this.getSubject(),this))),$.closed&&(this._connection=null,$=F.w.EMPTY)),$}refCount(){return(0,ae.x)()(this)}}const Z=(()=>{const L=re.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:L._subscribe},_isComplete:{value:L._isComplete,writable:!0},getSubject:{value:L.getSubject},connect:{value:L.connect},refCount:{value:L.refCount}}})();class ne extends l.Yc{constructor($,H){super($),this.connectable=H}_error($){this._unsubscribe(),super._error($)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const $=this.connectable;if($){this.connectable=null;const H=$._connection;$._refCount=0,$._subject=null,$._connection=null,H&&H.unsubscribe()}}}},8896:(et,we,B)=>{B.d(we,{E:()=>X,c:()=>F});var l=B(2916);const X=new l.y(re=>re.complete());function F(re){return re?function ae(re){return new l.y(Z=>re.schedule(()=>Z.complete()))}(re):X}},5254:(et,we,B)=>{B.d(we,{D:()=>_e});var l=B(2916),X=B(9249),F=B(2654),ae=B(3821),ne=B(6454),te=B(5430),$=B(8955),H=B(8515);function _e(me,ye){return ye?function fe(me,ye){if(null!=me){if(function L(me){return me&&"function"==typeof me[ae.L]}(me))return function re(me,ye){return new l.y(ve=>{const He=new F.w;return He.add(ye.schedule(()=>{const it=me[ae.L]();He.add(it.subscribe({next(kt){He.add(ye.schedule(()=>ve.next(kt)))},error(kt){He.add(ye.schedule(()=>ve.error(kt)))},complete(){He.add(ye.schedule(()=>ve.complete()))}}))})),He})}(me,ye);if((0,$.t)(me))return function Z(me,ye){return new l.y(ve=>{const He=new F.w;return He.add(ye.schedule(()=>me.then(it=>{He.add(ye.schedule(()=>{ve.next(it),He.add(ye.schedule(()=>ve.complete()))}))},it=>{He.add(ye.schedule(()=>ve.error(it)))}))),He})}(me,ye);if((0,H.z)(me))return(0,ne.r)(me,ye);if(function se(me){return me&&"function"==typeof me[te.hZ]}(me)||"string"==typeof me)return function Q(me,ye){if(!me)throw new Error("Iterable cannot be null");return new l.y(ve=>{const He=new F.w;let it;return He.add(()=>{it&&"function"==typeof it.return&&it.return()}),He.add(ye.schedule(()=>{it=me[te.hZ](),He.add(ye.schedule(function(){if(ve.closed)return;let kt,hn;try{const Ot=it.next();kt=Ot.value,hn=Ot.done}catch(Ot){return void ve.error(Ot)}hn?ve.complete():(ve.next(kt),this.schedule())}))})),He})}(me,ye)}throw new TypeError((null!==me&&typeof me||me)+" is not observable")}(me,ye):me instanceof l.y?me:new l.y((0,X.s)(me))}},3009:(et,we,B)=>{B.d(we,{n:()=>ae});var l=B(2916),X=B(3650),F=B(6454);function ae(re,Z){return Z?(0,F.r)(re,Z):new l.y((0,X.V)(re))}},6787:(et,we,B)=>{B.d(we,{T:()=>re});var l=B(2916),X=B(2866),F=B(9146),ae=B(3009);function re(...Z){let ne=Number.POSITIVE_INFINITY,te=null,Q=Z[Z.length-1];return(0,X.K)(Q)?(te=Z.pop(),Z.length>1&&"number"==typeof Z[Z.length-1]&&(ne=Z.pop())):"number"==typeof Q&&(ne=Z.pop()),null===te&&1===Z.length&&Z[0]instanceof l.y?Z[0]:(0,F.J)(ne)((0,ae.n)(Z,te))}},1086:(et,we,B)=>{B.d(we,{of:()=>ae});var l=B(2866),X=B(3009),F=B(6454);function ae(...re){let Z=re[re.length-1];return(0,l.K)(Z)?(re.pop(),(0,F.r)(re,Z)):(0,X.n)(re)}},1737:(et,we,B)=>{B.d(we,{_:()=>X});var l=B(2916);function X(ae,re){return new l.y(re?Z=>re.schedule(F,0,{error:ae,subscriber:Z}):Z=>Z.error(ae))}function F({error:ae,subscriber:re}){re.error(ae)}},4850:(et,we,B)=>{B.d(we,{U:()=>X});var l=B(3489);function X(re,Z){return function(te){if("function"!=typeof re)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return te.lift(new F(re,Z))}}class F{constructor(Z,ne){this.project=Z,this.thisArg=ne}call(Z,ne){return ne.subscribe(new ae(Z,this.project,this.thisArg))}}class ae extends l.L{constructor(Z,ne,te){super(Z),this.project=ne,this.count=0,this.thisArg=te||this}_next(Z){let ne;try{ne=this.project.call(this.thisArg,Z,this.count++)}catch(te){return void this.destination.error(te)}this.destination.next(ne)}}},9146:(et,we,B)=>{B.d(we,{J:()=>F});var l=B(1709),X=B(5379);function F(ae=Number.POSITIVE_INFINITY){return(0,l.zg)(X.y,ae)}},1709:(et,we,B)=>{B.d(we,{zg:()=>ae});var l=B(4850),X=B(5254),F=B(1177);function ae(te,Q,L=Number.POSITIVE_INFINITY){return"function"==typeof Q?$=>$.pipe(ae((H,se)=>(0,X.D)(te(H,se)).pipe((0,l.U)((fe,_e)=>Q(H,fe,se,_e))),L)):("number"==typeof Q&&(L=Q),$=>$.lift(new re(te,L)))}class re{constructor(Q,L=Number.POSITIVE_INFINITY){this.project=Q,this.concurrent=L}call(Q,L){return L.subscribe(new Z(Q,this.project,this.concurrent))}}class Z extends F.Ds{constructor(Q,L,$=Number.POSITIVE_INFINITY){super(Q),this.project=L,this.concurrent=$,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(Q){this.active<this.concurrent?this._tryNext(Q):this.buffer.push(Q)}_tryNext(Q){let L;const $=this.index++;try{L=this.project(Q,$)}catch(H){return void this.destination.error(H)}this.active++,this._innerSub(L)}_innerSub(Q){const L=new F.IY(this),$=this.destination;$.add(L);const H=(0,F.ft)(Q,L);H!==L&&$.add(H)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(Q){this.destination.next(Q)}notifyComplete(){const Q=this.buffer;this.active--,Q.length>0?this._next(Q.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},2102:(et,we,B)=>{B.d(we,{ht:()=>Q,QV:()=>ne});var l=B(3489),X=B(8896),F=B(1086),ae=B(1737);class Z{constructor(H,se,fe){this.kind=H,this.value=se,this.error=fe,this.hasValue="N"===H}observe(H){switch(this.kind){case"N":return H.next&&H.next(this.value);case"E":return H.error&&H.error(this.error);case"C":return H.complete&&H.complete()}}do(H,se,fe){switch(this.kind){case"N":return H&&H(this.value);case"E":return se&&se(this.error);case"C":return fe&&fe()}}accept(H,se,fe){return H&&"function"==typeof H.next?this.observe(H):this.do(H,se,fe)}toObservable(){switch(this.kind){case"N":return(0,F.of)(this.value);case"E":return(0,ae._)(this.error);case"C":return(0,X.c)()}throw new Error("unexpected notification kind value")}static createNext(H){return void 0!==H?new Z("N",H):Z.undefinedValueNotification}static createError(H){return new Z("E",void 0,H)}static createComplete(){return Z.completeNotification}}function ne($,H=0){return function(fe){return fe.lift(new te($,H))}}Z.completeNotification=new Z("C"),Z.undefinedValueNotification=new Z("N",void 0);class te{constructor(H,se=0){this.scheduler=H,this.delay=se}call(H,se){return se.subscribe(new Q(H,this.scheduler,this.delay))}}class Q extends l.L{constructor(H,se,fe=0){super(H),this.scheduler=se,this.delay=fe}static dispatch(H){const{notification:se,destination:fe}=H;se.observe(fe),this.unsubscribe()}scheduleMessage(H){this.destination.add(this.scheduler.schedule(Q.dispatch,this.delay,new L(H,this.destination)))}_next(H){this.scheduleMessage(Z.createNext(H))}_error(H){this.scheduleMessage(Z.createError(H)),this.unsubscribe()}_complete(){this.scheduleMessage(Z.createComplete()),this.unsubscribe()}}class L{constructor(H,se){this.notification=H,this.destination=se}}},4327:(et,we,B)=>{B.d(we,{x:()=>X});var l=B(3489);function X(){return function(Z){return Z.lift(new F(Z))}}class F{constructor(Z){this.connectable=Z}call(Z,ne){const{connectable:te}=this;te._refCount++;const Q=new ae(Z,te),L=ne.subscribe(Q);return Q.closed||(Q.connection=te.connect()),L}}class ae extends l.L{constructor(Z,ne){super(Z),this.connectable=ne}_unsubscribe(){const{connectable:Z}=this;if(!Z)return void(this.connection=null);this.connectable=null;const ne=Z._refCount;if(ne<=0)return void(this.connection=null);if(Z._refCount=ne-1,ne>1)return void(this.connection=null);const{connection:te}=this,Q=Z._connection;this.connection=null,Q&&(!te||Q===te)&&Q.unsubscribe()}}},2474:(et,we,B)=>{B.d(we,{B:()=>ne});var l=B(1762);class F{constructor(Q,L){this.subjectFactory=Q,this.selector=L}call(Q,L){const{selector:$}=this,H=this.subjectFactory(),se=$(H).subscribe(Q);return se.add(L.subscribe(H)),se}}var ae=B(4327),re=B(8929);function Z(){return new re.xQ}function ne(){return te=>(0,ae.x)()(function X(te,Q){return function($){let H;if(H="function"==typeof te?te:function(){return te},"function"==typeof Q)return $.lift(new F(H,Q));const se=Object.create($,l.N);return se.source=$,se.subjectFactory=H,se}}(Z)(te))}},3334:(et,we,B)=>{B.d(we,{R:()=>re});var l=B(2916),X=B(8139),F=B(4241);class ae extends l.y{constructor(te,Q=0,L=X.e){super(),this.source=te,this.delayTime=Q,this.scheduler=L,(!(0,F.k)(Q)||Q<0)&&(this.delayTime=0),(!L||"function"!=typeof L.schedule)&&(this.scheduler=X.e)}static create(te,Q=0,L=X.e){return new ae(te,Q,L)}static dispatch(te){const{source:Q,subscriber:L}=te;return this.add(Q.subscribe(L))}_subscribe(te){return this.scheduler.schedule(ae.dispatch,this.delayTime,{source:this.source,subscriber:te})}}function re(ne,te=0){return function(L){return L.lift(new Z(ne,te))}}class Z{constructor(te,Q){this.scheduler=te,this.delay=Q}call(te,Q){return new ae(Q,this.delay,this.scheduler).subscribe(te)}}},2868:(et,we,B)=>{B.d(we,{b:()=>ae});var l=B(3489);function X(){}var F=B(7043);function ae(ne,te,Q){return function($){return $.lift(new re(ne,te,Q))}}class re{constructor(te,Q,L){this.nextOrObserver=te,this.error=Q,this.complete=L}call(te,Q){return Q.subscribe(new Z(te,this.nextOrObserver,this.error,this.complete))}}class Z extends l.L{constructor(te,Q,L,$){super(te),this._tapNext=X,this._tapError=X,this._tapComplete=X,this._tapError=L||X,this._tapComplete=$||X,(0,F.m)(Q)?(this._context=this,this._tapNext=Q):Q&&(this._context=Q,this._tapNext=Q.next||X,this._tapError=Q.error||X,this._tapComplete=Q.complete||X)}_next(te){try{this._tapNext.call(this._context,te)}catch(Q){return void this.destination.error(Q)}this.destination.next(te)}_error(te){try{this._tapError.call(this._context,te)}catch(Q){return void this.destination.error(Q)}this.destination.error(te)}_complete(){try{this._tapComplete.call(this._context)}catch(te){return void this.destination.error(te)}return this.destination.complete()}}},6454:(et,we,B)=>{B.d(we,{r:()=>F});var l=B(2916),X=B(2654);function F(ae,re){return new l.y(Z=>{const ne=new X.w;let te=0;return ne.add(re.schedule(function(){te!==ae.length?(Z.next(ae[te++]),Z.closed||ne.add(this.schedule())):Z.complete()})),ne})}},6686:(et,we,B)=>{B.d(we,{o:()=>F});var l=B(2654);class X extends l.w{constructor(re,Z){super()}schedule(re,Z=0){return this}}class F extends X{constructor(re,Z){super(re,Z),this.scheduler=re,this.work=Z,this.pending=!1}schedule(re,Z=0){if(this.closed)return this;this.state=re;const ne=this.id,te=this.scheduler;return null!=ne&&(this.id=this.recycleAsyncId(te,ne,Z)),this.pending=!0,this.delay=Z,this.id=this.id||this.requestAsyncId(te,this.id,Z),this}requestAsyncId(re,Z,ne=0){return setInterval(re.flush.bind(re,this),ne)}recycleAsyncId(re,Z,ne=0){if(null!==ne&&this.delay===ne&&!1===this.pending)return Z;clearInterval(Z)}execute(re,Z){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ne=this._execute(re,Z);if(ne)return ne;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,Z){let te,ne=!1;try{this.work(re)}catch(Q){ne=!0,te=!!Q&&Q||new Error(Q)}if(ne)return this.unsubscribe(),te}_unsubscribe(){const re=this.id,Z=this.scheduler,ne=Z.actions,te=ne.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==te&&ne.splice(te,1),null!=re&&(this.id=this.recycleAsyncId(Z,re,null)),this.delay=null}}},2268:(et,we,B)=>{B.d(we,{v:()=>X});let l=(()=>{class F{constructor(re,Z=F.now){this.SchedulerAction=re,this.now=Z}schedule(re,Z=0,ne){return new this.SchedulerAction(this,re).schedule(ne,Z)}}return F.now=()=>Date.now(),F})();class X extends l{constructor(ae,re=l.now){super(ae,()=>X.delegate&&X.delegate!==this?X.delegate.now():re()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ae,re=0,Z){return X.delegate&&X.delegate!==this?X.delegate.schedule(ae,re,Z):super.schedule(ae,re,Z)}flush(ae){const{actions:re}=this;if(this.active)return void re.push(ae);let Z;this.active=!0;do{if(Z=ae.execute(ae.state,ae.delay))break}while(ae=re.shift());if(this.active=!1,Z){for(;ae=re.shift();)ae.unsubscribe();throw Z}}}},8139:(et,we,B)=>{B.d(we,{e:()=>H,E:()=>$});let l=1;const X=Promise.resolve(),F={};function ae(se){return se in F&&(delete F[se],!0)}const re={setImmediate(se){const fe=l++;return F[fe]=!0,X.then(()=>ae(fe)&&se()),fe},clearImmediate(se){ae(se)}};var ne=B(6686),Q=B(2268);const $=new class L extends Q.v{flush(fe){this.active=!0,this.scheduled=void 0;const{actions:_e}=this;let me,ye=-1,ve=_e.length;fe=fe||_e.shift();do{if(me=fe.execute(fe.state,fe.delay))break}while(++ye<ve&&(fe=_e.shift()));if(this.active=!1,me){for(;++ye<ve&&(fe=_e.shift());)fe.unsubscribe();throw me}}}(class te extends ne.o{constructor(fe,_e){super(fe,_e),this.scheduler=fe,this.work=_e}requestAsyncId(fe,_e,me=0){return null!==me&&me>0?super.requestAsyncId(fe,_e,me):(fe.actions.push(this),fe.scheduled||(fe.scheduled=re.setImmediate(fe.flush.bind(fe,null))))}recycleAsyncId(fe,_e,me=0){if(null!==me&&me>0||null===me&&this.delay>0)return super.recycleAsyncId(fe,_e,me);0===fe.actions.length&&(re.clearImmediate(_e),fe.scheduled=void 0)}}),H=$},353:(et,we,B)=>{B.d(we,{P:()=>ae,z:()=>F});var l=B(6686);const F=new(B(2268).v)(l.o),ae=F},341:(et,we,B)=>{B.d(we,{c:()=>Z,N:()=>re});var l=B(6686),F=B(2268);const re=new class ae extends F.v{}(class X extends l.o{constructor(te,Q){super(te,Q),this.scheduler=te,this.work=Q}schedule(te,Q=0){return Q>0?super.schedule(te,Q):(this.delay=Q,this.state=te,this.scheduler.flush(this),this)}execute(te,Q){return Q>0||this.closed?super.execute(te,Q):this._execute(te,Q)}requestAsyncId(te,Q,L=0){return null!==L&&L>0||null===L&&this.delay>0?super.requestAsyncId(te,Q,L):te.flush(this)}}),Z=re},5430:(et,we,B)=>{B.d(we,{hZ:()=>X});const X=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3821:(et,we,B)=>{B.d(we,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},7668:(et,we,B)=>{B.d(we,{b:()=>l});const l="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},5279:(et,we,B)=>{B.d(we,{N:()=>X});const X=(()=>{function F(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return F.prototype=Object.create(Error.prototype),F})()},2782:(et,we,B)=>{function l(X){setTimeout(()=>{throw X},0)}B.d(we,{z:()=>l})},5379:(et,we,B)=>{function l(X){return X}B.d(we,{y:()=>l})},6688:(et,we,B)=>{B.d(we,{k:()=>l});const l=Array.isArray||(X=>X&&"number"==typeof X.length)},8515:(et,we,B)=>{B.d(we,{z:()=>l});const l=X=>X&&"number"==typeof X.length&&"function"!=typeof X},7043:(et,we,B)=>{function l(X){return"function"==typeof X}B.d(we,{m:()=>l})},4241:(et,we,B)=>{B.d(we,{k:()=>X});var l=B(6688);function X(F){return!(0,l.k)(F)&&F-parseFloat(F)+1>=0}},7830:(et,we,B)=>{function l(X){return null!==X&&"object"==typeof X}B.d(we,{K:()=>l})},8955:(et,we,B)=>{function l(X){return!!X&&"function"!=typeof X.subscribe&&"function"==typeof X.then}B.d(we,{t:()=>l})},2866:(et,we,B)=>{function l(X){return X&&"function"==typeof X.schedule}B.d(we,{K:()=>l})},9249:(et,we,B)=>{B.d(we,{s:()=>$});var l=B(3650),X=B(2782),ae=B(5430),Z=B(3821),te=B(8515),Q=B(8955),L=B(7830);const $=H=>{if(H&&"function"==typeof H[Z.L])return(H=>se=>{const fe=H[Z.L]();if("function"!=typeof fe.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return fe.subscribe(se)})(H);if((0,te.z)(H))return(0,l.V)(H);if((0,Q.t)(H))return(H=>se=>(H.then(fe=>{se.closed||(se.next(fe),se.complete())},fe=>se.error(fe)).then(null,X.z),se))(H);if(H&&"function"==typeof H[ae.hZ])return(H=>se=>{const fe=H[ae.hZ]();for(;;){let _e;try{_e=fe.next()}catch(me){return se.error(me),se}if(_e.done){se.complete();break}if(se.next(_e.value),se.closed)break}return"function"==typeof fe.return&&se.add(()=>{fe.return&&fe.return()}),se})(H);{const fe=`You provided ${(0,L.K)(H)?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(fe)}}},3650:(et,we,B)=>{B.d(we,{V:()=>l});const l=X=>F=>{for(let ae=0,re=X.length;ae<re&&!F.closed;ae++)F.next(X[ae]);F.complete()}},5e3:(et,we,B)=>{B.d(we,{$8M:()=>Ps,$Z:()=>NS,AFp:()=>ZD,ALo:()=>xC,AaK:()=>te,BQk:()=>Ef,CHM:()=>Yu,CRH:()=>OC,CZH:()=>qC,CqO:()=>Fw,EJc:()=>Sx,EiD:()=>Fa,EpF:()=>PS,F$t:()=>Vw,F4k:()=>Pw,FYo:()=>Jd,FiY:()=>jc,G48:()=>vv,Gf:()=>yi,GfV:()=>Ka,GkF:()=>Cy,Gpc:()=>$,Gre:()=>Jw,Hsn:()=>Rg,Ikx:()=>By,JOm:()=>Us,JVY:()=>Qh,L6k:()=>Jh,LAX:()=>Kp,LFG:()=>at,LSH:()=>Pl,Lbi:()=>XD,MAs:()=>uy,NdJ:()=>Ey,O4$:()=>El,OlP:()=>Bt,Oqu:()=>Yw,PXZ:()=>tp,Q6J:()=>Ow,QGY:()=>Vd,Qsj:()=>ev,R0b:()=>ua,RDi:()=>ai,Rgc:()=>qf,SBq:()=>Dn,Sil:()=>Tx,Suo:()=>Gn,TTD:()=>va,TgZ:()=>vy,Udp:()=>Ql,VKq:()=>Zg,VLi:()=>yu,WFA:()=>Sf,X6Q:()=>Mx,XFs:()=>We,Xpm:()=>en,Y36:()=>bf,YKP:()=>AD,YNc:()=>Ld,Yjl:()=>Er,Yz7:()=>bn,ZZ4:()=>uh,_Bn:()=>Vf,_UZ:()=>by,_Vd:()=>qg,_c5:()=>fE,_uU:()=>zS,aQg:()=>uE,c2e:()=>tT,cJS:()=>ts,cg1:()=>Vg,d8E:()=>Uy,dDg:()=>gv,deG:()=>Ia,dqk:()=>rt,eBb:()=>v_,eFA:()=>JC,ekj:()=>Pg,f3M:()=>Uc,g9A:()=>JD,gxx:()=>sy,h0i:()=>Hf,hGG:()=>Ux,hij:()=>Fy,iGM:()=>rm,ifc:()=>Nt,ip1:()=>KD,kL8:()=>sC,kYT:()=>Oe,lG2:()=>Qt,lcZ:()=>Jg,mCW:()=>Pa,n5z:()=>Vh,n_E:()=>Xg,oAB:()=>ie,oxw:()=>LS,pB0:()=>b_,q3G:()=>Wn,q4F:()=>TD,qLn:()=>nu,qOj:()=>Oi,qZA:()=>wf,qzn:()=>bs,sBO:()=>xx,sIi:()=>Dg,s_b:()=>nh,soG:()=>YC,tBr:()=>Hc,tb:()=>eT,tp0:()=>ka,uIk:()=>_w,vHH:()=>_e,vpe:()=>la,wAp:()=>pt,xi3:()=>OD,xp6:()=>H0,yhl:()=>Yp,ynx:()=>Cf,z2F:()=>ah,z3N:()=>Ko,zSh:()=>sw,zs3:()=>ki});var l=B(8929),X=B(2654),F=B(2916),ae=B(6787),re=B(2474);function Z(o){for(let a in o)if(o[a]===Z)return a;throw Error("Could not find renamed property on target object.")}function ne(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function te(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(te).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function Q(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const L=Z({__forward_ref__:Z});function $(o){return o.__forward_ref__=$,o.toString=function(){return te(this())},o}function H(o){return se(o)?o():o}function se(o){return"function"==typeof o&&o.hasOwnProperty(L)&&o.__forward_ref__===$}class _e extends Error{constructor(a,u){super(function me(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,u)),this.code=a}}function ye(o){return"string"==typeof o?o:null==o?"":String(o)}function ve(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():ye(o)}function hn(o,a){const u=a?` in ${a}`:"";throw new _e(-201,`No provider for ${ve(o)} found${u}`)}function fr(o,a){null==o&&function Dt(o,a,u,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${u} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function bn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function ts(o){return{providers:o.providers||[],imports:o.imports||[]}}function rr(o){return Cr(o,Ci)||Cr(o,Te)}function Cr(o,a){return o.hasOwnProperty(a)?o[a]:null}function xo(o){return o&&(o.hasOwnProperty($r)||o.hasOwnProperty(Or))?o[$r]:null}const Ci=Z({\u0275prov:Z}),$r=Z({\u0275inj:Z}),Te=Z({ngInjectableDef:Z}),Or=Z({ngInjectorDef:Z});var We=(()=>((We=We||{})[We.Default=0]="Default",We[We.Host=1]="Host",We[We.Self=2]="Self",We[We.SkipSelf=4]="SkipSelf",We[We.Optional=8]="Optional",We))();let Vi;function Nr(o){const a=Vi;return Vi=o,a}function Bi(o,a,u){const d=rr(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&We.Optional?null:void 0!==a?a:void hn(te(o),"Injector")}function kn(o){return{toString:o}.toString()}var ir=(()=>((ir=ir||{})[ir.OnPush=0]="OnPush",ir[ir.Default=1]="Default",ir))(),Nt=(()=>{return(o=Nt||(Nt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Nt;var o})();const Xe="undefined"!=typeof globalThis&&globalThis,gt="undefined"!=typeof window&&window,Xs="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,rt=Xe||"undefined"!=typeof global&&global||gt||Xs,Ei={},st=[],On=Z({\u0275cmp:Z}),Pt=Z({\u0275dir:Z}),Ge=Z({\u0275pipe:Z}),Ee=Z({\u0275mod:Z}),$e=Z({\u0275fac:Z}),ut=Z({__NG_ELEMENT_ID__:Z});let jt=0;function en(o){return kn(()=>{const u={},d={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===ir.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||st,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Nt.Emulated,id:"c",styles:o.styles||st,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,_=o.features,b=o.pipes;return d.id+=jt++,d.inputs=dt(o.inputs,u),d.outputs=dt(o.outputs),_&&_.forEach(C=>C(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(G):null,d.pipeDefs=b?()=>("function"==typeof b?b():b).map(Y):null,d})}function G(o){return qt(o)||function wn(o){return o[Pt]||null}(o)}function Y(o){return function Tt(o){return o[Ge]||null}(o)}const de={};function ie(o){return kn(()=>{const a={type:o.type,bootstrap:o.bootstrap||st,declarations:o.declarations||st,imports:o.imports||st,exports:o.exports||st,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(de[o.id]=o.type),a})}function Oe(o,a){return kn(()=>{const u=Cn(o,!0);u.declarations=a.declarations||st,u.imports=a.imports||st,u.exports=a.exports||st})}function dt(o,a){if(null==o)return Ei;const u={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],_=f;Array.isArray(f)&&(_=f[1],f=f[0]),u[f]=d,a&&(a[f]=_)}return u}const Qt=en;function Er(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function qt(o){return o[On]||null}function Cn(o,a){const u=o[Ee]||null;if(!u&&!0===a)throw new Error(`Type ${te(o)} does not have '\u0275mod' property.`);return u}function Wr(o){return Array.isArray(o)&&"object"==typeof o[1]}function Yr(o){return Array.isArray(o)&&!0===o[1]}function Bu(o){return 0!=(8&o.flags)}function Nn(o){return 2==(2&o.flags)}function al(o){return 1==(1&o.flags)}function ns(o){return null!==o.template}function Dh(o){return 0!=(512&o[2])}function Rs(o,a){return o.hasOwnProperty($e)?o[$e]:null}class Cc{constructor(a,u,d){this.previousValue=a,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function va(){return ba}function ba(o){return o.type.prototype.ngOnChanges&&(o.setInput=so),cl}function cl(){const o=ao(this),a=null==o?void 0:o.current;if(a){const u=o.previous;if(u===Ei)o.previous=a;else for(let d in a)u[d]=a[d];o.current=null,this.ngOnChanges(a)}}function so(o,a,u,d){const f=ao(o)||function pr(o,a){return o[oo]=a}(o,{previous:Ei,current:null}),_=f.current||(f.current={}),b=f.previous,C=this.declaredInputs[u],D=b[C];_[C]=new Cc(D&&D.currentValue,a,b===Ei),o[d]=a}va.ngInherit=!0;const oo="__ngSimpleChanges__";function ao(o){return o[oo]||null}let dl;function ai(o){dl=o}function fn(o){return!!o.listen}const $u={createRenderer:(o,a)=>function hl(){return void 0!==dl?dl:"undefined"!=typeof document?document:void 0}()};function Gt(o){for(;Array.isArray(o);)o=o[0];return o}function Fo(o,a){return Gt(a[o])}function li(o,a){return Gt(a[o.index])}function zu(o,a){return o.data[a]}function Kr(o,a){return o[a]}function Si(o,a){const u=a[o];return Wr(u)?u:u[0]}function gs(o){return 4==(4&o[2])}function lo(o){return 128==(128&o[2])}function Di(o,a){return null==a?null:o[a]}function or(o){o[18]=0}function Lo(o,a){o[5]+=a;let u=o,d=o[3];for(;null!==d&&(1===a&&1===u[5]||-1===a&&0===u[5]);)d[5]+=a,u=d,d=d[3]}const ft={lFrame:Oh(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Sc(){return ft.bindingsEnabled}function be(){return ft.lFrame.lView}function xt(){return ft.lFrame.tView}function Yu(o){return ft.lFrame.contextLView=o,o[8]}function En(){let o=Ea();for(;null!==o&&64===o.type;)o=o.parent;return o}function Ea(){return ft.lFrame.currentTNode}function Ti(o,a){const u=ft.lFrame;u.currentTNode=o,u.isParent=a}function Sa(){return ft.lFrame.isParent}function _l(){ft.lFrame.isParent=!1}function vl(){return ft.isInCheckNoChangesMode}function co(o){ft.isInCheckNoChangesMode=o}function Fr(){const o=ft.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function uo(){return ft.lFrame.bindingIndex++}function ci(o){const a=ft.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function kh(o,a){const u=ft.lFrame;u.bindingIndex=u.bindingRootIndex=o,Zu(a)}function Zu(o){ft.lFrame.currentDirectiveIndex=o}function ho(o){const a=ft.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function Lp(){return ft.lFrame.currentQueryIndex}function wl(o){ft.lFrame.currentQueryIndex=o}function Qu(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Tc(o,a,u){if(u&We.SkipSelf){let f=a,_=o;for(;!(f=f.parent,null!==f||u&We.Host||(f=Qu(_),null===f||(_=_[15],10&f.type))););if(null===f)return!1;a=f,o=_}const d=ft.lFrame=Ic();return d.currentTNode=a,d.lView=o,!0}function Cl(o){const a=Ic(),u=o[1];ft.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function Ic(){const o=ft.lFrame,a=null===o?null:o.child;return null===a?Oh(o):a}function Oh(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Ju(){const o=ft.lFrame;return ft.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Nh=Ju;function Uo(){const o=Ju();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Zr(){return ft.lFrame.selectedIndex}function is(o){ft.lFrame.selectedIndex=o}function Hn(){const o=ft.lFrame;return zu(o.tView,o.selectedIndex)}function El(){ft.lFrame.currentNamespace="svg"}function Sl(o,a){for(let u=a.directiveStart,d=a.directiveEnd;u<d;u++){const _=o.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:C,ngAfterViewInit:D,ngAfterViewChecked:M,ngOnDestroy:k}=_;b&&(o.contentHooks||(o.contentHooks=[])).push(-u,b),C&&((o.contentHooks||(o.contentHooks=[])).push(u,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,C)),D&&(o.viewHooks||(o.viewHooks=[])).push(-u,D),M&&((o.viewHooks||(o.viewHooks=[])).push(u,M),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,M)),null!=k&&(o.destroyHooks||(o.destroyHooks=[])).push(u,k)}}function ed(o,a,u){Mc(o,a,3,u)}function Da(o,a,u,d){(3&o[2])===u&&Mc(o,a,u,d)}function ar(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function Mc(o,a,u,d){const _=null!=d?d:-1,b=a.length-1;let C=0;for(let D=void 0!==d?65535&o[18]:0;D<b;D++)if("number"==typeof a[D+1]){if(C=a[D],null!=d&&C>=d)break}else a[D]<0&&(o[18]+=65536),(C<_||-1==_)&&(i_(o,u,a,D),o[18]=(4294901760&o[18])+D+2),D++}function i_(o,a,u,d){const f=u[d]<0,_=u[d+1],C=o[f?-u[d]:u[d]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{_.call(C)}finally{}}}else try{_.call(C)}finally{}}class Dl{constructor(a,u,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function ot(o,a,u){const d=fn(o);let f=0;for(;f<u.length;){const _=u[f];if("number"==typeof _){if(0!==_)break;f++;const b=u[f++],C=u[f++],D=u[f++];d?o.setAttribute(a,C,D,b):a.setAttributeNS(b,C,D)}else{const b=_,C=u[++f];ui(b)?d&&o.setProperty(a,b,C):d?o.setAttribute(a,b,C):a.setAttribute(b,C),f++}}return f}function Lh(o){return 3===o||4===o||6===o}function ui(o){return 64===o.charCodeAt(0)}function jo(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?u=f:0===u||kc(o,u,f,null,-1===u||2===u?a[++d]:null)}}return o}function kc(o,a,u,d,f){let _=0,b=o.length;if(-1===a)b=-1;else for(;_<o.length;){const C=o[_++];if("number"==typeof C){if(C===a){b=-1;break}if(C>a){b=_-1;break}}}for(;_<o.length;){const C=o[_];if("number"==typeof C)break;if(C===u){if(null===d)return void(null!==f&&(o[_+1]=f));if(d===o[_+1])return void(o[_+2]=f)}_++,null!==d&&_++,null!==f&&_++}-1!==b&&(o.splice(b,0,a),_=b+1),o.splice(_++,0,u),null!==d&&o.splice(_++,0,d),null!==f&&o.splice(_++,0,f)}function Jr(o){return-1!==o}function fo(o){return 32767&o}function _s(o,a){let u=function a_(o){return o>>16}(o),d=a;for(;u>0;)d=d[15],u--;return d}let mn=!0;function ks(o){const a=mn;return mn=o,a}let Up=0;function ss(o,a){const u=Os(o,a);if(-1!==u)return u;const d=a[1];d.firstCreatePass&&(o.injectorIndex=a.length,Oc(d.data,o),Oc(a,null),Oc(d.blueprint,null));const f=Lr(o,a),_=o.injectorIndex;if(Jr(f)){const b=fo(f),C=_s(f,a),D=C[1].data;for(let M=0;M<8;M++)a[_+M]=C[b+M]|D[b+M]}return a[_+8]=f,_}function Oc(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Os(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Lr(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,d=null,f=a;for(;null!==f;){const _=f[1],b=_.type;if(d=2===b?_.declTNode:1===b?f[6]:null,null===d)return-1;if(u++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return-1}function Il(o,a,u){!function Tl(o,a,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(ut)&&(d=u[ut]),null==d&&(d=u[ut]=Up++);const f=255&d;a.data[o+(f>>5)]|=1<<f}(o,a,u)}function Ii(o,a,u){if(u&We.Optional)return o;hn(a,"NodeInjector")}function Nc(o,a,u,d){if(u&We.Optional&&void 0===d&&(d=null),0==(u&(We.Self|We.Host))){const f=o[9],_=Nr(void 0);try{return f?f.get(a,d,u&We.Optional):Bi(a,d,u&We.Optional)}finally{Nr(_)}}return Ii(d,a,u)}function Ta(o,a,u,d=We.Default,f){if(null!==o){const _=function c_(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(ut)?o[ut]:void 0;return"number"==typeof a?a>=0?255&a:$n:a}(u);if("function"==typeof _){if(!Tc(a,o,d))return d&We.Host?Ii(f,u,d):Nc(a,u,d,f);try{const b=_(d);if(null!=b||d&We.Optional)return b;hn(u)}finally{Nh()}}else if("number"==typeof _){let b=null,C=Os(o,a),D=-1,M=d&We.Host?a[16][6]:null;for((-1===C||d&We.SkipSelf)&&(D=-1===C?Lr(o,a):a[C+8],-1!==D&&di(d,!1)?(b=a[1],C=fo(D),a=_s(D,a)):C=-1);-1!==C;){const k=a[1];if(Pn(_,C,k.data)){const V=zn(C,a,u,b,d,M);if(V!==ze)return V}D=a[C+8],-1!==D&&di(d,a[1].data[C+8]===M)&&Pn(_,C,a)?(b=k,C=fo(D),a=_s(D,a)):C=-1}}}return Nc(a,u,d,f)}const ze={};function $n(){return new ys(En(),be())}function zn(o,a,u,d,f,_){const b=a[1],C=b.data[o+8],k=Pc(C,b,u,null==d?Nn(C)&&mn:d!=b&&0!=(3&C.type),f&We.Host&&_===C);return null!==k?Ns(a,b,k,C):ze}function Pc(o,a,u,d,f){const _=o.providerIndexes,b=a.data,C=1048575&_,D=o.directiveStart,k=_>>20,q=f?C+k:o.directiveEnd;for(let ee=d?C:C+k;ee<q;ee++){const ge=b[ee];if(ee<D&&u===ge||ee>=D&&ge.type===u)return ee}if(f){const ee=b[D];if(ee&&ns(ee)&&ee.type===u)return D}return null}function Ns(o,a,u,d){let f=o[u];const _=a.data;if(function xc(o){return o instanceof Dl}(f)){const b=f;b.resolving&&function He(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new _e(-200,`Circular dependency in DI detected for ${o}${u}`)}(ve(_[u]));const C=ks(b.canSeeViewProviders);b.resolving=!0;const D=b.injectImpl?Nr(b.injectImpl):null;Tc(o,d,We.Default);try{f=o[u]=b.factory(void 0,_,o,d),a.firstCreatePass&&u>=d.directiveStart&&function Bp(o,a,u){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:_}=a.type.prototype;if(d){const b=ba(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,b),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,b)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,f),_&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,_),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,_))}(u,_[u],a)}finally{null!==D&&Nr(D),ks(C),b.resolving=!1,Nh()}}return f}function Pn(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function di(o,a){return!(o&We.Self||o&We.Host&&a)}class ys{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,d){return Ta(this._tNode,this._lView,a,d,u)}}function Vh(o){return kn(()=>{const a=o.prototype.constructor,u=a[$e]||lr(a),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const _=f[$e]||lr(f);if(_&&_!==u)return _;f=Object.getPrototypeOf(f)}return _=>new _})}function lr(o){return se(o)?()=>{const a=lr(H(o));return a&&a()}:Rs(o)}function Ps(o){return function Al(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const d=u.length;let f=0;for(;f<d;){const _=u[f];if(Lh(_))break;if(0===_)f+=2;else if("number"==typeof _)for(f++;f<d&&"string"==typeof u[f];)f++;else{if(_===a)return u[f+1];f+=2}}}return null}(En(),o)}const Go="__parameters__";function Dr(o,a,u){return kn(()=>{const d=function Lc(o){return function(...u){if(o){const d=o(...u);for(const f in d)this[f]=d[f]}}}(a);function f(..._){if(this instanceof f)return d.apply(this,_),this;const b=new f(..._);return C.annotation=b,C;function C(D,M,k){const V=D.hasOwnProperty(Go)?D[Go]:Object.defineProperty(D,Go,{value:[]})[Go];for(;V.length<=k;)V.push(null);return(V[k]=V[k]||[]).push(b),D}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class Bt{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=bn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ia=new Bt("AnalyzeForEntryComponents");function tn(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let d=o[u];Array.isArray(d)?(a===o&&(a=o.slice(0,u)),tn(d,a)):a!==o&&a.push(d)}return a}function Ai(o,a){o.forEach(u=>Array.isArray(u)?Ai(u,a):a(u))}function hi(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function $o(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function vs(o,a){const u=[];for(let d=0;d<o;d++)u.push(a);return u}function fi(o,a,u){let d=Ra(o,a);return d>=0?o[1|d]=u:(d=~d,function Bh(o,a,u,d){let f=o.length;if(f==a)o.push(u,d);else if(1===f)o.push(d,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=u,o[a+1]=d}}(o,d,a,u)),d}function ad(o,a){const u=Ra(o,a);if(u>=0)return o[1|u]}function Ra(o,a){return function Uh(o,a,u){let d=0,f=o.length>>u;for(;f!==d;){const _=d+(f-d>>1),b=o[_<<u];if(a===b)return _<<u;b>a?f=_:d=_+1}return~(f<<u)}(o,a,1)}const O={},j="__NG_DI_FLAG__",J="ngTempTokenPath",Ie=/\n/gm,tt="__source",yt=Z({provide:String,useValue:Z});let Ft;function bt(o){const a=Ft;return Ft=o,a}function Mi(o,a=We.Default){if(void 0===Ft)throw new _e(203,"");return null===Ft?Bi(o,void 0,a):Ft.get(o,a&We.Optional?null:void 0,a)}function at(o,a=We.Default){return(function ln(){return Vi}()||Mi)(H(o),a)}const Uc=at;function Ls(o){const a=[];for(let u=0;u<o.length;u++){const d=H(o[u]);if(Array.isArray(d)){if(0===d.length)throw new _e(900,"");let f,_=We.Default;for(let b=0;b<d.length;b++){const C=d[b],D=Vs(C);"number"==typeof D?-1===D?f=C.token:_|=D:f=C}a.push(at(f,_))}else a.push(at(d))}return a}function Wi(o,a){return o[j]=a,o.prototype[j]=a,o}function Vs(o){return o[j]}const Hc=Wi(Dr("Inject",o=>({token:o})),-1),jc=Wi(Dr("Optional"),8),ka=Wi(Dr("SkipSelf"),4);let Ol;function Na(o){var a;return(null===(a=function Yc(){if(void 0===Ol&&(Ol=null,rt.trustedTypes))try{Ol=rt.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return Ol}())||void 0===a?void 0:a.createHTML(o))||o}class Bs{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Wp extends Bs{getTypeName(){return"HTML"}}class Yo extends Bs{getTypeName(){return"Style"}}class Zc extends Bs{getTypeName(){return"Script"}}class Zh extends Bs{getTypeName(){return"URL"}}class y_ extends Bs{getTypeName(){return"ResourceURL"}}function Ko(o){return o instanceof Bs?o.changingThisBreaksApplicationSecurity:o}function bs(o,a){const u=Yp(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}function Yp(o){return o instanceof Bs&&o.getTypeName()||null}function Qh(o){return new Wp(o)}function Jh(o){return new Yo(o)}function v_(o){return new Zc(o)}function Kp(o){return new Zh(o)}function b_(o){return new y_(o)}class Zp{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(Na(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class pb{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const d=this.inertDocument.createElement("body");u.appendChild(d)}}getInertBodyElement(a){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Na(a),u;const d=this.inertDocument.createElement("body");return d.innerHTML=Na(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(a){const u=a.attributes;for(let f=u.length-1;0<f;f--){const b=u.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&a.removeAttribute(b)}let d=a.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const Qp=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,gb=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Pa(o){return(o=String(o)).match(Qp)||o.match(gb)?o:"unsafe:"+o}function ws(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function Nl(...o){const a={};for(const u of o)for(const d in u)u.hasOwnProperty(d)&&(a[d]=!0);return a}const Jp=ws("area,br,col,hr,img,wbr"),w_=ws("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ef=ws("rp,rt"),Jc=Nl(Jp,Nl(w_,ws("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Nl(ef,ws("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Nl(ef,w_)),Xc=ws("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),tf=ws("srcset"),Xp=Nl(Xc,tf,ws("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ws("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),eg=ws("script,style,template");class D_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,d=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?d=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,d&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!Jc.hasOwnProperty(u))return this.sanitizedSomething=!0,!eg.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const d=a.attributes;for(let f=0;f<d.length;f++){const _=d.item(f),b=_.name,C=b.toLowerCase();if(!Xp.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let D=_.value;Xc[C]&&(D=Pa(D)),tf[C]&&(o=D,D=(o=String(o)).split(",").map(a=>Pa(a.trim())).join(", ")),this.buf.push(" ",b,'="',nf(D),'"')}var o;return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();Jc.hasOwnProperty(u)&&!Jp.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(nf(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const mb=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_b=/([^\#-~ |!])/g;function nf(o){return o.replace(/&/g,"&amp;").replace(mb,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(_b,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let _o;function Fa(o,a){let u=null;try{_o=_o||function Xh(o){const a=new pb(o);return function dd(){try{return!!(new window.DOMParser).parseFromString(Na(""),"text/html")}catch(o){return!1}}()?new Zp(a):a}(o);let d=a?String(a):"";u=_o.getInertBodyElement(d);let f=5,_=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=_,_=u.innerHTML,u=_o.getInertBodyElement(d)}while(d!==_);return Na((new D_).sanitizeChildren(Zo(u)||u))}finally{if(u){const d=Zo(u)||u;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Zo(o){return"content"in o&&function yb(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Wn=(()=>((Wn=Wn||{})[Wn.NONE=0]="NONE",Wn[Wn.HTML=1]="HTML",Wn[Wn.STYLE=2]="STYLE",Wn[Wn.SCRIPT=3]="SCRIPT",Wn[Wn.URL=4]="URL",Wn[Wn.RESOURCE_URL=5]="RESOURCE_URL",Wn))();function Pl(o){const a=function fd(){const o=be();return o&&o[12]}();return a?a.sanitize(Wn.URL,o)||"":bs(o,"URL")?Ko(o):Pa(ye(o))}const sg="__ngContext__";function Tr(o,a){o[sg]=a}function gd(o){const a=function yo(o){return o[sg]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function ag(o){return o.ngOriginalError}function Sb(o,...a){o.error(...a)}class nu{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a),d=function M_(o){return o&&o.ngErrorLogger||Sb}(a);d(this._console,"ERROR",a),u&&d(this._console,"ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&ag(a);for(;u&&ag(u);)u=ag(u);return u||null}}const Qo=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(rt))();function vo(o){return o instanceof Function?o():o}var Us=(()=>((Us=Us||{})[Us.Important=1]="Important",Us[Us.DashCase=2]="DashCase",Us))();function hg(o,a){return undefined(o,a)}function Ll(o){const a=o[3];return Yr(a)?a[3]:a}function Cs(o){return lf(o[13])}function Va(o){return lf(o[4])}function lf(o){for(;null!==o&&!Yr(o);)o=o[4];return o}function iu(o,a,u,d,f){if(null!=d){let _,b=!1;Yr(d)?_=d:Wr(d)&&(b=!0,d=d[0]);const C=Gt(d);0===o&&null!==u?null==f?Xo(a,u,C):Ut(a,u,C,f||null,!0):1===o&&null!==u?Ut(a,u,C,f||null,!0):2===o?function Pb(o,a,u){const d=ea(o,a);d&&function Ba(o,a,u,d){fn(o)?o.removeChild(a,u,d):a.removeChild(u)}(o,d,a,u)}(a,C,b):3===o&&a.destroyNode(C),null!=_&&function kA(o,a,u,d,f){const _=u[7];_!==Gt(u)&&iu(a,o,d,_,f);for(let C=10;C<u.length;C++){const D=u[C];pg(D[1],D,o,a,d,_)}}(a,o,_,u,f)}}function cf(o,a,u){if(fn(o))return o.createElement(a,u);{const d=null!==u?function Np(o){const a=o.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(u):null;return null===d?o.createElement(a):o.createElementNS(d,a)}}function R(o,a){const u=o[9],d=u.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,Lo(f,-1)),u.splice(d,1)}function z(o,a){if(o.length<=10)return;const u=10+a,d=o[u];if(d){const f=d[17];null!==f&&f!==o&&R(f,d),a>0&&(o[u-1][4]=d[4]);const _=$o(o,10+a);!function Ob(o,a){pg(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const b=_[19];null!==b&&b.detachView(_[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function oe(o,a){if(!(256&a[2])){const u=a[11];fn(u)&&u.destroyNode&&pg(o,a,u,3,null,null),function m(o){let a=o[13];if(!a)return xe(o[1],o);for(;a;){let u=null;if(Wr(a))u=a[13];else{const d=a[10];d&&(u=d)}if(!u){for(;a&&!a[4]&&a!==o;)Wr(a)&&xe(a[1],a),a=a[3];null===a&&(a=o),Wr(a)&&xe(a[1],a),u=a&&a[4]}a=u}}(a)}}function xe(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function qe(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let d=0;d<u.length;d+=2){const f=a[u[d]];if(!(f instanceof Dl)){const _=u[d+1];if(Array.isArray(_))for(let b=0;b<_.length;b+=2){const C=f[_[b]],D=_[b+1];try{D.call(C)}finally{}}else try{_.call(f)}finally{}}}}(o,a),function Ae(o,a){const u=o.cleanup,d=a[7];let f=-1;if(null!==u)for(let _=0;_<u.length-1;_+=2)if("string"==typeof u[_]){const b=u[_+1],C="function"==typeof b?b(a):Gt(a[b]),D=d[f=u[_+2]],M=u[_+3];"boolean"==typeof M?C.removeEventListener(u[_],D,M):M>=0?d[f=M]():d[f=-M].unsubscribe(),_+=2}else{const b=d[f=u[_+1]];u[_].call(b)}if(null!==d){for(let _=f+1;_<d.length;_++)d[_]();a[7]=null}}(o,a),1===a[1].type&&fn(a[11])&&a[11].destroy();const u=a[17];if(null!==u&&Yr(a[3])){u!==a[3]&&R(u,a);const d=a[19];null!==d&&d.detachView(o)}}}function Qe(o,a,u){return function Ht(o,a,u){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return u[0];if(2&d.flags){const f=o.data[d.directiveStart].encapsulation;if(f===Nt.None||f===Nt.Emulated)return null}return li(d,u)}(o,a.parent,u)}function Ut(o,a,u,d,f){fn(o)?o.insertBefore(a,u,d,f):a.insertBefore(u,d,f)}function Xo(o,a,u){fn(o)?o.appendChild(a,u):a.appendChild(u)}function su(o,a,u,d,f){null!==d?Ut(o,a,u,d,f):Xo(o,a,u)}function ea(o,a){return fn(o)?o.parentNode(a):a.parentNode}function uf(o,a,u){return df(o,a,u)}let df=function fg(o,a,u){return 40&o.type?li(o,u):null};function Cd(o,a,u,d){const f=Qe(o,d,a),_=a[11],C=uf(d.parent||a[6],d,a);if(null!=f)if(Array.isArray(u))for(let D=0;D<u.length;D++)su(_,f,u[D],C,!1);else su(_,f,u,C,!1)}function Ua(o,a){if(null!==a){const u=a.type;if(3&u)return li(a,o);if(4&u)return Bl(-1,o[a.index]);if(8&u){const d=a.child;if(null!==d)return Ua(o,d);{const f=o[a.index];return Yr(f)?Bl(-1,f):Gt(f)}}if(32&u)return hg(a,o)()||Gt(o[a.index]);{const d=Nb(o,a);return null!==d?Array.isArray(d)?d[0]:Ua(Ll(o[16]),d):Ua(o,a.next)}}return null}function Nb(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Bl(o,a){const u=10+o+1;if(u<a.length){const d=a[u],f=d[1].firstChild;if(null!==f)return Ua(d,f)}return a[7]}function Fb(o,a,u,d,f,_,b){for(;null!=u;){const C=d[u.index],D=u.type;if(b&&0===a&&(C&&Tr(Gt(C),d),u.flags|=4),64!=(64&u.flags))if(8&D)Fb(o,a,u.child,d,f,_,!1),iu(a,o,f,C,_);else if(32&D){const M=hg(u,d);let k;for(;k=M();)iu(a,o,f,k,_);iu(a,o,f,C,_)}else 16&D?O0(o,a,d,u,f,_):iu(a,o,f,C,_);u=b?u.projectionNext:u.next}}function pg(o,a,u,d,f,_){Fb(u,d,o.firstChild,a,f,_,!1)}function O0(o,a,u,d,f,_){const b=u[16],D=b[6].projection[d.projection];if(Array.isArray(D))for(let M=0;M<D.length;M++)iu(a,o,f,D[M],_);else Fb(o,a,D,b[3],f,_,!0)}function Lb(o,a,u){fn(o)?o.setAttribute(a,"style",u):a.style.cssText=u}function Vb(o,a,u){fn(o)?""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u):a.className=u}function N0(o,a,u){let d=o.length;for(;;){const f=o.indexOf(a,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const _=a.length;if(f+_===d||o.charCodeAt(f+_)<=32)return f}u=f+1}}const P_="ng-template";function NA(o,a,u){let d=0;for(;d<o.length;){let f=o[d++];if(u&&"class"===f){if(f=o[d],-1!==N0(f.toLowerCase(),a,0))return!0}else if(1===f){for(;d<o.length&&"string"==typeof(f=o[d++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function P0(o){return 4===o.type&&o.value!==P_}function F0(o,a,u){return a===(4!==o.type||u?o.value:P_)}function PA(o,a,u){let d=4;const f=o.attrs||[],_=function F_(o){for(let a=0;a<o.length;a++)if(Lh(o[a]))return a;return o.length}(f);let b=!1;for(let C=0;C<a.length;C++){const D=a[C];if("number"!=typeof D){if(!b)if(4&d){if(d=2|1&d,""!==D&&!F0(o,D,u)||""===D&&1===a.length){if(Ha(d))return!1;b=!0}}else{const M=8&d?D:a[++C];if(8&d&&null!==o.attrs){if(!NA(o.attrs,M,u)){if(Ha(d))return!1;b=!0}continue}const V=FA(8&d?"class":D,f,P0(o),u);if(-1===V){if(Ha(d))return!1;b=!0;continue}if(""!==M){let q;q=V>_?"":f[V+1].toLowerCase();const ee=8&d?q:null;if(ee&&-1!==N0(ee,M,0)||2&d&&M!==q){if(Ha(d))return!1;b=!0}}}}else{if(!b&&!Ha(d)&&!Ha(D))return!1;if(b&&Ha(D))continue;b=!1,d=D|1&d}}return Ha(d)||b}function Ha(o){return 0==(1&o)}function FA(o,a,u,d){if(null===a)return-1;let f=0;if(d||!u){let _=!1;for(;f<a.length;){const b=a[f];if(b===o)return f;if(3===b||6===b)_=!0;else{if(1===b||2===b){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=_?1:2}return-1}return function B0(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const d=o[u];if("number"==typeof d)return-1;if(d===a)return u;u++}return-1}(a,o)}function L0(o,a,u=!1){for(let d=0;d<a.length;d++)if(PA(o,a[d],u))return!0;return!1}function Ed(o,a){e:for(let u=0;u<a.length;u++){const d=a[u];if(o.length===d.length){for(let f=0;f<o.length;f++)if(o[f]!==d[f])continue e;return!0}}return!1}function ta(o,a){return o?":not("+a.trim()+")":a}function LA(o){let a=o[0],u=1,d=2,f="",_=!1;for(;u<o.length;){let b=o[u];if("string"==typeof b)if(2&d){const C=o[++u];f+="["+b+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?f+="."+b:4&d&&(f+=" "+b);else""!==f&&!Ha(b)&&(a+=ta(_,f),f=""),d=b,_=_||!Ha(d);u++}return""!==f&&(a+=ta(_,f)),a}const Rt={};function H0(o){ou(xt(),be(),Zr()+o,vl())}function ou(o,a,u,d){if(!d)if(3==(3&a[2])){const _=o.preOrderCheckHooks;null!==_&&ed(a,_,u)}else{const _=o.preOrderHooks;null!==_&&Da(a,_,0,u)}is(u)}function gg(o,a){return o<<17|a<<2}function jn(o){return o>>17&32767}function bo(o){return 2|o}function ja(o){return(131068&o)>>2}function L_(o,a){return-131069&o|a<<2}function V_(o){return 1|o}function Z0(o,a){const u=o.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const f=u[d],_=u[d+1];if(-1!==_){const b=o.data[_];wl(f),b.contentQueries(2,a[_],_)}}}function Gl(o,a,u,d,f,_,b,C,D,M){const k=a.blueprint.slice();return k[0]=f,k[2]=140|d,or(k),k[3]=k[15]=o,k[8]=u,k[10]=b||o&&o[10],k[11]=C||o&&o[11],k[12]=D||o&&o[12]||null,k[9]=M||o&&o[9]||null,k[6]=_,k[16]=2==a.type?o[16]:k,k}function $l(o,a,u,d,f){let _=o.data[a];if(null===_)_=function ff(o,a,u,d,f){const _=Ea(),b=Sa(),D=o.data[a]=function eS(o,a,u,d,f,_){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?_:_&&_.parent,u,a,d,f);return null===o.firstChild&&(o.firstChild=D),null!==_&&(b?null==_.child&&null!==D.parent&&(_.child=D):null===_.next&&(_.next=D)),D}(o,a,u,d,f),function Ku(){return ft.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=u,_.value=d,_.attrs=f;const b=function Vo(){const o=ft.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();_.injectorIndex=null===b?-1:b.injectorIndex}return Ti(_,!0),_}function pf(o,a,u,d){if(0===u)return-1;const f=a.length;for(let _=0;_<u;_++)a.push(d),o.blueprint.push(d),o.data.push(null);return f}function Td(o,a,u){Cl(a);try{const d=o.viewQuery;null!==d&&ry(1,d,u);const f=o.template;null!==f&&Q0(o,a,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&Z0(o,a),o.staticViewQueries&&ry(2,o.viewQuery,u);const _=o.components;null!==_&&function Y_(o,a){for(let u=0;u<a.length;u++)rM(o,a[u])}(a,_)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[2]&=-5,Uo()}}function zl(o,a,u,d){const f=a[2];if(256==(256&f))return;Cl(a);const _=vl();try{or(a),function Dc(o){return ft.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&Q0(o,a,u,2,d);const b=3==(3&f);if(!_)if(b){const M=o.preOrderCheckHooks;null!==M&&ed(a,M,null)}else{const M=o.preOrderHooks;null!==M&&Da(a,M,0,null),ar(a,0)}if(function BP(o){for(let a=Cs(o);null!==a;a=Va(a)){if(!a[2])continue;const u=a[9];for(let d=0;d<u.length;d++){const f=u[d],_=f[3];0==(1024&f[2])&&Lo(_,1),f[2]|=1024}}}(a),function VP(o){for(let a=Cs(o);null!==a;a=Va(a))for(let u=10;u<a.length;u++){const d=a[u],f=d[1];lo(d)&&zl(f,d,f.template,d[8])}}(a),null!==o.contentQueries&&Z0(o,a),!_)if(b){const M=o.contentCheckHooks;null!==M&&ed(a,M)}else{const M=o.contentHooks;null!==M&&Da(a,M,1),ar(a,1)}!function QA(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const f=u[d];if(f<0)is(~f);else{const _=f,b=u[++d],C=u[++d];kh(b,_),C(2,a[_])}}}finally{is(-1)}}(o,a);const C=o.components;null!==C&&function JA(o,a){for(let u=0;u<a.length;u++)nM(o,a[u])}(a,C);const D=o.viewQuery;if(null!==D&&ry(2,D,d),!_)if(b){const M=o.viewCheckHooks;null!==M&&ed(a,M)}else{const M=o.viewHooks;null!==M&&Da(a,M,2),ar(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),_||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,Lo(a[3],-1))}finally{Uo()}}function XA(o,a,u,d){const f=a[10],_=!vl(),b=gs(a);try{_&&!b&&f.begin&&f.begin(),b&&Td(o,a,d),zl(o,a,u,d)}finally{_&&!b&&f.end&&f.end()}}function Q0(o,a,u,d,f){const _=Zr(),b=2&d;try{is(-1),b&&a.length>20&&ou(o,a,20,vl()),u(d,f)}finally{is(_)}}function qb(o,a,u){if(Bu(a)){const f=a.directiveEnd;for(let _=a.directiveStart;_<f;_++){const b=o.data[_];b.contentQueries&&b.contentQueries(1,u[_],_)}}}function Wb(o,a,u){!Sc()||(function Jb(o,a,u,d){const f=u.directiveStart,_=u.directiveEnd;o.firstCreatePass||ss(u,a),Tr(d,a);const b=u.initialInputs;for(let C=f;C<_;C++){const D=o.data[C],M=ns(D);M&&oS(a,u,D);const k=Ns(a,o,C,u);Tr(k,a),null!==b&&bg(0,C-f,k,D,0,b),M&&(Si(u.index,a)[8]=k)}}(o,a,u,li(u,a)),128==(128&u.flags)&&function ty(o,a,u){const d=u.directiveStart,f=u.directiveEnd,b=u.index,C=function bl(){return ft.lFrame.currentDirectiveIndex}();try{is(b);for(let D=d;D<f;D++){const M=o.data[D],k=a[D];Zu(D),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&Xb(M,k)}}finally{is(-1),Zu(C)}}(o,a,u))}function K_(o,a,u=li){const d=a.localNames;if(null!==d){let f=a.index+1;for(let _=0;_<d.length;_+=2){const b=d[_+1],C=-1===b?u(a,o):o[b];o[f++]=C}}}function J0(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Yb(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Yb(o,a,u,d,f,_,b,C,D,M){const k=20+d,V=k+f,q=function eM(o,a){const u=[];for(let d=0;d<a;d++)u.push(d<o?null:Rt);return u}(k,V),ee="function"==typeof M?M():M;return q[1]={type:o,blueprint:q,template:u,queries:null,viewQuery:C,declTNode:a,data:q.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:D,consts:ee,incompleteFirstPass:!1}}function X0(o,a,u,d){const f=iy(a);null===u?f.push(d):(f.push(u),o.firstCreatePass&&dS(o).push(d,f.length-1))}function Q_(o,a,u){for(let d in o)if(o.hasOwnProperty(d)){const f=o[d];(u=null===u?{}:u).hasOwnProperty(d)?u[d].push(a,f):u[d]=[a,f]}return u}function as(o,a,u,d,f,_,b,C){const D=li(a,u);let k,M=a.inputs;!C&&null!=M&&(k=M[d])?($a(o,u,k,d,f),Nn(a)&&function _g(o,a){const u=Si(a,o);16&u[2]||(u[2]|=64)}(u,a.index)):3&a.type&&(d=function LP(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=b?b(f,a.value||"",d):f,fn(_)?_.setProperty(D,d,f):ui(d)||(D.setProperty?D.setProperty(d,f):D[d]=f))}function vg(o,a,u,d){let f=!1;if(Sc()){const _=function iS(o,a,u){const d=o.directiveRegistry;let f=null;if(d)for(let _=0;_<d.length;_++){const b=d[_];L0(u,b.selectors,!1)&&(f||(f=[]),Il(ss(u,a),o,b.type),ns(b)?(ew(o,u),f.unshift(b)):f.push(b))}return f}(o,a,u),b=null===d?null:{"":-1};if(null!==_){f=!0,wo(u,o.data.length,_.length);for(let k=0;k<_.length;k++){const V=_[k];V.providersResolver&&V.providersResolver(V)}let C=!1,D=!1,M=pf(o,a,_.length,null);for(let k=0;k<_.length;k++){const V=_[k];u.mergedAttrs=jo(u.mergedAttrs,V.hostAttrs),ql(o,u,a,M,V),tw(M,V,b),null!==V.contentQueries&&(u.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(u.flags|=128);const q=V.type.prototype;!C&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),C=!0),!D&&(q.ngOnChanges||q.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),D=!0),M++}!function Zb(o,a){const d=a.directiveEnd,f=o.data,_=a.attrs,b=[];let C=null,D=null;for(let M=a.directiveStart;M<d;M++){const k=f[M],V=k.inputs,q=null===_||P0(a)?null:aS(V,_);b.push(q),C=Q_(V,M,C),D=Q_(k.outputs,M,D)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=16),C.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=C,a.outputs=D}(o,u)}b&&function sS(o,a,u){if(a){const d=o.localNames=[];for(let f=0;f<a.length;f+=2){const _=u[a[f+1]];if(null==_)throw new _e(-301,!1);d.push(a[f],_)}}}(u,d,b)}return u.mergedAttrs=jo(u.mergedAttrs,u.attrs),f}function Qb(o,a,u,d,f,_){const b=_.hostBindings;if(b){let C=o.hostBindingOpCodes;null===C&&(C=o.hostBindingOpCodes=[]);const D=~a.index;(function ey(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(C)!=D&&C.push(D),C.push(d,f,b)}}function Xb(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function ew(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function tw(o,a,u){if(u){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)u[a.exportAs[d]]=o;ns(a)&&(u[""]=o)}}function wo(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function ql(o,a,u,d,f){o.data[d]=f;const _=f.factory||(f.factory=Rs(f.type)),b=new Dl(_,ns(f),null);o.blueprint[d]=b,u[d]=b,Qb(o,a,0,d,pf(o,u,f.hostVars,Rt),f)}function oS(o,a,u){const d=li(a,o),f=J0(u),_=o[10],b=wg(o,Gl(o,f,null,u.onPush?64:16,d,a,_,_.createRenderer(d,u),null,null));o[a.index]=b}function Ga(o,a,u,d,f,_){const b=li(o,a);!function Id(o,a,u,d,f,_,b){if(null==_)fn(o)?o.removeAttribute(a,f,u):a.removeAttribute(f);else{const C=null==b?ye(_):b(_,d||"",f);fn(o)?o.setAttribute(a,f,C,u):u?a.setAttributeNS(u,f,C):a.setAttribute(f,C)}}(a[11],b,_,o.value,u,d,f)}function bg(o,a,u,d,f,_){const b=_[a];if(null!==b){const C=d.setInput;for(let D=0;D<b.length;){const M=b[D++],k=b[D++],V=b[D++];null!==C?d.setInput(u,V,M,k):u[k]=V}}}function aS(o,a){let u=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,o[f],a[d+1])),d+=2}else d+=2;else d+=4}return u}function tM(o,a,u,d){return new Array(o,!0,!1,a,null,0,d,u,null,null)}function nM(o,a){const u=Si(a,o);if(lo(u)){const d=u[1];80&u[2]?zl(d,u,d.template,u[8]):u[5]>0&&ny(u)}}function ny(o){for(let d=Cs(o);null!==d;d=Va(d))for(let f=10;f<d.length;f++){const _=d[f];if(1024&_[2]){const b=_[1];zl(b,_,b.template,_[8])}else _[5]>0&&ny(_)}const u=o[1].components;if(null!==u)for(let d=0;d<u.length;d++){const f=Si(u[d],o);lo(f)&&f[5]>0&&ny(f)}}function rM(o,a){const u=Si(a,o),d=u[1];(function lS(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(d,u),Td(d,u,u[8])}function wg(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Ad(o){for(;o;){o[2]|=64;const a=Ll(o);if(Dh(o)&&!a)return o;o=a}return null}function nw(o,a,u){const d=a[10];d.begin&&d.begin();try{zl(o,a,o.template,u)}catch(f){throw hS(a,f),f}finally{d.end&&d.end()}}function sM(o){!function Cg(o){for(let a=0;a<o.components.length;a++){const u=o.components[a],d=gd(u),f=d[1];XA(f,d,f.template,u)}}(o[8])}function ry(o,a,u){wl(0),a(o,u)}const uS=(()=>Promise.resolve(null))();function iy(o){return o[7]||(o[7]=[])}function dS(o){return o.cleanup||(o.cleanup=[])}function rw(o,a,u){return(null===o||ns(o))&&(u=function Ca(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(u[a.index])),u[11]}function hS(o,a){const u=o[9],d=u?u.get(nu,null):null;d&&d.handleError(a)}function $a(o,a,u,d,f){for(let _=0;_<u.length;){const b=u[_++],C=u[_++],D=a[b],M=o.data[b];null!==M.setInput?M.setInput(D,f,d,C):D[C]=f}}function Wl(o,a,u){const d=Fo(a,o);!function N_(o,a,u){fn(o)?o.setValue(a,u):a.textContent=u}(o[11],d,u)}function gf(o,a,u){let d=u?o.styles:null,f=u?o.classes:null,_=0;if(null!==a)for(let b=0;b<a.length;b++){const C=a[b];"number"==typeof C?_=C:1==_?f=Q(f,C):2==_&&(d=Q(d,C+": "+a[++b]+";"))}u?o.styles=d:o.stylesWithoutHost=d,u?o.classes=f:o.classesWithoutHost=f}const sy=new Bt("INJECTOR",-1);class Md{get(a,u=O){if(u===O){const d=new Error(`NullInjectorError: No provider for ${te(a)}!`);throw d.name="NullInjectorError",d}return u}}const sw=new Bt("Set Injector scope."),mf={},cM={};let Eg;function fS(){return void 0===Eg&&(Eg=new Md),Eg}function pS(o,a=null,u=null,d){const f=ow(o,a,u,d);return f._resolveInjectorDefTypes(),f}function ow(o,a=null,u=null,d){return new uM(o,u,a||fS(),d)}class uM{constructor(a,u,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];u&&Ai(u,C=>this.processProvider(C,a,u)),Ai([a],C=>this.processInjectorType(C,[],_)),this.records.set(sy,_f(void 0,this));const b=this.records.get(sw);this.scope=null!=b?b.value:null,this.source=f||("object"==typeof a?null:te(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,u=O,d=We.Default){this.assertNotDestroyed();const f=bt(this),_=Nr(void 0);try{if(!(d&We.SkipSelf)){let C=this.records.get(a);if(void 0===C){const D=function gM(o){return"function"==typeof o||"object"==typeof o&&o instanceof Bt}(a)&&rr(a);C=D&&this.injectableDefInScope(D)?_f(gS(a),mf):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(d&We.Self?fS():this.parent).get(a,u=d&We.Optional&&u===O?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[J]=b[J]||[]).unshift(te(a)),f)throw b;return function zh(o,a,u,d){const f=o[J];throw a[tt]&&f.unshift(a[tt]),o.message=function qh(o,a,u,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=te(a);if(Array.isArray(a))f=a.map(te).join(" -> ");else if("object"==typeof a){let _=[];for(let b in a)if(a.hasOwnProperty(b)){let C=a[b];_.push(b+":"+("string"==typeof C?JSON.stringify(C):te(C)))}f=`{${_.join(", ")}}`}return`${u}${d?"("+d+")":""}[${f}]: ${o.replace(Ie,"\n  ")}`}("\n"+o.message,f,u,d),o.ngTokenPath=f,o[J]=null,o}(b,a,"R3InjectorError",this.source)}throw b}finally{Nr(_),bt(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((d,f)=>a.push(te(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processInjectorType(a,u,d){if(!(a=H(a)))return!1;let f=xo(a);const _=null==f&&a.ngModule||void 0,b=void 0===_?a:_,C=-1!==d.indexOf(b);if(void 0!==_&&(f=xo(_)),null==f)return!1;if(null!=f.imports&&!C){let k;d.push(b);try{Ai(f.imports,V=>{this.processInjectorType(V,u,d)&&(void 0===k&&(k=[]),k.push(V))})}finally{}if(void 0!==k)for(let V=0;V<k.length;V++){const{ngModule:q,providers:ee}=k[V];Ai(ee,ge=>this.processProvider(ge,q,ee||st))}}this.injectorDefTypes.add(b);const D=Rs(b)||(()=>new b);this.records.set(b,_f(D,mf));const M=f.providers;if(null!=M&&!C){const k=a;Ai(M,V=>this.processProvider(V,k,M))}return void 0!==_&&void 0!==a.providers}processProvider(a,u,d){let f=Rd(a=H(a))?a:H(a&&a.provide);const _=function dM(o,a,u){return cw(o)?_f(void 0,o.useValue):_f(lw(o),mf)}(a);if(Rd(a)||!0!==a.multi)this.records.get(f);else{let b=this.records.get(f);b||(b=_f(void 0,mf,!0),b.factory=()=>Ls(b.multi),this.records.set(f,b)),f=a,b.multi.push(a)}this.records.set(f,_)}hydrate(a,u){return u.value===mf&&(u.value=cM,u.value=u.factory()),"object"==typeof u.value&&u.value&&function pM(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=H(a.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function gS(o){const a=rr(o),u=null!==a?a.factory:Rs(o);if(null!==u)return u;if(o instanceof Bt)throw new _e(204,!1);if(o instanceof Function)return function aw(o){const a=o.length;if(a>0)throw vs(a,"?"),new _e(204,!1);const u=function an(o){const a=o&&(o[Ci]||o[Te]);if(a){const u=function Bn(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new _e(204,!1)}function lw(o,a,u){let d;if(Rd(o)){const f=H(o);return Rs(f)||gS(f)}if(cw(o))d=()=>H(o.useValue);else if(function hM(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...Ls(o.deps||[]));else if(function xd(o){return!(!o||!o.useExisting)}(o))d=()=>at(H(o.useExisting));else{const f=H(o&&(o.useClass||o.provide));if(!function mS(o){return!!o.deps}(o))return Rs(f)||gS(f);d=()=>new f(...Ls(o.deps))}return d}function _f(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function cw(o){return null!==o&&"object"==typeof o&&yt in o}function Rd(o){return"function"==typeof o}let ki=(()=>{class o{static create(u,d){var f;if(Array.isArray(u))return pS({name:""},d,u,"");{const _=null!==(f=u.name)&&void 0!==f?f:"";return pS({name:_},u.parent,u.providers,_)}}}return o.THROW_IF_NOT_FOUND=O,o.NULL=new Md,o.\u0275prov=bn({token:o,providedIn:"any",factory:()=>at(sy)}),o.__NG_ELEMENT_ID__=-1,o})();function $P(o,a){Sl(gd(o)[1],En())}function Oi(o){let a=function pe(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const d=[o];for(;a;){let f;if(ns(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new _e(903,"");f=a.\u0275dir}if(f){if(u){d.push(f);const b=o;b.inputs=Hs(o.inputs),b.declaredInputs=Hs(o.declaredInputs),b.outputs=Hs(o.outputs);const C=f.hostBindings;C&&Yl(o,C);const D=f.viewQuery,M=f.contentQueries;if(D&&P(o,D),M&&CM(o,M),ne(o.inputs,f.inputs),ne(o.declaredInputs,f.declaredInputs),ne(o.outputs,f.outputs),ns(f)&&f.data.animation){const k=o.data;k.animation=(k.animation||[]).concat(f.data.animation)}}const _=f.features;if(_)for(let b=0;b<_.length;b++){const C=_[b];C&&C.ngInherit&&C(o),C===Oi&&(u=!1)}}a=Object.getPrototypeOf(a)}!function ia(o){let a=0,u=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=a+=f.hostVars,f.hostAttrs=jo(f.hostAttrs,u=jo(u,f.hostAttrs))}}(d)}function Hs(o){return o===Ei?{}:o===st?[]:o}function P(o,a){const u=o.viewQuery;o.viewQuery=u?(d,f)=>{a(d,f),u(d,f)}:a}function CM(o,a){const u=o.contentQueries;o.contentQueries=u?(d,f,_)=>{a(d,f,_),u(d,f,_)}:a}function Yl(o,a){const u=o.hostBindings;o.hostBindings=u?(d,f)=>{a(d,f),u(d,f)}:a}let kd=null;function au(){if(!kd){const o=rt.Symbol;if(o&&o.iterator)kd=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const d=a[u];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(kd=d)}}}return kd}function Dg(o){return!!mw(o)&&(Array.isArray(o)||!(o instanceof Map)&&au()in o)}function mw(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function za(o,a,u){return o[a]=u}function ei(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function _w(o,a,u,d){const f=be();return ei(f,uo(),a)&&(xt(),Ga(Hn(),f,o,a,u,d)),_w}function Nd(o,a,u,d){return ei(o,uo(),u)?a+ye(u)+d:Rt}function Ld(o,a,u,d,f,_,b,C){const D=be(),M=xt(),k=o+20,V=M.firstCreatePass?function SM(o,a,u,d,f,_,b,C,D){const M=a.consts,k=$l(a,o,4,b||null,Di(M,C));vg(a,u,k,Di(M,D)),Sl(a,k);const V=k.tViews=Yb(2,k,d,f,_,a.directiveRegistry,a.pipeRegistry,null,a.schemas,M);return null!==a.queries&&(a.queries.template(a,k),V.queries=a.queries.embeddedTView(k)),k}(k,M,D,a,u,d,f,_,b):M.data[k];Ti(V,!1);const q=D[11].createComment("");Cd(M,D,q,V),Tr(q,D),wg(D,D[k]=tM(q,D,q,V)),al(V)&&Wb(M,D,V),null!=b&&K_(D,V,C)}function uy(o){return Kr(function yl(){return ft.lFrame.contextLView}(),20+o)}function bf(o,a=We.Default){const u=be();return null===u?at(o,a):Ta(En(),u,H(o),a)}function NS(){throw new Error("invalid")}function Ow(o,a,u){const d=be();return ei(d,uo(),a)&&as(xt(),Hn(),d,o,a,d[11],u,!1),Ow}function xg(o,a,u,d,f){const b=f?"class":"style";$a(o,u,a.inputs[b],b,d)}function vy(o,a,u,d){const f=be(),_=xt(),b=20+o,C=f[11],D=f[b]=cf(C,a,function Ph(){return ft.lFrame.currentNamespace}()),M=_.firstCreatePass?function Nw(o,a,u,d,f,_,b){const C=a.consts,M=$l(a,o,2,f,Di(C,_));return vg(a,u,M,Di(C,b)),null!==M.attrs&&gf(M,M.attrs,!1),null!==M.mergedAttrs&&gf(M,M.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,M),M}(b,_,f,0,a,u,d):_.data[b];Ti(M,!0);const k=M.mergedAttrs;null!==k&&ot(C,D,k);const V=M.classes;null!==V&&Vb(C,D,V);const q=M.styles;return null!==q&&Lb(C,D,q),64!=(64&M.flags)&&Cd(_,f,D,M),0===function pl(){return ft.lFrame.elementDepthCount}()&&Tr(D,f),function gl(){ft.lFrame.elementDepthCount++}(),al(M)&&(Wb(_,f,M),qb(_,M,f)),null!==d&&K_(f,M),vy}function wf(){let o=En();Sa()?_l():(o=o.parent,Ti(o,!1));const a=o;!function qu(){ft.lFrame.elementDepthCount--}();const u=xt();return u.firstCreatePass&&(Sl(u,o),Bu(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Fh(o){return 0!=(16&o.flags)}(a)&&xg(u,a,be(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function o_(o){return 0!=(32&o.flags)}(a)&&xg(u,a,be(),a.stylesWithoutHost,!1),wf}function by(o,a,u,d){return vy(o,a,u,d),wf(),by}function Cf(o,a,u){const d=be(),f=xt(),_=o+20,b=f.firstCreatePass?function wy(o,a,u,d,f){const _=a.consts,b=Di(_,d),C=$l(a,o,8,"ng-container",b);return null!==b&&gf(C,b,!0),vg(a,u,C,Di(_,f)),null!==a.queries&&a.queries.elementStart(a,C),C}(_,f,d,a,u):f.data[_];Ti(b,!0);const C=d[_]=d[11].createComment("");return Cd(f,d,C,b),Tr(C,d),al(b)&&(Wb(f,d,b),qb(f,b,d)),null!=u&&K_(d,b),Cf}function Ef(){let o=En();const a=xt();return Sa()?_l():(o=o.parent,Ti(o,!1)),a.firstCreatePass&&(Sl(a,o),Bu(o)&&a.queries.elementEnd(o)),Ef}function Cy(o,a,u){return Cf(o,a,u),Ef(),Cy}function PS(){return be()}function Vd(o){return!!o&&"function"==typeof o.then}function Pw(o){return!!o&&"function"==typeof o.subscribe}const Fw=Pw;function Ey(o,a,u,d){const f=be(),_=xt(),b=En();return FS(_,f,f[11],b,o,a,!!u,d),Ey}function Sf(o,a){const u=En(),d=be(),f=xt();return FS(f,d,rw(ho(f.data),u,d),u,o,a,!1),Sf}function FS(o,a,u,d,f,_,b,C){const D=al(d),k=o.firstCreatePass&&dS(o),V=a[8],q=iy(a);let ee=!0;if(3&d.type||C){const Fe=li(d,a),Ke=C?C(Fe):Fe,Ce=q.length,lt=C?Wt=>C(Gt(Wt[d.index])):d.index;if(fn(u)){let Wt=null;if(!C&&D&&(Wt=function xM(o,a,u,d){const f=o.cleanup;if(null!=f)for(let _=0;_<f.length-1;_+=2){const b=f[_];if(b===u&&f[_+1]===d){const C=a[7],D=f[_+2];return C.length>D?C[D]:null}"string"==typeof b&&(_+=2)}return null}(o,a,f,d.index)),null!==Wt)(Wt.__ngLastListenerFn__||Wt).__ngNextListenerFn__=_,Wt.__ngLastListenerFn__=_,ee=!1;else{_=Lw(d,a,V,_,!1);const yn=u.listen(Ke,f,_);q.push(_,yn),k&&k.push(f,lt,Ce,Ce+1)}}else _=Lw(d,a,V,_,!0),Ke.addEventListener(f,_,b),q.push(_),k&&k.push(f,lt,Ce,b)}else _=Lw(d,a,V,_,!1);const ge=d.outputs;let Se;if(ee&&null!==ge&&(Se=ge[f])){const Fe=Se.length;if(Fe)for(let Ke=0;Ke<Fe;Ke+=2){const us=a[Se[Ke]][Se[Ke+1]].subscribe(_),Eu=q.length;q.push(_,us),k&&k.push(f,d.index,Eu,-(Eu+1))}}}function Bd(o,a,u,d){try{return!1!==u(d)}catch(f){return hS(o,f),!1}}function Lw(o,a,u,d,f){return function _(b){if(b===Function)return d;const C=2&o.flags?Si(o.index,a):a;0==(32&a[2])&&Ad(C);let D=Bd(a,0,d,b),M=_.__ngNextListenerFn__;for(;M;)D=Bd(a,0,M,b)&&D,M=M.__ngNextListenerFn__;return f&&!1===D&&(b.preventDefault(),b.returnValue=!1),D}}function LS(o=1){return function ms(o){return(ft.lFrame.contextLView=function Xu(o,a){for(;o>0;)a=a[15],o--;return a}(o,ft.lFrame.contextLView))[8]}(o)}function Ud(o,a){let u=null;const d=function V0(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(o);for(let f=0;f<a.length;f++){const _=a[f];if("*"!==_){if(null===d?L0(o,_,!0):Ed(d,_))return f}else u=f}return u}function Vw(o){const a=be()[16][6];if(!a.projection){const d=a.projection=vs(o?o.length:1,null),f=d.slice();let _=a.child;for(;null!==_;){const b=o?Ud(_,o):0;null!==b&&(f[b]?f[b].projectionNext=_:d[b]=_,f[b]=_),_=_.next}}}function Rg(o,a=0,u){const d=be(),f=xt(),_=$l(f,20+o,16,null,u||null);null===_.projection&&(_.projection=a),_l(),64!=(64&_.flags)&&function k0(o,a,u){O0(a[11],0,a,u,Qe(o,u,a),uf(u.parent||a[6],u,a))}(f,d,_)}function Dy(o,a,u,d,f){const _=o[u+1],b=null===a;let C=d?jn(_):ja(_),D=!1;for(;0!==C&&(!1===D||b);){const k=o[C+1];zw(o[C],a)&&(D=!0,o[C+1]=d?V_(k):bo(k)),C=d?jn(k):ja(k)}D&&(o[u+1]=d?bo(_):V_(_))}function zw(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Ra(o,a)>=0}const mr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Tf(o){return o.substring(mr.key,mr.keyEnd)}function Ty(o,a){const u=mr.textEnd;return u===a?-1:(a=mr.keyEnd=function BS(o,a,u){for(;a<u&&o.charCodeAt(a)>32;)a++;return a}(o,mr.key=a,u),jd(o,a,u))}function jd(o,a,u){for(;a<u&&o.charCodeAt(a)<=32;)a++;return a}function Ql(o,a,u){return Ni(o,a,u,!1),Ql}function Pg(o,a){return Ni(o,a,null,!0),Pg}function Eo(o,a){for(let u=function kM(o){return function qw(o){mr.key=0,mr.keyEnd=0,mr.value=0,mr.valueEnd=0,mr.textEnd=o.length}(o),Ty(o,jd(o,0,mr.textEnd))}(a);u>=0;u=Ty(a,u))fi(o,Tf(a),!0)}function Ni(o,a,u,d){const f=be(),_=xt(),b=ci(2);_.firstUpdatePass&&uu(_,o,b,d),a!==Rt&&ei(f,b,a)&&Mf(_,_.data[Zr()],f,f[11],o,f[b+1]=function GS(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=te(Ko(o)))),o}(a,u),d,b)}function HS(o,a){return a>=o.expandoStartIndex}function uu(o,a,u,d){const f=o.data;if(null===f[u+1]){const _=f[Zr()],b=HS(o,u);$S(_,d)&&null===a&&!b&&(a=!1),a=function Jl(o,a,u,d){const f=ho(o);let _=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(u=Mn(u=Oy(null,o,a,u,d),a.attrs,d),_=null);else{const b=a.directiveStylingLast;if(-1===b||o[b]!==f)if(u=Oy(f,o,a,u,d),null===_){let D=function xy(o,a,u){const d=u?a.classBindings:a.styleBindings;if(0!==ja(d))return o[jn(d)]}(o,a,d);void 0!==D&&Array.isArray(D)&&(D=Oy(null,o,a,D[1],d),D=Mn(D,a.attrs,d),function Ry(o,a,u,d){o[jn(u?a.classBindings:a.styleBindings)]=d}(o,a,d,D))}else _=function ky(o,a,u){let d;const f=a.directiveEnd;for(let _=1+a.directiveStylingLast;_<f;_++)d=Mn(d,o[_].hostAttrs,u);return Mn(d,a.attrs,u)}(o,a,d)}return void 0!==_&&(d?a.residualClasses=_:a.residualStyles=_),u}(f,_,a,d),function Og(o,a,u,d,f,_){let b=_?a.classBindings:a.styleBindings,C=jn(b),D=ja(b);o[d]=u;let k,M=!1;if(Array.isArray(u)){const V=u;k=V[1],(null===k||Ra(V,k)>0)&&(M=!0)}else k=u;if(f)if(0!==D){const q=jn(o[C+1]);o[d+1]=gg(q,C),0!==q&&(o[q+1]=L_(o[q+1],d)),o[C+1]=function BA(o,a){return 131071&o|a<<17}(o[C+1],d)}else o[d+1]=gg(C,0),0!==C&&(o[C+1]=L_(o[C+1],d)),C=d;else o[d+1]=gg(D,0),0===C?C=d:o[D+1]=L_(o[D+1],d),D=d;M&&(o[d+1]=bo(o[d+1])),Dy(o,k,d,!0),Dy(o,k,d,!1),function $w(o,a,u,d,f){const _=f?o.residualClasses:o.residualStyles;null!=_&&"string"==typeof a&&Ra(_,a)>=0&&(u[d+1]=V_(u[d+1]))}(a,k,o,d,_),b=gg(C,D),_?a.classBindings=b:a.styleBindings=b}(f,_,a,u,b,d)}}function Oy(o,a,u,d,f){let _=null;const b=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<b&&(_=a[C],d=Mn(d,_.hostAttrs,f),_!==o);)C++;return null!==o&&(u.directiveStylingLast=C),d}function Mn(o,a,u){const d=u?1:2;let f=-1;if(null!==a)for(let _=0;_<a.length;_++){const b=a[_];"number"==typeof b?f=b:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),fi(o,b,!!u||a[++_]))}return void 0===o?null:o}function Mf(o,a,u,d,f,_,b,C){if(!(3&a.type))return;const D=o.data,M=D[C+1];Py(function Bb(o){return 1==(1&o)}(M)?xf(D,a,u,f,ja(M),b):void 0)||(Py(_)||function Hl(o){return 2==(2&o)}(M)&&(_=xf(D,null,u,f,C,b)),function OA(o,a,u,d,f){const _=fn(o);if(a)f?_?o.addClass(u,d):u.classList.add(d):_?o.removeClass(u,d):u.classList.remove(d);else{let b=-1===d.indexOf("-")?void 0:Us.DashCase;if(null==f)_?o.removeStyle(u,d,b):u.style.removeProperty(d);else{const C="string"==typeof f&&f.endsWith("!important");C&&(f=f.slice(0,-10),b|=Us.Important),_?o.setStyle(u,d,f,b):u.style.setProperty(d,f,C?"important":"")}}}(d,b,Fo(Zr(),u),f,_))}function xf(o,a,u,d,f,_){const b=null===a;let C;for(;f>0;){const D=o[f],M=Array.isArray(D),k=M?D[1]:D,V=null===k;let q=u[f+1];q===Rt&&(q=V?st:void 0);let ee=V?ad(q,d):k===d?q:void 0;if(M&&!Py(ee)&&(ee=ad(D,d)),Py(ee)&&(C=ee,b))return C;const ge=o[f+1];f=b?jn(ge):ja(ge)}if(null!==a){let D=_?a.residualClasses:a.residualStyles;null!=D&&(C=ad(D,d))}return C}function Py(o){return void 0!==o}function $S(o,a){return 0!=(o.flags&(a?16:32))}function zS(o,a=""){const u=be(),d=xt(),f=o+20,_=d.firstCreatePass?$l(d,f,1,a,null):d.data[f],b=u[f]=function bd(o,a){return fn(o)?o.createText(a):o.createTextNode(a)}(u[11],a);Cd(d,u,b,_),Ti(_,!1)}function Yw(o){return Fy("",o,""),Yw}function Fy(o,a,u){const d=be(),f=Nd(d,o,a,u);return f!==Rt&&Wl(d,Zr(),f),Fy}function Jw(o,a,u){!function So(o,a,u,d){const f=xt(),_=ci(2);f.firstUpdatePass&&uu(f,null,_,d);const b=be();if(u!==Rt&&ei(b,_,u)){const C=f.data[Zr()];if($S(C,d)&&!HS(f,_)){let D=d?C.classesWithoutHost:C.stylesWithoutHost;null!==D&&(u=Q(D,u||"")),xg(f,C,b,u,d)}else!function NM(o,a,u,d,f,_,b,C){f===Rt&&(f=st);let D=0,M=0,k=0<f.length?f[0]:null,V=0<_.length?_[0]:null;for(;null!==k||null!==V;){const q=D<f.length?f[D+1]:void 0,ee=M<_.length?_[M+1]:void 0;let Se,ge=null;k===V?(D+=2,M+=2,q!==ee&&(ge=V,Se=ee)):null===V||null!==k&&k<V?(D+=2,ge=k):(M+=2,ge=V,Se=ee),null!==ge&&Mf(o,a,u,d,ge,Se,b,C),k=D<f.length?f[D]:null,V=M<_.length?_[M]:null}}(f,C,b,b[11],b[_+1],b[_+1]=function Ny(o,a,u){if(null==u||""===u)return st;const d=[],f=Ko(u);if(Array.isArray(f))for(let _=0;_<f.length;_++)o(d,f[_],!0);else if("object"==typeof f)for(const _ in f)f.hasOwnProperty(_)&&o(d,_,f[_]);else"string"==typeof f&&a(d,f);return d}(o,a,u),d,_)}}(fi,Eo,Nd(be(),o,a,u),!0)}function By(o,a,u){const d=be();return ei(d,uo(),a)&&as(xt(),Hn(),d,o,a,d[11],u,!0),By}function Uy(o,a,u){const d=be();if(ei(d,uo(),a)){const _=xt(),b=Hn();as(_,b,d,o,a,rw(ho(_.data),b,d),u,!0)}return Uy}const Wa=void 0;var ec=["en",[["a","p"],["AM","PM"],Wa],[["AM","PM"],Wa,Wa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Wa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Wa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Wa,"{1} 'at' {0}",Wa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function iD(o){const u=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let $d={};function Vg(o){const a=function aC(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=jy(a);if(u)return u;const d=a.split("-")[0];if(u=jy(d),u)return u;if("en"===d)return ec;throw new Error(`Missing locale data for the locale "${o}".`)}function sC(o){return Vg(o)[pt.PluralCase]}function jy(o){return o in $d||($d[o]=rt.ng&&rt.ng.common&&rt.ng.common.locales&&rt.ng.common.locales[o]),$d[o]}var pt=(()=>((pt=pt||{})[pt.LocaleId=0]="LocaleId",pt[pt.DayPeriodsFormat=1]="DayPeriodsFormat",pt[pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",pt[pt.DaysFormat=3]="DaysFormat",pt[pt.DaysStandalone=4]="DaysStandalone",pt[pt.MonthsFormat=5]="MonthsFormat",pt[pt.MonthsStandalone=6]="MonthsStandalone",pt[pt.Eras=7]="Eras",pt[pt.FirstDayOfWeek=8]="FirstDayOfWeek",pt[pt.WeekendRange=9]="WeekendRange",pt[pt.DateFormat=10]="DateFormat",pt[pt.TimeFormat=11]="TimeFormat",pt[pt.DateTimeFormat=12]="DateTimeFormat",pt[pt.NumberSymbols=13]="NumberSymbols",pt[pt.NumberFormats=14]="NumberFormats",pt[pt.CurrencyCode=15]="CurrencyCode",pt[pt.CurrencySymbol=16]="CurrencySymbol",pt[pt.CurrencyName=17]="CurrencyName",pt[pt.Currencies=18]="Currencies",pt[pt.Directionality=19]="Directionality",pt[pt.PluralCase=20]="PluralCase",pt[pt.ExtraData=21]="ExtraData",pt))();const Bg="en-US";let lC=Bg;function Do(o,a,u,d,f){if(o=H(o),Array.isArray(o))for(let _=0;_<o.length;_++)Do(o[_],a,u,d,f);else{const _=xt(),b=be();let C=Rd(o)?o:H(o.provide),D=lw(o);const M=En(),k=1048575&M.providerIndexes,V=M.directiveStart,q=M.providerIndexes>>20;if(Rd(o)||!o.multi){const ee=new Dl(D,f,bf),ge=Qy(C,a,f?k:k+q,V);-1===ge?(Il(ss(M,b),_,C),Zd(_,o,a.length),a.push(C),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),u.push(ee),b.push(ee)):(u[ge]=ee,b[ge]=ee)}else{const ee=Qy(C,a,k+q,V),ge=Qy(C,a,k,k+q),Se=ee>=0&&u[ee],Fe=ge>=0&&u[ge];if(f&&!Fe||!f&&!Se){Il(ss(M,b),_,C);const Ke=function yC(o,a,u,d,f){const _=new Dl(o,u,bf);return _.multi=[],_.index=a,_.componentProviders=0,nc(_,f,d&&!u),_}(f?_C:Lf,u.length,f,d,D);!f&&Fe&&(u[ge].providerFactory=Ke),Zd(_,o,a.length,0),a.push(C),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),u.push(Ke),b.push(Ke)}else Zd(_,o,ee>-1?ee:ge,nc(u[f?ge:ee],D,!f&&d));!f&&d&&Fe&&u[ge].componentProviders++}}}function Zd(o,a,u,d){const f=Rd(a),_=function fM(o){return!!o.useClass}(a);if(f||_){const D=(_?H(a.useClass):a).prototype.ngOnDestroy;if(D){const M=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const k=M.indexOf(u);-1===k?M.push(u,[d,D]):M[k+1].push(d,D)}else M.push(u,D)}}}function nc(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function Qy(o,a,u,d){for(let f=u;f<d;f++)if(a[f]===o)return f;return-1}function Lf(o,a,u,d){return gu(this.multi,[])}function _C(o,a,u,d){const f=this.multi;let _;if(this.providerFactory){const b=this.providerFactory.componentProviders,C=Ns(u,u[1],this.providerFactory.index,d);_=C.slice(0,b),gu(f,_);for(let D=b;D<C.length;D++)_.push(C[D])}else _=[],gu(f,_);return _}function gu(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function Vf(o,a=[]){return u=>{u.providersResolver=(d,f)=>function Kd(o,a,u){const d=xt();if(d.firstCreatePass){const f=ns(o);Do(u,d.data,d.blueprint,f,!0),Do(a,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,a)}}class vC{}class ED{resolveComponentFactory(a){throw function Jy(o){const a=Error(`No component factory found for ${te(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let qg=(()=>{class o{}return o.NULL=new ED,o})();function Zi(){return Qd(En(),be())}function Qd(o,a){return new Dn(li(o,a))}let Dn=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=Zi,o})();function Xy(o){return o instanceof Dn?o.nativeElement:o}class Jd{}let ev=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function DD(){const o=be(),u=Si(En().index,o);return function Wg(o){return o[11]}(Wr(u)?u:o)}(),o})(),ex=(()=>{class o{}return o.\u0275prov=bn({token:o,providedIn:"root",factory:()=>null}),o})();class Ka{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const TD=new Ka("13.3.2"),bC={};function Yg(o,a,u,d,f=!1){for(;null!==u;){const _=a[u.index];if(null!==_&&d.push(Gt(_)),Yr(_))for(let C=10;C<_.length;C++){const D=_[C],M=D[1].firstChild;null!==M&&Yg(D[1],D,M,d)}const b=u.type;if(8&b)Yg(o,a,u.child,d);else if(32&b){const C=hg(u,a);let D;for(;D=C();)d.push(D)}else if(16&b){const C=Nb(a,u);if(Array.isArray(C))d.push(...C);else{const D=Ll(a[16]);Yg(D[1],D,C,d,!0)}}u=f?u.projectionNext:u.next}return d}class oa{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return Yg(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Yr(a)){const u=a[8],d=u?u.indexOf(this):-1;d>-1&&(z(a,d),$o(u,d))}this._attachedToViewContainer=!1}oe(this._lView[1],this._lView)}onDestroy(a){X0(this._lView[1],this._lView,null,a)}markForCheck(){Ad(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){nw(this._lView[1],this._lView,this.context)}checkNoChanges(){!function cS(o,a,u){co(!0);try{nw(o,a,u)}finally{co(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new _e(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function p(o,a){pg(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new _e(902,"");this._appRef=a}}class tx extends oa{constructor(a){super(a),this._view=a}detectChanges(){sM(this._view)}checkNoChanges(){!function oM(o){co(!0);try{sM(o)}finally{co(!1)}}(this._view)}get context(){return null}}class Uf extends qg{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=qt(a);return new wC(u,this.ngModule)}}function Kg(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class wC extends vC{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function U0(o){return o.map(LA).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Kg(this.componentDef.inputs)}get outputs(){return Kg(this.componentDef.outputs)}create(a,u,d,f){const _=(f=f||this.ngModule)?function Fi(o,a){return{get:(u,d,f)=>{const _=o.get(u,bC,f);return _!==bC||d===bC?_:a.get(u,d,f)}}}(a,f.injector):a,b=_.get(Jd,$u),C=_.get(ex,null),D=b.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",k=d?function Z_(o,a,u){if(fn(o))return o.selectRootElement(a,u===Nt.ShadowDom);let d="string"==typeof a?o.querySelector(a):a;return d.textContent="",d}(D,d,this.componentDef.encapsulation):cf(b.createRenderer(null,this.componentDef),M,function tv(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(M)),V=this.componentDef.onPush?576:528,q=function Vr(o,a){return{components:[],scheduler:o||Qo,clean:uS,playerHandler:a||null,flags:0}}(),ee=Yb(0,null,null,1,0,null,null,null,null,null),ge=Gl(null,ee,q,V,null,null,b,D,C,_);let Se,Fe;Cl(ge);try{const Ke=function CS(o,a,u,d,f,_){const b=u[1];u[20]=o;const D=$l(b,20,2,"#host",null),M=D.mergedAttrs=a.hostAttrs;null!==M&&(gf(D,M,!0),null!==o&&(ot(f,o,M),null!==D.classes&&Vb(f,o,D.classes),null!==D.styles&&Lb(f,o,D.styles)));const k=d.createRenderer(o,a),V=Gl(u,J0(a),null,a.onPush?64:16,u[20],D,d,k,_||null,null);return b.firstCreatePass&&(Il(ss(D,u),b,a.type),ew(b,D),wo(D,u.length,1)),wg(u,V),u[20]=V}(k,this.componentDef,ge,b,D);if(k)if(d)ot(D,k,["ng-version",TD.full]);else{const{attrs:Ce,classes:lt}=function VA(o){const a=[],u=[];let d=1,f=2;for(;d<o.length;){let _=o[d];if("string"==typeof _)2===f?""!==_&&a.push(_,o[++d]):8===f&&u.push(_);else{if(!Ha(f))break;f=_}d++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Ce&&ot(D,k,Ce),lt&&lt.length>0&&Vb(D,k,lt.join(" "))}if(Fe=zu(ee,20),void 0!==u){const Ce=Fe.projection=[];for(let lt=0;lt<this.ngContentSelectors.length;lt++){const Wt=u[lt];Ce.push(null!=Wt?Array.from(Wt):null)}}Se=function ES(o,a,u,d,f){const _=u[1],b=function rS(o,a,u){const d=En();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),ql(o,d,a,pf(o,a,1,null),u));const f=Ns(a,o,d.directiveStart,d);Tr(f,a);const _=li(d,a);return _&&Tr(_,a),f}(_,u,a);if(d.components.push(b),o[8]=b,f&&f.forEach(D=>D(b,a)),a.contentQueries){const D=En();a.contentQueries(1,b,D.directiveStart)}const C=En();return!_.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(is(C.index),Qb(u[1],C,0,C.directiveStart,C.directiveEnd,a),Xb(a,b)),b}(Ke,this.componentDef,ge,q,[$P]),Td(ee,ge,null)}finally{Uo()}return new ID(this.componentType,Se,Qd(Fe,ge),ge,Fe)}}class ID extends class CD{}{constructor(a,u,d,f,_){super(),this.location=d,this._rootLView=f,this._tNode=_,this.instance=u,this.hostView=this.changeDetectorRef=new tx(f),this.componentType=a}get injector(){return new ys(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class Hf{}class AD{}const jf=new Map;class EC extends Hf{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Uf(this);const d=Cn(a);this._bootstrapComponents=vo(d.bootstrap),this._r3Injector=ow(a,u,[{provide:Hf,useValue:this},{provide:qg,useValue:this.componentFactoryResolver}],te(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,u=ki.THROW_IF_NOT_FOUND,d=We.Default){return a===ki||a===Hf||a===sy?this:this._r3Injector.get(a,u,d)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class _u extends AD{constructor(a){super(),this.moduleType=a,null!==Cn(a)&&function ix(o){const a=new Set;!function u(d){const f=Cn(d,!0),_=f.id;null!==_&&(function eh(o,a,u){if(a&&a!==u)throw new Error(`Duplicate module registered for ${o} - ${te(a)} vs ${te(a.name)}`)}(_,jf.get(_),d),jf.set(_,d));const b=vo(f.imports);for(const C of b)a.has(C)||(a.add(C),u(C))}(o)}(a)}create(a){return new EC(this.moduleType,a)}}function Zg(o,a,u,d){return rv(be(),Fr(),o,a,u,d)}function th(o,a){const u=o[a];return u===Rt?void 0:u}function rv(o,a,u,d,f,_){const b=a+u;return ei(o,b,f)?za(o,b+1,_?d.call(_,f):d(f)):th(o,b+1)}function IC(o,a,u,d,f,_,b){const C=a+u;return function cr(o,a,u,d){const f=ei(o,a,u);return ei(o,a+1,d)||f}(o,C,f,_)?za(o,C+2,b?d.call(b,f,_):d(f,_)):th(o,C+2)}function xC(o,a){const u=xt();let d;const f=o+20;u.firstCreatePass?(d=function kD(o,a){if(a)for(let u=a.length-1;u>=0;u--){const d=a[u];if(o===d.name)return d}}(a,u.pipeRegistry),u.data[f]=d,d.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(f,d.onDestroy)):d=u.data[f];const _=d.factory||(d.factory=Rs(d.type)),b=Nr(bf);try{const C=ks(!1),D=_();return ks(C),function TS(o,a,u,d){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),a[u]=d}(u,be(),f,D),D}finally{Nr(b)}}function Jg(o,a,u){const d=o+20,f=be(),_=Kr(f,d);return aa(f,d)?rv(f,Fr(),a,_.transform,u,_):_.transform(u)}function OD(o,a,u,d){const f=o+20,_=be(),b=Kr(_,f);return aa(_,f)?IC(_,Fr(),a,b.transform,u,d,b):b.transform(u,d)}function aa(o,a){return o[1].data[a].pure}function rc(o){return a=>{setTimeout(o,void 0,a)}}const la=class PD extends l.xQ{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,d){var f,_,b;let C=a,D=u||(()=>null),M=d;if(a&&"object"==typeof a){const V=a;C=null===(f=V.next)||void 0===f?void 0:f.bind(V),D=null===(_=V.error)||void 0===_?void 0:_.bind(V),M=null===(b=V.complete)||void 0===b?void 0:b.bind(V)}this.__isAsync&&(D=rc(D),C&&(C=rc(C)),M&&(M=rc(M)));const k=super.subscribe({next:C,error:D,complete:M});return a instanceof X.w&&a.add(k),k}};function zf(){return this._results[au()]()}class Xg{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=au(),d=Xg.prototype;d[u]||(d[u]=zf)}get changes(){return this._changes||(this._changes=new la)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const d=this;d.dirty=!1;const f=tn(a);(this._changesDetected=!function Fs(o,a,u){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],_=a[d];if(u&&(f=u(f),_=u(_)),_!==f)return!1}return!0}(d._results,f,u))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let qf=(()=>{class o{}return o.__NG_ELEMENT_ID__=lx,o})();const em=qf,ax=class extends em{constructor(a,u,d){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(a){const u=this._declarationTContainer.tViews,d=Gl(this._declarationLView,u,a,16,null,u.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(u)),Td(u,d,a),new oa(d)}};function lx(){return ur(En(),be())}function ur(o,a){return 4&o.type?new ax(a,o,Qd(o,a)):null}let nh=(()=>{class o{}return o.__NG_ELEMENT_ID__=iv,o})();function iv(){return RC(En(),be())}const cx=nh,sv=class extends cx{constructor(a,u,d){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=d}get element(){return Qd(this._hostTNode,this._hostLView)}get injector(){return new ys(this._hostTNode,this._hostLView)}get parentInjector(){const a=Lr(this._hostTNode,this._hostLView);if(Jr(a)){const u=_s(a,this._hostLView),d=fo(a);return new ys(u[1].data[d+8],u)}return new ys(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=FD(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,d){const f=a.createEmbeddedView(u||{});return this.insert(f,d),f}createComponent(a,u,d,f,_){const b=a&&!function Ma(o){return"function"==typeof o}(a);let C;if(b)C=u;else{const V=u||{};C=V.index,d=V.injector,f=V.projectableNodes,_=V.ngModuleRef}const D=b?a:new wC(qt(a)),M=d||this.parentInjector;if(!_&&null==D.ngModule){const q=(b?M:this.parentInjector).get(Hf,null);q&&(_=q)}const k=D.create(M,f,void 0,_);return this.insert(k.hostView,C),k}insert(a,u){const d=a._lView,f=d[1];if(function fl(o){return Yr(o[3])}(d)){const k=this.indexOf(a);if(-1!==k)this.detach(k);else{const V=d[3],q=new sv(V,V[6],V[3]);q.detach(q.indexOf(a))}}const _=this._adjustIndex(u),b=this._lContainer;!function w(o,a,u,d){const f=10+d,_=u.length;d>0&&(u[f-1][4]=a),d<_-10?(a[4]=u[f],hi(u,10+d,a)):(u.push(a),a[4]=null),a[3]=u;const b=a[17];null!==b&&u!==b&&function I(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(b,a);const C=a[19];null!==C&&C.insertView(o),a[2]|=128}(f,d,b,_);const C=Bl(_,b),D=d[11],M=ea(D,b[7]);return null!==M&&function v(o,a,u,d,f,_){d[0]=f,d[6]=a,pg(o,d,u,1,f,_)}(f,b[6],D,d,M,C),a.attachToViewContainerRef(),hi(ov(b),_,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=FD(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),d=z(this._lContainer,u);d&&($o(ov(this._lContainer),u),oe(d[1],d))}detach(a){const u=this._adjustIndex(a,-1),d=z(this._lContainer,u);return d&&null!=$o(ov(this._lContainer),u)?new oa(d):null}_adjustIndex(a,u=0){return null==a?this.length+u:a}};function FD(o){return o[8]}function ov(o){return o[8]||(o[8]=[])}function RC(o,a){let u;const d=a[o.index];if(Yr(d))u=d;else{let f;if(8&o.type)f=Gt(d);else{const _=a[11];f=_.createComment("");const b=li(o,a);Ut(_,ea(_,b),f,function Vl(o,a){return fn(o)?o.nextSibling(a):a.nextSibling}(_,b),!1)}a[o.index]=u=tM(d,a,f,o),wg(a,u)}return new sv(u,o,a)}class av{constructor(a){this.queryList=a,this.matches=null}clone(){return new av(this.queryList)}setDirty(){this.queryList.setDirty()}}class lv{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const d=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let _=0;_<d;_++){const b=u.getByIndex(_);f.push(this.queries[b.indexInDeclarationView].clone())}return new lv(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==cv(a,u).matches&&this.queries[u].setDirty()}}class Wf{constructor(a,u,d=null){this.predicate=a,this.flags=u,this.read=d}}class nm{constructor(a=[]){this.queries=a}elementStart(a,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let d=0;d<this.length;d++){const f=null!==u?u.length:0,_=this.getByIndex(d).embeddedTView(a,f);_&&(_.indexInDeclarationView=d,null!==u?u.push(_):u=[_])}return null!==u?new nm(u):null}template(a,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class kC{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new kC(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const _=d[f];this.matchTNodeWithReadOption(a,u,jr(u,_)),this.matchTNodeWithReadOption(a,u,Pc(u,a,_,!1,!1))}else d===qf?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,Pc(u,a,d,!1,!1))}matchTNodeWithReadOption(a,u,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Dn||f===nh||f===qf&&4&u.type)this.addMatch(u.index,-2);else{const _=Pc(u,a,f,!1,!1);null!==_&&this.addMatch(u.index,_)}else this.addMatch(u.index,d)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function jr(o,a){const u=o.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===a)return u[d+1];return null}function LD(o,a,u,d){return-1===u?function sn(o,a){return 11&o.type?Qd(o,a):4&o.type?ur(o,a):null}(a,o):-2===u?function VD(o,a,u){return u===Dn?Qd(a,o):u===qf?ur(a,o):u===nh?RC(a,o):void 0}(o,a,d):Ns(o,o[1],u,a)}function ic(o,a,u,d){const f=a[19].queries[d];if(null===f.matches){const _=o.data,b=u.matches,C=[];for(let D=0;D<b.length;D+=2){const M=b[D];C.push(M<0?null:LD(a,_[M],b[D+1],u.metadata.read))}f.matches=C}return f.matches}function dr(o,a,u,d){const f=o.queries.getByIndex(u),_=f.matches;if(null!==_){const b=ic(o,a,f,u);for(let C=0;C<_.length;C+=2){const D=_[C];if(D>0)d.push(b[C/2]);else{const M=_[C+1],k=a[-D];for(let V=10;V<k.length;V++){const q=k[V];q[17]===q[3]&&dr(q[1],q,M,d)}if(null!==k[9]){const V=k[9];for(let q=0;q<V.length;q++){const ee=V[q];dr(ee[1],ee,M,d)}}}}}return d}function rm(o){const a=be(),u=xt(),d=Lp();wl(d+1);const f=cv(u,d);if(o.dirty&&gs(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const _=f.crossesNgTemplate?dr(u,a,d,[]):ic(u,a,f,d);o.reset(_,Xy),o.notifyOnChanges()}return!0}return!1}function yi(o,a,u){const d=xt();d.firstCreatePass&&(js(d,new Wf(o,a,u),-1),2==(2&a)&&(d.staticViewQueries=!0)),BD(d,be(),a)}function Gn(o,a,u,d){const f=xt();if(f.firstCreatePass){const _=En();js(f,new Wf(a,u,d),_.index),function dx(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}BD(f,be(),u)}function OC(){return function Yf(o,a){return o[19].queries[a].queryList}(be(),Lp())}function BD(o,a,u){const d=new Xg(4==(4&u));X0(o,a,d,d.destroy),null===a[19]&&(a[19]=new lv),a[19].queries.push(new av(d))}function js(o,a,u){null===o.queries&&(o.queries=new nm),o.queries.track(new kC(a,u))}function cv(o,a){return o.queries.getByIndex(a)}function ih(...o){}const KD=new Bt("Application Initializer");let qC=(()=>{class o{constructor(u){this.appInits=u,this.resolve=ih,this.reject=ih,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const _=this.appInits[f]();if(Vd(_))u.push(_);else if(Fw(_)){const b=new Promise((C,D)=>{_.subscribe({complete:C,error:D})});u.push(b)}}Promise.all(u).then(()=>{d()}).catch(f=>{this.reject(f)}),0===u.length&&d(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(at(KD,8))},o.\u0275prov=bn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const ZD=new Bt("AppId",{providedIn:"root",factory:function QD(){return`${WC()}${WC()}${WC()}`}});function WC(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const JD=new Bt("Platform Initializer"),XD=new Bt("Platform ID"),eT=new Bt("appBootstrapListener");let tT=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=bn({token:o,factory:o.\u0275fac}),o})();const YC=new Bt("LocaleId",{providedIn:"root",factory:()=>Uc(YC,We.Optional|We.SkipSelf)||function Ex(){return"undefined"!=typeof $localize&&$localize.locale||Bg}()}),Sx=new Bt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class nT{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let Tx=(()=>{class o{compileModuleSync(u){return new _u(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),_=vo(Cn(u).declarations).reduce((b,C)=>{const D=qt(C);return D&&b.push(new wC(D)),b},[]);return new nT(d,_)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=bn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const he=(()=>Promise.resolve(0))();function ep(o){"undefined"==typeof Zone?he.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class ua{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new la(!1),this.onMicrotaskEmpty=new la(!1),this.onStable=new la(!1),this.onError=new la(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&u,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function ca(){let o=rt.requestAnimationFrame,a=rt.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function sh(o){const a=()=>{!function Ax(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(rt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,fv(o),o.isCheckStableRunning=!0,oc(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),fv(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,f,_,b,C)=>{try{return pv(o),u.invokeTask(f,_,b,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||o.shouldCoalesceRunChangeDetection)&&a(),KC(o)}},onInvoke:(u,d,f,_,b,C,D)=>{try{return pv(o),u.invoke(f,_,b,C,D)}finally{o.shouldCoalesceRunChangeDetection&&a(),KC(o)}},onHasTask:(u,d,f,_)=>{u.hasTask(f,_),d===f&&("microTask"==_.change?(o._hasPendingMicrotasks=_.microTask,fv(o),oc(o)):"macroTask"==_.change&&(o.hasPendingMacrotasks=_.macroTask))},onHandleError:(u,d,f,_)=>(u.handleError(f,_),o.runOutsideAngular(()=>o.onError.emit(_)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ua.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ua.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,u,d){return this._inner.run(a,u,d)}runTask(a,u,d,f){const _=this._inner,b=_.scheduleEventTask("NgZoneEvent: "+f,a,um,ih,ih);try{return _.runTask(b,u,d)}finally{_.cancelTask(b)}}runGuarded(a,u,d){return this._inner.runGuarded(a,u,d)}runOutsideAngular(a){return this._outer.run(a)}}const um={};function oc(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function fv(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function pv(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function KC(o){o._nesting--,oc(o)}class vi{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new la,this.onMicrotaskEmpty=new la,this.onStable=new la,this.onError=new la}run(a,u,d){return a.apply(u,d)}runGuarded(a,u,d){return a.apply(u,d)}runOutsideAngular(a){return a()}runTask(a,u,d,f){return a.apply(u,d)}}let gv=(()=>{class o{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ua.assertNotInAngularZone(),ep(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ep(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,f){let _=-1;d&&d>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==_),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:_,updateCb:f})}whenStable(u,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,d,f){return[]}}return o.\u0275fac=function(u){return new(u||o)(at(ua))},o.\u0275prov=bn({token:o,factory:o.\u0275fac}),o})(),mv=(()=>{class o{constructor(){this._applications=new Map,_v.addToWindow(this)}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return _v.findTestabilityInTree(this,u,d)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=bn({token:o,factory:o.\u0275fac}),o})();class ZC{addToWindow(a){}findTestabilityInTree(a,u,d){return null}}function yu(o){_v=o}let da,_v=new ZC;const vu=new Bt("AllowMultipleToken");class tp{constructor(a,u){this.name=a,this.token=u}}function JC(o,a,u=[]){const d=`Platform: ${a}`,f=new Bt(d);return(_=[])=>{let b=eE();if(!b||b.injector.get(vu,!1))if(o)o(u.concat(_).concat({provide:f,useValue:!0}));else{const C=u.concat(_).concat({provide:f,useValue:!0},{provide:sw,useValue:"platform"});!function dm(o){if(da&&!da.destroyed&&!da.injector.get(vu,!1))throw new _e(400,"");da=o.get(oT);const a=o.get(JD,null);a&&a.forEach(u=>u())}(ki.create({providers:C,name:d}))}return function XC(o){const a=eE();if(!a)throw new _e(401,"");return a}()}}function eE(){return da&&!da.destroyed?da:null}let oT=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const C=function aT(o,a){let u;return u="noop"===o?new vi:("zone.js"===o?void 0:o)||new ua({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),u}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),D=[{provide:ua,useValue:C}];return C.run(()=>{const M=ki.create({providers:D,parent:this.injector,name:u.moduleType.name}),k=u.create(M),V=k.injector.get(nu,null);if(!V)throw new _e(402,"");return C.runOutsideAngular(()=>{const q=C.onError.subscribe({next:ee=>{V.handleError(ee)}});k.onDestroy(()=>{bu(this._modules,k),q.unsubscribe()})}),function lT(o,a,u){try{const d=u();return Vd(d)?d.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(V,C,()=>{const q=k.injector.get(qC);return q.runInitializers(),q.donePromise.then(()=>(function $y(o){fr(o,"Expected localeId to be defined"),"string"==typeof o&&(lC=o.toLowerCase().replace(/_/g,"-"))}(k.injector.get(YC,Bg)||Bg),this._moduleDoBootstrap(k),k))})})}bootstrapModule(u,d=[]){const f=yv({},d);return function iT(o,a,u){const d=new _u(u);return Promise.resolve(d)}(0,0,u).then(_=>this.bootstrapModuleFactory(_,f))}_moduleDoBootstrap(u){const d=u.injector.get(ah);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new _e(403,"");u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(at(ki))},o.\u0275prov=bn({token:o,factory:o.\u0275fac}),o})();function yv(o,a){return Array.isArray(a)?a.reduce(yv,o):Object.assign(Object.assign({},o),a)}let ah=(()=>{class o{constructor(u,d,f,_,b){this._zone=u,this._injector=d,this._exceptionHandler=f,this._componentFactoryResolver=_,this._initStatus=b,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new F.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),D=new F.y(M=>{let k;this._zone.runOutsideAngular(()=>{k=this._zone.onStable.subscribe(()=>{ua.assertNotInAngularZone(),ep(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{ua.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{k.unsubscribe(),V.unsubscribe()}});this.isStable=(0,ae.T)(C,D.pipe((0,re.B)()))}bootstrap(u,d){if(!this._initStatus.done)throw new _e(405,"");let f;f=u instanceof vC?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(f.componentType);const _=function oh(o){return o.isBoundToModule}(f)?void 0:this._injector.get(Hf),C=f.create(ki.NULL,[],d||f.selector,_),D=C.location.nativeElement,M=C.injector.get(gv,null),k=M&&C.injector.get(mv);return M&&k&&k.registerApplication(D,M),C.onDestroy(()=>{this.detachView(C.hostView),bu(this.components,C),k&&k.unregisterApplication(D)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new _e(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;bu(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(eT,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(u){return new(u||o)(at(ua),at(ki),at(nu),at(qg),at(qC))},o.\u0275prov=bn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function bu(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}let dT=!0,hT=!1;function Mx(){return hT=!0,dT}function vv(){if(hT)throw new Error("Cannot enable prod mode after platform setup.");dT=!1}let xx=(()=>{class o{}return o.__NG_ELEMENT_ID__=Rx,o})();function Rx(o){return function nE(o,a,u){if(Nn(o)&&!u){const d=Si(o.index,a);return new oa(d,d)}return 47&o.type?new oa(a[16],a):null}(En(),be(),16==(16&o))}class aE{constructor(){}supports(a){return Dg(a)}create(a){return new Px(a)}}const Nx=(o,a)=>a;class Px{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Nx}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,d=this._removalsHead,f=0,_=null;for(;u||d;){const b=!d||u&&u.currentIndex<lE(d,f,_)?u:d,C=lE(b,f,_),D=b.currentIndex;if(b===d)f--,d=d._nextRemoved;else if(u=u._next,null==b.previousIndex)f++;else{_||(_=[]);const M=C-f,k=D-f;if(M!=k){for(let q=0;q<M;q++){const ee=q<_.length?_[q]:_[q]=0,ge=ee+q;k<=ge&&ge<M&&(_[q]=ee+1)}_[b.previousIndex]=k-M}}C!==D&&a(b,C,D)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!Dg(a))throw new _e(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,_,b,u=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)_=a[C],b=this._trackByFn(C,_),null!==u&&Object.is(u.trackById,b)?(d&&(u=this._verifyReinsertion(u,_,b,C)),Object.is(u.item,_)||this._addIdentityChange(u,_)):(u=this._mismatch(u,_,b,C),d=!0),u=u._next}else f=0,function EM(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[au()]();let d;for(;!(d=u.next()).done;)a(d.value)}}(a,C=>{b=this._trackByFn(f,C),null!==u&&Object.is(u.trackById,b)?(d&&(u=this._verifyReinsertion(u,C,b,f)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,b,f),d=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,d,f){let _;return null===a?_=this._itTail:(_=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,_,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,_,f)):a=this._addAfter(new Fx(u,d),_,f),a}_verifyReinsertion(a,u,d,f){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==_?a=this._reinsertAfter(_,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,_=a._nextRemoved;return null===f?this._removalsHead=_:f._nextRemoved=_,null===_?this._removalsTail=f:_._prevRemoved=f,this._insertAfter(a,u,d),this._addToMoves(a,d),a}_moveAfter(a,u,d){return this._unlink(a),this._insertAfter(a,u,d),this._addToMoves(a,d),a}_addAfter(a,u,d){return this._insertAfter(a,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,d){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new pm),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,d=a._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new pm),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Fx{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Lx{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const u=a._prevDup,d=a._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class pm{constructor(){this.map=new Map}put(a){const u=a.trackById;let d=this.map.get(u);d||(d=new Lx,this.map.set(u,d)),d.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lE(o,a,u){const d=o.previousIndex;if(null===d)return d;let f=0;return u&&d<u.length&&(f=u[d]),d+a+f}class mT{constructor(){}supports(a){return a instanceof Map||mw(a)}create(){return new Vx}}class Vx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||mw(a)))throw new _e(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const _=this._getOrCreateRecordForKey(f,d);u=this._insertBeforeOrAppend(u,_)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const d=a._prev;return u._next=a,u._prev=d,a._prev=u,d&&(d._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const _=f._prev,b=f._next;return _&&(_._next=b),b&&(b._prev=_),f._next=null,f._prev=null,f}const d=new _T(a);return this._records.set(a,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(d=>u(a[d],d))}}class _T{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Cu(){return new uh([new aE])}let uh=(()=>{class o{constructor(u){this.factories=u}static create(u,d){if(null!=d){const f=d.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:d=>o.create(u,d||Cu()),deps:[[o,new ka,new jc]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(null!=d)return d;throw new _e(901,"")}}return o.\u0275prov=bn({token:o,providedIn:"root",factory:Cu}),o})();function cE(){return new uE([new mT])}let uE=(()=>{class o{constructor(u){this.factories=u}static create(u,d){if(d){const f=d.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:d=>o.create(u,d||cE()),deps:[[o,new ka,new jc]]}}find(u){const d=this.factories.find(_=>_.supports(u));if(d)return d;throw new _e(901,"")}}return o.\u0275prov=bn({token:o,providedIn:"root",factory:cE}),o})();const fE=JC(null,"core",[{provide:XD,useValue:"unknown"},{provide:oT,deps:[ki]},{provide:mv,deps:[]},{provide:tT,deps:[]}]);let Ux=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(at(ah))},o.\u0275mod=ie({type:o}),o.\u0275inj=ts({}),o})()},3942:(et,we,B)=>{B.d(we,{Z:()=>_e});var l=B(2090),X=B(4859),F=B(9681),ae=B(1877);class re{constructor(ye,ve){this._delegate=ye,this.firebase=ve,(0,F._addComponent)(ye,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(ye,ve=F._DEFAULT_ENTRY_NAME){var He;this._delegate.checkDestroyed();const it=this._delegate.container.getProvider(ye);return!it.isInitialized()&&"EXPLICIT"===(null===(He=it.getComponent())||void 0===He?void 0:He.instantiationMode)&&it.initialize(),it.getImmediate({identifier:ve})}_removeServiceInstance(ye,ve=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(ve)}_addComponent(ye){(0,F._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,F._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ne=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),L=function Q(){const me=function te(me){const ye={},ve={__esModule:!0,initializeApp:function kt(St,Vn={}){const ht=F.initializeApp(St,Vn);if((0,l.r3)(ye,ht.name))return ye[ht.name];const zt=new me(ht,ve);return ye[ht.name]=zt,zt},app:it,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Ot(St){const Vn=St.name,ht=Vn.replace("-compat","");if(F._registerComponent(St)&&"PUBLIC"===St.type){const zt=(Xt=it())=>{if("function"!=typeof Xt[ht])throw ne.create("invalid-app-argument",{appName:Vn});return Xt[ht]()};void 0!==St.serviceProps&&(0,l.ZB)(zt,St.serviceProps),ve[ht]=zt,me.prototype[ht]=function(...Xt){return this._getService.bind(this,Vn).apply(this,St.multipleInstances?Xt:[])}}return"PUBLIC"===St.type?ve[ht]:null},removeApp:function He(St){delete ye[St]},useAsService:function wr(St,Vn){return"serverAuth"===Vn?null:Vn},modularAPIs:F}};function it(St){if(!(0,l.r3)(ye,St=St||F._DEFAULT_ENTRY_NAME))throw ne.create("no-app",{appName:St});return ye[St]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function hn(){return Object.keys(ye).map(St=>ye[St])}}),it.App=me,ve}(re);return me.INTERNAL=Object.assign(Object.assign({},me.INTERNAL),{createFirebaseNamespace:Q,extendNamespace:function ye(ve){(0,l.ZB)(me,ve)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),me}(),$=new ae.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const me=self.firebase.SDK_VERSION;me&&me.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const _e=L;!function fe(me){(0,F.registerVersion)("@firebase/app-compat","0.1.21",me)}()},9681:(et,we,B)=>{B.r(we),B.d(we,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>xo,_DEFAULT_ENTRY_NAME:()=>Js,_addComponent:()=>As,_addOrOverwriteComponent:()=>Lu,_apps:()=>Dt,_clearComponents:()=>rr,_components:()=>kr,_getProvider:()=>Ms,_registerComponent:()=>bn,_removeServiceInstance:()=>ts,deleteApp:()=>Or,getApp:()=>$r,getApps:()=>Te,initializeApp:()=>Ci,onLog:()=>ln,registerVersion:()=>Vi,setLogLevel:()=>Nr});var l=B(5861),X=B(4859),F=B(1877),ae=B(2090);class re{constructor(Ee){this.container=Ee}getPlatformInfoString(){return this.container.getProviders().map($e=>{if(function Z(Ge){const Ee=Ge.getComponent();return"VERSION"===(null==Ee?void 0:Ee.type)}($e)){const ut=$e.getImmediate();return`${ut.library}/${ut.version}`}return null}).filter($e=>$e).join(" ")}}const ne="@firebase/app",Q=new F.Yd("@firebase/app"),Js="[DEFAULT]",fr={[ne]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Dt=new Map,kr=new Map;function As(Ge,Ee){try{Ge.container.addComponent(Ee)}catch($e){Q.debug(`Component ${Ee.name} failed to register with FirebaseApp ${Ge.name}`,$e)}}function Lu(Ge,Ee){Ge.container.addOrOverwriteComponent(Ee)}function bn(Ge){const Ee=Ge.name;if(kr.has(Ee))return Q.debug(`There were multiple attempts to register component ${Ee}.`),!1;kr.set(Ee,Ge);for(const $e of Dt.values())As($e,Ge);return!0}function Ms(Ge,Ee){const $e=Ge.container.getProvider("heartbeat").getImmediate({optional:!0});return $e&&$e.triggerHeartbeat(),Ge.container.getProvider(Ee)}function ts(Ge,Ee,$e=Js){Ms(Ge,Ee).clearInstance($e)}function rr(){kr.clear()}const an=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Bn{constructor(Ee,$e,ut){this._isDeleted=!1,this._options=Object.assign({},Ee),this._config=Object.assign({},$e),this._name=$e.name,this._automaticDataCollectionEnabled=$e.automaticDataCollectionEnabled,this._container=ut,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ee){this._isDeleted=Ee}checkDestroyed(){if(this.isDeleted)throw an.create("app-deleted",{appName:this._name})}}const xo="9.6.10";function Ci(Ge,Ee={}){"object"!=typeof Ee&&(Ee={name:Ee});const $e=Object.assign({name:Js,automaticDataCollectionEnabled:!1},Ee),ut=$e.name;if("string"!=typeof ut||!ut)throw an.create("bad-app-name",{appName:String(ut)});const jt=Dt.get(ut);if(jt){if((0,ae.vZ)(Ge,jt.options)&&(0,ae.vZ)($e,jt.config))return jt;throw an.create("duplicate-app",{appName:ut})}const en=new X.H0(ut);for(const G of kr.values())en.addComponent(G);const W=new Bn(Ge,$e,en);return Dt.set(ut,W),W}function $r(Ge=Js){const Ee=Dt.get(Ge);if(!Ee)throw an.create("no-app",{appName:Ge});return Ee}function Te(){return Array.from(Dt.values())}function Or(Ge){return We.apply(this,arguments)}function We(){return(We=(0,l.Z)(function*(Ge){const Ee=Ge.name;Dt.has(Ee)&&(Dt.delete(Ee),yield Promise.all(Ge.container.getProviders().map($e=>$e.delete())),Ge.isDeleted=!0)})).apply(this,arguments)}function Vi(Ge,Ee,$e){var ut;let jt=null!==(ut=fr[Ge])&&void 0!==ut?ut:Ge;$e&&(jt+=`-${$e}`);const en=jt.match(/\s|\//),W=Ee.match(/\s|\//);if(en||W){const G=[`Unable to register library "${jt}" with version "${Ee}":`];return en&&G.push(`library name "${jt}" contains illegal characters (whitespace or "/")`),en&&W&&G.push("and"),W&&G.push(`version name "${Ee}" contains illegal characters (whitespace or "/")`),void Q.warn(G.join(" "))}bn(new X.wA(`${jt}-version`,()=>({library:jt,version:Ee}),"VERSION"))}function ln(Ge,Ee){if(null!==Ge&&"function"!=typeof Ge)throw an.create("invalid-log-argument");(0,F.Am)(Ge,Ee)}function Nr(Ge){(0,F.Ub)(Ge)}const kn="firebase-heartbeat-store";let ir=null;function xs(){return ir||(ir=(0,ae.X3)("firebase-heartbeat-database",1,(Ge,Ee)=>{0===Ee&&Ge.createObjectStore(kn)}).catch(Ge=>{throw an.create("storage-open",{originalErrorMessage:Ge.message})})),ir}function Nt(){return(Nt=(0,l.Z)(function*(Ge){try{return(yield xs()).transaction(kn).objectStore(kn).get(Xs(Ge))}catch(Ee){throw an.create("storage-get",{originalErrorMessage:Ee.message})}})).apply(this,arguments)}function Xe(Ge,Ee){return gt.apply(this,arguments)}function gt(){return(gt=(0,l.Z)(function*(Ge,Ee){try{const ut=(yield xs()).transaction(kn,"readwrite");return yield ut.objectStore(kn).put(Ee,Xs(Ge)),ut.complete}catch($e){throw an.create("storage-set",{originalErrorMessage:$e.message})}})).apply(this,arguments)}function Xs(Ge){return`${Ge.name}!${Ge.options.appId}`}class In{constructor(Ee){this.container=Ee,this._heartbeatsCache=null;const $e=this.container.getProvider("app").getImmediate();this._storage=new st($e),this._heartbeatsCachePromise=this._storage.read().then(ut=>(this._heartbeatsCache=ut,ut))}triggerHeartbeat(){var Ee=this;return(0,l.Z)(function*(){const ut=Ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),jt=Pr();if(null===Ee._heartbeatsCache&&(Ee._heartbeatsCache=yield Ee._heartbeatsCachePromise),Ee._heartbeatsCache.lastSentHeartbeatDate!==jt&&!Ee._heartbeatsCache.heartbeats.some(en=>en.date===jt))return Ee._heartbeatsCache.heartbeats.push({date:jt,agent:ut}),Ee._heartbeatsCache.heartbeats=Ee._heartbeatsCache.heartbeats.filter(en=>{const W=new Date(en.date).valueOf();return Date.now()-W<=2592e6}),Ee._storage.overwrite(Ee._heartbeatsCache)})()}getHeartbeatsHeader(){var Ee=this;return(0,l.Z)(function*(){if(null===Ee._heartbeatsCache&&(yield Ee._heartbeatsCachePromise),null===Ee._heartbeatsCache||0===Ee._heartbeatsCache.heartbeats.length)return"";const $e=Pr(),{heartbeatsToSend:ut,unsentEntries:jt}=function Ei(Ge,Ee=1024){const $e=[];let ut=Ge.slice();for(const jt of Ge){const en=$e.find(W=>W.agent===jt.agent);if(en){if(en.dates.push(jt.date),On($e)>Ee){en.dates.pop();break}}else if($e.push({agent:jt.agent,dates:[jt.date]}),On($e)>Ee){$e.pop();break}ut=ut.slice(1)}return{heartbeatsToSend:$e,unsentEntries:ut}}(Ee._heartbeatsCache.heartbeats),en=(0,ae.L)(JSON.stringify({version:2,heartbeats:ut}));return Ee._heartbeatsCache.lastSentHeartbeatDate=$e,jt.length>0?(Ee._heartbeatsCache.heartbeats=jt,yield Ee._storage.overwrite(Ee._heartbeatsCache)):(Ee._heartbeatsCache.heartbeats=[],Ee._storage.overwrite(Ee._heartbeatsCache)),en})()}}function Pr(){return(new Date).toISOString().substring(0,10)}class st{constructor(Ee){this.app=Ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ee=this;return(0,l.Z)(function*(){return(yield Ee._canUseIndexedDBPromise)&&(yield function _c(Ge){return Nt.apply(this,arguments)}(Ee.app))||{heartbeats:[]}})()}overwrite(Ee){var $e=this;return(0,l.Z)(function*(){var ut;if(yield $e._canUseIndexedDBPromise){const en=yield $e.read();return Xe($e.app,{lastSentHeartbeatDate:null!==(ut=Ee.lastSentHeartbeatDate)&&void 0!==ut?ut:en.lastSentHeartbeatDate,heartbeats:Ee.heartbeats})}})()}add(Ee){var $e=this;return(0,l.Z)(function*(){var ut;if(yield $e._canUseIndexedDBPromise){const en=yield $e.read();return Xe($e.app,{lastSentHeartbeatDate:null!==(ut=Ee.lastSentHeartbeatDate)&&void 0!==ut?ut:en.lastSentHeartbeatDate,heartbeats:[...en.heartbeats,...Ee.heartbeats]})}})()}}function On(Ge){return(0,ae.L)(JSON.stringify({version:2,heartbeats:Ge})).length}!function Pt(Ge){bn(new X.wA("platform-logger",Ee=>new re(Ee),"PRIVATE")),bn(new X.wA("heartbeat",Ee=>new In(Ee),"PRIVATE")),Vi(ne,"0.7.20",Ge),Vi(ne,"0.7.20","esm2017"),Vi("fire-js","")}("")},4859:(et,we,B)=>{B.d(we,{H0:()=>te,wA:()=>F,zt:()=>re});var l=B(5861),X=B(2090);class F{constructor(L,$,H){this.name=L,this.instanceFactory=$,this.type=H,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(L){return this.instantiationMode=L,this}setMultipleInstances(L){return this.multipleInstances=L,this}setServiceProps(L){return this.serviceProps=L,this}setInstanceCreatedCallback(L){return this.onInstanceCreated=L,this}}const ae="[DEFAULT]";class re{constructor(L,$){this.name=L,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(L){const $=this.normalizeInstanceIdentifier(L);if(!this.instancesDeferred.has($)){const H=new X.BH;if(this.instancesDeferred.set($,H),this.isInitialized($)||this.shouldAutoInitialize())try{const se=this.getOrInitializeService({instanceIdentifier:$});se&&H.resolve(se)}catch(se){}}return this.instancesDeferred.get($).promise}getImmediate(L){var $;const H=this.normalizeInstanceIdentifier(null==L?void 0:L.identifier),se=null!==($=null==L?void 0:L.optional)&&void 0!==$&&$;if(!this.isInitialized(H)&&!this.shouldAutoInitialize()){if(se)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:H})}catch(fe){if(se)return null;throw fe}}getComponent(){return this.component}setComponent(L){if(L.name!==this.name)throw Error(`Mismatching Component ${L.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=L,this.shouldAutoInitialize()){if(function ne(Q){return"EAGER"===Q.instantiationMode}(L))try{this.getOrInitializeService({instanceIdentifier:ae})}catch($){}for(const[$,H]of this.instancesDeferred.entries()){const se=this.normalizeInstanceIdentifier($);try{const fe=this.getOrInitializeService({instanceIdentifier:se});H.resolve(fe)}catch(fe){}}}}clearInstance(L=ae){this.instancesDeferred.delete(L),this.instancesOptions.delete(L),this.instances.delete(L)}delete(){var L=this;return(0,l.Z)(function*(){const $=Array.from(L.instances.values());yield Promise.all([...$.filter(H=>"INTERNAL"in H).map(H=>H.INTERNAL.delete()),...$.filter(H=>"_delete"in H).map(H=>H._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(L=ae){return this.instances.has(L)}getOptions(L=ae){return this.instancesOptions.get(L)||{}}initialize(L={}){const{options:$={}}=L,H=this.normalizeInstanceIdentifier(L.instanceIdentifier);if(this.isInitialized(H))throw Error(`${this.name}(${H}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const se=this.getOrInitializeService({instanceIdentifier:H,options:$});for(const[fe,_e]of this.instancesDeferred.entries())H===this.normalizeInstanceIdentifier(fe)&&_e.resolve(se);return se}onInit(L,$){var H;const se=this.normalizeInstanceIdentifier($),fe=null!==(H=this.onInitCallbacks.get(se))&&void 0!==H?H:new Set;fe.add(L),this.onInitCallbacks.set(se,fe);const _e=this.instances.get(se);return _e&&L(_e,se),()=>{fe.delete(L)}}invokeOnInitCallbacks(L,$){const H=this.onInitCallbacks.get($);if(H)for(const se of H)try{se(L,$)}catch(fe){}}getOrInitializeService({instanceIdentifier:L,options:$={}}){let H=this.instances.get(L);if(!H&&this.component&&(H=this.component.instanceFactory(this.container,{instanceIdentifier:(Q=L,Q===ae?void 0:Q),options:$}),this.instances.set(L,H),this.instancesOptions.set(L,$),this.invokeOnInitCallbacks(H,L),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,L,H)}catch(se){}var Q;return H||null}normalizeInstanceIdentifier(L=ae){return this.component?this.component.multipleInstances?L:ae:L}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class te{constructor(L){this.name=L,this.providers=new Map}addComponent(L){const $=this.getProvider(L.name);if($.isComponentSet())throw new Error(`Component ${L.name} has already been registered with ${this.name}`);$.setComponent(L)}addOrOverwriteComponent(L){this.getProvider(L.name).isComponentSet()&&this.providers.delete(L.name),this.addComponent(L)}getProvider(L){if(this.providers.has(L))return this.providers.get(L);const $=new re(L,this);return this.providers.set(L,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(et,we,B)=>{B.d(we,{Am:()=>Q,Ub:()=>te,Yd:()=>ne,in:()=>X});const l=[];var X=(()=>{return(L=X||(X={}))[L.DEBUG=0]="DEBUG",L[L.VERBOSE=1]="VERBOSE",L[L.INFO=2]="INFO",L[L.WARN=3]="WARN",L[L.ERROR=4]="ERROR",L[L.SILENT=5]="SILENT",X;var L})();const F={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ae=X.INFO,re={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},Z=(L,$,...H)=>{if($<L.logLevel)return;const se=(new Date).toISOString(),fe=re[$];if(!fe)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[fe](`[${se}]  ${L.name}:`,...H)};class ne{constructor($){this.name=$,this._logLevel=ae,this._logHandler=Z,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in X))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?F[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...$),this._logHandler(this,X.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...$),this._logHandler(this,X.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,X.INFO,...$),this._logHandler(this,X.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,X.WARN,...$),this._logHandler(this,X.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...$),this._logHandler(this,X.ERROR,...$)}}function te(L){l.forEach($=>{$.setLogLevel(L)})}function Q(L,$){for(const H of l){let se=null;$&&$.level&&(se=F[$.level]),H.userLogHandler=null===L?null:(fe,_e,...me)=>{const ye=me.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch(He){return null}}).filter(ve=>ve).join(" ");_e>=(null!=se?se:fe.logLevel)&&L({level:X[_e].toLowerCase(),message:ye,args:me,type:fe.name})}}}},5861:(et,we,B)=>{function l(F,ae,re,Z,ne,te,Q){try{var L=F[te](Q),$=L.value}catch(H){return void re(H)}L.done?ae($):Promise.resolve($).then(Z,ne)}function X(F){return function(){var ae=this,re=arguments;return new Promise(function(Z,ne){var te=F.apply(ae,re);function Q($){l(te,Z,ne,Q,L,"next",$)}function L($){l(te,Z,ne,Q,L,"throw",$)}Q(void 0)})}}B.d(we,{Z:()=>X})}},et=>{et(et.s=2744)}]);